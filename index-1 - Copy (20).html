<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Character-by-Character Animated LaTeX</title><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" /><style>body{ font-family: "Courier New", Courier, monospace; background-color: #f8f8f8; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0} .container{ display: flex; font-size: 32px; gap: 2px} .latex-char{ display: inline-block; opacity: 0; animation-fill-mode: forwards} </style></head><body><div class="container" id="latex-container"></div><script>let formula, container, animations; try{ formula="\\(X_k=\\sum_{n=0}^{N-1} x_n \\cdot e^{-i \\frac{2\\pi}{N} k n}\\)"} catch (err){ console.error("Error defining formula:", err)} try{ container=document.getElementById("latex-container"); if (!container) throw new Error("Container element not found")} catch (err){ console.error("Error finding container:", err)} try{ animations=[ "animate__fadeIn", "animate__fadeInDown", "animate__fadeInUp", "animate__fadeInLeft", "animate__fadeInRight", "animate__bounceIn", "animate__zoomIn", "animate__slideInLeft", "animate__slideInRight" ]} catch (err){ console.error("Error defining animations array:", err)} const getRandomAnimation=()=>{ try{ const animation=animations[Math.floor(Math.random() * animations.length)]; if (!animation) throw new Error("Random animation selection failed"); return animation} catch (err){ console.error("Error in getRandomAnimation:", err); return "animate__fadeIn"; // Default fallback}}; try{ MathJax.typesetPromise([container]) .then(()=>{ try{ container.innerHTML=formula} catch (err){ console.error("Error setting container innerHTML:", err)} try{ const rendered=container.innerHTML.split(""); // Split into characters container.innerHTML=""; // Clear the container rendered.forEach((char, index)=>{ setTimeout(()=>{ try{ const span=document.createElement("span"); if (!span) throw new Error("Span creation failed"); try{ span.className=`latex-char animate__animated ${getRandomAnimation()}`} catch (err){ console.error("Error assigning className to span:", err)} try{ span.textContent=char.trim()==="" ? "\u00A0" : char} catch (err){ console.error("Error setting span text content:", err)} try{ container.appendChild(span)} catch (err){ console.error("Error appending span to container:", err)}} catch (err){ console.error(`Error processing character at index ${index}:`, err)}}, index * 150); // Delay for animation})} catch (err){ console.error("Error during rendering process:", err)}}) .catch((err)=>console.error("Error rendering LaTeX with MathJax:", err))} catch (err){ console.error("Error triggering MathJax typesetPromise:", err)} </script></body></html>const audioPlayer=document.getElementById("audioPlayer");
const canvas=document.getElementById("spectrogramCanvas");
const canvasCtx=canvas.getContext("2d"); // Create Audio Context with fallback for older browsers
const audioContext=new (window.AudioContext || window.webkitAudioContext)();
let sourceNode=null; try{ sourceNode=audioContext.createMediaElementSource(audioPlayer)} catch (error){ console.error("Error creating audio source:", error)} const analyser=audioContext.createAnalyser();
const gainNode=audioContext.createGain(); // Connect audio nodessourceNode.connect(analyser);sourceNode.connect(gainNode);gainNode.connect(audioContext.destination); // Set analyser parametersanalyser.fftSize=2048;const bufferLength=analyser.frequencyBinCount;const dataArray=new Uint8Array(bufferLength); // Function to draw the spectrogramfunction drawSpectrogram(){ requestAnimationFrame(drawSpectrogram); // Get frequency data analyser.getByteFrequencyData(dataArray); // Clear canvas for redrawing canvasCtx.fillStyle="rgb(255, 255, 255)"; canvasCtx.fillRect(0, 0, canvas.width, canvas.height); // Draw zero-axis dashed line const zeroLineY=canvas.height / 2 + 10; // Adjusted position canvasCtx.beginPath(); canvasCtx.setLineDash([5, 5]); // Dashed line canvasCtx.strokeStyle="#1E2337"; // Blood orange color canvasCtx.lineWidth=1; canvasCtx.moveTo(0, zeroLineY); canvasCtx.lineTo(canvas.width, zeroLineY); canvasCtx.stroke(); canvasCtx.setLineDash([]); // Reset dash style // Draw spectrogram bars const barWidth=(canvas.width / bufferLength) * 2.5; let x=0; for (let i=0; i < bufferLength; i++){ const barHeight=dataArray[i]; canvasCtx.fillStyle=`rgb(30, 35, 55)`; // Fire-like color canvasCtx.fillRect(x, canvas.height - barHeight / 2, barWidth + 2, barHeight / 2); x +=barWidth + 1}} // Event listeners for audio playeraudioPlayer.addEventListener("play", ()=>{ if (audioContext.state==="suspended"){ audioContext.resume().catch((err)=>console.error("Audio context resume failed:", err) )} drawSpectrogram()}); audioPlayer.addEventListener("pause", ()=>{ canvasCtx.clearRect(0, 0, canvas.width, canvas.height)}); // Handle file input for loading audiodocument.getElementById("fileInput").addEventListener("change", (event)=>{ const file=event.target.files[0]; if (file && file.type.startsWith("audio/")){ const objectURL=URL.createObjectURL(file); audioPlayer.src=objectURL; audioPlayer.load(); audioPlayer.play()} else{ alert("Please select a valid audio file.")}}); // Resize canvas dynamically for responsivenesswindow.addEventListener("resize", ()=>{ canvas.width=canvas.parentElement.offsetWidth; canvas.height=300; // Set a default height canvasCtx.clearRect(0, 0, canvas.width, canvas.height); // Clear on resize}); // Calculate Spectral Centroidfunction calculateSpectralCentroid(frequencies, magnitudes){ let weightedSum=0; let totalMagnitude=0; for (let i=0; i < frequencies.length; i++){ weightedSum +=frequencies[i] * magnitudes[i]; totalMagnitude +=magnitudes[i]} return totalMagnitude===0 ? 0 : (weightedSum / totalMagnitude).toFixed(2)} // Calculate RMS (Root Mean Square)function calculateRMS(samples){ const squaredSum=samples.reduce((sum, sample)=>sum + sample * sample, 0); return Math.sqrt(squaredSum / samples.length).toFixed(2)} // Calculate Peak Amplitudefunction calculatePeakAmplitude(samples){ return Math.max(...samples).toFixed(2)} // Calculate Zero-Crossing Ratefunction calculateZeroCrossingRate(signal){ let zeroCrossings=0; for (let i=1; i < signal.length; i++){ if (signal[i - 1] * signal[i] < 0){ zeroCrossings++}} return ((zeroCrossings / signal.length) * 100).toFixed(2)} // Detect Clippingfunction detectClipping(channelData){ const clippingThreshold=1.0; const clippingRegions=[]; for (let i=0; i < channelData.length; i++){ if (Math.abs(channelData[i]) >=clippingThreshold){ clippingRegions.push(i)}} return clippingRegions} // Display Calculated Metricsfunction displayMetrics(analyser, dataArray, audioContext){ analyser.getByteFrequencyData(dataArray); const frequencies=Array.from({ length: dataArray.length}, (_, i)=>i * (audioContext.sampleRate / analyser.fftSize)); const spectralCentroid=calculateSpectralCentroid(frequencies, dataArray); const rms=calculateRMS(dataArray); const peakAmplitude=calculatePeakAmplitude(dataArray); const zeroCrossingRate=calculateZeroCrossingRate(dataArray); console.log("Spectral Centroid:", spectralCentroid); console.log("RMS:", rms); console.log("Peak Amplitude:", peakAmplitude); console.log("Zero-Crossing Rate:", zeroCrossingRate)} // Periodically update metricsfunction startMetricUpdates(analyser, dataArray, audioContext, audioPlayer){ setInterval(()=>{ if (!audioPlayer.paused){ displayMetrics(analyser, dataArray, audioContext)}}, 1000); // Update every second}Calculate Spectral Centroidfunction calculateSpectralCentroid(frequencies, magnitudes){ let weightedSum=0; let totalMagnitude=0; for (let i=0; i < frequencies.length; i++){ weightedSum +=frequencies[i] * magnitudes[i]; totalMagnitude +=magnitudes[i]} return totalMagnitude===0 ? 0 : (weightedSum / totalMagnitude).toFixed(2)} // Calculate RMS (Root Mean Square)function calculateRMS(samples){ const squaredSum=samples.reduce((sum, sample)=>sum + sample * sample, 0); return Math.sqrt(squaredSum / samples.length).toFixed(2)} // Calculate Peak Amplitudefunction calculatePeakAmplitude(samples){ return Math.max(...samples).toFixed(2)} // Calculate Zero-Crossing Ratefunction calculateZeroCrossingRate(signal){ let zeroCrossings=0; for (let i=1; i < signal.length; i++){ if (signal[i - 1] * signal[i] < 0){ zeroCrossings++}} return ((zeroCrossings / signal.length) * 100).toFixed(2)} // Detect Clippingfunction detectClipping(channelData){ const clippingThreshold=1.0; const clippingRegions=[]; for (let i=0; i < channelData.length; i++){ if (Math.abs(channelData[i]) >=clippingThreshold){ clippingRegions.push(i)}} return clippingRegions} // Display Calculated Metricsfunction displayMetrics(analyser, dataArray, audioContext){ analyser.getByteFrequencyData(dataArray); const frequencies=Array.from({ length: dataArray.length}, (_, i)=>i * (audioContext.sampleRate / analyser.fftSize)); const spectralCentroid=calculateSpectralCentroid(frequencies, dataArray); const rms=calculateRMS(dataArray); const peakAmplitude=calculatePeakAmplitude(dataArray); const zeroCrossingRate=calculateZeroCrossingRate(dataArray); console.log("Spectral Centroid:", spectralCentroid); console.log("RMS:", rms); console.log("Peak Amplitude:", peakAmplitude); console.log("Zero-Crossing Rate:", zeroCrossingRate)} // Periodically update metricsfunction startMetricUpdates(analyser, dataArray, audioContext, audioPlayer){ setInterval(()=>{ if (!audioPlayer.paused){ displayMetrics(analyser, dataArray, audioContext)}}, 1000); // Update every second} // const audioPlayer=document.getElementById("audioPlayer");const canvas=document.getElementById("spectrogramCanvas");const canvasCtx=canvas.getContext("2d"); // const audioContext=new (window.AudioContext || window.webkitAudioContext)();let sourceNode=null; // try{sourceNode=audioContext.createMediaElementSource(audioPlayer)} catch (error){console.error("Error creating audio source:", error)} // const analyser=audioContext.createAnalyser();const gainNode=audioContext.createGain(); // sourceNode.connect(analyser);sourceNode.connect(gainNode);gainNode.connect(audioContext.destination); // analyser.fftSize=2048;const bufferLength=analyser.frequencyBinCount;const dataArray=new Uint8Array(bufferLength); // function drawSpectrogram(){requestAnimationFrame(drawSpectrogram); // // Get frequency dataanalyser.getByteFrequencyData(dataArray); // // Clear canvascanvasCtx.fillStyle="rgb(255, 255, 255)";canvasCtx.fillRect(0, 0, canvas.width, canvas.height); // // Draw zero-axis dashed linecanvasCtx.beginPath();canvasCtx.setLineDash([5, 5]);canvasCtx.strokeStyle="rgb(255, 69, 0)";canvasCtx.lineWidth=1;canvasCtx.moveTo(0, canvas.height / 2);canvasCtx.lineTo(canvas.width, canvas.height / 2);canvasCtx.stroke();canvasCtx.setLineDash([]); // // Draw spectrogram barsconst barWidth=(canvas.width / bufferLength) * 2.5;let x=0; // for (let i=0; i < bufferLength; i++){const barHeight=dataArray[i];canvasCtx.fillStyle=`rgb(${barHeight + 200}, ${barHeight + 100}, 0)`;canvasCtx.fillRect(x, canvas.height - barHeight / 2, barWidth, barHeight / 2);x +=barWidth + 1}} // audioPlayer.addEventListener("play", ()=>{if (audioContext.state==="suspended"){audioContext.resume().catch((err)=>// console.error("Audio context resume failed:", err))}drawSpectrogram()}); // audioPlayer.addEventListener("pause", ()=>{canvasCtx.clearRect(0, 0, canvas.width, canvas.height)}); // document.getElementById("fileInput").addEventListener("change", (event)=>{const file=event.target.files[0];if (file && file.type.startsWith("audio/")){const objectURL=URL.createObjectURL(file);audioPlayer.src=objectURL;audioPlayer.load();audioPlayer.play()} else{alert("Please select a valid audio file.")}}); // const audioPlayer=document.getElementById("audioPlayer");const audioContext=new (window.AudioContext || window.webkitAudioContext)();const sourceNode=audioContext.createMediaElementSource(audioPlayer);const analyser=audioContext.createAnalyser();const gainNode=audioContext.createGain();sourceNode.connect(analyser);sourceNode.connect(gainNode);gainNode.connect(audioContext.destination);analyser.fftSize=2048;const bufferLength=analyser.frequencyBinCount;const dataArray=new Uint8Array(bufferLength);const canvas=document.getElementById("spectrogramCanvas");const canvasCtx=canvas.getContext("2d"); // function drawSpectrogram(){
requestAnimationFrame(drawSpectrogram);
analyser.getByteFrequencyData(dataArray);
canvasCtx.fillStyle="rgb(255, 255, 255)";
canvasCtx.fillRect(0, 0, canvas.width, canvas.height);
const barWidth=(canvas.width / bufferLength) * 2.5;
let x=0;
for (let i=0; i < bufferLength; i++){
const barHeight=dataArray[i];
// Fire-like color adjustment
canvasCtx.fillStyle=`rgb(${barHeight + 200}, ${barHeight + 100}, 0)`;
canvasCtx.fillRect(x, canvas.height - barHeight / 2, barWidth, barHeight / 2);
x +=barWidth + 1}} // audioPlayer.addEventListener("play", ()=>{
if (audioContext.state==="suspended"){
audioContext.resume()}
drawSpectrogram()}); // audioPlayer.addEventListener("pause", ()=>{
canvasCtx.clearRect(0, 0, canvas.width, canvas.height)}); // document.getElementById("fileInput").addEventListener("change", (event)=>{
const file=event.target.files[0];
if (file && file.type.startsWith("audio/")){
const objectURL=URL.createObjectURL(file);
audioPlayer.src=objectURL;
audioPlayer.load();
audioPlayer.play()} else{
alert("Please select a valid audio file.")}}); // const audioPlayer=document.getElementById("audioPlayer");
const audioContext=new (window.AudioContext || window.webkitAudioContext)();
const sourceNode=audioContext.createMediaElementSource(audioPlayer);
const analyser=audioContext.createAnalyser();
const gainNode=audioContext.createGain();
sourceNode.connect(analyser);
sourceNode.connect(gainNode);
gainNode.connect(audioContext.destination);
analyser.fftSize=2048;
const bufferLength=analyser.frequencyBinCount;
const dataArray=new Uint8Array(bufferLength);
const canvas=document.getElementById("spectrogramCanvas");
const canvasCtx=canvas.getContext("2d"); // function drawSpectrogram(){
requestAnimationFrame(drawSpectrogram);
analyser.getByteFrequencyData(dataArray);
canvasCtx.fillStyle="rgb(255, 255, 255)";
canvasCtx.fillRect(0, 0, canvas.width, canvas.height);
const barWidth=(canvas.width / bufferLength) * 2.5;
let x=0;
for (let i=0; i < bufferLength; i++){
const barHeight=dataArray[i];
canvasCtx.fillStyle=`rgb(${barHeight + 100}, 10, 15)`;
canvasCtx.fillRect(x, canvas.height - barHeight / 2, barWidth, barHeight / 2);
x +=barWidth + 1}} // audioPlayer.addEventListener("play", ()=>{
if (audioContext.state==="suspended"){
audioContext.resume()}
drawSpectrogram()}); // audioPlayer.addEventListener("pause", ()=>{
canvasCtx.clearRect(0, 0, canvas.width, canvas.height)}); // document.getElementById("fileInput").addEventListener("change", (event)=>{
const file=event.target.files[0];
if (file && file.type.startsWith("audio/")){
const objectURL=URL.createObjectURL(file);
audioPlayer.src=objectURL;
audioPlayer.load();
audioPlayer.play()} else{
alert("Please select a valid audio file.")}});
// References to elements
const dragDropContainer=document.getElementById("dragDropContainer");
const fileInput=document.getElementById("fileInput");
const audioPlayer=document.getElementById("audioPlayer");
const spectrogramCanvas=document.getElementById("spectrogramCanvas");
const canvasCtx=spectrogramCanvas.getContext("2d"); // // Initialize Audio Context
const audioContext=new (window.AudioContext || window.webkitAudioContext)();
const sourceNode=audioContext.createMediaElementSource(audioPlayer);
const analyser=audioContext.createAnalyser();
const gainNode=audioContext.createGain();
sourceNode.connect(analyser);
sourceNode.connect(gainNode);
gainNode.connect(audioContext.destination);
analyser.fftSize=2048; // // Prepare spectrogram variables
const bufferLength=analyser.frequencyBinCount;
const dataArray=new Uint8Array(bufferLength); // // Drag-and-Drop functionality
dragDropContainer.addEventListener("dragover", (event)=>{
event.preventDefault();
dragDropContainer.classList.add("dragging")});
dragDropContainer.addEventListener("dragleave", ()=>{
dragDropContainer.classList.remove("dragging")});
dragDropContainer.addEventListener("drop", (event)=>{
event.preventDefault();
dragDropContainer.classList.remove("dragging");
const file=event.dataTransfer.files[0];
if (file && file.type.startsWith("audio/")){
loadAudio(file)} else{
alert("Please drop a valid audio file.")}}); // // File input functionality
fileInput.addEventListener("change", (event)=>{
const file=event.target.files[0];
if (file && file.type.startsWith("audio/")){
loadAudio(file)} else{
alert("Please select a valid audio file.")}}); // // Load the audio file into the player
function loadAudio(file){
const objectURL=URL.createObjectURL(file);
audioPlayer.src=objectURL;
audioPlayer.load();
audioPlayer.play()} // // Draw spectrogram
function drawSpectrogram(){
requestAnimationFrame(drawSpectrogram);
analyser.getByteFrequencyData(dataArray);
canvasCtx.fillStyle="rgb(0, 0, 0)";
canvasCtx.fillRect(0, 0, spectrogramCanvas.width, spectrogramCanvas.height); // const barWidth=(spectrogramCanvas.width / bufferLength) * 2.5;
let x=0; // for (let i=0; i < bufferLength; i++){
const barHeight=dataArray[i];
canvasCtx.fillStyle=`rgb(${barHeight + 100}, 50, 50)`;
canvasCtx.fillRect(
x,
spectrogramCanvas.height - barHeight / 2,
barWidth,
barHeight / 2
);
x +=barWidth + 1}} // // Event listeners for audio player
audioPlayer.addEventListener("play", ()=>{
if (audioContext.state==="suspended"){
audioContext.resume()}
drawSpectrogram()});
audioPlayer.addEventListener("pause", ()=>{
canvasCtx.clearRect(0, 0, spectrogramCanvas.width, spectrogramCanvas.height)}); // // Reference necessary elements
const audioPlayer=document.getElementById("audioPlayer");
const spectrogramCanvas=document.getElementById("spectrogramCanvas");
const canvasCtx=spectrogramCanvas.getContext("2d");
const dropArea=document.querySelector(".visualization-container"); // // Initialize Audio Context
const audioContext=new (window.AudioContext || window.webkitAudioContext)();
const sourceNode=audioContext.createMediaElementSource(audioPlayer);
const analyser=audioContext.createAnalyser();
const gainNode=audioContext.createGain();
sourceNode.connect(analyser);
sourceNode.connect(gainNode);
gainNode.connect(audioContext.destination);
analyser.fftSize=2048; // // Prepare for spectrogram
const bufferLength=analyser.frequencyBinCount;
const dataArray=new Uint8Array(bufferLength); // // Drag-and-Drop functionality
dropArea.addEventListener("dragover", (event)=>{
event.preventDefault();
dropArea.classList.add("dragging")});
dropArea.addEventListener("dragleave", ()=>{
dropArea.classList.remove("dragging")});
dropArea.addEventListener("drop", (event)=>{
event.preventDefault();
dropArea.classList.remove("dragging");
const file=event.dataTransfer.files[0];
if (file && file.type.startsWith("audio/")){
loadAudio(file)} else{
alert("Please drop a valid audio file.")}}); // // Load the audio file into the player
function loadAudio(file){
const objectURL=URL.createObjectURL(file);
audioPlayer.src=objectURL;
audioPlayer.load();
audioPlayer.play()} // // Draw spectrogram
function drawSpectrogram(){
requestAnimationFrame(drawSpectrogram);
analyser.getByteFrequencyData(dataArray);
canvasCtx.fillStyle="rgb(0, 0, 0)";
canvasCtx.fillRect(0, 0, spectrogramCanvas.width, spectrogramCanvas.height); // const barWidth=(spectrogramCanvas.width / bufferLength) * 2.5;
let x=0; // for (let i=0; i < bufferLength; i++){
const barHeight=dataArray[i];
canvasCtx.fillStyle=`rgb(${barHeight + 100}, 50, 50)`;
canvasCtx.fillRect(
x,
spectrogramCanvas.height - barHeight / 2,
barWidth,
barHeight / 2
);
x +=barWidth + 1}} // // Event listeners for play and pause
audioPlayer.addEventListener("play", ()=>{
if (audioContext.state==="suspended"){
audioContext.resume()}
drawSpectrogram()});
audioPlayer.addEventListener("pause", ()=>{
canvasCtx.clearRect(0, 0, spectrogramCanvas.width, spectrogramCanvas.height)}); // const audioPlayer=document.getElementById("audioPlayer");
const audioContext=new (window.AudioContext || window.webkitAudioContext)();
const sourceNode=audioContext.createMediaElementSource(audioPlayer);
const analyser=audioContext.createAnalyser();
const gainNode=audioContext.createGain();
sourceNode.connect(analyser);
sourceNode.connect(gainNode);
gainNode.connect(audioContext.destination);
analyser.fftSize=2048;
const bufferLength=analyser.frequencyBinCount;
const dataArray=new Uint8Array(bufferLength);
const canvas=document.getElementById("spectrogramCanvas");
const canvasCtx=canvas.getContext("2d");
function drawSpectrogram(){requestAnimationFrame(drawSpectrogram); analyser.getByteFrequencyData(dataArray); canvasCtx.fillStyle="rgb(0, 0, 0)"; canvasCtx.fillRect(0, 0, canvas.width, canvas.height); const barWidth=(canvas.width / bufferLength) * 2.5; let x=0; for (let i=0; i < bufferLength; i++){const barHeight=dataArray[i]; canvasCtx.fillStyle=`rgb(${barHeight + 100}, 50, 50)`; canvasCtx.fillRect(x, canvas.height - barHeight / 2, barWidth, barHeight / 2); x +=barWidth + 1}} // audioPlayer.addEventListener("play", ()=>{if (audioContext.state==="suspended"){audioContext.resume()} drawSpectrogram()});
audioPlayer.addEventListener("pause", ()=>{canvasCtx.clearRect(0, 0, canvas.width, canvas.height)});
function calculateSpectralCentroid(frequencies, magnitudes){let weightedSum=0; let totalMagnitude=0; for (let i=0; i < frequencies.length; i++){weightedSum +=frequencies[i] * magnitudes[i]; totalMagnitude +=magnitudes[i]} return totalMagnitude===0 ? 0 : (weightedSum / totalMagnitude).toFixed(2)}
function calculateRMS(samples){const squaredSum=samples.reduce((sum, sample)=>sum + sample * sample, 0); return Math.sqrt(squaredSum / samples.length).toFixed(2)}
function calculatePeakAmplitude(samples){return Math.max(...samples).toFixed(2)}
function calculateZeroCrossingRate(signal){let zeroCrossings=0; for (let i=1; i < signal.length; i++){if (signal[i - 1] * signal[i] < 0){zeroCrossings++}} return ((zeroCrossings / signal.length) * 100).toFixed(2)}
function detectClipping(channelData){const clippingThreshold=1.0; const clippingRegions=[]; for (let i=0; i < channelData.length; i++){if (Math.abs(channelData[i]) >=clippingThreshold){clippingRegions.push(i)}} return clippingRegions}
function extractMetadata(file){const metadata={}; metadata.artist="Example Artist"; metadata.album="Example Album"; metadata.genre="Example Genre"; return metadata}
function extractDuration(file){return new Promise((resolve, reject)=>{const audio=new Audio(); audio.src=URL.createObjectURL(file); audio.onloadedmetadata=function (){resolve(audio.duration)}; audio.onerror=function (){reject('Error extracting audio duration.')}})}
function extractBitrate(file){return 320}
function loadWaveform(file){wavesurfer.load(URL.createObjectURL(file))}
// function plotRMS(rmsValues, timeLabels){const ctx=document.getElementById('rmsChart').getContext('2d'); const rmsChart=new Chart(ctx,{type: 'line', data:{labels: timeLabels, datasets: [{label: 'RMS', data: rmsValues, borderColor: 'rgba(75, 192, 192, 1)', fill: false}]}})} .latex-hover-spectrogram-button{ position: relative; padding: 5px 10px; font-size: 12px; border-radius: 4px; color: #000; float: right; display: flex; bottom: 17px; font-variant-caps: titling-caps; background-color: #fff; right: 200px; border: #1e2337 1px solid; cursor: pointer; outline: none; transition: background-color 0.83s ease; z-index: 9999999; box-shadow: 0 0 0 #000} .latex-hover-spectrogram-button:hover{ background-color: #fff; color: #ffffff; border: #1e2337 1px solid; background-color: #8f8f8f; padding: 5px 10px; font-size: 12px; box-shadow: 0px 00px 1300px 1300px rgba(0, 0, 0, 0.9); animation: tooltipcanvas .5s forwards linear} @keyframes tooltipcanvas{ 0%{ box-shadow: 0 0 0 0 #000; transition: background-color 0.83s ease} 100%{ box-shadow: 0px 00px 1300px 1300px rgba(0, 0, 0, 0.9); transition: background-color 0.83s ease}} .latex-hover-spectrogram-tooltip{ position: absolute; top: 100%; left: 50%; transform: translateX(-50%); visibility: hidden; opacity: 0; background: #fff; color: #000; padding: 15px; border-radius: 5px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); max-width: 400px; font-size: 14px; z-index: 10; transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease} .latex-hover-spectrogram-button:hover .latex-hover-spectrogram-tooltip{ visibility: visible; opacity: 1; transform: translate(-50%, 10px)} .latex-hover-spectrogram-content{ text-align: right} .latex-hover-spectrogram-content p{ margin: 10px 10px} .latex-hover-spectrogram-content ul{ padding-left: 20px} .latex-hover-spectrogram-content ul li{ margin: 5px 0}<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Audio Spectrogram</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"><script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link rel="stylesheet" href=".css/latex-tooltip.css"><style>html, body{ height: 100%; margin: 0} .navbar{ z-index: 1; background-color: #1E2337; color: ivory !important; box-shadow: 5px 5px 5px 5px rgba(0, 0, 0, 0.6)} .main-content{ display: flex; height: calc(100vh - 56px)} .file-display, .analysis-display{ flex: 1; padding: 10px; overflow-y: auto; max-height: calc(100vh - 26px)} .drag-drop-container{ flex: 1; padding: 20px; margin: 10px; margin-top: 20px; border: 2px dashed #1E2337; color: white; border-radius: 10px} .audio-player{ width: 500px; display: flex; align-items: center; justify-content: flex-start} .audio-control{ width: 100%; height: 30px; border-radius: 5px; background-color: #1E2337; color: white} .audio-control::-webkit-media-controls-panel{ background-color: #1E2337; color: white} .audio-control::-webkit-media-controls-play-button, .audio-control::-webkit-media-controls-timeline{ filter: invert(100%)} .album-art{ width: 40px; height: 40px; border-radius: 5px; object-fit: cover; background-color: #ddd} .fl-table{ width: 100%; border-collapse: collapse; margin-top: 10px} .fl-table th, .fl-table td{ text-align: left; padding: 5px; font-size: 10px; border: 1px solid #ddd} .fl-table th{ background-color: #1E2337; font-variant-caps: titling-caps; font-size: 12px; color: white} .section-title{ margin-top: 10px; color: #1E2337} .fileInput{ display: none} .btn{ background-color: #F2A900; color: black; border: 2px solid #000} .btn:hover{ background-color: #1E2337; color: white; border: 2px solid #000} h3{ font-variant-caps: small-caps; font-style: italic; color: #F2A900; text-decoration: dashed; float: center} tr, td{ font-weight: 700 !important} .high{ background-color: lightblue; animation: colorChange 1s ease-in-out} .medium{ background-color: orange; animation: colorChange 1s ease-in-out} .low{ background-color: lightcoral; animation: colorChange 1s ease-in-out} @keyframes colorChange{ 0%{ background-color: white} 100%{ background-color: inherit}} .fl-table td{ transition: background-color 0.5s ease} .fl-table td:hover{ background-color: rgba(0, 0, 0, 0.1)} </style></head><body><nav class="navbar navbar-expand-lg"><div class="container-fluid"><a class="navbar-brand text-white" href="#">EDMC | Quality Metric Analysis</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button></div></nav><div class="main-content"><div class="file-display"><div class="" style="display: auto ;float: right;position: relative; align-items: center; gap: 20px;right:60px ; font-size: 24px;">\[ X_k=\sum_{n=0}^{N-1} x_n \cdot e^{-i \frac{2\pi}{N} k n} \] </div><div class="visualization-container"><h2>Spectral Analysis Visualization</h2><button class="latex-hover-spectrogram-button">Hover for Info <div class="latex-hover-spectrogram-tooltip"><div class="latex-hover-spectrogram-content"><p>The spectrum visualization is based on the <strong>Discrete Fourier Transform (DFT)</strong>, computed using the Fast Fourier Transform (FFT) algorithm:</p><p>\[ X_k=\sum_{n=0}^{N-1} x_n \cdot e^{-i \frac{2\pi}{N} k n} \] </p><p>Where:</p><ul><li>\(x_n\): Signal in the time domain (e.g., audio samples)</li><li>\(N\): Number of samples in the signal</li><li>\(k\): Index of the frequency bin (0 to \(N-1\))</li><li>\(e^{-i \frac{2\pi}{N} k n}\): Complex sinusoid for each bin</li></ul><p>The magnitude of \(X_k\) determines the intensity of each frequency bin:</p><p>\[ \text{Magnitude}=|X_k|=\sqrt{\text{Re}(X_k)^2 + \text{Im}(X_k)^2} \] </p></div></div></button><h3>Spectrogram</h3><canvas id="spectrogramCanvas" width="900" height="200"></canvas><p class="text-muted">Spectrogram: Frequency over time with energy intensity.</p><audio id="audioPlayer" controls class="audio-control"><img id="albumArt" src="https://via.placeholder.com/40" alt="Album Art" class="album-art me-2"><source id="audioSource" src="./dist/" type="audio/mpeg">Your browser does not support the audio element. </audio><h2 class="section-title">Audio File Properties (metadata tags)</h2><table class="fl-table" id="fileTable"><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>File Name</td><td id="fileName">-</td></tr><tr><td>File Size</td><td id="fileSize">-</td></tr><tr><td>Last Modified</td><td id="lastModified">-</td></tr><tr><td>MIME Type</td><td id="mimeType">-</td></tr><tr><td>Extension</td><td id="extension">-</td></tr><tr><td>Encoding</td><td id="encoding">-</td></tr><tr><td>Title</td><td id="title">-</td></tr><tr><td>Artist</td><td id="artist">-</td></tr><tr><td>Album</td><td id="album">-</td></tr><tr><td>Genre</td><td id="genre">-</td></tr><tr><td>Year</td><td id="year">-</td></tr><tr><td>Track Number</td><td id="track">-</td></tr><tr><td>Composer</td><td id="composer">-</td></tr><tr><td>Lyrics</td><td id="lyrics">-</td></tr><tr><td>Publisher</td><td id="publisher">-</td></tr><tr><td>Disc Number</td><td id="discNumber">-</td></tr><tr><td>Encoder</td><td id="encoder">-</td></tr><tr><td>Language</td><td id="language">-</td></tr><tr><td>Copyright</td><td id="copyright">-</td></tr><tr><td>ISRC</td><td id="isrc">-</td></tr><tr><td>BPM</td><td id="bpm">-</td></tr><tr><td>Album Artist</td><td id="albumArtist">-</td></tr><tr><td>Key</td><td id="key">-</td></tr><tr><td>Initial Key</td><td id="initialKey">-</td></tr><tr><td>Length</td><td id="length">-</td></tr><tr><td>Comments</td><td id="comments">-</td></tr></tbody></table><h3>Group 2: Spectral Features</h3><table class="fl-table" id="spectralFeaturesTable"><thead><tr><th>Feature</th><th>Value</th><th>Threshold</th></tr></thead><tbody><tr><td>Spectral Centroid</td><td id="spectralCentroid">-</td><td>High: &gt; 4000 Hz</td></tr><tr><td>Spectral Flatness</td><td id="spectralFlatness">-</td><td>High: 0.8–1.0</td></tr><tr><td>Spectral Bandwidth</td><td id="spectralBandwidth">-</td><td>Medium: 500–1500 Hz</td></tr><tr><td>Spectral Roll-off</td><td id="spectralRollOff">-</td><td>High: &gt; 4500 Hz</td></tr><tr><td>Spectral Contrast</td><td id="spectralContrast">-</td><td>High: &gt; 30 dB</td></tr><tr><td>Spectral Energy</td><td id="spectralEnergy">-</td><td>High: &gt; 500</td></tr><tr><td>Spectral Flux</td><td id="spectralFlux">-</td><td>High: &gt; 0.5</td></tr><tr><td>Spectral Entropy</td><td id="spectralEntropy">-</td><td>Low:&lt; 0.5</td></tr></tbody></table><h3>Group 3: Temporal Features</h3><table class="fl-table" id="temporalFeaturesTable"><thead><tr><th>Feature</th><th>Value</th><th>Threshold</th></tr></thead><tbody><tr><td>RMS</td><td id="RMS">-</td><td>Medium: 0.3–0.5</td></tr><tr><td>Peak Amplitude</td><td id="PeakAmplitude">-</td><td>High: &gt; 1.0</td></tr><tr><td>Zero Crossing Rate</td><td id="ZeroCrossingRate">-</td><td>Low:&lt; 10%</td></tr><tr><td>Low Energy Ratio</td><td id="LowEnergyRatio">-</td><td>Medium: 10–30%</td></tr><tr><td>Attack Time</td><td id="AttackTime">-</td><td>Short:&lt; 50 ms</td></tr><tr><td>Decay Time</td><td id="DecayTime">-</td><td>Medium: 50–200 ms</td></tr><tr><td>Sustain Level</td><td id="SustainLevel">-</td><td>High: &gt; 70%</td></tr><tr><td>Release Time</td><td id="ReleaseTime">-</td><td>Long: &gt; 200 ms</td></tr><tr><td>Temporal Centroid</td><td id="TemporalCentroid">-</td><td>Medium: ~50%</td></tr></tbody></table><h3>Group 5: Frequency Analysis</h3><table class="fl-table" id="frequencyAnalysisTable"><thead><tr><th>Metric</th><th>Value</th><th>Threshold</th></tr></thead><tbody><tr><td>Frequency Peaks</td><td id="FrequencyPeaks">-</td><td>Medium: 1–3 peaks</td></tr><tr><td>Octave Bands</td><td id="OctaveBands">-</td><td>Medium: 70–85 dB</td></tr><tr><td>Harmonic Ratio</td><td id="HarmonicRatio">-</td><td>High: &gt; 90%</td></tr><tr><td>Dominant Frequency</td><td id="DominantFrequency">-</td><td>High: Strong peak &gt; 1000 Hz</td></tr><tr><td>Fundamental Frequency</td><td id="FundamentalFrequency">-</td><td>High: &gt; 300 Hz</td></tr><tr><td>Harmonic Distortion</td><td id="HarmonicDistortion">-</td><td>Low:&lt; 10%</td></tr><tr><td>Spectral Slope</td><td id="SpectralSlope">-</td><td>Medium: ~ -6 dB/octave</td></tr><tr><td>Inharmonicity</td><td id="Inharmonicity">-</td><td>Low:&lt; 0.1</td></tr><tr><td>Spectral Centroid</td><td id="SpectralCentroidFrequency">-</td><td>High: &gt; 4000 Hz</td></tr><tr><td>Spectral Flatness</td><td id="SpectralFlatnessFrequency">-</td><td>High: 0.8–1.0</td></tr><tr><td>Spectral Kurtosis</td><td id="SpectralKurtosis">-</td><td>Low:&lt; 3</td></tr><tr><td>Spectral Skewness</td><td id="SpectralSkewness">-</td><td>Low:&lt; 0.5</td></tr><tr><td>Noise-to-Harmonic Ratio</td><td id="NoiseToHarmonicRatio">-</td><td>Low:&lt; 0.2</td></tr><tr><td>Energy per Octave</td><td id="EnergyPerOctave">-</td><td>High: &gt; 50%</td></tr></tbody></table><h2 class="section-title">Additional Metrics</h2><h3>Group 4: Energy Metrics</h3><table class="fl-table" id="energyMetricsTable"><thead><tr><th>Metric</th><th>Value</th><th>Threshold</th></tr></thead><tbody><tr><td>Total Energy</td><td id="TotalEnergy">-</td><td>Medium: 100–200 J</td></tr><tr><td>Mean Energy</td><td id="MeanEnergy">-</td><td>Medium: 2–4 J</td></tr><tr><td>Energy Distribution (Bass)</td><td id="BassEnergy">-</td><td>Medium: 20–40%</td></tr><tr><td>Energy Distribution (Treble)</td><td id="TrebleEnergy">-</td><td>Medium: 30–50%</td></tr><tr><td>Dynamic Range</td><td id="DynamicRange">-</td><td>High: &gt; 20 dB</td></tr><tr><td>Crest Factor</td><td id="CrestFactor">-</td><td>High: &gt; 3</td></tr><tr><td>Energy Envelope Variance</td><td id="EnergyEnvelopeVariance">-</td><td>Low:&lt; 0.1</td></tr><tr><td>Normalized Energy</td><td id="NormalizedEnergy">-</td><td>High: &gt; 0.8</td></tr><tr><td>Transient Energy</td><td id="TransientEnergy">-</td><td>Medium: 10–30%</td></tr><tr><td>Sustain Energy</td><td id="SustainEnergy">-</td><td>Medium: 30–60%</td></tr><tr><td>Peak-to-Average Ratio (PAR)</td><td id="PeakToAverageRatio">-</td><td>High: &gt; 3 dB</td></tr></tbody></table><h3>Group 6: Custom Metrics</h3><table class="fl-table" id="customMetricsTable"><thead><tr><th>Metric</th><th>Value</th></tr></thead><tbody><tr><td>Copyright</td><td id="Copyright">-</td></tr><tr><td>Publisher</td><td id="Publisher">-</td></tr><tr><td>ISRC (International Standard Recording Code)</td><td id="ISRC">-</td></tr><tr><td>UPC (Universal Product Code)</td><td id="UPC">-</td></tr><tr><td>Geolocation</td><td id="Geolocation">-</td></tr><tr><td>Region of Recording</td><td id="RegionOfRecording">-</td></tr><tr><td>Creation Date</td><td id="CreationDate">-</td></tr><tr><td>Modification Date</td><td id="ModificationDate">-</td></tr><tr><td>License Type</td><td id="LicenseType">-</td></tr><tr><td>Creative Commons Information</td><td id="CreativeCommons">-</td></tr><tr><td>Album Art URL</td><td id="AlbumArtURL">-</td></tr><tr><td>Language</td><td id="Language">-</td></tr><tr><td>Original Source URL</td><td id="OriginalSourceURL">-</td></tr><tr><td>Genre Subcategory</td><td id="GenreSubcategory">-</td></tr><tr><td>Explicit Content</td><td id="ExplicitContent">-</td></tr><tr><td>Keywords</td><td id="Keywords">-</td></tr><tr><td>Geotag (Latitude, Longitude)</td><td id="Geotag">-</td></tr><tr><td>Recording Environment</td><td id="RecordingEnvironment">-</td></tr><tr><td>Audio Watermark</td><td id="AudioWatermark">-</td></tr></tbody></table></div></div><div class="drag-drop-container" id="dragDropContainer"><h2 style="margin-top:250px" class="text-center">Drag & Drop Your Files Here</h2><p class="text-center">Or click the button below to select files.</p><input type="file" id="fileInput" multiple style="display: none;" accept="audio/*"><div class="d-flex justify-content-center"><button class="btn btn-success btn-lg px-4" onclick="document.getElementById('fileInput').click()"><i class="bi bi-upload"></i>Upload Files </button></div><p class="mt-3 text-center text-muted">Accepted formats: MP3, WAV, FLAC, AAC, OGG, M4A, WMA, AIFF, ALAC, etc.</p></div></div><script src="./js/metrics.js"></script><script src="./js/metadata.js"></script><script src="./js/spectogram.js"></script><script src="./js/Analytics.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/wavesurfer.min.js" integrity="sha512-HaIBPxUx5bshhdacWu+L4Ty4sjtp6Y0YhZeIXcVjKVxC/Iaod1Ory3Ap6gqT8E/SkrbKalXKALP8CNEIGsVd0g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/base-plugin.min.js" integrity="sha512-xmYR7YgQxp/dxVxA80Wr7V09ISHuoAOebO1L75A4y1g+VUUxTfTEX596RRXybx+5IncdS/J9QJ9w2t75vz21uQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/decoder.min.js" integrity="sha512-UWuhKWfKVBzon4SoA3odRdxqUS8tFyfuEOfSXegT7IJsIO3dbCyQLZP4RiaiRw49ljHhip/gkartU8BoeRQ8Mg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/dom.min.js" integrity="sha512-5SgJXMHgYw/j8MbeFAi7b78vs8xm3n2ClZMMFyOrd+3NApj9+gJBk/WMSBnL1tdRwMQU8vw500WGKrt81hVJGg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/fetcher.min.js" integrity="sha512-OuySWodKMtYz+45VKNSRoBatVumNzkW6y9Fhz7hzAGTjN5JO3uY8JOjs5QyG7pzBqcLeZ/RM7HQqeh49WIwIBg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/base-plugin.min.js" integrity="sha512-xmYR7YgQxp/dxVxA80Wr7V09ISHuoAOebO1L75A4y1g+VUUxTfTEX596RRXybx+5IncdS/J9QJ9w2t75vz21uQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/zoom.min.js" integrity="sha512-LGWn1tOb3FAuVVwIkEJxwIaOh6uiaL8SoC9pQKuEqh8MCAnGQClQJ8Uc20qO37/9AUrmXcFzBwDUhH64cwfrpg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/zoom.esm.min.js" integrity="sha512-drObm+XutVWW6W4vGa4dJvTigv4dXH3KxoEVPQ0P0XfWNif7ovUOt/yQf54GqUaLdEGCm3wbyhgxg7Z7M+Czjg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/timeline.esm.min.js" integrity="sha512-Pf2lUaGLbFRgTs4MBacHl9S8fFQk3ruxK5HPpTO+FWpSjFnC2/y8hijRPLbZNAJ2bnSG+BSH6mc49UJRFWLYfg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/draggable.min.js" integrity="sha512-b0uUDJAe1PVhHT0eauRmVbn3T+M06bkEwrMBc08QFAdSFZNt8t6+9AB2M7zln5gtqRYzqxsIMhlltEoB5Z96GQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/event-emitter.min.js" integrity="sha512-cWNuQtKqK07WGaGhyAbItLaaFon8s7BA2kMo86t/HIBpUp8kzR5/D6/3TJqNHEHq+KRBe690+v+3K7MTuZA0lQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/renderer.min.js" integrity="sha512-qQ+L++rfSjfi+Lp2G/iI5+EafRWKgWREmKNEy/rboEWhGWVl3Gtqdprcd4ebEWBUxvoy6AQm+HxfeUJi9uDb/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/timer.min.js" integrity="sha512-BO/2kQpBNoctPNgc4roUIw8gAYYzh5/fbayFvwirF5nWuPAydImE+FuhO3JVtCfuqLWbtMHhAkaSKk5hsIa0WA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/timer.min.js" integrity="sha512-BO/2kQpBNoctPNgc4roUIw8gAYYzh5/fbayFvwirF5nWuPAydImE+FuhO3JVtCfuqLWbtMHhAkaSKk5hsIa0WA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/wavesurfer.esm.min.js" integrity="sha512-kaGHfKGSEuc1TBDM/uJT/D15PWALxrSy0Xl7n5T3UcgGosZ5gOgS34d24oPk/8lYZJ5DvQVF11zGzKr6OFayxg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/webaudio.min.js" integrity="sha512-ju3tmtMM4qbxcwgHks/dcCf5V1Opp5x3x5Azt00cDgB1Tkmm+rm+zur1+2uFdyq1HaAcPOEQmscr7bgbn7r+aw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/envelope.esm.min.js" integrity="sha512-vM1hKIkJZkKu4t5xToBI/lIj9in04WSs5re4aEj+MTYJDHm583tcLtkfB+BotaBlxX1Swpi8BZEfdkAjxkxjQQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/envelope.min.js" integrity="sha512-CmE0mhPX6YuBY4zsczNHKj4ypMoH14QSjhQYUMZpUO8SD2sGQfAxpbhnc0XlQvwmVvSNuRP1r1p4Kbi5qNfgqg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/webaudio.min.js" integrity="sha512-ju3tmtMM4qbxcwgHks/dcCf5V1Opp5x3x5Azt00cDgB1Tkmm+rm+zur1+2uFdyq1HaAcPOEQmscr7bgbn7r+aw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/timeline.min.js" integrity="sha512-50ES0pHD7HOYd6jAZob9b+Es4JfIKLJE2YmsLE4dkKFYm0a7NXAE+O6LFagMVyjJpMDznWHn5wIzCNGoh9soWg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/timeline.esm.min.js" integrity="sha512-Pf2lUaGLbFRgTs4MBacHl9S8fFQk3ruxK5HPpTO+FWpSjFnC2/y8hijRPLbZNAJ2bnSG+BSH6mc49UJRFWLYfg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/spectrogram.min.js" integrity="sha512-bSA7lT30DvZuVmnrkTHhuu3ugs2FZYWp2OqbvrB05OV61n5Az2gSLl4Z7sVykrYtJYOtoN86Y6Sh/2+a4JOQlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/spectrogram.esm.min.js" integrity="sha512-xc/DigQXwq81ZFsbupDh05HrsIWiF4vd2mcjSqH9/SzwFuHXgdhYhFoBrOwvkhAG0WHENFAVW15BcU78TE55Sg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.8.11/plugins/regions.min.js" integrity="sha512-03bOyBXWMGMHmjlUCLmpypgiSiuqg/1rkhsQa78hpwKCp7dex6XWCUectkNyvoKviuSLU8yGCc98JMSCfDjd8w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script></body><!doctype html><html lang="en-us"><head><title>Responsive Form and Receipt Page</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"><style>html, body{ height: 100%; margin: 0} .navbar{ background-color: #1E2337; color: ivory !important; box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.6)} .main-content{ display: flex; flex-direction: column; height: calc(100vh - 56px)} @media (min-width: 768px){ .main-content{ flex-direction: row}} .form-area{ flex: 1; background-color: #333333; padding: 20px; color: white} .form-control{ margin-bottom: 10px; background-color: #444444; color: white; border: none} .form-control:focus{ outline: none; box-shadow: 0 0 5px #666666} .receipt-wrapper{ flex: 1; display: flex; flex-direction: column; background-color: black; padding: 20px} .image-receipt-area{ background-color: white; max-width: 80mm; min-height: 400px; flex: 1; margin: auto; padding: 10px; border: 2px solid #ccc; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5)} .image-receipt-area img{ max-width: 100%; height: auto; display: block; margin-bottom: 10px} </style></head><body><nav class="navbar navbar-expand-lg navbar-dark"><div class="container-fluid"><a class="navbar-brand" href="#">Responsive Page</a></div></nav><div class="container-fluid main-content"><div class="form-area"><form><select class="form-control" aria-label="Dropdown 1"><option selected>Choose an option</option><option value="1">Option 1</option><option value="2">Option 2</option></select><select class="form-control" aria-label="Dropdown 2"><option selected>Choose an option</option><option value="A">Option A</option><option value="B">Option B</option></select><div class="input-group mb-3"><input type="text" class="form-control" placeholder="Enter 12 characters" maxlength="12"><input type="number" class="form-control" placeholder="Value" min="0" step="1"></div><input type="text" class="form-control" placeholder="Enter 1 character" maxlength="1"></form></div><div class="receipt-wrapper"><div class="image-receipt-area"><p>Image receipts will appear here.</p><img src="https://via.placeholder.com/150" alt="Receipt"></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script></body></html>sssssss<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Character-by-Character Animated LaTeX</title><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" /><style>body{ font-family: "Courier New", Courier, monospace; background-color: #f8f8f8; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0} .container{ display: flex; font-size: 32px; gap: 2px} .latex-char{ display: inline-block; opacity: 0; animation-fill-mode: forwards} </style></head><body><div class="container" id="latex-container"></div><script>let formula, container, animations; try{ formula="\\(X_k=\\sum_{n=0}^{N-1} x_n \\cdot e^{-i \\frac{2\\pi}{N} k n}\\)"} catch (err){ console.error("Error defining formula:", err)} try{ container=document.getElementById("latex-container"); if (!container) throw new Error("Container element not found")} catch (err){ console.error("Error finding container:", err)} try{ animations=[ "animate__fadeIn", "animate__fadeInDown", "animate__fadeInUp", "animate__fadeInLeft", "animate__fadeInRight", "animate__bounceIn", "animate__zoomIn", "animate__slideInLeft", "animate__slideInRight" ]} catch (err){ console.error("Error defining animations array:", err)} const getRandomAnimation=()=>{ try{ const animation=animations[Math.floor(Math.random() * animations.length)]; if (!animation) throw new Error("Random animation selection failed"); return animation} catch (err){ console.error("Error in getRandomAnimation:", err); return "animate__fadeIn"; // Default fallback}}; try{ MathJax.typesetPromise([container]) .then(()=>{ try{ container.innerHTML=formula} catch (err){ console.error("Error setting container innerHTML:", err)} try{ const rendered=container.innerHTML.split(""); // Split into characters container.innerHTML=""; // Clear the container rendered.forEach((char, index)=>{ setTimeout(()=>{ try{ const span=document.createElement("span"); if (!span) throw new Error("Span creation failed"); try{ span.className=`latex-char animate__animated ${getRandomAnimation()}`} catch (err){ console.error("Error assigning className to span:", err)} try{ span.textContent=char.trim()==="" ? "\u00A0" : char} catch (err){ console.error("Error setting span text content:", err)} try{ container.appendChild(span)} catch (err){ console.error("Error appending span to container:", err)}} catch (err){ console.error(`Error processing character at index ${index}:`, err)}}, index * 150); // Delay for animation})} catch (err){ console.error("Error during rendering process:", err)}}) .catch((err)=>console.error("Error rendering LaTeX with MathJax:", err))} catch (err){ console.error("Error triggering MathJax typesetPromise:", err)} </script></body></html>// Calculate Spectral Centroid
function calculateSpectralCentroid(frequencies, magnitudes){ let weightedSum=0; let totalMagnitude=0; for (let i=0; i < frequencies.length; i++){ weightedSum +=frequencies[i] * magnitudes[i]; totalMagnitude +=magnitudes[i]} return totalMagnitude===0 ? 0 : (weightedSum / totalMagnitude).toFixed(2)} // Calculate RMS (Root Mean Square) function calculateRMS(samples){ const squaredSum=samples.reduce((sum, sample)=>sum + sample * sample, 0); return Math.sqrt(squaredSum / samples.length).toFixed(2)} // Calculate Peak Amplitude function calculatePeakAmplitude(samples){ return Math.max(...samples).toFixed(2)} // Calculate Zero-Crossing Rate function calculateZeroCrossingRate(signal){ let zeroCrossings=0; for (let i=1; i < signal.length; i++){ if (signal[i - 1] * signal[i] < 0){ zeroCrossings++}} return ((zeroCrossings / signal.length) * 100).toFixed(2)} // Detect Clipping function detectClipping(channelData){ const clippingThreshold=1.0; const clippingRegions=[]; for (let i=0; i < channelData.length; i++){ if (Math.abs(channelData[i]) >=clippingThreshold){ clippingRegions.push(i)}} return clippingRegions} // Display Calculated Metrics function displayMetrics(analyser, dataArray, audioContext){ analyser.getByteFrequencyData(dataArray); const frequencies=Array.from({ length: dataArray.length}, (_, i)=>i * (audioContext.sampleRate / analyser.fftSize)); const spectralCentroid=calculateSpectralCentroid(frequencies, dataArray); const rms=calculateRMS(dataArray); const peakAmplitude=calculatePeakAmplitude(dataArray); const zeroCrossingRate=calculateZeroCrossingRate(dataArray); console.log("Spectral Centroid:", spectralCentroid); console.log("RMS:", rms); console.log("Peak Amplitude:", peakAmplitude); console.log("Zero-Crossing Rate:", zeroCrossingRate)} // Periodically update metrics function startMetricUpdates(analyser, dataArray, audioContext, audioPlayer){ setInterval(()=>{ if (!audioPlayer.paused){ displayMetrics(analyser, dataArray, audioContext)}}, 1000); // Update every second} // Metadata extraction function extractAudioMetadata(file){ if (!file){ console.error("No file provided for metadata extraction."); return} const fileReader=new FileReader(); // Basic File-Level Metadata const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB const mimeType=file.type || "Unknown"; const lastModified=new Date(file.lastModified).toLocaleString(); const extension=file.name.split(".").pop(); // Populate basic file properties document.getElementById("fileName").innerText=file.name || "Unknown"; document.getElementById("fileSize").innerText=fileSize; document.getElementById("lastModified").innerText=lastModified; document.getElementById("mimeType").innerText=mimeType; document.getElementById("extension").innerText=extension; fileReader.onload=function (){ window.jsmediatags.read(file,{ onSuccess: function (tag){ const metadata=tag.tags; // Populate metadata tags document.getElementById("title").innerText=metadata.title || "Unknown"; document.getElementById("artist").innerText=metadata.artist || "Unknown"; document.getElementById("album").innerText=metadata.album || "Unknown"; document.getElementById("genre").innerText=metadata.genre || "Unknown"; document.getElementById("year").innerText=metadata.year || "Unknown"; document.getElementById("track").innerText=metadata.track || "Unknown"; document.getElementById("composer").innerText=metadata.composer || "Unknown"; document.getElementById("lyrics").innerText=metadata.unsynchronisedLyrics || "Not Available"; document.getElementById("publisher").innerText=metadata.publisher || "Unknown"; document.getElementById("discNumber").innerText=metadata.part_of_a_set || "Unknown"; document.getElementById("encoder").innerText=metadata.encoded_by || "Unknown"; document.getElementById("language").innerText=metadata.language || "Unknown"; document.getElementById("copyright").innerText=metadata.copyright || "Unknown"; document.getElementById("isrc").innerText=metadata.isrc || "Unknown"; document.getElementById("bpm").innerText=metadata.TBPM || "Unknown"; document.getElementById("albumArtist").innerText=metadata.album_artist || "Unknown"; document.getElementById("key").innerText=metadata.key || "Unknown"; document.getElementById("initialKey").innerText=metadata.initial_key || "Unknown"; document.getElementById("length").innerText=metadata.length || "Unknown"; document.getElementById("comments").innerText=metadata.comment || "None"; // Display album art (if available) if (metadata.picture && metadata.picture.data){ const pictureData=new Uint8Array(metadata.picture.data); const blob=new Blob([pictureData]); const url=URL.createObjectURL(blob); document.getElementById("albumArt").src=url} else{ document.getElementById("albumArt").src="https://via.placeholder.com/100"}}, onError: function (error){ console.error("Error extracting metadata:", error); alert("Failed to extract metadata from the audio file.")},})}; fileReader.onerror=function (error){ console.error("FileReader error:", error); alert("Failed to read the audio file.")}; fileReader.readAsArrayBuffer(file)} // Bind the file input element to the metadata extraction function document.getElementById("fileInput").addEventListener("change", function (event){ const file=event.target.files[0]; extractAudioMetadata(file)}); // function extractAudioMetadata(file){
if (!file){
console.error("No file provided for metadata extraction.");
return} // const fileReader=new FileReader(); // // Basic File-Level Metadata
const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB
const mimeType=file.type || "Unknown";
const lastModified=new Date(file.lastModified).toLocaleString();
const extension=file.name.split(".").pop(); // // Populate basic file properties
document.getElementById("fileName").innerText=file.name || "Unknown";
document.getElementById("fileSize").innerText=fileSize;
document.getElementById("lastModified").innerText=lastModified;
document.getElementById("mimeType").innerText=mimeType;
document.getElementById("extension").innerText=extension; // fileReader.onload=function (){
window.jsmediatags.read(file,{
onSuccess: function (tag){
const metadata=tag.tags; // // Populate metadata tags
document.getElementById("title").innerText=metadata.title || "Unknown";
document.getElementById("artist").innerText=metadata.artist || "Unknown";
document.getElementById("album").innerText=metadata.album || "Unknown";
document.getElementById("genre").innerText=metadata.genre || "Unknown";
document.getElementById("year").innerText=metadata.year || "Unknown";
document.getElementById("track").innerText=metadata.track || "Unknown";
document.getElementById("composer").innerText=metadata.composer || "Unknown";
document.getElementById("lyrics").innerText=metadata.unsynchronisedLyrics || "Not Available";
document.getElementById("publisher").innerText=metadata.publisher || "Unknown";
document.getElementById("discNumber").innerText=metadata.part_of_a_set || "Unknown";
document.getElementById("encoder").innerText=metadata.encoded_by || "Unknown";
document.getElementById("language").innerText=metadata.language || "Unknown";
document.getElementById("copyright").innerText=metadata.copyright || "Unknown";
document.getElementById("isrc").innerText=metadata.isrc || "Unknown";
document.getElementById("bpm").innerText=metadata.TBPM || "Unknown";
document.getElementById("albumArtist").innerText=metadata.album_artist || "Unknown";
document.getElementById("key").innerText=metadata.key || "Unknown";
document.getElementById("initialKey").innerText=metadata.initial_key || "Unknown";
document.getElementById("length").innerText=metadata.length || "Unknown";
document.getElementById("comments").innerText=metadata.comment || "None"; // // Display album art (if available)
if (metadata.picture && metadata.picture.data){
const pictureData=new Uint8Array(metadata.picture.data);
const blob=new Blob([pictureData]);
const url=URL.createObjectURL(blob);
document.getElementById("albumArt").src=url} else{
document.getElementById("albumArt").src="https://via.placeholder.com/100"}},
onError: function (error){
console.error("Error extracting metadata:", error);
alert("Failed to extract metadata from the audio file.")},})}; // fileReader.onerror=function (error){
console.error("FileReader error:", error);
alert("Failed to read the audio file.")}; // fileReader.readAsArrayBuffer(file)} // // function extractAudioMetadata(file){
// if (!file){
// console.error("No file provided for metadata extraction.");
// return;
//}
// const fileReader=new FileReader(); // // // Basic File-Level Metadata
// const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB
// const fileType=file.type || "Unknown";
// const lastModified=new Date(file.lastModified).toLocaleString(); // // // Check and Display Basic File Properties
// if (document.getElementById("fileName")) document.getElementById("fileName").innerText=`File Name: ${file.name || "Unknown"}`;
// if (document.getElementById("fileSize")) document.getElementById("fileSize").innerText=`File Size: ${fileSize}`;
// if (document.getElementById("fileType")) document.getElementById("fileType").innerText=`File Type: ${fileType}`;
// if (document.getElementById("lastModified")) document.getElementById("lastModified").innerText=`Last Modified: ${lastModified}`; // // // Read the file as ArrayBuffer for metadata extraction
// fileReader.onload=function (){
// window.jsmediatags.read(file,{
// onSuccess: function (tag){
// const metadata=tag.tags; // // // Check and Display Standard Metadata Fields
// if (document.getElementById("title")) document.getElementById("title").innerText=`Title: ${metadata.title || "Unknown"}`;
// if (document.getElementById("artist")) document.getElementById("artist").innerText=`Artist: ${metadata.artist || "Unknown"}`;
// if (document.getElementById("album")) document.getElementById("album").innerText=`Album: ${metadata.album || "Unknown"}`;
// if (document.getElementById("genre")) document.getElementById("genre").innerText=`Genre: ${metadata.genre || "Unknown"}`;
// if (document.getElementById("year")) document.getElementById("year").innerText=`Year: ${metadata.year || "Unknown"}`;
// if (document.getElementById("track")) document.getElementById("track").innerText=`Track Number: ${metadata.track || "Unknown"}`;
// if (document.getElementById("composer")) document.getElementById("composer").innerText=`Composer: ${metadata.composer || "Unknown"}`;
// if (document.getElementById("bitrate")) document.getElementById("bitrate").innerText=`Bitrate: ${metadata.TBPM || "Unknown"}`;
// if (document.getElementById("comments")) document.getElementById("comments").innerText=`Comments: ${metadata.comment || "None"}`; // // // Check and Display Additional Metadata Fields
// if (document.getElementById("lyrics")) document.getElementById("lyrics").innerText=`Lyrics: ${metadata.unsynchronised_lyrics || "Not Available"}`;
// if (document.getElementById("publisher")) document.getElementById("publisher").innerText=`Publisher: ${metadata.publisher || "Unknown"}`;
// if (document.getElementById("discNumber")) document.getElementById("discNumber").innerText=`Disc Number: ${metadata.part_of_a_set || "Unknown"}`;
// if (document.getElementById("encoder")) document.getElementById("encoder").innerText=`Encoder: ${metadata.encoded_by || "Unknown"}`;
// if (document.getElementById("language")) document.getElementById("language").innerText=`Language: ${metadata.language || "Unknown"}`;
// if (document.getElementById("copyright")) document.getElementById("copyright").innerText=`Copyright: ${metadata.copyright || "None"}`;
// if (document.getElementById("isrc")) document.getElementById("isrc").innerText=`ISRC: ${metadata.isrc || "Unknown"}`;
// if (document.getElementById("bpm")) document.getElementById("bpm").innerText=`BPM: ${metadata.TBPM || "Unknown"}`;
// if (document.getElementById("albumArtist")) document.getElementById("albumArtist").innerText=`Album Artist: ${metadata.album_artist || "Unknown"}`;
// if (document.getElementById("length")) document.getElementById("length").innerText=`Length: ${metadata.length || "Unknown"}`; // // // New: Key and Initial Key
// if (document.getElementById("key")) document.getElementById("key").innerText=`Key: ${metadata.key || "Unknown"}`;
// if (document.getElementById("initialKey")) document.getElementById("initialKey").innerText=`Initial Key: ${metadata.initial_key || "Unknown"}`; // // // New: Geolocation (if available)
// if (document.getElementById("geolocation")) document.getElementById("geolocation").innerText=`Geolocation: ${metadata.geolocation || "Not Available"}`; // // // Display Album Art (if available)
// if (metadata.picture && metadata.picture.data){
// const albumArtUrl=URL.createObjectURL(new Blob([metadata.picture.data]));
// if (document.getElementById("albumArt")) document.getElementById("albumArt").src=albumArtUrl;
//} else{
// if (document.getElementById("albumArt")) document.getElementById("albumArt").src="https://via.placeholder.com/40";
//} // // // Debug: Log all metadata to the console for verification
// console.log("Extracted Metadata:", metadata);
//},
// onError: function (error){
// console.error("Error extracting metadata:", error);
// alert("Failed to extract metadata from the audio file.");
//},
//});
//}; // // fileReader.onerror=function (error){
// console.error("FileReader error:", error);
// alert("Failed to read the audio file.");
//}; // // fileReader.readAsArrayBuffer(file); // // // Bind the file input element to the metadata extraction function
// document.getElementById("fileInput").addEventListener("change", function (event){
// const file=event.target.files[0];
// extractAudioMetadata(file);
//});
Calculate Spectral Centroid
function calculateSpectralCentroid(frequencies, magnitudes){ let weightedSum=0; let totalMagnitude=0; for (let i=0; i < frequencies.length; i++){ weightedSum +=frequencies[i] * magnitudes[i]; totalMagnitude +=magnitudes[i]} return totalMagnitude===0 ? 0 : (weightedSum / totalMagnitude).toFixed(2)} // Calculate RMS (Root Mean Square) function calculateRMS(samples){ const squaredSum=samples.reduce((sum, sample)=>sum + sample * sample, 0); return Math.sqrt(squaredSum / samples.length).toFixed(2)} // Calculate Peak Amplitude function calculatePeakAmplitude(samples){ return Math.max(...samples).toFixed(2)} // Calculate Zero-Crossing Rate function calculateZeroCrossingRate(signal){ let zeroCrossings=0; for (let i=1; i < signal.length; i++){ if (signal[i - 1] * signal[i] < 0){ zeroCrossings++}} return ((zeroCrossings / signal.length) * 100).toFixed(2)} // Detect Clipping function detectClipping(channelData){ const clippingThreshold=1.0; const clippingRegions=[]; for (let i=0; i < channelData.length; i++){ if (Math.abs(channelData[i]) >=clippingThreshold){ clippingRegions.push(i)}} return clippingRegions} // Display Calculated Metrics function displayMetrics(analyser, dataArray, audioContext){ analyser.getByteFrequencyData(dataArray); const frequencies=Array.from({ length: dataArray.length}, (_, i)=>i * (audioContext.sampleRate / analyser.fftSize)); const spectralCentroid=calculateSpectralCentroid(frequencies, dataArray); const rms=calculateRMS(dataArray); const peakAmplitude=calculatePeakAmplitude(dataArray); const zeroCrossingRate=calculateZeroCrossingRate(dataArray); console.log("Spectral Centroid:", spectralCentroid); console.log("RMS:", rms); console.log("Peak Amplitude:", peakAmplitude); console.log("Zero-Crossing Rate:", zeroCrossingRate)} // Periodically update metrics function startMetricUpdates(analyser, dataArray, audioContext, audioPlayer){ setInterval(()=>{ if (!audioPlayer.paused){ displayMetrics(analyser, dataArray, audioContext)}}, 1000); // Update every second} // Metadata extraction function extractAudioMetadata(file){ if (!file){ console.error("No file provided for metadata extraction."); return} const fileReader=new FileReader(); // Basic File-Level Metadata const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB const mimeType=file.type || "Unknown"; const lastModified=new Date(file.lastModified).toLocaleString(); const extension=file.name.split(".").pop(); // Populate basic file properties document.getElementById("fileName").innerText=file.name || "Unknown"; document.getElementById("fileSize").innerText=fileSize; document.getElementById("lastModified").innerText=lastModified; document.getElementById("mimeType").innerText=mimeType; document.getElementById("extension").innerText=extension; fileReader.onload=function (){ window.jsmediatags.read(file,{ onSuccess: function (tag){ const metadata=tag.tags; // Populate metadata tags document.getElementById("title").innerText=metadata.title || "Unknown"; document.getElementById("artist").innerText=metadata.artist || "Unknown"; document.getElementById("album").innerText=metadata.album || "Unknown"; document.getElementById("genre").innerText=metadata.genre || "Unknown"; document.getElementById("year").innerText=metadata.year || "Unknown"; document.getElementById("track").innerText=metadata.track || "Unknown"; document.getElementById("composer").innerText=metadata.composer || "Unknown"; document.getElementById("lyrics").innerText=metadata.unsynchronisedLyrics || "Not Available"; document.getElementById("publisher").innerText=metadata.publisher || "Unknown"; document.getElementById("discNumber").innerText=metadata.part_of_a_set || "Unknown"; document.getElementById("encoder").innerText=metadata.encoded_by || "Unknown"; document.getElementById("language").innerText=metadata.language || "Unknown"; document.getElementById("copyright").innerText=metadata.copyright || "Unknown"; document.getElementById("isrc").innerText=metadata.isrc || "Unknown"; document.getElementById("bpm").innerText=metadata.TBPM || "Unknown"; document.getElementById("albumArtist").innerText=metadata.album_artist || "Unknown"; document.getElementById("key").innerText=metadata.key || "Unknown"; document.getElementById("initialKey").innerText=metadata.initial_key || "Unknown"; document.getElementById("length").innerText=metadata.length || "Unknown"; document.getElementById("comments").innerText=metadata.comment || "None"; // Display album art (if available) if (metadata.picture && metadata.picture.data){ const pictureData=new Uint8Array(metadata.picture.data); const blob=new Blob([pictureData]); const url=URL.createObjectURL(blob); document.getElementById("albumArt").src=url} else{ document.getElementById("albumArt").src="https://via.placeholder.com/100"}}, onError: function (error){ console.error("Error extracting metadata:", error); alert("Failed to extract metadata from the audio file.")},})}; fileReader.onerror=function (error){ console.error("FileReader error:", error); alert("Failed to read the audio file.")}; fileReader.readAsArrayBuffer(file)} // Bind the file input element to the metadata extraction function document.getElementById("fileInput").addEventListener("change", function (event){ const file=event.target.files[0]; extractAudioMetadata(file)}); // function extractAudioMetadata(file){
if (!file){
console.error("No file provided for metadata extraction.");
return} // const fileReader=new FileReader(); // // Basic File-Level Metadata
const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB
const mimeType=file.type || "Unknown";
const lastModified=new Date(file.lastModified).toLocaleString();
const extension=file.name.split(".").pop(); // // Populate basic file properties
document.getElementById("fileName").innerText=file.name || "Unknown";
document.getElementById("fileSize").innerText=fileSize;
document.getElementById("lastModified").innerText=lastModified;
document.getElementById("mimeType").innerText=mimeType;
document.getElementById("extension").innerText=extension; // fileReader.onload=function (){
window.jsmediatags.read(file,{
onSuccess: function (tag){
const metadata=tag.tags; // // Populate metadata tags
document.getElementById("title").innerText=metadata.title || "Unknown";
document.getElementById("artist").innerText=metadata.artist || "Unknown";
document.getElementById("album").innerText=metadata.album || "Unknown";
document.getElementById("genre").innerText=metadata.genre || "Unknown";
document.getElementById("year").innerText=metadata.year || "Unknown";
document.getElementById("track").innerText=metadata.track || "Unknown";
document.getElementById("composer").innerText=metadata.composer || "Unknown";
document.getElementById("lyrics").innerText=metadata.unsynchronisedLyrics || "Not Available";
document.getElementById("publisher").innerText=metadata.publisher || "Unknown";
document.getElementById("discNumber").innerText=metadata.part_of_a_set || "Unknown";
document.getElementById("encoder").innerText=metadata.encoded_by || "Unknown";
document.getElementById("language").innerText=metadata.language || "Unknown";
document.getElementById("copyright").innerText=metadata.copyright || "Unknown";
document.getElementById("isrc").innerText=metadata.isrc || "Unknown";
document.getElementById("bpm").innerText=metadata.TBPM || "Unknown";
document.getElementById("albumArtist").innerText=metadata.album_artist || "Unknown";
document.getElementById("key").innerText=metadata.key || "Unknown";
document.getElementById("initialKey").innerText=metadata.initial_key || "Unknown";
document.getElementById("length").innerText=metadata.length || "Unknown";
document.getElementById("comments").innerText=metadata.comment || "None"; // // Display album art (if available)
if (metadata.picture && metadata.picture.data){
const pictureData=new Uint8Array(metadata.picture.data);
const blob=new Blob([pictureData]);
const url=URL.createObjectURL(blob);
document.getElementById("albumArt").src=url} else{
document.getElementById("albumArt").src="https://via.placeholder.com/100"}},
onError: function (error){
console.error("Error extracting metadata:", error);
alert("Failed to extract metadata from the audio file.")},})}; // fileReader.onerror=function (error){
console.error("FileReader error:", error);
alert("Failed to read the audio file.")}; // fileReader.readAsArrayBuffer(file)} // // function extractAudioMetadata(file){
// if (!file){
// console.error("No file provided for metadata extraction.");
// return;
//}
// const fileReader=new FileReader(); // // // Basic File-Level Metadata
// const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB
// const fileType=file.type || "Unknown";
// const lastModified=new Date(file.lastModified).toLocaleString(); // // // Check and Display Basic File Properties
// if (document.getElementById("fileName")) document.getElementById("fileName").innerText=`File Name: ${file.name || "Unknown"}`;
// if (document.getElementById("fileSize")) document.getElementById("fileSize").innerText=`File Size: ${fileSize}`;
// if (document.getElementById("fileType")) document.getElementById("fileType").innerText=`File Type: ${fileType}`;
// if (document.getElementById("lastModified")) document.getElementById("lastModified").innerText=`Last Modified: ${lastModified}`; // // // Read the file as ArrayBuffer for metadata extraction
// fileReader.onload=function (){
// window.jsmediatags.read(file,{
// onSuccess: function (tag){
// const metadata=tag.tags; // // // Check and Display Standard Metadata Fields
// if (document.getElementById("title")) document.getElementById("title").innerText=`Title: ${metadata.title || "Unknown"}`;
// if (document.getElementById("artist")) document.getElementById("artist").innerText=`Artist: ${metadata.artist || "Unknown"}`;
// if (document.getElementById("album")) document.getElementById("album").innerText=`Album: ${metadata.album || "Unknown"}`;
// if (document.getElementById("genre")) document.getElementById("genre").innerText=`Genre: ${metadata.genre || "Unknown"}`;
// if (document.getElementById("year")) document.getElementById("year").innerText=`Year: ${metadata.year || "Unknown"}`;
// if (document.getElementById("track")) document.getElementById("track").innerText=`Track Number: ${metadata.track || "Unknown"}`;
// if (document.getElementById("composer")) document.getElementById("composer").innerText=`Composer: ${metadata.composer || "Unknown"}`;
// if (document.getElementById("bitrate")) document.getElementById("bitrate").innerText=`Bitrate: ${metadata.TBPM || "Unknown"}`;
// if (document.getElementById("comments")) document.getElementById("comments").innerText=`Comments: ${metadata.comment || "None"}`; // // // Check and Display Additional Metadata Fields
// if (document.getElementById("lyrics")) document.getElementById("lyrics").innerText=`Lyrics: ${metadata.unsynchronised_lyrics || "Not Available"}`;
// if (document.getElementById("publisher")) document.getElementById("publisher").innerText=`Publisher: ${metadata.publisher || "Unknown"}`;
// if (document.getElementById("discNumber")) document.getElementById("discNumber").innerText=`Disc Number: ${metadata.part_of_a_set || "Unknown"}`;
// if (document.getElementById("encoder")) document.getElementById("encoder").innerText=`Encoder: ${metadata.encoded_by || "Unknown"}`;
// if (document.getElementById("language")) document.getElementById("language").innerText=`Language: ${metadata.language || "Unknown"}`;
// if (document.getElementById("copyright")) document.getElementById("copyright").innerText=`Copyright: ${metadata.copyright || "None"}`;
// if (document.getElementById("isrc")) document.getElementById("isrc").innerText=`ISRC: ${metadata.isrc || "Unknown"}`;
// if (document.getElementById("bpm")) document.getElementById("bpm").innerText=`BPM: ${metadata.TBPM || "Unknown"}`;
// if (document.getElementById("albumArtist")) document.getElementById("albumArtist").innerText=`Album Artist: ${metadata.album_artist || "Unknown"}`;
// if (document.getElementById("length")) document.getElementById("length").innerText=`Length: ${metadata.length || "Unknown"}`; // // // New: Key and Initial Key
// if (document.getElementById("key")) document.getElementById("key").innerText=`Key: ${metadata.key || "Unknown"}`;
// if (document.getElementById("initialKey")) document.getElementById("initialKey").innerText=`Initial Key: ${metadata.initial_key || "Unknown"}`; // // // New: Geolocation (if available)
// if (document.getElementById("geolocation")) document.getElementById("geolocation").innerText=`Geolocation: ${metadata.geolocation || "Not Available"}`; // // // Display Album Art (if available)
// if (metadata.picture && metadata.picture.data){
// const albumArtUrl=URL.createObjectURL(new Blob([metadata.picture.data]));
// if (document.getElementById("albumArt")) document.getElementById("albumArt").src=albumArtUrl;
//} else{
// if (document.getElementById("albumArt")) document.getElementById("albumArt").src="https://via.placeholder.com/40";
//} // // // Debug: Log all metadata to the console for verification
// console.log("Extracted Metadata:", metadata);
//},
// onError: function (error){
// console.error("Error extracting metadata:", error);
// alert("Failed to extract metadata from the audio file.");
//},
//});
//}; // // fileReader.onerror=function (error){
// console.error("FileReader error:", error);
// alert("Failed to read the audio file.");
//}; // // fileReader.readAsArrayBuffer(file); // // // Bind the file input element to the metadata extraction function
// document.getElementById("fileInput").addEventListener("change", function (event){
// const file=event.target.files[0];
// extractAudioMetadata(file);
//});
Calculate Spectral Centroid
function calculateSpectralCentroid(frequencies, magnitudes){ let weightedSum=0; let totalMagnitude=0; for (let i=0; i < frequencies.length; i++){ weightedSum +=frequencies[i] * magnitudes[i]; totalMagnitude +=magnitudes[i]} return totalMagnitude===0 ? 0 : (weightedSum / totalMagnitude).toFixed(2)} // Calculate RMS (Root Mean Square) function calculateRMS(samples){ const squaredSum=samples.reduce((sum, sample)=>sum + sample * sample, 0); return Math.sqrt(squaredSum / samples.length).toFixed(2)} // Calculate Peak Amplitude function calculatePeakAmplitude(samples){ return Math.max(...samples).toFixed(2)} // Calculate Zero-Crossing Rate function calculateZeroCrossingRate(signal){ let zeroCrossings=0; for (let i=1; i < signal.length; i++){ if (signal[i - 1] * signal[i] < 0){ zeroCrossings++}} return ((zeroCrossings / signal.length) * 100).toFixed(2)} // Detect Clipping function detectClipping(channelData){ const clippingThreshold=1.0; const clippingRegions=[]; for (let i=0; i < channelData.length; i++){ if (Math.abs(channelData[i]) >=clippingThreshold){ clippingRegions.push(i)}} return clippingRegions} // Display Calculated Metrics function displayMetrics(analyser, dataArray, audioContext){ analyser.getByteFrequencyData(dataArray); const frequencies=Array.from({ length: dataArray.length}, (_, i)=>i * (audioContext.sampleRate / analyser.fftSize)); const spectralCentroid=calculateSpectralCentroid(frequencies, dataArray); const rms=calculateRMS(dataArray); const peakAmplitude=calculatePeakAmplitude(dataArray); const zeroCrossingRate=calculateZeroCrossingRate(dataArray); console.log("Spectral Centroid:", spectralCentroid); console.log("RMS:", rms); console.log("Peak Amplitude:", peakAmplitude); console.log("Zero-Crossing Rate:", zeroCrossingRate)} // Periodically update metrics function startMetricUpdates(analyser, dataArray, audioContext, audioPlayer){ setInterval(()=>{ if (!audioPlayer.paused){ displayMetrics(analyser, dataArray, audioContext)}}, 1000); // Update every second} // Metadata extraction function extractAudioMetadata(file){ if (!file){ console.error("No file provided for metadata extraction."); return} const fileReader=new FileReader(); // Basic File-Level Metadata const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB const mimeType=file.type || "Unknown"; const lastModified=new Date(file.lastModified).toLocaleString(); const extension=file.name.split(".").pop(); // Populate basic file properties document.getElementById("fileName").innerText=file.name || "Unknown"; document.getElementById("fileSize").innerText=fileSize; document.getElementById("lastModified").innerText=lastModified; document.getElementById("mimeType").innerText=mimeType; document.getElementById("extension").innerText=extension; fileReader.onload=function (){ window.jsmediatags.read(file,{ onSuccess: function (tag){ const metadata=tag.tags; // Populate metadata tags document.getElementById("title").innerText=metadata.title || "Unknown"; document.getElementById("artist").innerText=metadata.artist || "Unknown"; document.getElementById("album").innerText=metadata.album || "Unknown"; document.getElementById("genre").innerText=metadata.genre || "Unknown"; document.getElementById("year").innerText=metadata.year || "Unknown"; document.getElementById("track").innerText=metadata.track || "Unknown"; document.getElementById("composer").innerText=metadata.composer || "Unknown"; document.getElementById("lyrics").innerText=metadata.unsynchronisedLyrics || "Not Available"; document.getElementById("publisher").innerText=metadata.publisher || "Unknown"; document.getElementById("discNumber").innerText=metadata.part_of_a_set || "Unknown"; document.getElementById("encoder").innerText=metadata.encoded_by || "Unknown"; document.getElementById("language").innerText=metadata.language || "Unknown"; document.getElementById("copyright").innerText=metadata.copyright || "Unknown"; document.getElementById("isrc").innerText=metadata.isrc || "Unknown"; document.getElementById("bpm").innerText=metadata.TBPM || "Unknown"; document.getElementById("albumArtist").innerText=metadata.album_artist || "Unknown"; document.getElementById("key").innerText=metadata.key || "Unknown"; document.getElementById("initialKey").innerText=metadata.initial_key || "Unknown"; document.getElementById("length").innerText=metadata.length || "Unknown"; document.getElementById("comments").innerText=metadata.comment || "None"; // Display album art (if available) if (metadata.picture && metadata.picture.data){ const pictureData=new Uint8Array(metadata.picture.data); const blob=new Blob([pictureData]); const url=URL.createObjectURL(blob); document.getElementById("albumArt").src=url} else{ document.getElementById("albumArt").src="https://via.placeholder.com/100"}}, onError: function (error){ console.error("Error extracting metadata:", error); alert("Failed to extract metadata from the audio file.")},})}; fileReader.onerror=function (error){ console.error("FileReader error:", error); alert("Failed to read the audio file.")}; fileReader.readAsArrayBuffer(file)} // Bind the file input element to the metadata extraction function document.getElementById("fileInput").addEventListener("change", function (event){ const file=event.target.files[0]; extractAudioMetadata(file)}); // function extractAudioMetadata(file){
if (!file){
console.error("No file provided for metadata extraction.");
return} // const fileReader=new FileReader(); // // Basic File-Level Metadata
const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB
const mimeType=file.type || "Unknown";
const lastModified=new Date(file.lastModified).toLocaleString();
const extension=file.name.split(".").pop(); // // Populate basic file properties
document.getElementById("fileName").innerText=file.name || "Unknown";
document.getElementById("fileSize").innerText=fileSize;
document.getElementById("lastModified").innerText=lastModified;
document.getElementById("mimeType").innerText=mimeType;
document.getElementById("extension").innerText=extension; // fileReader.onload=function (){
window.jsmediatags.read(file,{
onSuccess: function (tag){
const metadata=tag.tags; // // Populate metadata tags
document.getElementById("title").innerText=metadata.title || "Unknown";
document.getElementById("artist").innerText=metadata.artist || "Unknown";
document.getElementById("album").innerText=metadata.album || "Unknown";
document.getElementById("genre").innerText=metadata.genre || "Unknown";
document.getElementById("year").innerText=metadata.year || "Unknown";
document.getElementById("track").innerText=metadata.track || "Unknown";
document.getElementById("composer").innerText=metadata.composer || "Unknown";
document.getElementById("lyrics").innerText=metadata.unsynchronisedLyrics || "Not Available";
document.getElementById("publisher").innerText=metadata.publisher || "Unknown";
document.getElementById("discNumber").innerText=metadata.part_of_a_set || "Unknown";
document.getElementById("encoder").innerText=metadata.encoded_by || "Unknown";
document.getElementById("language").innerText=metadata.language || "Unknown";
document.getElementById("copyright").innerText=metadata.copyright || "Unknown";
document.getElementById("isrc").innerText=metadata.isrc || "Unknown";
document.getElementById("bpm").innerText=metadata.TBPM || "Unknown";
document.getElementById("albumArtist").innerText=metadata.album_artist || "Unknown";
document.getElementById("key").innerText=metadata.key || "Unknown";
document.getElementById("initialKey").innerText=metadata.initial_key || "Unknown";
document.getElementById("length").innerText=metadata.length || "Unknown";
document.getElementById("comments").innerText=metadata.comment || "None"; // // Display album art (if available)
if (metadata.picture && metadata.picture.data){
const pictureData=new Uint8Array(metadata.picture.data);
const blob=new Blob([pictureData]);
const url=URL.createObjectURL(blob);
document.getElementById("albumArt").src=url} else{
document.getElementById("albumArt").src="https://via.placeholder.com/100"}},
onError: function (error){
console.error("Error extracting metadata:", error);
alert("Failed to extract metadata from the audio file.")},})}; // fileReader.onerror=function (error){
console.error("FileReader error:", error);
alert("Failed to read the audio file.")}; // fileReader.readAsArrayBuffer(file)} // // function extractAudioMetadata(file){
// if (!file){
console.error("No file provided for metadata extraction.");
return}
const fileReader=new FileReader(); // // // Basic File-Level Metadata
const fileSize=(file.size / (1024 * 1024)).toFixed(2) + " MB"; // Convert to MB
const fileType=file.type || "Unknown";
const lastModified=new Date(file.lastModified).toLocaleString(); // // // Check and Display Basic File Properties
if (document.getElementById("fileName")) document.getElementById("fileName").innerText=`File Name: ${file.name || "Unknown"}`;
if (document.getElementById("fileSize")) document.getElementById("fileSize").innerText=`File Size: ${fileSize}`;
if (document.getElementById("fileType")) document.getElementById("fileType").innerText=`File Type: ${fileType}`;
if (document.getElementById("lastModified")) document.getElementById("lastModified").innerText=`Last Modified: ${lastModified}`; // // // Read the file as ArrayBuffer for metadata extraction
fileReader.onload=function (){
window.jsmediatags.read(file,{
onSuccess: function (tag){
const metadata=tag.tags; // // // Check and Display Standard Metadata Fields
if (document.getElementById("title")) document.getElementById("title").innerText=`Title: ${metadata.title || "Unknown"}`;
if (document.getElementById("artist")) document.getElementById("artist").innerText=`Artist: ${metadata.artist || "Unknown"}`;
if (document.getElementById("album")) document.getElementById("album").innerText=`Album: ${metadata.album || "Unknown"}`;
if (document.getElementById("genre")) document.getElementById("genre").innerText=`Genre: ${metadata.genre || "Unknown"}`;
if (document.getElementById("year")) document.getElementById("year").innerText=`Year: ${metadata.year || "Unknown"}`;
if (document.getElementById("track")) document.getElementById("track").innerText=`Track Number: ${metadata.track || "Unknown"}`;
if (document.getElementById("composer")) document.getElementById("composer").innerText=`Composer: ${metadata.composer || "Unknown"}`;
if (document.getElementById("bitrate")) document.getElementById("bitrate").innerText=`Bitrate: ${metadata.TBPM || "Unknown"}`;
if (document.getElementById("comments")) document.getElementById("comments").innerText=`Comments: ${metadata.comment || "None"}`; // // // Check and Display Additional Metadata Fields
if (document.getElementById("lyrics")) document.getElementById("lyrics").innerText=`Lyrics: ${metadata.unsynchronised_lyrics || "Not Available"}`;
if (document.getElementById("publisher")) document.getElementById("publisher").innerText=`Publisher: ${metadata.publisher || "Unknown"}`;
if (document.getElementById("discNumber")) document.getElementById("discNumber").innerText=`Disc Number: ${metadata.part_of_a_set || "Unknown"}`;
if (document.getElementById("encoder")) document.getElementById("encoder").innerText=`Encoder: ${metadata.encoded_by || "Unknown"}`;
if (document.getElementById("language")) document.getElementById("language").innerText=`Language: ${metadata.language || "Unknown"}`;
if (document.getElementById("copyright")) document.getElementById("copyright").innerText=`Copyright: ${metadata.copyright || "None"}`;
if (document.getElementById("isrc")) document.getElementById("isrc").innerText=`ISRC: ${metadata.isrc || "Unknown"}`;
if (document.getElementById("bpm")) document.getElementById("bpm").innerText=`BPM: ${metadata.TBPM || "Unknown"}`;
if (document.getElementById("albumArtist")) document.getElementById("albumArtist").innerText=`Album Artist: ${metadata.album_artist || "Unknown"}`;
if (document.getElementById("length")) document.getElementById("length").innerText=`Length: ${metadata.length || "Unknown"}`; // // // New: Key and Initial Key
if (document.getElementById("key")) document.getElementById("key").innerText=`Key: ${metadata.key || "Unknown"}`;
if (document.getElementById("initialKey")) document.getElementById("initialKey").innerText=`Initial Key: ${metadata.initial_key || "Unknown"}`; // // // New: Geolocation (if available)
if (document.getElementById("geolocation")) document.getElementById("geolocation").innerText=`Geolocation: ${metadata.geolocation || "Not Available"}`; // // // Display Album Art (if available)
if (metadata.picture && metadata.picture.data){
const albumArtUrl=URL.createObjectURL(new Blob([metadata.picture.data]));
if (document.getElementById("albumArt")) document.getElementById("albumArt").src=albumArtUrl} else{
if (document.getElementById("albumArt")) document.getElementById("albumArt").src="https://via.placeholder.com/40"} // // // Debug: Log all metadata to the console for verification
console.log("Extracted Metadata:", metadata)},
onError: function (error){
console.error("Error extracting metadata:", error);
alert("Failed to extract metadata from the audio file.")},})}; // // fileReader.onerror=function (error){
console.error("FileReader error:", error);
alert("Failed to read the audio file.")}; // // fileReader.readAsArrayBuffer(file); // // // Bind the file input element to the metadata extraction function
document.getElementById("fileInput").addEventListener("change", function (event){
const file=event.target.files[0];
extractAudioMetadata(file)}); </html>