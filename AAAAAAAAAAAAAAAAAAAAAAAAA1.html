
<!DOCTYPE html> <html prefix="og: https://ogp.me/ns#"><!--
 Page saved with SingleFile 
 url: https://receiptline.github.io/designer/ 
 saved date: Sat Dec 21 2024 04:34:00 GMT-0800 (Pacific Standard Time)
--><head><meta charset="utf-8">
    
    <title>ReceiptLine Designer</title>
    <meta property="og:title" content="ReceiptLine Designer">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://receiptline.github.io/designer/ogp/en.png">
    <meta property="og:url" content="https://receiptline.github.io/designer/">
    <meta property="og:description" content="The ReceiptLine Designer allows you to easily edit and preview the output images of receipts, tickets, etc., using the ReceiptLine markdown language.">
    <meta name="twitter:card" content="summary_large_image">
    
    <style>body{background-color:#eee}header{display:flex;justify-content:space-around;font-size:small;user-select:none}main{display:flex;justify-content:start}textarea{color:#fff;background-color:#000;font-family:monospace;font-size:20px;resize:none;overflow-y:scroll}section{flex:0 0 auto;height:80vh;overflow-y:scroll}details{font-size:x-small;padding:1px}summary{font-size:small;font-weight:bold;background-color:#ccc}article{display:flex;justify-content:space-around}figcaption{font-weight:bold;font-style:italic}figure img{max-width:100%;height:auto}footer{font-size:x-small;text-align:center}.paper{padding:12px;background-color:#fff}.paper>div{overflow:hidden}.invalid{background-color:#faa}.nolist{list-style-type:none}.dialog{display:none;user-select:none}.note{font-size:x-small}.dialog>div:first-child{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:0.5}.dialog>div:last-child{position:absolute;padding:1em;background-color:#eee}.dialog hr+div{text-align:center}.tooltip[data-tooltip]:hover::after{content:attr(data-tooltip);position:absolute;border-radius:3px;padding:3px;color:#fff;background-color:#777}.hidden{display:none}</style>
    <script type="text/javascript" src="data:application/javascript;base64,LyoNCkNvcHlyaWdodCAyMDE5IE9wZW4gRm9vZHNlcnZpY2UgU3lzdGVtIENvbnNvcnRpdW0NCg0KTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQp5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCg0KICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KDQpVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQpkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQpTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQpsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiovDQoNCi8vIFFSIENvZGUgaXMgYSByZWdpc3RlcmVkIHRyYWRlbWFyayBvZiBERU5TTyBXQVZFIElOQ09SUE9SQVRFRC4NCg0KZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHsNCiAgICBjb25zdCBsb2FkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWQnKTsNCiAgICBjb25zdCBsb2FkZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRkaWFsb2cnKTsNCiAgICBjb25zdCBsb2FkYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRib3gnKTsNCiAgICBjb25zdCBsb2FkZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZmlsZScpOw0KICAgIGNvbnN0IGxvYWRvayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2Fkb2snKTsNCiAgICBjb25zdCBsb2FkY2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRjYW5jZWwnKTsNCiAgICBjb25zdCBzYXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUnKTsNCiAgICBjb25zdCBzYXZlZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmVkaWFsb2cnKTsNCiAgICBjb25zdCBzYXZlYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmVib3gnKTsNCiAgICBjb25zdCBzYXZldGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZldGV4dCcpOw0KICAgIGNvbnN0IHNhdmVzdmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZXN2ZycpOw0KICAgIGNvbnN0IHNhdmVvayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlb2snKTsNCiAgICBjb25zdCBzYXZlY2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmVjYW5jZWwnKTsNCiAgICBjb25zdCB6b29tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvb20nKTsNCiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nJyk7DQogICAgY29uc3QgaW1nZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ2RpYWxvZycpOw0KICAgIGNvbnN0IGltZ2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdib3gnKTsNCiAgICBjb25zdCBpbWdmaWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ2ZpbGUnKTsNCiAgICBjb25zdCBpbWdvayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdvaycpOw0KICAgIGNvbnN0IGltZ2NhbmNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdjYW5jZWwnKTsNCiAgICBjb25zdCBiYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFyJyk7DQogICAgY29uc3QgYmFyZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmRpYWxvZycpOw0KICAgIGNvbnN0IGJhcmJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJib3gnKTsNCiAgICBjb25zdCBiYXJkYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmRhdGEnKTsNCiAgICBjb25zdCBiYXJ0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcnR5cGUnKTsNCiAgICBjb25zdCBiYXJ3aWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJ3aWR0aCcpOw0KICAgIGNvbnN0IGJhcmhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJoZWlnaHQnKTsNCiAgICBjb25zdCBiYXJocmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFyaHJpJyk7DQogICAgY29uc3QgYmFyb2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFyb2snKTsNCiAgICBjb25zdCBiYXJjYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFyY2FuY2VsJyk7DQogICAgY29uc3QgcXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXInKTsNCiAgICBjb25zdCBxcmRpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxcmRpYWxvZycpOw0KICAgIGNvbnN0IHFyYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FyYm94Jyk7DQogICAgY29uc3QgcXJkYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FyZGF0YScpOw0KICAgIGNvbnN0IHFydHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxcnR5cGUnKTsNCiAgICBjb25zdCBxcmNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXJjZWxsJyk7DQogICAgY29uc3QgcXJsZXZlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxcmxldmVsJyk7DQogICAgY29uc3QgcXJvayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxcm9rJyk7DQogICAgY29uc3QgcXJjYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXJjYW5jZWwnKTsNCiAgICBjb25zdCBmb3JtYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybWF0Jyk7DQogICAgY29uc3QgZm9ybWF0ZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1hdGRpYWxvZycpOw0KICAgIGNvbnN0IGZvcm1hdGJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtYXRib3gnKTsNCiAgICBjb25zdCBmb3JtYXR3aWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtYXR3aWR0aCcpOw0KICAgIGNvbnN0IGZvcm1hdGJvcmRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtYXRib3JkZXInKTsNCiAgICBjb25zdCBmb3JtYXR0ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1hdHRleHQnKTsNCiAgICBjb25zdCBmb3JtYXRhbGlnbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtYXRhbGlnbicpOw0KICAgIGNvbnN0IGZvcm1hdG9rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1hdG9rJyk7DQogICAgY29uc3QgZm9ybWF0Y2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1hdGNhbmNlbCcpOw0KICAgIGNvbnN0IGNvbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2wnKTsNCiAgICBjb25zdCBociA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdocicpOw0KICAgIGNvbnN0IGN1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXQnKTsNCiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1bCcpOw0KICAgIGNvbnN0IGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtJyk7DQogICAgY29uc3QgaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXYnKTsNCiAgICBjb25zdCB3aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aCcpOw0KICAgIGNvbnN0IGxhbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFuZycpOw0KICAgIGNvbnN0IGxpbmV3aWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5ld2lkdGgnKTsNCiAgICBjb25zdCBsYW5kc2NhcGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFuZHNjYXBlJyk7DQogICAgY29uc3QgbGluZXNwYWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmVzcGFjZScpOw0KICAgIGNvbnN0IGRvdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG90cycpOw0KICAgIGNvbnN0IGNwbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcGwnKTsNCiAgICBjb25zdCBwcmludGVyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnRlcmlkJyk7DQogICAgY29uc3Qgc2VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kJyk7DQogICAgY29uc3QgZWRpdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Jyk7DQogICAgY29uc3QgcHJpbnRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50YXJlYScpOw0KICAgIGNvbnN0IGNoYXJXaWR0aCA9IDEyOw0KICAgIGNvbnN0IGVuY29kaW5nID0gew0KICAgICAgICAnLSc6ICdtdWx0aWxpbmd1YWwnLCAnamEnOiAnc2hpZnRqaXMnLCAnemgtSGFucyc6ICdnYjE4MDMwJywgJ3poLUhhbnQnOiAnYmlnNScsICdrbyc6ICdrc2M1NjAxJywgJ3RoJzogJ3RpczYyMCcNCiAgICB9Ow0KDQogICAgLy8gcmVnaXN0ZXIgZmlsZSBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBsb2FkLm9uY2xpY2sgPSBldmVudCA9PiB7DQogICAgICAgIC8vIHNldCB0aGUgcG9zaXRpb24gb2YgdGhlIGRpYWxvZyBib3gNCiAgICAgICAgbG9hZGJveC5zdHlsZS5sZWZ0ID0gZXZlbnQucGFnZVggKyAncHgnOw0KICAgICAgICBsb2FkYm94LnN0eWxlLnRvcCA9IGV2ZW50LnBhZ2VZICsgJ3B4JzsNCiAgICAgICAgLy8gb3BlbiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBsb2FkZGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIH07DQoNCiAgICAvLyByZWdpc3RlciBmaWxlIHByZXZpZXcgZXZlbnQgbGlzdGVuZXINCiAgICBsb2FkZmlsZS5vbmNsaWNrID0gZXZlbnQgPT4gbG9hZGZpbGUudmFsdWUgPSAnJzsNCiAgICBsb2FkZmlsZS5vbmNoYW5nZSA9IGV2ZW50ID0+IHsNCiAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgaWYgKGZpbGUpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZXZlbnQgPT4gew0KICAgICAgICAgICAgICAgIC8vIHByZXZpZXcgZmlsZQ0KICAgICAgICAgICAgICAgIGxvYWR2aWV3LnZhbHVlID0gcmVhZGVyLnJlc3VsdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIGZpbGUgb2sgZXZlbnQgbGlzdGVuZXINCiAgICBsb2Fkb2sub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgLy8gb3BlbiBmaWxlDQogICAgICAgIGVkaXQudmFsdWUgPSBsb2Fkdmlldy52YWx1ZTsNCiAgICAgICAgLy8gdXBkYXRlIHJlY2VpcHQNCiAgICAgICAgZWRpdC5vbmlucHV0KCk7DQogICAgICAgIC8vIGNsb3NlIHRoZSBkaWFsb2cgYm94DQogICAgICAgIGxvYWRkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9Ow0KDQogICAgLy8gcmVnaXN0ZXIgZmlsZSBjYW5jZWwgZXZlbnQgbGlzdGVuZXINCiAgICBsb2FkY2FuY2VsLm9uY2xpY2sgPSBldmVudCA9PiBsb2FkZGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoNCiAgICAvLyByZWdpc3RlciBzYXZlIGJ1dHRvbiBldmVudCBsaXN0ZW5lcg0KICAgIHNhdmUub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgLy8gc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBzYXZlYm94LnN0eWxlLmxlZnQgPSBldmVudC5wYWdlWCArICdweCc7DQogICAgICAgIHNhdmVib3guc3R5bGUudG9wID0gZXZlbnQucGFnZVkgKyAncHgnOw0KICAgICAgICAvLyBvcGVuIHRoZSBkaWFsb2cgYm94DQogICAgICAgIHNhdmVkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIHNhdmUgb2sgZXZlbnQgbGlzdGVuZXINCiAgICBzYXZlb2sub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgY29uc3QgYm9tID0gbmV3IFVpbnQ4QXJyYXkoWzB4ZWYsIDB4YmIsIDB4YmZdKTsNCiAgICAgICAgLy8gc2F2ZSB0ZXh0IGZpbGUNCiAgICAgICAgaWYgKHNhdmV0ZXh0LmNoZWNrZWQpIHsNCiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICBhLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbIGJvbSwgZWRpdC52YWx1ZSBdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KSk7DQogICAgICAgICAgICBhLmRvd25sb2FkID0gJ3JlY2VpcHRsaW5lLnJlY2VpcHQnOw0KICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICB9DQogICAgICAgIC8vIHNhdmUgc3ZnIGZpbGUNCiAgICAgICAgaWYgKHNhdmVzdmcuY2hlY2tlZCkgew0KICAgICAgICAgICAgY29uc3QgcHJpbnRlciA9IHsNCiAgICAgICAgICAgICAgICBjcGw6IE51bWJlcihjcGwudGV4dENvbnRlbnQpLA0KICAgICAgICAgICAgICAgIGVuY29kaW5nOiBlbmNvZGluZ1tsYW5nLnZhbHVlXSwNCiAgICAgICAgICAgICAgICBzcGFjaW5nOiBsaW5lc3BhY2UuY2hlY2tlZA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGNvbnN0IHN2ZyA9IHJlY2VpcHRsaW5lLnRyYW5zZm9ybShlZGl0LnZhbHVlLCBwcmludGVyKTsNCiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICBhLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbIGJvbSwgc3ZnIF0sIHsgdHlwZTogJ2ltYWdlL3N2Zyt4bWwnIH0pKTsNCiAgICAgICAgICAgIGEuZG93bmxvYWQgPSAncmVjZWlwdGxpbmUuc3ZnJzsNCiAgICAgICAgICAgIGEuY2xpY2soKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBjbG9zZSB0aGUgZGlhbG9nIGJveA0KICAgICAgICBzYXZlZGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIHNhdmUgY2FuY2VsIGV2ZW50IGxpc3RlbmVyDQogICAgc2F2ZWNhbmNlbC5vbmNsaWNrID0gZXZlbnQgPT4gc2F2ZWRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgLy8gcmVnaXN0ZXIgem9vbSBzbGlkZSBiYXIgZXZlbnQgbGlzdGVuZXINCiAgICB6b29tLm9uaW5wdXQgPSBldmVudCA9PiBlZGl0LnN0eWxlLmZvbnRTaXplID0gem9vbS52YWx1ZSArICdweCc7DQoNCiAgICAvLyByZWdpc3RlciBpbWFnZSBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBpbWcub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgLy8gc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBpbWdib3guc3R5bGUubGVmdCA9IGV2ZW50LnBhZ2VYICsgJ3B4JzsNCiAgICAgICAgaW1nYm94LnN0eWxlLnRvcCA9IGV2ZW50LnBhZ2VZICsgJ3B4JzsNCiAgICAgICAgLy8gb3BlbiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBpbWdkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIGltYWdlIHByZXZpZXcgZXZlbnQgbGlzdGVuZXINCiAgICBsZXQgaW1hZ2UgPSAnJzsNCiAgICBpbWdmaWxlLm9uY2xpY2sgPSBldmVudCA9PiBpbWdmaWxlLnZhbHVlID0gJyc7DQogICAgaW1nZmlsZS5vbmNoYW5nZSA9IGV2ZW50ID0+IHsNCiAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgaWYgKGZpbGUpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZXZlbnQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGltID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICAgICAgaW0ub25sb2FkID0gZXZlbnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBwcmV2aWV3IGltYWdlDQogICAgICAgICAgICAgICAgICAgIGltZ3ZpZXcud2lkdGggPSBpbS53aWR0aDsNCiAgICAgICAgICAgICAgICAgICAgaW1ndmlldy5oZWlnaHQgPSBpbS5oZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgIGltZ3ZpZXcuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW0sIDAsIDApOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgaW0uc3JjID0gcmVhZGVyLnJlc3VsdDsNCiAgICAgICAgICAgICAgICBpbWFnZSA9IHJlYWRlci5yZXN1bHQucmVwbGFjZSgvXmRhdGE6aW1hZ2VcL3BuZztiYXNlNjQsKC4qKSQvLCAnJDEnKTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvLyByZWdpc3RlciBpbWFnZSBvayBldmVudCBsaXN0ZW5lcg0KICAgIGltZ29rLm9uY2xpY2sgPSBldmVudCA9PiB7DQogICAgICAgIC8vIGluc2VydCBpbWFnZQ0KICAgICAgICBpbnNlcnRUZXh0KGVkaXQsIGB7aW1hZ2U6JHtpbWFnZX19YCwgdHJ1ZSk7DQogICAgICAgIC8vIGNsb3NlIHRoZSBkaWFsb2cgYm94DQogICAgICAgIGltZ2RpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH07DQoNCiAgICAvLyByZWdpc3RlciBpbWFnZSBjYW5jZWwgZXZlbnQgbGlzdGVuZXINCiAgICBpbWdjYW5jZWwub25jbGljayA9IGV2ZW50ID0+IGltZ2RpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgLy8gcmVnaXN0ZXIgYmFyY29kZSBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBiYXIub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgLy8gc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBiYXJib3guc3R5bGUubGVmdCA9IGV2ZW50LnBhZ2VYICsgJ3B4JzsNCiAgICAgICAgYmFyYm94LnN0eWxlLnRvcCA9IGV2ZW50LnBhZ2VZICsgJ3B4JzsNCiAgICAgICAgLy8gb3BlbiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBiYXJkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIGJhcmNvZGUgb2sgZXZlbnQgbGlzdGVuZXINCiAgICBiYXJvay5vbmNsaWNrID0gZXZlbnQgPT4gew0KICAgICAgICBjb25zdCBjb2RlID0gYmFyZGF0YS52YWx1ZS5yZXBsYWNlKC9bXFx8e307XS9nLCAnXFwkJicpOw0KICAgICAgICBjb25zdCBvcHRpb24gPSBbYmFydHlwZS52YWx1ZSwgYmFyd2lkdGgudmFsdWUsIGJhcmhlaWdodC52YWx1ZSwgYmFyaHJpLmNoZWNrZWQgPyAnaHJpJyA6ICdub2hyaSddOw0KICAgICAgICAvLyBpbnNlcnQgYmFyY29kZQ0KICAgICAgICBpbnNlcnRUZXh0KGVkaXQsIGB7Y29kZToke2NvZGV9OyBvcHRpb246JHtvcHRpb259fWAsIHRydWUpOw0KICAgICAgICAvLyBjbG9zZSB0aGUgZGlhbG9nIGJveA0KICAgICAgICBiYXJkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9Ow0KDQogICAgLy8gcmVnaXN0ZXIgYmFyY29kZSBjYW5jZWwgZXZlbnQgbGlzdGVuZXINCiAgICBiYXJjYW5jZWwub25jbGljayA9IGV2ZW50ID0+IGJhcmRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgLy8gcmVnaXN0ZXIgMkQgY29kZSBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBxci5vbmNsaWNrID0gZXZlbnQgPT4gew0KICAgICAgICAvLyBzZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBkaWFsb2cgYm94DQogICAgICAgIHFyYm94LnN0eWxlLmxlZnQgPSBldmVudC5wYWdlWCArICdweCc7DQogICAgICAgIHFyYm94LnN0eWxlLnRvcCA9IGV2ZW50LnBhZ2VZICsgJ3B4JzsNCiAgICAgICAgLy8gb3BlbiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBxcmRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9Ow0KDQogICAgLy8gcmVnaXN0ZXIgMkQgY29kZSBvayBldmVudCBsaXN0ZW5lcg0KICAgIHFyb2sub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgY29uc3QgY29kZSA9IHFyZGF0YS52YWx1ZS5yZXBsYWNlKC9bXFx8e307XS9nLCAnXFwkJicpOw0KICAgICAgICBjb25zdCBvcHRpb24gPSBbcXJ0eXBlLnZhbHVlLCBxcmNlbGwudmFsdWUsIHFybGV2ZWwudmFsdWVdOw0KICAgICAgICAvLyBpbnNlcnQgMkQgY29kZQ0KICAgICAgICBpbnNlcnRUZXh0KGVkaXQsIGB7Y29kZToke2NvZGV9OyBvcHRpb246JHtvcHRpb259fWAsIHRydWUpOw0KICAgICAgICAvLyBjbG9zZSB0aGUgZGlhbG9nIGJveA0KICAgICAgICBxcmRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH07DQoNCiAgICAvLyByZWdpc3RlciAyRCBjb2RlIGNhbmNlbCBldmVudCBsaXN0ZW5lcg0KICAgIHFyY2FuY2VsLm9uY2xpY2sgPSBldmVudCA9PiBxcmRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgLy8gcmVnaXN0ZXIgZm9ybWF0dGluZyBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBmb3JtYXQub25jbGljayA9IGV2ZW50ID0+IHsNCiAgICAgICAgLy8gc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBmb3JtYXRib3guc3R5bGUubGVmdCA9IGV2ZW50LnBhZ2VYICsgJ3B4JzsNCiAgICAgICAgZm9ybWF0Ym94LnN0eWxlLnRvcCA9IGV2ZW50LnBhZ2VZICsgJ3B4JzsNCiAgICAgICAgLy8gb3BlbiB0aGUgZGlhbG9nIGJveA0KICAgICAgICBmb3JtYXRkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIGZvcm1hdHRpbmcgb2sgZXZlbnQgbGlzdGVuZXINCiAgICBmb3JtYXRvay5vbmNsaWNrID0gZXZlbnQgPT4gew0KICAgICAgICBsZXQgcHJvcGVydHkgPSBbXTsNCiAgICAgICAgY29uc3Qgd2lkdGggPSBmb3JtYXR3aWR0aC52YWx1ZS5yZXBsYWNlKC9bXFx8e307XS9nLCAnXFwkJicpOw0KICAgICAgICBjb25zdCBib3JkZXIgPSBmb3JtYXRib3JkZXIudmFsdWU7DQogICAgICAgIGNvbnN0IHRleHQgPSBmb3JtYXR0ZXh0LnZhbHVlOw0KICAgICAgICBjb25zdCBhbGlnbiA9IGZvcm1hdGFsaWduLnZhbHVlOw0KICAgICAgICBpZiAod2lkdGgubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgcHJvcGVydHkucHVzaChgd2lkdGg6JHt3aWR0aH1gKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYm9yZGVyLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHByb3BlcnR5LnB1c2goYGJvcmRlcjoke2JvcmRlcn1gKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGV4dC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBwcm9wZXJ0eS5wdXNoKGB0ZXh0OiR7dGV4dH1gKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYWxpZ24ubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgcHJvcGVydHkucHVzaChgYWxpZ246JHthbGlnbn1gKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBpbnNlcnQgZm9ybWF0dGluZw0KICAgICAgICBpbnNlcnRUZXh0KGVkaXQsIGB7JHtwcm9wZXJ0eS5qb2luKCc7ICcpfX1gLCB0cnVlKTsNCiAgICAgICAgLy8gY2xvc2UgdGhlIGRpYWxvZyBib3gNCiAgICAgICAgZm9ybWF0ZGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIGZvcm1hdHRpbmcgY2FuY2VsIGV2ZW50IGxpc3RlbmVyDQogICAgZm9ybWF0Y2FuY2VsLm9uY2xpY2sgPSBldmVudCA9PiBmb3JtYXRkaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgIC8vIHJlZ2lzdGVyIGNvbHVtbiBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBjb2wub25jbGljayA9IGV2ZW50ID0+IGluc2VydFRleHQoZWRpdCwgJ3wnKTsNCg0KICAgIC8vIHJlZ2lzdGVyIGhvcml6b250YWwgcnVsZSBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBoci5vbmNsaWNrID0gZXZlbnQgPT4gaW5zZXJ0VGV4dChlZGl0LCAnLScsIHRydWUpOw0KDQogICAgLy8gcmVnaXN0ZXIgcGFwZXIgY3V0IGJ1dHRvbiBldmVudCBsaXN0ZW5lcg0KICAgIGN1dC5vbmNsaWNrID0gZXZlbnQgPT4gaW5zZXJ0VGV4dChlZGl0LCAnPScsIHRydWUpOw0KDQogICAgLy8gcmVnaXN0ZXIgdW5kZXJsaW5lIGJ1dHRvbiBldmVudCBsaXN0ZW5lcg0KICAgIHVsLm9uY2xpY2sgPSBldmVudCA9PiBpbnNlcnRUZXh0KGVkaXQsICdfJyk7DQoNCiAgICAvLyByZWdpc3RlciBlbXBoYXNpcyBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICBlbS5vbmNsaWNrID0gZXZlbnQgPT4gaW5zZXJ0VGV4dChlZGl0LCAnIicpOw0KDQogICAgLy8gcmVnaXN0ZXIgaW52ZXJ0IGJ1dHRvbiBldmVudCBsaXN0ZW5lcg0KICAgIGl2Lm9uY2xpY2sgPSBldmVudCA9PiBpbnNlcnRUZXh0KGVkaXQsICdgJyk7DQoNCiAgICAvLyByZWdpc3RlciBzY2FsZSB1cCBidXR0b24gZXZlbnQgbGlzdGVuZXINCiAgICB3aC5vbmNsaWNrID0gZXZlbnQgPT4gaW5zZXJ0VGV4dChlZGl0LCAnXicpOw0KDQogICAgLy8gcmVnaXN0ZXIgbGFuZ3VhZ2Ugc2VsZWN0Ym94IGV2ZW50IGxpc3RlbmVyDQogICAgbGFuZy5vbmNoYW5nZSA9IGV2ZW50ID0+IGVkaXQub25pbnB1dCgpOw0KDQogICAgLy8gcmVnaXN0ZXIgd2lkdGggc2xpZGViYXIgZXZlbnQgbGlzdGVuZXINCiAgICBsaW5ld2lkdGgub25pbnB1dCA9IGV2ZW50ID0+IHsNCiAgICAgICAgaWYgKGxhbmRzY2FwZS5jaGVja2VkKSB7DQogICAgICAgICAgICBwcmludGFyZWEuc3R5bGUud2lkdGggPSAnNTc2cHgnOw0KICAgICAgICAgICAgcHJpbnRhcmVhLnN0eWxlLmhlaWdodCA9IGxpbmV3aWR0aC52YWx1ZSArICdweCc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwcmludGFyZWEuc3R5bGUud2lkdGggPSBsaW5ld2lkdGgudmFsdWUgKyAncHgnOw0KICAgICAgICAgICAgcHJpbnRhcmVhLnN0eWxlLmhlaWdodCA9ICdhdXRvJzsNCiAgICAgICAgfQ0KICAgICAgICBkb3RzLnRleHRDb250ZW50ID0gbGluZXdpZHRoLnZhbHVlOw0KICAgICAgICBjcGwudGV4dENvbnRlbnQgPSBsaW5ld2lkdGgudmFsdWUgLyBjaGFyV2lkdGg7DQogICAgICAgIC8vIHVwZGF0ZSByZWNlaXB0DQogICAgICAgIGVkaXQub25pbnB1dCgpOw0KICAgIH07DQoNCiAgICAvLyByZWdpc3RlciBsYW5kc2NhcGUgY2hlY2tib3ggZXZlbnQgbGlzdGVuZXINCiAgICBsYW5kc2NhcGUub25jaGFuZ2UgPSBldmVudCA9PiB7DQogICAgICAgIGlmIChsYW5kc2NhcGUuY2hlY2tlZCkgew0KICAgICAgICAgICAgbGluZXdpZHRoLm1pbiA9IDU3NjsNCiAgICAgICAgICAgIGxpbmV3aWR0aC5tYXggPSAxMTUyOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgbGluZXdpZHRoLm1pbiA9IDI4ODsNCiAgICAgICAgICAgIGxpbmV3aWR0aC5tYXggPSA1NzY7DQogICAgICAgIH0NCiAgICAgICAgLy8gdXBkYXRlIHdpZHRoIHNsaWRlYmFyDQogICAgICAgIGxpbmV3aWR0aC52YWx1ZSA9IDU3NjsNCiAgICAgICAgbGluZXdpZHRoLm9uaW5wdXQoKTsNCiAgICB9Ow0KDQogICAgLy8gcmVnaXN0ZXIgc3BhY2luZyBjaGVja2JveCBldmVudCBsaXN0ZW5lcg0KICAgIGxpbmVzcGFjZS5vbmNoYW5nZSA9IGV2ZW50ID0+IGVkaXQub25pbnB1dCgpOw0KDQogICAgLy8gcmVnaXN0ZXIgaW5wdXQgZXZlbnQgbGlzdGVuZXINCiAgICBlZGl0Lm9uaW5wdXQgPSBldmVudCA9PiB7DQogICAgICAgIGNvbnN0IHByaW50ZXIgPSB7DQogICAgICAgICAgICBjcGw6IE51bWJlcihjcGwudGV4dENvbnRlbnQpLA0KICAgICAgICAgICAgZW5jb2Rpbmc6IGVuY29kaW5nW2xhbmcudmFsdWVdLA0KICAgICAgICAgICAgc3BhY2luZzogbGluZXNwYWNlLmNoZWNrZWQNCiAgICAgICAgfTsNCiAgICAgICAgY29uc3Qgc3ZnID0gcmVjZWlwdGxpbmUudHJhbnNmb3JtKGVkaXQudmFsdWUsIHByaW50ZXIpOw0KICAgICAgICBjb25zdCBkb20gPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN2ZywgJ2ltYWdlL3N2Zyt4bWwnKS5kb2N1bWVudEVsZW1lbnQ7DQogICAgICAgIGlmIChsYW5kc2NhcGUuY2hlY2tlZCkgew0KICAgICAgICAgICAgZG9tLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICd0b3AgbGVmdCc7DQogICAgICAgICAgICBkb20uc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZVgoLSR7bGluZXdpZHRoLnZhbHVlfXB4KWA7DQogICAgICAgIH0NCiAgICAgICAgd2hpbGUgKHByaW50YXJlYS5oYXNDaGlsZE5vZGVzKCkpIHsNCiAgICAgICAgICAgIHByaW50YXJlYS5yZW1vdmVDaGlsZChwcmludGFyZWEuZmlyc3RDaGlsZCk7DQogICAgICAgIH0NCiAgICAgICAgcHJpbnRhcmVhLmFwcGVuZENoaWxkKGRvbSk7DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIHByaW50ZXIgdGV4dCBib3ggZXZlbnQgbGlzdGVuZXINCiAgICBwcmludGVyaWQub25pbnB1dCA9IGV2ZW50ID0+IHsNCiAgICAgICAgaWYgKC9eXHcrJC8udGVzdChwcmludGVyaWQudmFsdWUpKSB7DQogICAgICAgICAgICBwcmludGVyaWQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpOw0KICAgICAgICAgICAgc2VuZC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcHJpbnRlcmlkLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQnKTsNCiAgICAgICAgICAgIHNlbmQuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vIHJlZ2lzdGVyIHNlbmQgYnV0dG9uIGV2ZW50IGxpc3RlbmVyDQogICAgc2VuZC5vbmNsaWNrID0gZXZlbnQgPT4gew0KICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCiAgICAgICAgeGhyLm9wZW4oIlBPU1QiLCBwcmludGVyaWQudmFsdWUpOw0KICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgInRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLTgiKTsNCiAgICAgICAgeGhyLm9ubG9hZCA9IGUgPT4gYWxlcnQoYCR7eGhyLnN0YXR1c30gJHt4aHIuc3RhdHVzVGV4dH0gJHt4aHIucmVzcG9uc2VUZXh0fWApOw0KICAgICAgICB4aHIub25hYm9ydCA9IGUgPT4gYWxlcnQoZS50eXBlKTsNCiAgICAgICAgeGhyLm9uZXJyb3IgPSBlID0+IGFsZXJ0KGUudHlwZSk7DQogICAgICAgIHhoci5vbnRpbWVvdXQgPSBlID0+IGFsZXJ0KGUudHlwZSk7DQogICAgICAgIHhoci50aW1lb3V0ID0gMzAwMDAwOw0KICAgICAgICB4aHIuc2VuZChlZGl0LnZhbHVlKTsNCiAgICB9Ow0KDQogICAgLy8gcmVkdWNlIHJhaWxyb2FkIGRpYWdyYW0gdG8gNzUlDQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZmlndXJlIGltZycpLmZvckVhY2goZWwgPT4gZWwud2lkdGggKj0gLjc1KTsNCg0KICAgIC8vIHJlZ2lzdGVyIGJlZm9yZSB1bmxvYWQgZXZlbnQgbGlzdGVuZXINCiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBldmVudCA9PiBldmVudC5yZXR1cm5WYWx1ZSA9ICcnOw0KDQogICAgLy8gcXVlcnkgc3RyaW5nIG9mIFVSTA0KICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7DQogICAgLy8gem9vbQ0KICAgIGNvbnN0IHogPSBwYXJhbXMuZ2V0KCd6Jyk7DQogICAgaWYgKC9eLT9bMC01XSQvLnRlc3QoeikpIHsNCiAgICAgICAgem9vbS52YWx1ZSA9IE51bWJlcih6KSAqIDIgKyAyMDsNCiAgICAgICAgem9vbS5vbmlucHV0KCk7DQogICAgfQ0KICAgIC8vIGxhbmd1YWdlDQogICAgY29uc3QgbCA9IHBhcmFtcy5oYXMoJ2wnKSA/IHBhcmFtcy5nZXQoJ2wnKSA6IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2U7DQogICAgc3dpdGNoIChsLnNsaWNlKDAsIDIpKSB7DQogICAgICAgIGNhc2UgJ2phJzoNCiAgICAgICAgICAgIGxhbmcudmFsdWUgPSAnamEnOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3poJzoNCiAgICAgICAgICAgIGxhbmcudmFsdWUgPSAvXnpoLSh0d3xoa3xtb3xoYW50KS9pLnRlc3QobCkgPyAnemgtSGFudCcgOiAnemgtSGFucyc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAna28nOg0KICAgICAgICAgICAgbGFuZy52YWx1ZSA9ICdrbyc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAndGgnOg0KICAgICAgICAgICAgbGFuZy52YWx1ZSA9ICd0aCc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgIGxhbmcudmFsdWUgPSAnLSc7DQogICAgICAgICAgICBicmVhazsNCiAgICB9DQogICAgLy8gbGluZXNwYWNlDQogICAgaWYgKHBhcmFtcy5nZXQoJ3MnKSA9PT0gJzEnKSB7DQogICAgICAgIGxpbmVzcGFjZS5jaGVja2VkID0gdHJ1ZTsNCiAgICB9DQogICAgLy8gbGFuZHNjYXBlDQogICAgaWYgKHBhcmFtcy5nZXQoJ3YnKSA9PT0gJzEnKSB7DQogICAgICAgIGxhbmRzY2FwZS5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgbGluZXdpZHRoLm1pbiA9IDU3NjsNCiAgICAgICAgbGluZXdpZHRoLm1heCA9IDExNTI7DQogICAgfQ0KICAgIC8vIGxpbmV3aWR0aA0KICAgIGNvbnN0IGMgPSBwYXJhbXMuZ2V0KCdjJyk7DQogICAgaWYgKC9eKDJbNC05XXxbMy04XVxkfDlbMC02XSkkLy50ZXN0KGMpKSB7DQogICAgICAgIGxpbmV3aWR0aC52YWx1ZSA9IE51bWJlcihjKSAqIDEyOw0KICAgIH0NCiAgICAvLyBwcmludGVyaWQNCiAgICBpZiAocGFyYW1zLmhhcygncCcpKSB7DQogICAgICAgIHByaW50ZXJpZC52YWx1ZSA9IHBhcmFtcy5nZXQoJ3AnKTsNCiAgICAgICAgcHJpbnRlcmlkLm9uaW5wdXQoKTsNCiAgICB9DQogICAgLy8gZGF0YQ0KICAgIGlmIChwYXJhbXMuaGFzKCdkJykpIHsNCiAgICAgICAgZWRpdC52YWx1ZSA9IHBhcmFtcy5nZXQoJ2QnKTsNCiAgICB9DQogICAgLy8gaW5pdGlhbGl6ZSByZWNlaXB0DQogICAgbGluZXdpZHRoLm9uaW5wdXQoKTsNCn0NCg0KZnVuY3Rpb24gaW5zZXJ0VGV4dChlZGl0LCB0ZXh0LCBsZikgew0KICAgIC8vIGdldCBmb2N1cw0KICAgIGVkaXQuZm9jdXMoKTsNCiAgICAvLyBnZXQgY2FyZXQNCiAgICBjb25zdCBwID0gZWRpdC5zZWxlY3Rpb25TdGFydDsNCiAgICBjb25zdCBxID0gZWRpdC5zZWxlY3Rpb25FbmQ7DQogICAgLy8gdGV4dCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjYXJldA0KICAgIGxldCByID0gZWRpdC52YWx1ZS5zbGljZSgwLCBwKTsNCiAgICBsZXQgcyA9IGVkaXQudmFsdWUuc2xpY2UocSk7DQogICAgaWYgKGxmKSB7DQogICAgICAgIC8vIGFkZCBuZXdsaW5lIGlmIGNhcmV0IGlzIG5vdCBhdCB0aGUgdG9wIG9mIHRoZSBsaW5lDQogICAgICAgIGlmICgvW15cbl0kLy50ZXN0KHIpKSB7DQogICAgICAgICAgICB0ZXh0ID0gJ1xuJyArIHRleHQ7DQogICAgICAgIH0NCiAgICAgICAgLy8gYWRkIG5ld2xpbmUgaWYgY2FyZXQgaXMgbm90IGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUNCiAgICAgICAgaWYgKC9eW15cbl0vLnRlc3QocykpIHsNCiAgICAgICAgICAgIHRleHQgKz0gJ1xuJzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvLyBpbnNlcnQgdGV4dCBhdCBjYXJldA0KICAgIGVkaXQudmFsdWUgPSByICsgdGV4dCArIHM7DQogICAgLy8gc2V0IGNhcmV0DQogICAgZWRpdC5zZWxlY3Rpb25TdGFydCA9IGVkaXQuc2VsZWN0aW9uRW5kID0gcCArIHRleHQubGVuZ3RoOw0KICAgIC8vIHVwZGF0ZSByZWNlaXB0DQogICAgZWRpdC5vbmlucHV0KCk7DQp9DQo="></script>
    <script type="text/javascript" src="data:application/javascript;base64,LyoNCkNvcHlyaWdodCAyMDE5IE9wZW4gRm9vZHNlcnZpY2UgU3lzdGVtIENvbnNvcnRpdW0NCg0KTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQp5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCg0KICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KDQpVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQpkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQpTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQpsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiovDQoNCi8vIFFSIENvZGUgaXMgYSByZWdpc3RlcmVkIHRyYWRlbWFyayBvZiBERU5TTyBXQVZFIElOQ09SUE9SQVRFRC4NCg0KKGZ1bmN0aW9uICgpIHsNCg0KICAgIGxldCBpY29udiA9IHVuZGVmaW5lZDsNCiAgICBsZXQgUE5HID0gdW5kZWZpbmVkOw0KICAgIGxldCBzdHJlYW0gPSB1bmRlZmluZWQ7DQogICAgbGV0IGRlY29kZXIgPSB1bmRlZmluZWQ7DQogICAgbGV0IHFyY29kZSA9IHVuZGVmaW5lZDsNCiAgICAvLyBOb2RlLmpzDQogICAgaWYgKHR5cGVvZiByZXF1aXJlICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICBpY29udiA9IHJlcXVpcmUoJ2ljb252LWxpdGUnKTsNCiAgICAgICAgUE5HID0gcmVxdWlyZSgncG5nanMnKS5QTkc7DQogICAgICAgIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpOw0KICAgICAgICBkZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXInKTsNCiAgICAgICAgcXJjb2RlID0gcmVxdWlyZSgnLi9xcmNvZGUtZ2VuZXJhdG9yL3FyY29kZS5qcycpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRyYW5zZm9ybSBSZWNlaXB0TGluZSBkb2N1bWVudCB0byBwcmludGVyIGNvbW1hbmRzIG9yIFNWRyBpbWFnZXMuDQogICAgICogQHBhcmFtIHtzdHJpbmd9IGRvYyBSZWNlaXB0TGluZSBkb2N1bWVudA0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbcHJpbnRlcl0gcHJpbnRlciBjb25maWd1cmF0aW9uDQogICAgICogQHJldHVybnMge3N0cmluZ30gcHJpbnRlciBjb21tYW5kIG9yIFNWRyBpbWFnZQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZm9ybShkb2MsIHByaW50ZXIpIHsNCiAgICAgICAgLy8gd2ViIGJyb3dzZXINCiAgICAgICAgcXJjb2RlID0gcXJjb2RlIHx8IHdpbmRvdy5xcmNvZGU7DQogICAgICAgIC8vIGluaXRpYWxpemUgc3RhdGUgdmFyaWFibGVzDQogICAgICAgIGNvbnN0IHN0YXRlID0gew0KICAgICAgICAgICAgd3JhcDogdHJ1ZSwNCiAgICAgICAgICAgIGJvcmRlcjogMSwNCiAgICAgICAgICAgIHdpZHRoOiBbXSwNCiAgICAgICAgICAgIGFsaWduOiAxLA0KICAgICAgICAgICAgb3B0aW9uOiB7IHR5cGU6ICdjb2RlMTI4Jywgd2lkdGg6IDIsIGhlaWdodDogNzIsIGhyaTogZmFsc2UsIGNlbGw6IDMsIGxldmVsOiAnbCcgfSwNCiAgICAgICAgICAgIGxpbmU6ICd3YWl0aW5nJywNCiAgICAgICAgICAgIHJ1bGVzOiB7IGxlZnQ6IDAsIHdpZHRoOiAwLCByaWdodDogMCwgd2lkdGhzOiBbXSB9DQogICAgICAgIH07DQogICAgICAgIC8vIHZhbGlkYXRlIHByaW50ZXIgY29uZmlndXJhdGlvbg0KICAgICAgICBjb25zdCBwdHIgPSBwYXJzZU9wdGlvbihwcmludGVyKTsNCiAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHN0YXJ0IHByaW50aW5nDQogICAgICAgIGxldCByZXN1bHQgPSBwdHIuY29tbWFuZC5vcGVuKHB0cik7DQogICAgICAgIC8vIHN0cmlwIGJvbQ0KICAgICAgICBpZiAoZG9jWzBdID09PSAnXHVmZWZmJykgew0KICAgICAgICAgICAgZG9jID0gZG9jLnNsaWNlKDEpOw0KICAgICAgICB9DQogICAgICAgIC8vIHBhcnNlIGVhY2ggbGluZSBhbmQgZ2VuZXJhdGUgY29tbWFuZHMNCiAgICAgICAgY29uc3QgcmVzID0gZG9jLm5vcm1hbGl6ZSgpLnNwbGl0KC9cbnxcclxufFxyLykubWFwKGxpbmUgPT4gY3JlYXRlTGluZShwYXJzZUxpbmUobGluZSwgc3RhdGUpLCBwdHIsIHN0YXRlKSk7DQogICAgICAgIC8vIGlmIHJ1bGVzIGlzIG5vdCBmaW5pc2hlZA0KICAgICAgICBzd2l0Y2ggKHN0YXRlLmxpbmUpIHsNCiAgICAgICAgICAgIGNhc2UgJ3JlYWR5JzoNCiAgICAgICAgICAgICAgICAvLyBzZXQgc3RhdGUgdG8gY2FuY2VsIHJ1bGVzDQogICAgICAgICAgICAgICAgc3RhdGUubGluZSA9ICd3YWl0aW5nJzsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ3J1bm5pbmcnOg0KICAgICAgICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6DQogICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHN0b3AgcnVsZXMNCiAgICAgICAgICAgICAgICByZXMucHVzaChwdHIuY29tbWFuZC5ub3JtYWwoKSArDQogICAgICAgICAgICAgICAgICAgIHB0ci5jb21tYW5kLmFyZWEoc3RhdGUucnVsZXMubGVmdCwgc3RhdGUucnVsZXMud2lkdGgsIHN0YXRlLnJ1bGVzLnJpZ2h0KSArDQogICAgICAgICAgICAgICAgICAgIHB0ci5jb21tYW5kLmFsaWduKDApICsNCiAgICAgICAgICAgICAgICAgICAgcHRyLmNvbW1hbmQudnJzdG9wKHN0YXRlLnJ1bGVzLndpZHRocykgKw0KICAgICAgICAgICAgICAgICAgICBwdHIuY29tbWFuZC52cmxmKGZhbHNlKSk7DQogICAgICAgICAgICAgICAgc3RhdGUubGluZSA9ICd3YWl0aW5nJzsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgICAgLy8gZmxpcCB1cHNpZGUgZG93bg0KICAgICAgICBpZiAocHRyLnVwc2lkZURvd24pIHsNCiAgICAgICAgICAgIHJlcy5yZXZlcnNlKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzDQogICAgICAgIHJlc3VsdCArPSByZXMuam9pbignJyk7DQogICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBlbmQgcHJpbnRpbmcNCiAgICAgICAgcmVzdWx0ICs9IHB0ci5jb21tYW5kLmNsb3NlKCk7DQogICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ3JlYXRlIHRyYW5zZm9ybSBzdHJlYW0gdGhhdCBjb252ZXJ0cyBSZWNlaXB0TGluZSBkb2N1bWVudCB0byBwcmludGVyIGNvbW1hbmRzIG9yIFNWRyBpbWFnZXMuDQogICAgICogQHBhcmFtIHtvYmplY3R9IFtwcmludGVyXSBwcmludGVyIGNvbmZpZ3VyYXRpb24NCiAgICAgKiBAcmV0dXJucyB7c3RyZWFtLlRyYW5zZm9ybX0gdHJhbnNmb3JtIHN0cmVhbQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZm9ybShwcmludGVyKSB7DQogICAgICAgIC8vIGluaXRpYWxpemUgc3RhdGUgdmFyaWFibGVzDQogICAgICAgIGNvbnN0IHN0YXRlID0gew0KICAgICAgICAgICAgd3JhcDogdHJ1ZSwNCiAgICAgICAgICAgIGJvcmRlcjogMSwNCiAgICAgICAgICAgIHdpZHRoOiBbXSwNCiAgICAgICAgICAgIGFsaWduOiAxLA0KICAgICAgICAgICAgb3B0aW9uOiB7IHR5cGU6ICdjb2RlMTI4Jywgd2lkdGg6IDIsIGhlaWdodDogNzIsIGhyaTogZmFsc2UsIGNlbGw6IDMsIGxldmVsOiAnbCcgfSwNCiAgICAgICAgICAgIGxpbmU6ICd3YWl0aW5nJywNCiAgICAgICAgICAgIHJ1bGVzOiB7IGxlZnQ6IDAsIHdpZHRoOiAwLCByaWdodDogMCwgd2lkdGhzOiBbXSB9DQogICAgICAgIH07DQogICAgICAgIC8vIHZhbGlkYXRlIHByaW50ZXIgY29uZmlndXJhdGlvbg0KICAgICAgICBjb25zdCBwdHIgPSBwYXJzZU9wdGlvbihwcmludGVyKTsNCiAgICAgICAgLy8gY3JlYXRlIHRyYW5zZm9ybSBzdHJlYW0NCiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gbmV3IHN0cmVhbS5UcmFuc2Zvcm0oew0KICAgICAgICAgICAgY29uc3RydWN0KGNhbGxiYWNrKSB7DQogICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZQ0KICAgICAgICAgICAgICAgIHRoaXMuYm9tID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLmRlY29kZXIgPSBuZXcgZGVjb2Rlci5TdHJpbmdEZWNvZGVyKCd1dGY4Jyk7DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gJyc7DQogICAgICAgICAgICAgICAgdGhpcy5lbmNvZGluZyA9IC9eKHN2Z3x0ZXh0KSQvLnRlc3QocHJpbnRlci5jb21tYW5kKSA/ICd1dGY4JyA6ICdiaW5hcnknOw0KICAgICAgICAgICAgICAgIHRoaXMuX3B1c2ggPSBmdW5jdGlvbiAoY2h1bmspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaChjaHVuaywgdGhpcy5lbmNvZGluZyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gW107DQogICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHN0YXJ0IHByaW50aW5nDQogICAgICAgICAgICAgICAgdGhpcy5fcHVzaChwdHIuY29tbWFuZC5vcGVuKHB0cikpOw0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY2h1bmsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgKz0gdGhpcy5kZWNvZGVyLndyaXRlKGNodW5rKTsNCiAgICAgICAgICAgICAgICAvLyBzdHJpcCBib20NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib20pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVswXSA9PT0gJ1x1ZmVmZicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5zbGljZSgxKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmJvbSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBwYXJzZSBlYWNoIGxpbmUgYW5kIGdlbmVyYXRlIGNvbW1hbmRzDQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0aGlzLmRhdGEuc3BsaXQoL1xufFxyXG58XHIvKTsNCiAgICAgICAgICAgICAgICB3aGlsZSAobGluZXMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gY3JlYXRlTGluZShwYXJzZUxpbmUobGluZXMuc2hpZnQoKS5ub3JtYWxpemUoKSwgc3RhdGUpLCBwdHIsIHN0YXRlKTsNCiAgICAgICAgICAgICAgICAgICAgcHRyLnVwc2lkZURvd24gPyB0aGlzLmJ1ZmZlci5wdXNoKHMpIDogdGhpcy5fcHVzaChzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gbGluZXMuc2hpZnQoKTsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZsdXNoKGNhbGxiYWNrKSB7DQogICAgICAgICAgICAgICAgLy8gcGFyc2UgbGFzdCBsaW5lIGFuZCBnZW5lcmF0ZSBjb21tYW5kcw0KICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBjcmVhdGVMaW5lKHBhcnNlTGluZSh0aGlzLmRhdGEubm9ybWFsaXplKCksIHN0YXRlKSwgcHRyLCBzdGF0ZSk7DQogICAgICAgICAgICAgICAgcHRyLnVwc2lkZURvd24gPyB0aGlzLmJ1ZmZlci5wdXNoKHMpIDogdGhpcy5fcHVzaChzKTsNCiAgICAgICAgICAgICAgICAvLyBpZiBydWxlcyBpcyBub3QgZmluaXNoZWQNCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXRlLmxpbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVhZHknOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0YXRlIHRvIGNhbmNlbCBydWxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUubGluZSA9ICd3YWl0aW5nJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICdydW5uaW5nJzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY29tbWFuZHMgdG8gc3RvcCBydWxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHB0ci5jb21tYW5kLm5vcm1hbCgpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdHIuY29tbWFuZC5hcmVhKHN0YXRlLnJ1bGVzLmxlZnQsIHN0YXRlLnJ1bGVzLndpZHRoLCBzdGF0ZS5ydWxlcy5yaWdodCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB0ci5jb21tYW5kLmFsaWduKDApICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdHIuY29tbWFuZC52cnN0b3Aoc3RhdGUucnVsZXMud2lkdGhzKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHRyLmNvbW1hbmQudnJsZihmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwdHIudXBzaWRlRG93biA/IHRoaXMuYnVmZmVyLnB1c2gocykgOiB0aGlzLl9wdXNoKHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUubGluZSA9ICd3YWl0aW5nJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGZsaXAgdXBzaWRlIGRvd24NCiAgICAgICAgICAgICAgICBpZiAocHRyLnVwc2lkZURvd24pIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHVzaCh0aGlzLmJ1ZmZlci5yZXZlcnNlKCkuam9pbignJykpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY29tbWFuZHMgdG8gZW5kIHByaW50aW5nDQogICAgICAgICAgICAgICAgdGhpcy5fcHVzaChwdHIuY29tbWFuZC5jbG9zZSgpKTsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBWYWxpZGF0ZSBwcmludGVyIGNvbmZpZ3VyYXRpb24uDQogICAgICogQHBhcmFtIHtvYmplY3R9IHByaW50ZXIgcHJpbnRlciBjb25maWd1cmF0aW9uDQogICAgICogQHJldHVybnMge29iamVjdH0gdmFsaWRhdGVkIHByaW50ZXIgY29uZmlndXJhdGlvbg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHBhcnNlT3B0aW9uKHByaW50ZXIpIHsNCiAgICAgICAgLy8gdmFsaWRhdGUgcHJpbnRlciBjb25maWd1cmF0aW9uDQogICAgICAgIGNvbnN0IHAgPSBPYmplY3QuYXNzaWduKHt9LCBwcmludGVyKTsNCiAgICAgICAgcC5jcGwgPSBwLmNwbCB8fCA0ODsNCiAgICAgICAgcC5lbmNvZGluZyA9IC9eKGNwKDQzN3w4NVsyOF18ODZbMDM1Nl18MTI1Mnw5M1syNl18OTQ5fDk1MCl8bXVsdGlsaW5ndWFsfHNoaWZ0amlzfGdiMTgwMzB8a3NjNTYwMXxiaWc1fHRpczYyMCkkLy50ZXN0KHAuZW5jb2RpbmcpID8gcC5lbmNvZGluZyA6ICdjcDQzNyc7DQogICAgICAgIHAudXBzaWRlRG93biA9ICEhcC51cHNpZGVEb3duOw0KICAgICAgICBwLnNwYWNpbmcgPSAhIXAuc3BhY2luZzsNCiAgICAgICAgcC5jdXR0aW5nID0gJ2N1dHRpbmcnIGluIHAgPyAhIXAuY3V0dGluZyA6IHRydWU7DQogICAgICAgIHAubWFyZ2luID0gcC5tYXJnaW4gfHwgMDsNCiAgICAgICAgcC5tYXJnaW5SaWdodCA9IHAubWFyZ2luUmlnaHQgfHwgMDsNCiAgICAgICAgcC5ncmFkaWVudCA9ICdncmFkaWVudCcgaW4gcCA/ICEhcC5ncmFkaWVudCA6IHRydWU7DQogICAgICAgIHAuZ2FtbWEgPSBwLmdhbW1hIHx8IDEuODsNCiAgICAgICAgcC50aHJlc2hvbGQgPSBwLnRocmVzaG9sZCB8fCAxMjg7DQogICAgICAgIHAuY29tbWFuZCA9IE9iamVjdC5hc3NpZ24oe30sICh0eXBlb2YgcC5jb21tYW5kICE9PSAnb2JqZWN0JyA/IGNvbW1hbmRzW3AuY29tbWFuZF0gOiBwLmNvbW1hbmQpIHx8IGNvbW1hbmRzLnN2Zyk7DQogICAgICAgIHJldHVybiBwOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFBhcnNlIGxpbmVzLg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2x1bW5zIGxpbmUgdGV4dCB3aXRob3V0IGxpbmUgYnJlYWtzDQogICAgICogQHBhcmFtIHtvYmplY3R9IHN0YXRlIHN0YXRlIHZhcmlhYmxlcw0KICAgICAqIEByZXR1cm5zIHtvYmplY3R9IHBhcnNlZCBsaW5lIG9iamVjdA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHBhcnNlTGluZShjb2x1bW5zLCBzdGF0ZSkgew0KICAgICAgICAvLyBleHRyYWN0IGNvbHVtbnMNCiAgICAgICAgY29uc3QgbGluZSA9IGNvbHVtbnMNCiAgICAgICAgICAgIC8vIHRyaW0gd2hpdGVzcGFjZQ0KICAgICAgICAgICAgLnJlcGxhY2UoL15bXHQgXSt8W1x0IF0rJC9nLCAnJykNCiAgICAgICAgICAgIC8vIGNvbnZlcnQgZXNjYXBlIGNoYXJhY3RlcnMgKCdcXCcsICdceycsICdcfCcsICdcfScpIHRvIGhleGFkZWNpbWFsIGVzY2FwZSBjaGFyYWN0ZXJzDQogICAgICAgICAgICAucmVwbGFjZSgvXFxbXFx7fH1dL2csIG1hdGNoID0+ICdcXHgnICsgbWF0Y2guY2hhckNvZGVBdCgxKS50b1N0cmluZygxNikpDQogICAgICAgICAgICAvLyBhcHBlbmQgYSBzcGFjZSBpZiB0aGUgZmlyc3QgY29sdW1uIGRvZXMgbm90IHN0YXJ0IHdpdGggJ3wnIGFuZCBpcyByaWdodC1hbGlnbmVkDQogICAgICAgICAgICAucmVwbGFjZSgvXltefF0qW15cdCB8XVx8LywgJyAkJicpDQogICAgICAgICAgICAvLyBhcHBlbmQgYSBzcGFjZSBpZiB0aGUgbGFzdCBjb2x1bW4gZG9lcyBub3QgZW5kIHdpdGggJ3wnIGFuZCBpcyBsZWZ0LWFsaWduZWQNCiAgICAgICAgICAgIC5yZXBsYWNlKC9cfFteXHQgfF1bXnxdKiQvLCAnJCYgJykNCiAgICAgICAgICAgIC8vIHJlbW92ZSAnfCcgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZmlyc3QgY29sdW1uDQogICAgICAgICAgICAucmVwbGFjZSgvXlx8KC4qKSQvLCAnJDEnKQ0KICAgICAgICAgICAgLy8gcmVtb3ZlICd8JyBhdCB0aGUgZW5kIG9mIHRoZSBsYXN0IGNvbHVtbg0KICAgICAgICAgICAgLnJlcGxhY2UoL14oLiopXHwkLywgJyQxJykNCiAgICAgICAgICAgIC8vIHNlcGFyYXRlIHRleHQgd2l0aCAnfCcNCiAgICAgICAgICAgIC5zcGxpdCgnfCcpDQogICAgICAgICAgICAvLyBwYXJzZSBjb2x1bW5zDQogICAgICAgICAgICAubWFwKChjb2x1bW4sIGluZGV4LCBhcnJheSkgPT4gew0KICAgICAgICAgICAgICAgIC8vIHBhcnNlZCBjb2x1bW4gb2JqZWN0DQogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHt9Ow0KICAgICAgICAgICAgICAgIC8vIHRyaW0gd2hpdGVzcGFjZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjb2x1bW4ucmVwbGFjZSgvXltcdCBdK3xbXHQgXSskL2csICcnKTsNCiAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbiBhbGlnbm1lbnQgZnJvbSB3aGl0ZXNwYWNlcyBhcm91bmQgY29sdW1uIHRleHQNCiAgICAgICAgICAgICAgICByZXN1bHQuYWxpZ24gPSAxICsgTnVtYmVyKC9eW1x0IF0vLnRlc3QoY29sdW1uKSkgLSBOdW1iZXIoL1tcdCBdJC8udGVzdChjb2x1bW4pKTsNCiAgICAgICAgICAgICAgICAvLyBwYXJzZSBwcm9wZXJ0aWVzDQogICAgICAgICAgICAgICAgaWYgKC9eXHtbXnt9XSpcfSQvLnRlc3QoZWxlbWVudCkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gZXh0cmFjdCBtZW1iZXJzDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wcm9wZXJ0eSA9IGVsZW1lbnQNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaW0gcHJvcGVydHkgZGVsaW1pdGVycw0KICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDEsIC0xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydCBlc2NhcGUgY2hhcmFjdGVyICgnXDsnKSB0byBoZXhhZGVjaW1hbCBlc2NhcGUgY2hhcmFjdGVycw0KICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcOy9nLCAnXFx4M2InKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VwYXJhdGUgcHJvcGVydHkgd2l0aCAnOycNCiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgnOycpDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXJzZSBtZW1iZXJzDQogICAgICAgICAgICAgICAgICAgICAgICAucmVkdWNlKChvYmosIG1lbWJlcikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFiYnJldmlhdGlvbnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhYmJyID0geyBhOiAnYWxpZ24nLCBiOiAnYm9yZGVyJywgYzogJ2NvZGUnLCBpOiAnaW1hZ2UnLCBvOiAnb3B0aW9uJywgdDogJ3RleHQnLCB3OiAnd2lkdGgnLCB4OiAnY29tbWFuZCcsIF86ICdjb21tZW50JyB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGtleS12YWx1ZSBwYWlyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEvXltcdCBdKiQvLnRlc3QobWVtYmVyKSAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXIucmVwbGFjZSgvXltcdCBdKihbQS1aYS16X11cdyopW1x0IF0qOltcdCBdKihbXlx0IF0uKj8pW1x0IF0qJC8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWF0Y2gsIGtleSwgdmFsdWUpID0+IG9ialtrZXkucmVwbGFjZSgvXlthYmNpb3R3eF9dJC8sIG0gPT4gYWJiclttXSldID0gcGFyc2VFc2NhcGUodmFsdWUucmVwbGFjZSgvXFxuL2csICdcbicpKSkgPT09IG1lbWJlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnZhbGlkIG1lbWJlcnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm9yID0gZWxlbWVudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KTsNCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbHVtbiBpcyBzaW5nbGUNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFyc2UgdGV4dCBwcm9wZXJ0eQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCd0ZXh0JyBpbiByZXN1bHQucHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gcmVzdWx0LnByb3BlcnR5LnRleHQudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS53cmFwID0gIS9ebm93cmFwJC8udGVzdChjKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGJvcmRlciBwcm9wZXJ0eQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdib3JkZXInIGluIHJlc3VsdC5wcm9wZXJ0eSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSByZXN1bHQucHJvcGVydHkuYm9yZGVyLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9yZGVyID0geyAnbGluZSc6IC0xLCAnc3BhY2UnOiAxLCAnbm9uZSc6IDAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91cyA9IHN0YXRlLmJvcmRlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5ib3JkZXIgPSAvXihsaW5lfHNwYWNlfG5vbmUpJC8udGVzdChjKSA/IGJvcmRlcltjLnRvTG93ZXJDYXNlKCldIDogL15cZCskLy50ZXN0KGMpICYmIE51bWJlcihjKSA8PSAyID8gTnVtYmVyKGMpIDogMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCBydWxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91cyA+PSAwICYmIHN0YXRlLmJvcmRlciA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnZyID0gJysnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdG9wIHJ1bGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzIDwgMCAmJiBzdGF0ZS5ib3JkZXIgPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudnIgPSAnLSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFyc2Ugd2lkdGggcHJvcGVydHkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnd2lkdGgnIGluIHJlc3VsdC5wcm9wZXJ0eSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gcmVzdWx0LnByb3BlcnR5LndpZHRoLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1tcdCBdK3wsLyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUud2lkdGggPSB3aWR0aC5maW5kKGMgPT4gL15hdXRvJC8udGVzdChjKSkgPyBbXSA6IHdpZHRoLm1hcChjID0+IC9eXCokLy50ZXN0KGMpID8gLTEgOiAvXlxkKyQvLnRlc3QoYykgPyBOdW1iZXIoYykgOiAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGFsaWduIHByb3BlcnR5DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2FsaWduJyBpbiByZXN1bHQucHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gcmVzdWx0LnByb3BlcnR5LmFsaWduLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxpZ24gPSB7ICdsZWZ0JzogMCwgJ2NlbnRlcic6IDEsICdyaWdodCc6IDIgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hbGlnbiA9IC9eKGxlZnR8Y2VudGVyfHJpZ2h0KSQvLnRlc3QoYykgPyBhbGlnbltjLnRvTG93ZXJDYXNlKCldIDogMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIG9wdGlvbiBwcm9wZXJ0eQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdvcHRpb24nIGluIHJlc3VsdC5wcm9wZXJ0eSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHJlc3VsdC5wcm9wZXJ0eS5vcHRpb24udG9Mb3dlckNhc2UoKS5zcGxpdCgvW1x0IF0rfCwvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vcHRpb24gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IChvcHRpb24uZmluZChjID0+IC9eKHVwY3xlYW58amFufGNvZGUzOXxpdGZ8Y29kYWJhcnxudzd8Y29kZTkzfGNvZGUxMjh8cXJjb2RlKSQvLnRlc3QoYykpIHx8ICdjb2RlMTI4JyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIob3B0aW9uLmZpbmQoYyA9PiAvXlxkKyQvLnRlc3QoYykgJiYgTnVtYmVyKGMpID49IDIgJiYgTnVtYmVyKGMpIDw9IDQpIHx8ICcyJyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKG9wdGlvbi5maW5kKGMgPT4gL15cZCskLy50ZXN0KGMpICYmIE51bWJlcihjKSA+PSAyNCAmJiBOdW1iZXIoYykgPD0gMjQwKSB8fCAnNzInKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJpOiAhIW9wdGlvbi5maW5kKGMgPT4gL15ocmkkLy50ZXN0KGMpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogTnVtYmVyKG9wdGlvbi5maW5kKGMgPT4gL15cZCskLy50ZXN0KGMpICYmIE51bWJlcihjKSA+PSAzICYmIE51bWJlcihjKSA8PSA4KSB8fCAnMycpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogKG9wdGlvbi5maW5kKGMgPT4gL15bbG1xaF0kLy50ZXN0KGMpKSB8fCAnbCcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGNvZGUgcHJvcGVydHkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnY29kZScgaW4gcmVzdWx0LnByb3BlcnR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvZGUgPSBPYmplY3QuYXNzaWduKHsgZGF0YTogcmVzdWx0LnByb3BlcnR5LmNvZGUgfSwgc3RhdGUub3B0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGltYWdlIHByb3BlcnR5DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2ltYWdlJyBpbiByZXN1bHQucHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gcmVzdWx0LnByb3BlcnR5LmltYWdlLnJlcGxhY2UoLz0uKnxbXkEtWmEtejAtOSsvXS9nLCAnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjLmxlbmd0aCAlIDQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gYy5zbGljZSgwLCAtMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gYyArICc9PSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gYyArICc9JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGNvbW1hbmQgcHJvcGVydHkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnY29tbWFuZCcgaW4gcmVzdWx0LnByb3BlcnR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbW1hbmQgPSByZXN1bHQucHJvcGVydHkuY29tbWFuZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIGNvbW1lbnQgcHJvcGVydHkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnY29tbWVudCcgaW4gcmVzdWx0LnByb3BlcnR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbW1lbnQgPSByZXN1bHQucHJvcGVydHkuY29tbWVudDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaW52YWxpZCBwcm9wZXJ0eSBkZWxpbWl0ZXINCiAgICAgICAgICAgICAgICBlbHNlIGlmICgvW3t9XS8udGVzdChlbGVtZW50KSkgew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJyb3IgPSBlbGVtZW50Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBwYXJzZSBob3Jpem9udGFsIHJ1bGUgb2Ygc3BlY2lhbCBjaGFyYWN0ZXIgaW4gdGV4dA0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMSAmJiAvXi0rJHxePSskLy50ZXN0KGVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ociA9IGVsZW1lbnQuc2xpY2UoLTEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBwYXJzZSB0ZXh0DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC50ZXh0ID0gZWxlbWVudA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNvbnRyb2wgY29kZXMgYW5kIGhleGFkZWNpbWFsIGNvbnRyb2wgY29kZXMNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXHgwMC1ceDFmXHg3Zl18XFx4WzAxXVtcZEEtRmEtZl18XFx4N1tGZl0vZywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGVzY2FwZSBjaGFyYWN0ZXJzICgnXC0nLCAnXD0nLCAnXF8nLCAnXCInLCBcYCcsICdcXicsICdcficpIHRvIGhleGFkZWNpbWFsIGVzY2FwZSBjaGFyYWN0ZXJzDQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbLT1fImBefl0vZywgbWF0Y2ggPT4gJ1xceCcgKyBtYXRjaC5jaGFyQ29kZUF0KDEpLnRvU3RyaW5nKDE2KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgZXNjYXBlIGNoYXJhY3RlciAoJ1xuJykgdG8gTEYNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgZXNjYXBlIGNoYXJhY3RlciAoJ34nKSB0byBzcGFjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL34vZywgJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VwYXJhdGUgdGV4dCB3aXRoICdfJywgJyInLCAnYCcsICdeJygxIG9yIG1vcmUpLCAnXG4nDQogICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoLyhbXyJgXG5dfFxeKykvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydCBlc2NhcGUgY2hhcmFjdGVycyB0byBub3JtYWwgY2hhcmFjdGVycw0KICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh0ZXh0ID0+IHBhcnNlRXNjYXBlKHRleHQpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGV4dCB3cmFwcGluZw0KICAgICAgICAgICAgICAgIHJlc3VsdC53cmFwID0gc3RhdGUud3JhcDsNCiAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCBjb2x1bW4gYm9yZGVyDQogICAgICAgICAgICAgICAgcmVzdWx0LmJvcmRlciA9IHN0YXRlLmJvcmRlcjsNCiAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCBjb2x1bW4gd2lkdGgNCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUud2lkdGgubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIHNldCAnKicgZm9yIGFsbCBjb2x1bW5zIHdoZW4gdGhlIHdpZHRoIHByb3BlcnR5IGlzICdhdXRvJw0KICAgICAgICAgICAgICAgICAgICByZXN1bHQud2lkdGggPSAtMTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3RleHQnIGluIHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICAvLyB0ZXh0OiBzZXQgY29sdW1uIHdpZHRoDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC53aWR0aCA9IGluZGV4IDwgc3RhdGUud2lkdGgubGVuZ3RoID8gc3RhdGUud2lkdGhbaW5kZXhdIDogMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUud2lkdGguZmluZChjID0+IGMgPCAwKSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBpbWFnZSwgY29kZSwgY29tbWFuZDogd2hlbiB0aGUgd2lkdGggcHJvcGVydHkgaW5jbHVkZXMgJyonLCBzZXQgJyonDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC53aWR0aCA9IC0xOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gaW1hZ2UsIGNvZGUsIGNvbW1hbmQ6IHdoZW4gdGhlIHdpZHRoIHByb3BlcnR5IGRvZXMgbm90IGluY2x1ZGUgJyonLCBzZXQgdGhlIHN1bSBvZiBjb2x1bW4gd2lkdGggYW5kIGJvcmRlciB3aWR0aA0KICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gc3RhdGUud2lkdGguZmlsdGVyKGMgPT4gYyA+IDApOw0KICAgICAgICAgICAgICAgICAgICByZXN1bHQud2lkdGggPSB3Lmxlbmd0aCA+IDAgPyB3LnJlZHVjZSgoYSwgYykgPT4gYSArIGMsIHJlc3VsdC5ib3JkZXIgPCAwID8gdy5sZW5ndGggKyAxIDogKHcubGVuZ3RoIC0gMSkgKiByZXN1bHQuYm9yZGVyKSA6IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIHNldCBsaW5lIGFsaWdubWVudA0KICAgICAgICAgICAgICAgIHJlc3VsdC5hbGlnbm1lbnQgPSBzdGF0ZS5hbGlnbjsNCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgIC8vIGlmIHRoZSBsaW5lIGlzIHRleHQgYW5kIHRoZSB3aWR0aCBwcm9wZXJ0eSBpcyBub3QgJ2F1dG8nDQogICAgICAgIGlmIChsaW5lLmV2ZXJ5KGVsID0+ICd0ZXh0JyBpbiBlbCkgJiYgc3RhdGUud2lkdGgubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgLy8gaWYgdGhlIGxpbmUgaGFzIGZld2VyIGNvbHVtbnMNCiAgICAgICAgICAgIHdoaWxlIChsaW5lLmxlbmd0aCA8IHN0YXRlLndpZHRoLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIC8vIGZpbGwgZW1wdHkgY29sdW1ucw0KICAgICAgICAgICAgICAgIGxpbmUucHVzaCh7IGFsaWduOiAxLCB0ZXh0OiBbJyddLCB3cmFwOiBzdGF0ZS53cmFwLCBib3JkZXI6IHN0YXRlLmJvcmRlciwgd2lkdGg6IHN0YXRlLndpZHRoW2xpbmUubGVuZ3RoXSB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbGluZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBQYXJzZSBlc2NhcGUgY2hhcmFjdGVycy4NCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcnMgc3RyaW5nIGNvbnRhaW5pbmcgZXNjYXBlIGNoYXJhY3RlcnMNCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB1bmVzY2FwZWQgc3RyaW5nDQogICAgICovDQogICAgZnVuY3Rpb24gcGFyc2VFc2NhcGUoY2hhcnMpIHsNCiAgICAgICAgcmV0dXJuIGNoYXJzDQogICAgICAgICAgICAvLyByZW1vdmUgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2VzDQogICAgICAgICAgICAucmVwbGFjZSgvXFwkfFxceCguPyR8W15cZEEtRmEtZl0ufC5bXlxkQS1GYS1mXSkvZywgJycpDQogICAgICAgICAgICAvLyBpZ25vcmUgaW52YWxpZCBlc2NhcGUgY2hhcmFjdGVycw0KICAgICAgICAgICAgLnJlcGxhY2UoL1xcW154XS9nLCAnJykNCiAgICAgICAgICAgIC8vIGNvbnZlcnQgaGV4YWRlY2ltYWwgZXNjYXBlIGNoYXJhY3RlcnMgdG8gbm9ybWFsIGNoYXJhY3RlcnMNCiAgICAgICAgICAgIC5yZXBsYWNlKC9cXHgoW1xkQS1GYS1mXXsyfSkvZywgKG1hdGNoLCBoZXgpID0+IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LCAxNikpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBHZW5lcmF0ZSBjb21tYW5kcyBmcm9tIGxpbmUgb2JqZWN0cy4NCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbGluZSBwYXJzZWQgbGluZSBvYmplY3QNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJpbnRlciBwcmludGVyIGNvbmZpZ3VyYXRpb24NCiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3RhdGUgc3RhdGUgdmFyaWFibGVzDQogICAgICogQHJldHVybnMge3N0cmluZ30gcHJpbnRlciBjb21tYW5kIGZyYWdtZW50IG9yIFNWRyBpbWFnZSBmcmFnbWVudA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGNyZWF0ZUxpbmUobGluZSwgcHJpbnRlciwgc3RhdGUpIHsNCiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107DQogICAgICAgIC8vIHRleHQgb3IgcHJvcGVydHkNCiAgICAgICAgY29uc3QgdGV4dCA9IGxpbmUuZXZlcnkoZWwgPT4gJ3RleHQnIGluIGVsKTsNCiAgICAgICAgLy8gdGhlIGZpcnN0IGNvbHVtbg0KICAgICAgICBjb25zdCBjb2x1bW4gPSBsaW5lWzBdOw0KICAgICAgICAvLyByZW1vdmUgemVybyB3aWR0aCBjb2x1bW5zDQogICAgICAgIGxldCBjb2x1bW5zID0gbGluZS5maWx0ZXIoZWwgPT4gZWwud2lkdGggIT09IDApOw0KICAgICAgICAvLyByZW1vdmUgb3ZlcmZsb3dpbmcgY29sdW1ucw0KICAgICAgICBpZiAodGV4dCkgew0KICAgICAgICAgICAgY29sdW1ucyA9IGNvbHVtbnMuc2xpY2UoMCwgTWF0aC5mbG9vcihjb2x1bW4uYm9yZGVyIDwgMCA/IChwcmludGVyLmNwbCAtIDEpIC8gMiA6IChwcmludGVyLmNwbCArIGNvbHVtbi5ib3JkZXIpIC8gKGNvbHVtbi5ib3JkZXIgKyAxKSkpOw0KICAgICAgICB9DQogICAgICAgIC8vIGZpeGVkIGNvbHVtbnMNCiAgICAgICAgY29uc3QgZiA9IGNvbHVtbnMuZmlsdGVyKGVsID0+IGVsLndpZHRoID4gMCk7DQogICAgICAgIC8vIHZhcmlhYmxlIGNvbHVtbnMNCiAgICAgICAgY29uc3QgZyA9IGNvbHVtbnMuZmlsdGVyKGVsID0+IGVsLndpZHRoIDwgMCk7DQogICAgICAgIC8vIHJlc2VydmVkIHdpZHRoDQogICAgICAgIGxldCB1ID0gZi5yZWR1Y2UoKGEsIGVsKSA9PiBhICsgZWwud2lkdGgsIDApOw0KICAgICAgICAvLyBmcmVlIHdpZHRoDQogICAgICAgIGxldCB2ID0gcHJpbnRlci5jcGwgLSB1Ow0KICAgICAgICAvLyBzdWJ0cmFjdCBib3JkZXIgd2lkdGggZnJvbSBmcmVlIHdpZHRoDQogICAgICAgIGlmICh0ZXh0ICYmIGNvbHVtbnMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdiAtPSBjb2x1bW4uYm9yZGVyIDwgMCA/IGNvbHVtbnMubGVuZ3RoICsgMSA6IChjb2x1bW5zLmxlbmd0aCAtIDEpICogY29sdW1uLmJvcmRlcjsNCiAgICAgICAgfQ0KICAgICAgICAvLyBudW1iZXIgb2YgdmFyaWFibGUgY29sdW1ucw0KICAgICAgICBjb25zdCBuID0gZy5sZW5ndGg7DQogICAgICAgIC8vIHJlZHVjZSB0aGUgd2lkdGggb2YgZml4ZWQgY29sdW1ucyB3aGVuIHJlc2VydmVkIHdpZHRoIGlzIHRvbyBtYW55DQogICAgICAgIHdoaWxlIChuID4gdikgew0KICAgICAgICAgICAgZi5yZWR1Y2UoKGEsIGVsKSA9PiBhLndpZHRoID4gZWwud2lkdGggPyBhIDogZWwpLndpZHRoLS07DQogICAgICAgICAgICB2Kys7DQogICAgICAgIH0NCiAgICAgICAgLy8gYWxsb2NhdGUgZnJlZSB3aWR0aCBhbW9uZyB2YXJpYWJsZSBjb2x1bW5zDQogICAgICAgIGlmIChuID4gMCkgew0KICAgICAgICAgICAgZy5mb3JFYWNoKChlbCwgaSkgPT4gZWwud2lkdGggPSBNYXRoLmZsb29yKCh2ICsgaSkgLyBuKSk7DQogICAgICAgICAgICB2ID0gMDsNCiAgICAgICAgfQ0KICAgICAgICAvLyBwcmludCBhcmVhDQogICAgICAgIGNvbnN0IGxlZnQgPSBNYXRoLmZsb29yKHYgKiBjb2x1bW4uYWxpZ25tZW50IC8gMik7DQogICAgICAgIGNvbnN0IHdpZHRoID0gcHJpbnRlci5jcGwgLSB2Ow0KICAgICAgICBjb25zdCByaWdodCA9IHYgLSBsZWZ0Ow0KICAgICAgICAvLyBwcm9jZXNzIHRleHQNCiAgICAgICAgaWYgKHRleHQpIHsNCiAgICAgICAgICAgIC8vIHdyYXAgdGV4dA0KICAgICAgICAgICAgY29uc3QgY29scyA9IGNvbHVtbnMubWFwKGNvbHVtbiA9PiB3cmFwVGV4dChjb2x1bW4sIHByaW50ZXIpKTsNCiAgICAgICAgICAgIC8vIHZlcnRpY2FsIGxpbmUgc3BhY2luZw0KICAgICAgICAgICAgY29uc3Qgd2lkdGhzID0gY29sdW1ucy5tYXAoY29sdW1uID0+IGNvbHVtbi53aWR0aCk7DQogICAgICAgICAgICAvLyBydWxlcw0KICAgICAgICAgICAgc3dpdGNoIChzdGF0ZS5saW5lKSB7DQogICAgICAgICAgICAgICAgY2FzZSAncmVhZHknOg0KICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY29tbWFuZHMgdG8gc3RhcnQgcnVsZXMNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJpbnRlci5jb21tYW5kLm5vcm1hbCgpICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hcmVhKGxlZnQsIHdpZHRoLCByaWdodCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFsaWduKDApICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC52cnN0YXJ0KHdpZHRocykgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLnZybGYodHJ1ZSkpOw0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5saW5lID0gJ3J1bm5pbmcnOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdob3Jpem9udGFsJzoNCiAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHByaW50IGhvcml6b250YWwgcnVsZQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gbGVmdCAtIHN0YXRlLnJ1bGVzLmxlZnQ7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSB3aWR0aCAtIHN0YXRlLnJ1bGVzLndpZHRoOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gTWF0aC5taW4obGVmdCwgc3RhdGUucnVsZXMubGVmdCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBNYXRoLm1pbihyaWdodCwgc3RhdGUucnVsZXMucmlnaHQpOw0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcmludGVyLmNvbW1hbmQubm9ybWFsKCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFyZWEobCwgcHJpbnRlci5jcGwgLSBsIC0gciwgcikgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFsaWduKDApICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC52cmhyKHN0YXRlLnJ1bGVzLndpZHRocywgd2lkdGhzLCBtLCBtICsgdykgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmxmKCkpOw0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5saW5lID0gJ3J1bm5pbmcnOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHNhdmUgcGFyYW1ldGVycyB0byBzdG9wIHJ1bGVzDQogICAgICAgICAgICBzdGF0ZS5ydWxlcyA9IHsgbGVmdDogbGVmdCwgd2lkdGg6IHdpZHRoLCByaWdodDogcmlnaHQsIHdpZHRoczogd2lkdGhzIH07DQogICAgICAgICAgICAvLyBtYXhpbXVtIG51bWJlciBvZiB3cmFwcw0KICAgICAgICAgICAgY29uc3Qgcm93ID0gY29sdW1uLndyYXAgPyBjb2xzLnJlZHVjZSgoYSwgY29sKSA9PiBNYXRoLm1heChhLCBjb2wubGVuZ3RoKSwgMSkgOiAxOw0KICAgICAgICAgICAgLy8gc29ydCB0ZXh0DQogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJvdzsgaisrKSB7DQogICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHNldCBwcmludCBhcmVhIGFuZCBsaW5lIGFsaWdubWVudA0KICAgICAgICAgICAgICAgIGxldCByZXMgPSBwcmludGVyLmNvbW1hbmQubm9ybWFsKCkgKw0KICAgICAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuYXJlYShsZWZ0LCB3aWR0aCwgcmlnaHQpICsNCiAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFsaWduKDApOw0KICAgICAgICAgICAgICAgIC8vIHByaW50IHBvc2l0aW9uDQogICAgICAgICAgICAgICAgbGV0IHAgPSAwOw0KICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgdmVydGljYWwgcnVsZXMNCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUubGluZSA9PT0gJ3J1bm5pbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIG1heGltdW0gaGVpZ2h0DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGNvbHMucmVkdWNlKChhLCBjb2wpID0+IGogPCBjb2wubGVuZ3RoID8gTWF0aC5tYXgoYSwgY29sW2pdLmhlaWdodCkgOiBhLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHByaW50IHZlcnRpY2FsIHJ1bGVzDQogICAgICAgICAgICAgICAgICAgIHJlcyArPSBwcmludGVyLmNvbW1hbmQubm9ybWFsKCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFic29sdXRlKHArKykgKw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLnZyKHdpZHRocywgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gcHJvY2VzcyBlYWNoIGNvbHVtbg0KICAgICAgICAgICAgICAgIGNvbHMuZm9yRWFjaCgoY29sLCBpKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBzZXQgcHJpbnQgcG9zaXRpb24gb2YgZmlyc3QgY29sdW1uDQogICAgICAgICAgICAgICAgICAgIHJlcyArPSBwcmludGVyLmNvbW1hbmQuYWJzb2x1dGUocCk7DQogICAgICAgICAgICAgICAgICAgIC8vIGlmIHdyYXBwZWQgdGV4dCBpcyBub3QgZW1wdHkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGogPCBjb2wubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY29tbWFuZHMgdG8gYWxpZ24gdGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IHByaW50ZXIuY29tbWFuZC5yZWxhdGl2ZShjb2xbal0ubWFyZ2luKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgdGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNvbFtqXS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBkYXRhLmxlbmd0aDsgayArPSAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIGRlY29yYXRlIHRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bCA9IE51bWJlcihkYXRhW2tdWzBdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbSA9IE51bWJlcihkYXRhW2tdWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdiA9IE51bWJlcihkYXRhW2tdWzJdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aCA9IE51bWJlcihkYXRhW2tdWzNdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLm5vcm1hbCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLnVsKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLmVtKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLml2KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLndoKHdoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHByaW50IHRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLnRleHQoZGF0YVtrICsgMV0sIHByaW50ZXIuZW5jb2RpbmcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8vIGlmIHdyYXBwZWQgdGV4dCBpcyBlbXB0eQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyArPSBwcmludGVyLmNvbW1hbmQubm9ybWFsKCkgKyBwcmludGVyLmNvbW1hbmQudGV4dCgnICcsIHByaW50ZXIuZW5jb2RpbmcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBzZXQgcHJpbnQgcG9zaXRpb24gb2YgbmV4dCBjb2x1bW4NCiAgICAgICAgICAgICAgICAgICAgcCArPSBjb2x1bW5zW2ldLndpZHRoICsgTWF0aC5hYnMoY29sdW1uLmJvcmRlcik7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIGZlZWQgbmV3IGxpbmUNCiAgICAgICAgICAgICAgICByZXMgKz0gcHJpbnRlci5jb21tYW5kLmxmKCk7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyBwcm9jZXNzIGhvcml6b250YWwgcnVsZSBvciBwYXBlciBjdXQNCiAgICAgICAgaWYgKCdocicgaW4gY29sdW1uKSB7DQogICAgICAgICAgICAvLyBwcm9jZXNzIHBhcGVyIGN1dA0KICAgICAgICAgICAgaWYgKGNvbHVtbi5ociA9PT0gJz0nKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0ZS5saW5lKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3J1bm5pbmcnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdob3Jpem9udGFsJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBzdG9wIHJ1bGVzDQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcmludGVyLmNvbW1hbmQubm9ybWFsKCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hcmVhKHN0YXRlLnJ1bGVzLmxlZnQsIHN0YXRlLnJ1bGVzLndpZHRoLCBzdGF0ZS5ydWxlcy5yaWdodCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hbGlnbigwKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLnZyc3RvcChzdGF0ZS5ydWxlcy53aWR0aHMpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQudnJsZihmYWxzZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIGN1dCBwYXBlcg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJpbnRlci5jb21tYW5kLmN1dCgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdGF0ZSB0byBzdGFydCBydWxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUubGluZSA9ICdyZWFkeSc7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBjdXQgcGFwZXINCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByaW50ZXIuY29tbWFuZC5jdXQoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBwcm9jZXNzIGhvcml6b250YWwgcnVsZQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0ZS5saW5lKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dhaXRpbmcnOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHByaW50IGhvcml6b250YWwgcnVsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJpbnRlci5jb21tYW5kLm5vcm1hbCgpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuYXJlYShsZWZ0LCB3aWR0aCwgcmlnaHQpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuYWxpZ24oMCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5ocih3aWR0aCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5sZigpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICdydW5uaW5nJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdGF0ZSB0byBwcmludCBob3Jpem9udGFsIHJ1bGUNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmxpbmUgPSAnaG9yaXpvbnRhbCc7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyBwcm9jZXNzIHJ1bGVzDQogICAgICAgIGlmICgndnInIGluIGNvbHVtbikgew0KICAgICAgICAgICAgLy8gc3RhcnQgcnVsZXMNCiAgICAgICAgICAgIGlmIChjb2x1bW4udnIgPT09ICcrJykgew0KICAgICAgICAgICAgICAgIHN0YXRlLmxpbmUgPSAncmVhZHknOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gc3RvcCBydWxlcw0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0ZS5saW5lKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlYWR5JzoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdGF0ZSB0byBjYW5jZWwgcnVsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmxpbmUgPSAnd2FpdGluZyc7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAncnVubmluZyc6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGNvbW1hbmRzIHRvIHN0b3AgcnVsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByaW50ZXIuY29tbWFuZC5ub3JtYWwoKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFyZWEoc3RhdGUucnVsZXMubGVmdCwgc3RhdGUucnVsZXMud2lkdGgsIHN0YXRlLnJ1bGVzLnJpZ2h0KSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFsaWduKDApICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQudnJzdG9wKHN0YXRlLnJ1bGVzLndpZHRocykgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC52cmxmKGZhbHNlKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5saW5lID0gJ3dhaXRpbmcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gcHJvY2VzcyBpbWFnZQ0KICAgICAgICBpZiAoJ2ltYWdlJyBpbiBjb2x1bW4pIHsNCiAgICAgICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBwcmludCBpbWFnZQ0KICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJpbnRlci5jb21tYW5kLm5vcm1hbCgpICsNCiAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuYXJlYShsZWZ0LCB3aWR0aCwgcmlnaHQpICsNCiAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuYWxpZ24oY29sdW1uLmFsaWduKSArDQogICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmltYWdlKGNvbHVtbi5pbWFnZSkpOw0KICAgICAgICB9DQogICAgICAgIC8vIHByb2Nlc3MgYmFyY29kZSBvciAyRCBjb2RlDQogICAgICAgIGlmICgnY29kZScgaW4gY29sdW1uKSB7DQogICAgICAgICAgICAvLyBwcm9jZXNzIDJEIGNvZGUNCiAgICAgICAgICAgIGlmIChjb2x1bW4uY29kZS50eXBlID09PSAncXJjb2RlJykgew0KICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBjb21tYW5kcyB0byBwcmludCAyRCBjb2RlDQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJpbnRlci5jb21tYW5kLm5vcm1hbCgpICsNCiAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLmFyZWEobGVmdCwgd2lkdGgsIHJpZ2h0KSArDQogICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hbGlnbihjb2x1bW4uYWxpZ24pICsNCiAgICAgICAgICAgICAgICAgICAgcHJpbnRlci5jb21tYW5kLnFyY29kZShjb2x1bW4uY29kZSwgcHJpbnRlci5lbmNvZGluZykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gcHJvY2VzcyBiYXJjb2RlDQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgY29tbWFuZHMgdG8gcHJpbnQgYmFyY29kZQ0KICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByaW50ZXIuY29tbWFuZC5ub3JtYWwoKSArDQogICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hcmVhKGxlZnQsIHdpZHRoLCByaWdodCkgKw0KICAgICAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuYWxpZ24oY29sdW1uLmFsaWduKSArDQogICAgICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5iYXJjb2RlKGNvbHVtbi5jb2RlLCBwcmludGVyLmVuY29kaW5nKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gcHJvY2VzcyBjb21tYW5kDQogICAgICAgIGlmICgnY29tbWFuZCcgaW4gY29sdW1uKSB7DQogICAgICAgICAgICAvLyBhcHBlbmQgY29tbWFuZHMgdG8gaW5zZXJ0IGNvbW1hbmRzDQogICAgICAgICAgICByZXN1bHQucHVzaChwcmludGVyLmNvbW1hbmQubm9ybWFsKCkgKw0KICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hcmVhKGxlZnQsIHdpZHRoLCByaWdodCkgKw0KICAgICAgICAgICAgICAgIHByaW50ZXIuY29tbWFuZC5hbGlnbihjb2x1bW4uYWxpZ24pICsNCiAgICAgICAgICAgICAgICBwcmludGVyLmNvbW1hbmQuY29tbWFuZChjb2x1bW4uY29tbWFuZCkpOw0KICAgICAgICB9DQogICAgICAgIC8vIGZsaXAgdXBzaWRlIGRvd24NCiAgICAgICAgaWYgKHByaW50ZXIudXBzaWRlRG93bikgew0KICAgICAgICAgICAgcmVzdWx0LnJldmVyc2UoKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oJycpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFdyYXAgdGV4dC4NCiAgICAgKiBAcGFyYW0ge29iamVjdH0gY29sdW1uIHBhcnNlZCBjb2x1bW4gb2JqZWN0DQogICAgICogQHBhcmFtIHtvYmplY3R9IHByaW50ZXIgcHJpbnRlciBjb25maWd1cmF0aW9uDQogICAgICogQHJldHVybnMge29iamVjdFtdfSB3cmFwcGVkIHRleHQsIHRleHQgcG9zaXRpb24sIGFuZCB0ZXh0IGhlaWdodA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHdyYXBUZXh0KGNvbHVtbiwgcHJpbnRlcikgew0KICAgICAgICBjb25zdCByZXN1bHQgPSBbXTsNCiAgICAgICAgLy8gcmVtYWluaW5nIHNwYWNlcw0KICAgICAgICBsZXQgc3BhY2UgPSBjb2x1bW4ud2lkdGg7DQogICAgICAgIC8vIHRleHQgaGVpZ2h0DQogICAgICAgIGxldCBoZWlnaHQgPSAxOw0KICAgICAgICAvLyB0ZXh0IGRhdGENCiAgICAgICAgbGV0IHJlcyA9IFtdOw0KICAgICAgICAvLyB0ZXh0IGRlY29yYXRpb24gZmxhZ3MNCiAgICAgICAgbGV0IHVsID0gZmFsc2U7DQogICAgICAgIGxldCBlbSA9IGZhbHNlOw0KICAgICAgICBsZXQgaXYgPSBmYWxzZTsNCiAgICAgICAgbGV0IHdoID0gMDsNCiAgICAgICAgLy8gcHJvY2VzcyB0ZXh0IGFuZCB0ZXh0IGRlY29yYXRpb24NCiAgICAgICAgY29sdW1uLnRleHQuZm9yRWFjaCgodGV4dCwgaSkgPT4gew0KICAgICAgICAgICAgLy8gcHJvY2VzcyB0ZXh0DQogICAgICAgICAgICBpZiAoaSAlIDIgPT09IDApIHsNCiAgICAgICAgICAgICAgICAvLyBpZiB0ZXh0IGlzIG5vdCBlbXB0eQ0KICAgICAgICAgICAgICAgIGxldCB0ID0gcHJpbnRlci5jb21tYW5kLmFycmF5RnJvbSh0ZXh0LCBwcmludGVyLmVuY29kaW5nKTsNCiAgICAgICAgICAgICAgICB3aGlsZSAodC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIG1lYXN1cmUgY2hhcmFjdGVyIHdpZHRoDQogICAgICAgICAgICAgICAgICAgIGxldCB3ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGogPSAwOw0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IHQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB3ID0gcHJpbnRlci5jb21tYW5kLm1lYXN1cmVUZXh0KHRbal0sIHByaW50ZXIuZW5jb2RpbmcpICogKHdoIDwgMiA/IHdoICsgMSA6IHdoIC0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRwdXQgYmVmb3JlIHByb3RydWRpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3ID4gc3BhY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlIC09IHc7DQogICAgICAgICAgICAgICAgICAgICAgICB3ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGorKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyBpZiBjaGFyYWN0ZXJzIGZpdA0KICAgICAgICAgICAgICAgICAgICBpZiAoaiA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCB0ZXh0IGRlY29yYXRpb24gaW5mb3JtYXRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKCh1bCA/ICcxJyA6ICcwJykgKyAoZW0gPyAnMScgOiAnMCcpICsgKGl2ID8gJzEnIDogJzAnKSArIHdoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCB0ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICByZXMucHVzaCh0LnNsaWNlKDAsIGopLmpvaW4oJycpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0ZXh0IGhlaWdodA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCB3aCA8IDMgPyB3aCA6IHdoIC0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1haW5pbmcgdGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQuc2xpY2Uoaik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2hhcmFjdGVyIGlzIHRvbyBiaWcNCiAgICAgICAgICAgICAgICAgICAgaWYgKHcgPiBjb2x1bW4ud2lkdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBvdXRwdXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0LnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gc3BlY2UgbGVmdA0KICAgICAgICAgICAgICAgICAgICBpZiAodyA+IHNwYWNlIHx8IHNwYWNlID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB3cmFwIHRleHQgYXV0b21hdGljYWxseQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBkYXRhOiByZXMsIG1hcmdpbjogc3BhY2UgKiBjb2x1bW4uYWxpZ24gLyAyLCBoZWlnaHQ6IGhlaWdodCB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlID0gY29sdW1uLndpZHRoOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSAxOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gcHJvY2VzcyB0ZXh0IGRlY29yYXRpb24NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0ZXh0IGRlY29yYXRpb24gZmxhZ3MNCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRleHQpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXG4nOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd3JhcCB0ZXh0IG1hbnVhbGx5DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IGRhdGE6IHJlcywgbWFyZ2luOiBzcGFjZSAqIGNvbHVtbi5hbGlnbiAvIDIsIGhlaWdodDogaGVpZ2h0IH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2UgPSBjb2x1bW4ud2lkdGg7DQogICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXyc6DQogICAgICAgICAgICAgICAgICAgICAgICB1bCA9ICF1bDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICciJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtID0gIWVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2AnOg0KICAgICAgICAgICAgICAgICAgICAgICAgaXYgPSAhaXY7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBNYXRoLm1pbih0ZXh0Lmxlbmd0aCwgNyk7DQogICAgICAgICAgICAgICAgICAgICAgICB3aCA9IHdoID09PSBkID8gMCA6IGQ7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICAvLyBvdXRwdXQgbGFzdCB0ZXh0DQogICAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBkYXRhOiByZXMsIG1hcmdpbjogc3BhY2UgKiBjb2x1bW4uYWxpZ24gLyAyLCBoZWlnaHQ6IGhlaWdodCB9KTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0NCg0KICAgIC8vIHNob3J0Y3V0DQogICAgY29uc3QgJCA9IFN0cmluZy5mcm9tQ2hhckNvZGU7DQoNCiAgICAvLw0KICAgIC8vIENvbW1hbmQgYmFzZSBvYmplY3QNCiAgICAvLw0KICAgIGNvbnN0IF9iYXNlID0gew0KICAgICAgICAvKioNCiAgICAgICAgICogQ2hhcmFjdGVyIHdpZHRoLg0KICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfSBjaGFyYWN0ZXIgd2lkdGggKGRvdHMgcGVyIGNoYXJhY3RlcikNCiAgICAgICAgICovDQogICAgICAgIGNoYXJXaWR0aDogMTIsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIE1lYXN1cmUgdGV4dCB3aWR0aC4NCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgc3RyaW5nIHRvIG1lYXN1cmUNCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuY29kaW5nIGNvZGVwYWdlDQogICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHN0cmluZyB3aWR0aA0KICAgICAgICAgKi8NCiAgICAgICAgbWVhc3VyZVRleHQ6ICh0ZXh0LCBlbmNvZGluZykgPT4gew0KICAgICAgICAgICAgbGV0IHIgPSAwOw0KICAgICAgICAgICAgY29uc3QgdCA9IEFycmF5LmZyb20odGV4dCk7DQogICAgICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7DQogICAgICAgICAgICAgICAgY2FzZSAnY3A5MzInOg0KICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0amlzJzoNCiAgICAgICAgICAgICAgICAgICAgciA9IHQucmVkdWNlKChhLCBjKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gYy5jb2RlUG9pbnRBdCgwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICsgKGQgPCAweDgwIHx8IGQgPT09IDB4YTUgfHwgZCA9PT0gMHgyMDNlIHx8IChkID4gMHhmZjYwICYmIGQgPCAweGZmYTApID8gMSA6IDIpOw0KICAgICAgICAgICAgICAgICAgICB9LCAwKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnY3A5MzYnOg0KICAgICAgICAgICAgICAgIGNhc2UgJ2diMTgwMzAnOg0KICAgICAgICAgICAgICAgIGNhc2UgJ2NwOTQ5JzoNCiAgICAgICAgICAgICAgICBjYXNlICdrc2M1NjAxJzoNCiAgICAgICAgICAgICAgICBjYXNlICdjcDk1MCc6DQogICAgICAgICAgICAgICAgY2FzZSAnYmlnNSc6DQogICAgICAgICAgICAgICAgICAgIHIgPSB0LnJlZHVjZSgoYSwgYykgPT4gYSArIChjLmNvZGVQb2ludEF0KDApIDwgMHg4MCA/IDEgOiAyKSwgMCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ3RpczYyMCc6DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0LnJlZHVjZSgoYSwgYykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IGMuY29kZVBvaW50QXQoMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5jb25zb25hbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PT0gMHhlMzEgfHwgZCA+PSAweGUzNCAmJiBkIDw9IDB4ZTNhIHx8IGQgPT09IDB4ZTQ3KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnZvd2VsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmxlbmd0aCArPSAyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBhLnZvd2VsID0gYS50b25lID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnZvd2VsID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkID49IDB4ZTQ4ICYmIGQgPD0gMHhlNGIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEudG9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5sZW5ndGggKz0gMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY29uc29uYW50ID0gYS52b3dlbCA9IGEudG9uZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS50b25lID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkID09PSAweGUzMyB8fCBkID49IDB4ZTRjICYmIGQgPD0gMHhlNGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEudm93ZWwgfHwgYS50b25lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmxlbmd0aCArPSAyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBhLnZvd2VsID0gYS50b25lID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmxlbmd0aCArPSBkID09PSAweGUzMyA/IDIgOiAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkID49IDB4ZTAxICYmIGQgPD0gMHhlMmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5sZW5ndGgrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS52b3dlbCA9IGEudG9uZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5sZW5ndGggKz0gMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBhLnZvd2VsID0gYS50b25lID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZCA+PSAweGUwMSAmJiBkIDw9IDB4ZTJlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5sZW5ndGgrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgICAgICAgICB9LCB7IGxlbmd0aDogMCwgY29uc29uYW50OiBmYWxzZSwgdm93ZWw6IGZhbHNlLCB0b25lOiBmYWxzZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGEuY29uc29uYW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhLmxlbmd0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBhLnZvd2VsID0gYS50b25lID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgciA9IGEubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICByID0gdC5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0sDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIENyZWF0ZSBjaGFyYWN0ZXIgYXJyYXkgZnJvbSBzdHJpbmcgKHN1cHBvcnRpbmcgVGhhaSBjb21iaW5pbmcgY2hhcmFjdGVycykuDQogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHN0cmluZw0KICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RpbmcgY29kZXBhZ2UNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ1tdfSBhcnJheSBpbnN0YW5jZQ0KICAgICAgICAgKi8NCiAgICAgICAgYXJyYXlGcm9tOiAodGV4dCwgZW5jb2RpbmcpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHQgPSBBcnJheS5mcm9tKHRleHQpOw0KICAgICAgICAgICAgaWYgKGVuY29kaW5nID09PSAndGlzNjIwJykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0LnJlZHVjZSgoYSwgYykgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gYy5jb2RlUG9pbnRBdCgwKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGEuY29uc29uYW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PT0gMHhlMzEgfHwgZCA+PSAweGUzNCAmJiBkIDw9IDB4ZTNhIHx8IGQgPT09IDB4ZTQ3KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEudm93ZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yZXN1bHQucHVzaChhLmNvbnNvbmFudCArIGEudm93ZWwgKyBhLnRvbmUsIGMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmNvbnNvbmFudCA9IGEudm93ZWwgPSBhLnRvbmUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEudm93ZWwgPSBjOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGQgPj0gMHhlNDggJiYgZCA8PSAweGU0Yikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnRvbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yZXN1bHQucHVzaChhLmNvbnNvbmFudCArIGEudm93ZWwgKyBhLnRvbmUsIGMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmNvbnNvbmFudCA9IGEudm93ZWwgPSBhLnRvbmUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEudG9uZSA9IGM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZCA9PT0gMHhlMzMgfHwgZCA+PSAweGU0YyAmJiBkIDw9IDB4ZTRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEudm93ZWwgfHwgYS50b25lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucmVzdWx0LnB1c2goYS5jb25zb25hbnQgKyBhLnZvd2VsICsgYS50b25lLCBjKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBhLnZvd2VsID0gYS50b25lID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJlc3VsdC5wdXNoKGEuY29uc29uYW50ICsgYyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY29uc29uYW50ID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZCA+PSAweGUwMSAmJiBkIDw9IDB4ZTJlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yZXN1bHQucHVzaChhLmNvbnNvbmFudCArIGEudm93ZWwgKyBhLnRvbmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY29uc29uYW50ID0gYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnZvd2VsID0gYS50b25lID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJlc3VsdC5wdXNoKGEuY29uc29uYW50ICsgYS52b3dlbCArIGEudG9uZSwgYyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb25zb25hbnQgPSBhLnZvd2VsID0gYS50b25lID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZCA+PSAweGUwMSAmJiBkIDw9IDB4ZTJlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhLmNvbnNvbmFudCA9IGM7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhLnJlc3VsdC5wdXNoKGMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgICAgIH0sIHsgcmVzdWx0OiBbXSwgY29uc29uYW50OiAnJywgdm93ZWw6ICcnLCB0b25lOiAnJyB9KTsNCiAgICAgICAgICAgICAgICBpZiAoYS5jb25zb25hbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgYS5yZXN1bHQucHVzaChhLmNvbnNvbmFudCArIGEudm93ZWwgKyBhLnRvbmUpOw0KICAgICAgICAgICAgICAgICAgICBhLmNvbnNvbmFudCA9IGEudm93ZWwgPSBhLnRvbmUgPSAnJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGEucmVzdWx0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFN0YXJ0IHByaW50aW5nLg0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJpbnRlciBwcmludGVyIGNvbmZpZ3VyYXRpb24NCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIG9wZW46IHByaW50ZXIgPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEZpbmlzaCBwcmludGluZy4NCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIGNsb3NlOiAoKSA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogU2V0IHByaW50IGFyZWEuDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IGxlZnQgbWFyZ2luICh1bml0OiBjaGFyYWN0ZXJzKQ0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggcHJpbnQgYXJlYSAodW5pdDogY2hhcmFjdGVycykNCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0IHJpZ2h0IG1hcmdpbiAodW5pdDogY2hhcmFjdGVycykNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIGFyZWE6IChsZWZ0LCB3aWR0aCwgcmlnaHQpID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBTZXQgbGluZSBhbGlnbm1lbnQuDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbGlnbiBsaW5lIGFsaWdubWVudCAoMDogbGVmdCwgMTogY2VudGVyLCAyOiByaWdodCkNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIGFsaWduOiBhbGlnbiA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogU2V0IGFic29sdXRlIHByaW50IHBvc2l0aW9uLg0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gYWJzb2x1dGUgcG9zaXRpb24gKHVuaXQ6IGNoYXJhY3RlcnMpDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICBhYnNvbHV0ZTogcG9zaXRpb24gPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFNldCByZWxhdGl2ZSBwcmludCBwb3NpdGlvbi4NCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uIHJlbGF0aXZlIHBvc2l0aW9uICh1bml0OiBjaGFyYWN0ZXJzKQ0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21tYW5kcw0KICAgICAgICAgKi8NCiAgICAgICAgcmVsYXRpdmU6IHBvc2l0aW9uID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBQcmludCBob3Jpem9udGFsIHJ1bGUuDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBsaW5lIHdpZHRoICh1bml0OiBjaGFyYWN0ZXJzKQ0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21tYW5kcw0KICAgICAgICAgKi8NCiAgICAgICAgaHI6IHdpZHRoID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBQcmludCB2ZXJ0aWNhbCBydWxlcy4NCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXX0gd2lkdGhzIHZlcnRpY2FsIGxpbmUgc3BhY2luZw0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IHRleHQgaGVpZ2h0ICgxLTYpDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICB2cjogKHdpZHRocywgaGVpZ2h0KSA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogU3RhcnQgcnVsZXMuDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW119IHdpZHRocyB2ZXJ0aWNhbCBsaW5lIHNwYWNpbmcNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIHZyc3RhcnQ6IHdpZHRocyA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogU3RvcCBydWxlcy4NCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXX0gd2lkdGhzIHZlcnRpY2FsIGxpbmUgc3BhY2luZw0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21tYW5kcw0KICAgICAgICAgKi8NCiAgICAgICAgdnJzdG9wOiB3aWR0aHMgPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFByaW50IHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHJ1bGVzLg0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfSB3aWR0aHMxIHZlcnRpY2FsIGxpbmUgc3BhY2luZyAoc3RvcCkNCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXX0gd2lkdGhzMiB2ZXJ0aWNhbCBsaW5lIHNwYWNpbmcgKHN0YXJ0KQ0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZGwgZGlmZmVyZW5jZSBpbiBsZWZ0IHBvc2l0aW9uDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkciBkaWZmZXJlbmNlIGluIHJpZ2h0IHBvc2l0aW9uDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICB2cmhyOiAod2lkdGhzMSwgd2lkdGhzMiwgZGwsIGRyKSA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogU2V0IGxpbmUgc3BhY2luZyBhbmQgZmVlZCBuZXcgbGluZS4NCiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSB2ciB3aGV0aGVyIHZlcnRpY2FsIHJ1bGVkIGxpbmVzIGFyZSBwcmludGVkDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICB2cmxmOiB2ciA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQ3V0IHBhcGVyLg0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21tYW5kcw0KICAgICAgICAgKi8NCiAgICAgICAgY3V0OiAoKSA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogVW5kZXJsaW5lIHRleHQuDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICB1bDogKCkgPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEVtcGhhc2l6ZSB0ZXh0Lg0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21tYW5kcw0KICAgICAgICAgKi8NCiAgICAgICAgZW06ICgpID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBJbnZlcnQgdGV4dC4NCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIGl2OiAoKSA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogU2NhbGUgdXAgdGV4dC4NCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdoIG51bWJlciBvZiBzcGVjaWFsIGNoYXJhY3RlciAnXicgKDEtNykNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIHdoOiB3aCA9PiAnJywNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQ2FuY2VsIHRleHQgZGVjb3JhdGlvbi4NCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIG5vcm1hbDogKCkgPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFByaW50IHRleHQuDQogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHN0cmluZyB0byBwcmludA0KICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RpbmcgY29kZXBhZ2UNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIHRleHQ6ICh0ZXh0LCBlbmNvZGluZykgPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEZlZWQgbmV3IGxpbmUuDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICBsZjogKCkgPT4gJycsDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEluc2VydCBjb21tYW5kcy4NCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbW1hbmQgY29tbWFuZHMgdG8gaW5zZXJ0DQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICBjb21tYW5kOiBjb21tYW5kID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBQcmludCBpbWFnZS4NCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGltYWdlIGltYWdlIGRhdGEgKGJhc2U2NCBwbmcgZm9ybWF0KQ0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21tYW5kcw0KICAgICAgICAgKi8NCiAgICAgICAgaW1hZ2U6IGltYWdlID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBQcmludCBRUiBDb2RlLg0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gc3ltYm9sIFFSIENvZGUgaW5mb3JtYXRpb24gKGRhdGEsIHR5cGUsIGNlbGwsIGxldmVsKQ0KICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RpbmcgY29kZXBhZ2UNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gY29tbWFuZHMNCiAgICAgICAgICovDQogICAgICAgIHFyY29kZTogKHN5bWJvbCwgZW5jb2RpbmcpID0+ICcnLA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBQcmludCBiYXJjb2RlLg0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gc3ltYm9sIGJhcmNvZGUgaW5mb3JtYXRpb24gKGRhdGEsIHR5cGUsIHdpZHRoLCBoZWlnaHQsIGhyaSkNCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuY29kaW5nIGNvZGVwYWdlDQogICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbW1hbmRzDQogICAgICAgICAqLw0KICAgICAgICBiYXJjb2RlOiAoc3ltYm9sLCBlbmNvZGluZykgPT4gJycNCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBTVkcNCiAgICAvLw0KICAgIGNvbnN0IF9zdmcgPSB7DQogICAgICAgIHN2Z1dpZHRoOiA1NzYsDQogICAgICAgIHN2Z0hlaWdodDogMCwNCiAgICAgICAgc3ZnQ29udGVudDogJycsDQogICAgICAgIGxpbmVNYXJnaW46IDAsDQogICAgICAgIGxpbmVBbGlnbjogMCwNCiAgICAgICAgbGluZVdpZHRoOiA0OCwNCiAgICAgICAgbGluZUhlaWdodDogMSwNCiAgICAgICAgdGV4dEVsZW1lbnQ6ICcnLA0KICAgICAgICB0ZXh0QXR0cmlidXRlczoge30sDQogICAgICAgIHRleHRQb3NpdGlvbjogMCwNCiAgICAgICAgdGV4dFNjYWxlOiAxLA0KICAgICAgICB0ZXh0RW5jb2Rpbmc6ICcnLA0KICAgICAgICBmZWVkTWluaW11bTogMjQsDQogICAgICAgIC8vIHByaW50ZXIgY29uZmlndXJhdGlvbg0KICAgICAgICBzcGFjaW5nOiBmYWxzZSwNCiAgICAgICAgLy8gc3RhcnQgcHJpbnRpbmc6DQogICAgICAgIG9wZW46IGZ1bmN0aW9uIChwcmludGVyKSB7DQogICAgICAgICAgICB0aGlzLnN2Z1dpZHRoID0gcHJpbnRlci5jcGwgKiB0aGlzLmNoYXJXaWR0aDsNCiAgICAgICAgICAgIHRoaXMuc3ZnSGVpZ2h0ID0gMDsNCiAgICAgICAgICAgIHRoaXMuc3ZnQ29udGVudCA9ICcnOw0KICAgICAgICAgICAgdGhpcy5saW5lTWFyZ2luID0gMDsNCiAgICAgICAgICAgIHRoaXMubGluZUFsaWduID0gMDsNCiAgICAgICAgICAgIHRoaXMubGluZVdpZHRoID0gcHJpbnRlci5jcGw7DQogICAgICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSAxOw0KICAgICAgICAgICAgdGhpcy50ZXh0RWxlbWVudCA9ICcnOw0KICAgICAgICAgICAgdGhpcy50ZXh0QXR0cmlidXRlcyA9IHt9Ow0KICAgICAgICAgICAgdGhpcy50ZXh0UG9zaXRpb24gPSAwOw0KICAgICAgICAgICAgdGhpcy50ZXh0U2NhbGUgPSAxOw0KICAgICAgICAgICAgdGhpcy50ZXh0RW5jb2RpbmcgPSBwcmludGVyLmVuY29kaW5nOw0KICAgICAgICAgICAgdGhpcy5mZWVkTWluaW11bSA9IE51bWJlcih0aGlzLmNoYXJXaWR0aCAqIChwcmludGVyLnNwYWNpbmcgPyAyLjUgOiAyKSk7DQogICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBwcmludGVyLnNwYWNpbmc7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGZpbmlzaCBwcmludGluZzoNCiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGNvbnN0IHAgPSB7IGZvbnQ6ICdtb25vc3BhY2UnLCBzaXplOiB0aGlzLmNoYXJXaWR0aCAqIDIsIHN0eWxlOiAnJywgbGFuZzogJycgfTsNCiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50ZXh0RW5jb2RpbmcpIHsNCiAgICAgICAgICAgICAgICBjYXNlICdjcDkzMic6DQogICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRqaXMnOg0KICAgICAgICAgICAgICAgICAgICBwLmZvbnQgPSBgJ0tvc3VnaSBNYXJ1JywgJ01TIEdvdGhpYycsICdTYW4gRnJhbmNpc2NvJywgJ09zYWthLU1vbm8nLCBtb25vc3BhY2VgOw0KICAgICAgICAgICAgICAgICAgICBwLnN0eWxlID0gJ0BpbXBvcnQgdXJsKCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUtvc3VnaStNYXJ1JmRpc3BsYXk9c3dhcCIpOyc7DQogICAgICAgICAgICAgICAgICAgIHAubGFuZyA9ICdqYSc7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2NwOTM2JzoNCiAgICAgICAgICAgICAgICBjYXNlICdnYjE4MDMwJzoNCiAgICAgICAgICAgICAgICAgICAgcC5zaXplIC09IDI7DQogICAgICAgICAgICAgICAgICAgIHAubGFuZyA9ICd6aC1IYW5zJzsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnY3A5NDknOg0KICAgICAgICAgICAgICAgIGNhc2UgJ2tzYzU2MDEnOg0KICAgICAgICAgICAgICAgICAgICBwLnNpemUgLT0gMjsNCiAgICAgICAgICAgICAgICAgICAgcC5sYW5nID0gJ2tvJzsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnY3A5NTAnOg0KICAgICAgICAgICAgICAgIGNhc2UgJ2JpZzUnOg0KICAgICAgICAgICAgICAgICAgICBwLnNpemUgLT0gMjsNCiAgICAgICAgICAgICAgICAgICAgcC5sYW5nID0gJ3poLUhhbnQnOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICd0aXM2MjAnOg0KICAgICAgICAgICAgICAgICAgICBwLmZvbnQgPSBgJ1NhcmFidW4nLCBtb25vc3BhY2VgOw0KICAgICAgICAgICAgICAgICAgICBwLnNpemUgLT0gNDsNCiAgICAgICAgICAgICAgICAgICAgcC5zdHlsZSA9ICdAaW1wb3J0IHVybCgiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1TYXJhYnVuJmRpc3BsYXk9c3dhcCIpOyc7DQogICAgICAgICAgICAgICAgICAgIHAubGFuZyA9ICd0aCc7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgIHAuZm9udCA9IGAnQ291cmllciBQcmltZScsICdDb3VyaWVyIE5ldycsICdDb3VyaWVyJywgbW9ub3NwYWNlYDsNCiAgICAgICAgICAgICAgICAgICAgcC5zaXplIC09IDI7DQogICAgICAgICAgICAgICAgICAgIHAuc3R5bGUgPSAnQGltcG9ydCB1cmwoImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Q291cmllcitQcmltZSZkaXNwbGF5PXN3YXAiKTsnOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwLnN0eWxlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBwLnN0eWxlID0gYDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbJHtwLnN0eWxlfV1dPjwvc3R5bGU+YDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwLmxhbmcubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHAubGFuZyA9IGAgeG1sOmxhbmc9IiR7cC5sYW5nfSJgOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGA8c3ZnIHdpZHRoPSIke3RoaXMuc3ZnV2lkdGh9cHgiIGhlaWdodD0iJHt0aGlzLnN2Z0hlaWdodH1weCIgdmlld0JveD0iMCAwICR7dGhpcy5zdmdXaWR0aH0gJHt0aGlzLnN2Z0hlaWdodH0iIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIGAgKw0KICAgICAgICAgICAgICAgIGB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiPiR7cC5zdHlsZX1gICsNCiAgICAgICAgICAgICAgICBgPGRlZnM+PGZpbHRlciBpZD0icmVjZWlwdGxpbmVpbnZlcnQiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxmZUZsb29kIGZsb29kLWNvbG9yPSIjMDAwIi8+PGZlQ29tcG9zaXRlIGluPSJTb3VyY2VHcmFwaGljIiBvcGVyYXRvcj0ieG9yIi8+PC9maWx0ZXI+PC9kZWZzPmAgKw0KICAgICAgICAgICAgICAgIGA8ZyBmb250LWZhbWlseT0iJHtwLmZvbnR9IiBmaWxsPSIjMDAwIiBmb250LXNpemU9IiR7cC5zaXplfSIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYWZ0ZXItZWRnZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIke3AubGFuZ30+JHt0aGlzLnN2Z0NvbnRlbnR9PC9nPjwvc3ZnPlxuYDsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHByaW50IGFyZWE6DQogICAgICAgIGFyZWE6IGZ1bmN0aW9uIChsZWZ0LCB3aWR0aCwgcmlnaHQpIHsNCiAgICAgICAgICAgIHRoaXMubGluZU1hcmdpbiA9IGxlZnQ7DQogICAgICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IHdpZHRoOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzZXQgbGluZSBhbGlnbm1lbnQ6DQogICAgICAgIGFsaWduOiBmdW5jdGlvbiAoYWxpZ24pIHsNCiAgICAgICAgICAgIHRoaXMubGluZUFsaWduID0gYWxpZ247DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBhYnNvbHV0ZSBwcmludCBwb3NpdGlvbjoNCiAgICAgICAgYWJzb2x1dGU6IGZ1bmN0aW9uIChwb3NpdGlvbikgew0KICAgICAgICAgICAgdGhpcy50ZXh0UG9zaXRpb24gPSBwb3NpdGlvbjsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHJlbGF0aXZlIHByaW50IHBvc2l0aW9uOg0KICAgICAgICByZWxhdGl2ZTogZnVuY3Rpb24gKHBvc2l0aW9uKSB7DQogICAgICAgICAgICB0aGlzLnRleHRQb3NpdGlvbiArPSBwb3NpdGlvbjsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgaG9yaXpvbnRhbCBydWxlOg0KICAgICAgICBocjogZnVuY3Rpb24gKHdpZHRoKSB7DQogICAgICAgICAgICBjb25zdCB3ID0gdGhpcy5jaGFyV2lkdGg7DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYDxwYXRoIGQ9Ik0wLCR7d31oJHt3ICogd2lkdGh9IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPmA7DQogICAgICAgICAgICB0aGlzLnN2Z0NvbnRlbnQgKz0gYDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKCR7dGhpcy5saW5lTWFyZ2luICogd30sJHt0aGlzLnN2Z0hlaWdodH0pIj4ke3BhdGh9PC9nPmA7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IHZlcnRpY2FsIHJ1bGVzOg0KICAgICAgICB2cjogZnVuY3Rpb24gKHdpZHRocywgaGVpZ2h0KSB7DQogICAgICAgICAgICBjb25zdCB3ID0gdGhpcy5jaGFyV2lkdGgsIHUgPSB3IC8gMiwgdiA9ICh3ICsgdykgKiBoZWlnaHQ7DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYDxwYXRoIGQ9ImAgKyB3aWR0aHMucmVkdWNlKChhLCB3aWR0aCkgPT4gYSArIGBtJHt3ICogd2lkdGggKyB3fSwkey12fXYke3Z9YCwgYE0ke3V9LDB2JHt2fWApICsgYCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz5gOw0KICAgICAgICAgICAgdGhpcy5zdmdDb250ZW50ICs9IGA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgke3RoaXMubGluZU1hcmdpbiAqIHd9LCR7dGhpcy5zdmdIZWlnaHR9KSI+JHtwYXRofTwvZz5gOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzdGFydCBydWxlczoNCiAgICAgICAgdnJzdGFydDogZnVuY3Rpb24gKHdpZHRocykgew0KICAgICAgICAgICAgY29uc3QgdyA9IHRoaXMuY2hhcldpZHRoLCB1ID0gdyAvIDI7DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYDxwYXRoIGQ9ImAgKyB3aWR0aHMucmVkdWNlKChhLCB3aWR0aCkgPT4gYSArIGBoJHt3ICogd2lkdGh9aCR7dX12JHt3fW0wLCR7LXd9aCR7dX1gLCBgTSR7dX0sJHt3ICsgd312JHstdX1xMCwkey11fSwke3V9LCR7LXV9YCkucmVwbGFjZSgvaFxkK3ZcZCttMCwtXGQraFxkKyQvLCBgcSR7dX0sMCwke3V9LCR7dX12JHt1fWApICsgYCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz5gOw0KICAgICAgICAgICAgdGhpcy5zdmdDb250ZW50ICs9IGA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgke3RoaXMubGluZU1hcmdpbiAqIHd9LCR7dGhpcy5zdmdIZWlnaHR9KSI+JHtwYXRofTwvZz5gOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzdG9wIHJ1bGVzOg0KICAgICAgICB2cnN0b3A6IGZ1bmN0aW9uICh3aWR0aHMpIHsNCiAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLmNoYXJXaWR0aCwgdSA9IHcgLyAyOw0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGA8cGF0aCBkPSJgICsgd2lkdGhzLnJlZHVjZSgoYSwgd2lkdGgpID0+IGEgKyBgaCR7dyAqIHdpZHRofWgke3V9diR7LXd9bTAsJHt3fWgke3V9YCwgYE0ke3V9LDB2JHt1fXEwLCR7dX0sJHt1fSwke3V9YCkucmVwbGFjZSgvaFxkK3YtXGQrbTAsXGQraFxkKyQvLCBgcSR7dX0sMCwke3V9LCR7LXV9diR7LXV9YCkgKyBgIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPmA7DQogICAgICAgICAgICB0aGlzLnN2Z0NvbnRlbnQgKz0gYDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKCR7dGhpcy5saW5lTWFyZ2luICogd30sJHt0aGlzLnN2Z0hlaWdodH0pIj4ke3BhdGh9PC9nPmA7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHJ1bGVzOg0KICAgICAgICB2cmhyOiBmdW5jdGlvbiAod2lkdGhzMSwgd2lkdGhzMiwgZGwsIGRyKSB7DQogICAgICAgICAgICBjb25zdCB3ID0gdGhpcy5jaGFyV2lkdGgsIHUgPSB3IC8gMjsNCiAgICAgICAgICAgIGNvbnN0IHBhdGgxID0gYDxwYXRoIGQ9ImAgKyB3aWR0aHMxLnJlZHVjZSgoYSwgd2lkdGgpID0+IGEgKyBgaCR7dyAqIHdpZHRofWgke3V9diR7LXd9bTAsJHt3fWgke3V9YCwgYE0ke3V9LDBgICsgKGRsID4gMCA/IGB2JHt1fXEwLCR7dX0sJHt1fSwke3V9YDogYHYke3d9aCR7dX1gKSkucmVwbGFjZSgvaFxkK3YtXGQrbTAsXGQraFxkKyQvLCBkciA8IDAgPyBgcSR7dX0sMCwke3V9LCR7LXV9diR7LXV9YCA6IGBoJHt1fXYkey13fWApICsgYCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz5gOw0KICAgICAgICAgICAgdGhpcy5zdmdDb250ZW50ICs9IGA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgkeyh0aGlzLmxpbmVNYXJnaW4gKyBNYXRoLm1heCgtZGwsIDApKSAqIHd9LCR7dGhpcy5zdmdIZWlnaHR9KSI+JHtwYXRoMX08L2c+YDsNCiAgICAgICAgICAgIGNvbnN0IHBhdGgyID0gYDxwYXRoIGQ9ImAgKyB3aWR0aHMyLnJlZHVjZSgoYSwgd2lkdGgpID0+IGEgKyBgaCR7dyAqIHdpZHRofWgke3V9diR7d31tMCwkey13fWgke3V9YCwgYE0ke3V9LCR7dyArIHd9YCArIChkbCA8IDAgPyBgdiR7LXV9cTAsJHstdX0sJHt1fSwkey11fWA6IGB2JHstd31oJHt1fWApKS5yZXBsYWNlKC9oXGQrdlxkK20wLC1cZCtoXGQrJC8sIGRyID4gMCA/IGBxJHt1fSwwLCR7dX0sJHt1fXYke3V9YCA6IGBoJHt1fXYke3d9YCkgKyBgIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPmA7DQogICAgICAgICAgICB0aGlzLnN2Z0NvbnRlbnQgKz0gYDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKCR7KHRoaXMubGluZU1hcmdpbiArIE1hdGgubWF4KGRsLCAwKSkgKiB3fSwke3RoaXMuc3ZnSGVpZ2h0fSkiPiR7cGF0aDJ9PC9nPmA7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBsaW5lIHNwYWNpbmcgYW5kIGZlZWQgbmV3IGxpbmU6DQogICAgICAgIHZybGY6IGZ1bmN0aW9uICh2cikgew0KICAgICAgICAgICAgdGhpcy5mZWVkTWluaW11bSA9IE51bWJlcih0aGlzLmNoYXJXaWR0aCAqICghdnIgJiYgdGhpcy5zcGFjaW5nID8gMi41IDogMikpOw0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubGYoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY3V0IHBhcGVyOg0KICAgICAgICBjdXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgPHBhdGggZD0iTTEyLDEyLjVsLTcuNSwtM2EyLDIsMCwxLDEsLjUsME0xMiwxMS41bC03LjUsM2EyLDIsMCwxLDAsLjUsMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNMTIsMTJsMTAsLTRxLTEsLTEsLTIuNSwtMWwtMTAsNHYybDEwLDRxMS41LDAsMi41LC0xeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yNCwxMmgke3RoaXMuc3ZnV2lkdGggLSAyNH0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtZGFzaGFycmF5PSIyIi8+YDsNCiAgICAgICAgICAgIHRoaXMuc3ZnQ29udGVudCArPSBgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwke3RoaXMuc3ZnSGVpZ2h0fSkiPiR7cGF0aH08L2c+YDsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmxmKCk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHVuZGVybGluZSB0ZXh0Og0KICAgICAgICB1bDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy50ZXh0QXR0cmlidXRlc1sndGV4dC1kZWNvcmF0aW9uJ10gPSAndW5kZXJsaW5lJzsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZW1waGFzaXplIHRleHQ6DQogICAgICAgIGVtOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnRleHRBdHRyaWJ1dGVzLnN0cm9rZSA9ICcjMDAwJzsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gaW52ZXJ0IHRleHQ6DQogICAgICAgIGl2OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnRleHRBdHRyaWJ1dGVzLmZpbHRlciA9ICd1cmwoI3JlY2VpcHRsaW5laW52ZXJ0KSc7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNjYWxlIHVwIHRleHQ6DQogICAgICAgIHdoOiBmdW5jdGlvbiAod2gpIHsNCiAgICAgICAgICAgIGNvbnN0IHcgPSB3aCA8IDIgPyB3aCArIDEgOiB3aCAtIDE7DQogICAgICAgICAgICBjb25zdCBoID0gd2ggPCAzID8gd2ggOiB3aCAtIDE7DQogICAgICAgICAgICB0aGlzLnRleHRBdHRyaWJ1dGVzLnRyYW5zZm9ybSA9IGBzY2FsZSgke3d9LCR7aH0pYDsNCiAgICAgICAgICAgIHRoaXMubGluZUhlaWdodCA9IE1hdGgubWF4KHRoaXMubGluZUhlaWdodCwgaCk7DQogICAgICAgICAgICB0aGlzLnRleHRTY2FsZSA9IHc7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGNhbmNlbCB0ZXh0IGRlY29yYXRpb246DQogICAgICAgIG5vcm1hbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy50ZXh0QXR0cmlidXRlcyA9IHt9Ow0KICAgICAgICAgICAgdGhpcy50ZXh0U2NhbGUgPSAxOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcmludCB0ZXh0Og0KICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodGV4dCwgZW5jb2RpbmcpIHsNCiAgICAgICAgICAgIGxldCBwID0gdGhpcy50ZXh0UG9zaXRpb247DQogICAgICAgICAgICBjb25zdCB0c3BhbiA9IHRoaXMuYXJyYXlGcm9tKHRleHQsIGVuY29kaW5nKS5yZWR1Y2UoKGEsIGMpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBxID0gdGhpcy5tZWFzdXJlVGV4dChjLCBlbmNvZGluZykgKiB0aGlzLnRleHRTY2FsZTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gKHAgKyBxIC8gMikgKiB0aGlzLmNoYXJXaWR0aCAvIHRoaXMudGV4dFNjYWxlOw0KICAgICAgICAgICAgICAgIHAgKz0gcTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYSArIGA8dHNwYW4geD0iJHtyfSI+JHtjLnJlcGxhY2UoL1sgJjw+XS9nLCByID0+ICh7JyAnOiAnJiN4YTA7JywgJyYnOiAnJmFtcDsnLCAnPCc6ICcmbHQ7JywgJz4nOiAnJmd0Oyd9W3JdKSl9PC90c3Bhbj5gOw0KICAgICAgICAgICAgfSwgJycpOw0KICAgICAgICAgICAgY29uc3QgYXR0ciA9IE9iamVjdC5rZXlzKHRoaXMudGV4dEF0dHJpYnV0ZXMpLnJlZHVjZSgoYSwga2V5KSA9PiBhICsgYCAke2tleX09IiR7dGhpcy50ZXh0QXR0cmlidXRlc1trZXldfSJgLCAnJyk7DQogICAgICAgICAgICB0aGlzLnRleHRFbGVtZW50ICs9IGA8dGV4dCR7YXR0cn0+JHt0c3Bhbn08L3RleHQ+YDsNCiAgICAgICAgICAgIHRoaXMudGV4dFBvc2l0aW9uICs9IHRoaXMubWVhc3VyZVRleHQodGV4dCwgZW5jb2RpbmcpICogdGhpcy50ZXh0U2NhbGU7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGZlZWQgbmV3IGxpbmU6DQogICAgICAgIGxmOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBjb25zdCBoID0gdGhpcy5saW5lSGVpZ2h0ICogdGhpcy5jaGFyV2lkdGggKiAyOw0KICAgICAgICAgICAgaWYgKHRoaXMudGV4dEVsZW1lbnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGVudCArPSBgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoJHt0aGlzLmxpbmVNYXJnaW4gKiB0aGlzLmNoYXJXaWR0aH0sJHt0aGlzLnN2Z0hlaWdodCArIGh9KSI+JHt0aGlzLnRleHRFbGVtZW50fTwvZz5gOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zdmdIZWlnaHQgKz0gTWF0aC5tYXgoaCwgdGhpcy5mZWVkTWluaW11bSk7DQogICAgICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSAxOw0KICAgICAgICAgICAgdGhpcy50ZXh0RWxlbWVudCA9ICcnOw0KICAgICAgICAgICAgdGhpcy50ZXh0UG9zaXRpb24gPSAwOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBpbnNlcnQgY29tbWFuZHM6DQogICAgICAgIGNvbW1hbmQ6IGNvbW1hbmQgPT4gJycsDQogICAgICAgIC8vIHByaW50IGltYWdlOg0KICAgICAgICBpbWFnZTogZnVuY3Rpb24gKGltYWdlKSB7DQogICAgICAgICAgICBjb25zdCBwbmcgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5hdG9iKGltYWdlKSA6IEJ1ZmZlci5mcm9tKGltYWdlLCAnYmFzZTY0JykudG9TdHJpbmcoJ2JpbmFyeScpOw0KICAgICAgICAgICAgbGV0IGltZ1dpZHRoID0gMDsNCiAgICAgICAgICAgIGxldCBpbWdIZWlnaHQgPSAwOw0KICAgICAgICAgICAgcG5nLnJlcGxhY2UoL15ceDg5UE5HXHgwZFx4MGFceDFhXHgwYVx4MDBceDAwXHgwMFx4MGRJSERSKC57NH0pKC57NH0pLywgKG1hdGNoLCB3LCBoKSA9PiB7DQogICAgICAgICAgICAgICAgaW1nV2lkdGggPSB3LmNoYXJDb2RlQXQoMCkgPDwgMjQgfCB3LmNoYXJDb2RlQXQoMSkgPDwgMTYgfCB3LmNoYXJDb2RlQXQoMikgPDwgOCB8IHcuY2hhckNvZGVBdCgzKTsNCiAgICAgICAgICAgICAgICBpbWdIZWlnaHQgPSBoLmNoYXJDb2RlQXQoMCkgPDwgMjQgfCBoLmNoYXJDb2RlQXQoMSkgPDwgMTYgfCBoLmNoYXJDb2RlQXQoMikgPDwgOCB8IGguY2hhckNvZGVBdCgzKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNvbnN0IGltZ0RhdGEgPSBgPGltYWdlIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke2ltYWdlfSIgeD0iMCIgeT0iMCIgd2lkdGg9IiR7aW1nV2lkdGh9IiBoZWlnaHQ9IiR7aW1nSGVpZ2h0fSIvPmA7DQogICAgICAgICAgICBjb25zdCBtYXJnaW4gPSB0aGlzLmxpbmVNYXJnaW4gKiB0aGlzLmNoYXJXaWR0aCArICh0aGlzLmxpbmVXaWR0aCAqIHRoaXMuY2hhcldpZHRoIC0gaW1nV2lkdGgpICogdGhpcy5saW5lQWxpZ24gLyAyOw0KICAgICAgICAgICAgdGhpcy5zdmdDb250ZW50ICs9IGA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgke21hcmdpbn0sJHt0aGlzLnN2Z0hlaWdodH0pIj4ke2ltZ0RhdGF9PC9nPmA7DQogICAgICAgICAgICB0aGlzLnN2Z0hlaWdodCArPSBpbWdIZWlnaHQ7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IFFSIENvZGU6DQogICAgICAgIHFyY29kZTogZnVuY3Rpb24gKHN5bWJvbCwgZW5jb2RpbmcpIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgcXJjb2RlICE9PSAndW5kZWZpbmVkJyAmJiBzeW1ib2wuZGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgY29uc3QgcXIgPSBxcmNvZGUoMCwgc3ltYm9sLmxldmVsLnRvVXBwZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgIHFyLmFkZERhdGEoc3ltYm9sLmRhdGEpOw0KICAgICAgICAgICAgICAgIHFyLm1ha2UoKTsNCiAgICAgICAgICAgICAgICBxci5jcmVhdGVTdmdUYWcoc3ltYm9sLmNlbGwsIDApLnJlcGxhY2UoL3dpZHRoPSIoXGQrKXB4Ii4qaGVpZ2h0PSIoXGQrKXB4Ii4qKDxwYXRoLio/PikvLCAobWF0Y2gsIHcsIGgsIHBhdGgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luID0gdGhpcy5saW5lTWFyZ2luICogdGhpcy5jaGFyV2lkdGggKyAodGhpcy5saW5lV2lkdGggKiB0aGlzLmNoYXJXaWR0aCAtIE51bWJlcih3KSkgKiB0aGlzLmxpbmVBbGlnbiAvIDI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGVudCArPSBgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoJHttYXJnaW59LCR7dGhpcy5zdmdIZWlnaHR9KSI+JHtwYXRofTwvZz5gOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnN2Z0hlaWdodCArPSBOdW1iZXIoaCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IGJhcmNvZGU6DQogICAgICAgIGJhcmNvZGU6IGZ1bmN0aW9uIChzeW1ib2wsIGVuY29kaW5nKSB7DQogICAgICAgICAgICBjb25zdCBiYXIgPSBiYXJjb2RlLmdlbmVyYXRlKHN5bWJvbCk7DQogICAgICAgICAgICBjb25zdCBoID0gYmFyLmhlaWdodDsNCiAgICAgICAgICAgIGlmICgnbGVuZ3RoJyBpbiBiYXIpIHsNCiAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IGJhci5sZW5ndGg7DQogICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gaCArIChiYXIuaHJpID8gdGhpcy5jaGFyV2lkdGggKiAyICsgMiA6IDApOw0KICAgICAgICAgICAgICAgIC8vIGRyYXcgYmFyY29kZQ0KICAgICAgICAgICAgICAgIGxldCBwYXRoID0gYDxwYXRoIGQ9ImA7DQogICAgICAgICAgICAgICAgYmFyLndpZHRocy5yZWR1Y2UoKHAsIHcsIGkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgJSAyID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXRoICs9IGBNJHtwfSwkezB9aCR7d312JHtofWgkey13fXpgOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBwICsgdzsNCiAgICAgICAgICAgICAgICB9LCAwKTsNCiAgICAgICAgICAgICAgICBwYXRoICs9ICciIGZpbGw9IiMwMDAiLz4nOw0KICAgICAgICAgICAgICAgIC8vIGRyYXcgaHVtYW4gcmVhZGFibGUgaW50ZXJwcmV0YXRpb24NCiAgICAgICAgICAgICAgICBpZiAoYmFyLmhyaSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gKHdpZHRoIC0gKGJhci50ZXh0Lmxlbmd0aCAtIDEpICogdGhpcy5jaGFyV2lkdGgpIC8gMjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHNwYW4gPSBiYXIudGV4dC5zcGxpdCgnJykucmVkdWNlKChhLCBjLCBpKSA9PiBhICsgYDx0c3BhbiB4PSIke20gKyB0aGlzLmNoYXJXaWR0aCAqIGl9Ij4ke2MucmVwbGFjZSgvWyAmPD5dL2csIHIgPT4gKHsnICc6ICcmI3hhMDsnLCAnJic6ICcmYW1wOycsICc8JzogJyZsdDsnLCAnPic6ICcmZ3Q7J31bcl0pKX08L3RzcGFuPmAsICcnKTsNCiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBgPHRleHQgeT0iJHtoZWlnaHR9Ij4ke3RzcGFufTwvdGV4dD5gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCBtYXJnaW4gPSB0aGlzLmxpbmVNYXJnaW4gKiB0aGlzLmNoYXJXaWR0aCArICh0aGlzLmxpbmVXaWR0aCAqIHRoaXMuY2hhcldpZHRoIC0gd2lkdGgpICogdGhpcy5saW5lQWxpZ24gLyAyOw0KICAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGVudCArPSBgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoJHttYXJnaW59LCR7dGhpcy5zdmdIZWlnaHR9KSI+JHtwYXRofTwvZz5gOw0KICAgICAgICAgICAgICAgIHRoaXMuc3ZnSGVpZ2h0ICs9IGhlaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvLw0KICAgIC8vIEJhcmNvZGUgR2VuZXJhdG9yDQogICAgLy8NCiAgICBjb25zdCBiYXJjb2RlID0gew0KICAgICAgICAvKioNCiAgICAgICAgICogR2VuZXJhdGUgYmFyY29kZS4NCiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHN5bWJvbCBiYXJjb2RlIGluZm9ybWF0aW9uIChkYXRhLCB0eXBlLCB3aWR0aCwgaGVpZ2h0LCBocmksIHF1aWV0Wm9uZSkNCiAgICAgICAgICogQHJldHVybnMge29iamVjdH0gYmFyY29kZSBmb3JtDQogICAgICAgICAqLw0KICAgICAgICBnZW5lcmF0ZTogZnVuY3Rpb24gKHN5bWJvbCkgew0KICAgICAgICAgICAgbGV0IHIgPSB7fTsNCiAgICAgICAgICAgIHN3aXRjaCAoc3ltYm9sLnR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlICd1cGMnOg0KICAgICAgICAgICAgICAgICAgICByID0gc3ltYm9sLmRhdGEubGVuZ3RoIDwgOSA/IHRoaXMudXBjZShzeW1ib2wpIDogdGhpcy51cGNhKHN5bWJvbCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2Vhbic6DQogICAgICAgICAgICAgICAgY2FzZSAnamFuJzoNCiAgICAgICAgICAgICAgICAgICAgciA9IHN5bWJvbC5kYXRhLmxlbmd0aCA8IDkgPyB0aGlzLmVhbjgoc3ltYm9sKSA6IHRoaXMuZWFuMTMoc3ltYm9sKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnY29kZTM5JzoNCiAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMuY29kZTM5KHN5bWJvbCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2l0Zic6DQogICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLml0ZihzeW1ib2wpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdjb2RhYmFyJzoNCiAgICAgICAgICAgICAgICBjYXNlICdudzcnOg0KICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5jb2RhYmFyKHN5bWJvbCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2NvZGU5Myc6DQogICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLmNvZGU5MyhzeW1ib2wpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdjb2RlMTI4JzoNCiAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMuY29kZTEyOChzeW1ib2wpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBDT0RFMTI4IHBhdHRlcm5zOg0KICAgICAgICBjMTI4OiB7DQogICAgICAgICAgICBlbGVtZW50OiAnMjEyMjIyLDIyMjEyMiwyMjIyMjEsMTIxMjIzLDEyMTMyMiwxMzEyMjIsMTIyMjEzLDEyMjMxMiwxMzIyMTIsMjIxMjEzLDIyMTMxMiwyMzEyMTIsMTEyMjMyLDEyMjEzMiwxMjIyMzEsMTEzMjIyLDEyMzEyMiwxMjMyMjEsMjIzMjExLDIyMTEzMiwyMjEyMzEsMjEzMjEyLDIyMzExMiwzMTIxMzEsMzExMjIyLDMyMTEyMiwzMjEyMjEsMzEyMjEyLDMyMjExMiwzMjIyMTEsMjEyMTIzLDIxMjMyMSwyMzIxMjEsMTExMzIzLDEzMTEyMywxMzEzMjEsMTEyMzEzLDEzMjExMywxMzIzMTEsMjExMzEzLDIzMTExMywyMzEzMTEsMTEyMTMzLDExMjMzMSwxMzIxMzEsMTEzMTIzLDExMzMyMSwxMzMxMjEsMzEzMTIxLDIxMTMzMSwyMzExMzEsMjEzMTEzLDIxMzMxMSwyMTMxMzEsMzExMTIzLDMxMTMyMSwzMzExMjEsMzEyMTEzLDMxMjMxMSwzMzIxMTEsMzE0MTExLDIyMTQxMSw0MzExMTEsMTExMjI0LDExMTQyMiwxMjExMjQsMTIxNDIxLDE0MTEyMiwxNDEyMjEsMTEyMjE0LDExMjQxMiwxMjIxMTQsMTIyNDExLDE0MjExMiwxNDIyMTEsMjQxMjExLDIyMTExNCw0MTMxMTEsMjQxMTEyLDEzNDExMSwxMTEyNDIsMTIxMTQyLDEyMTI0MSwxMTQyMTIsMTI0MTEyLDEyNDIxMSw0MTEyMTIsNDIxMTEyLDQyMTIxMSwyMTIxNDEsMjE0MTIxLDQxMjEyMSwxMTExNDMsMTExMzQxLDEzMTE0MSwxMTQxMTMsMTE0MzExLDQxMTExMyw0MTEzMTEsMTEzMTQxLDExNDEzMSwzMTExNDEsNDExMTMxLDIxMTQxMiwyMTEyMTQsMjExMjMyLDIzMzExMTInLnNwbGl0KCcsJyksDQogICAgICAgICAgICBzdGFydGE6IDEwMywgc3RhcnRiOiAxMDQsIHN0YXJ0YzogMTA1LCBhdG9iOiAxMDAsIGF0b2M6IDk5LCBidG9hOiAxMDEsIGJ0b2M6IDk5LCBjdG9hOiAxMDEsIGN0b2I6IDEwMCwgc2hpZnQ6IDk4LCBzdG9wOiAxMDYNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZ2VuZXJhdGUgQ09ERTEyOCBkYXRhIChtaW5pbWl6ZSBzeW1ib2wgd2lkdGgpOg0KICAgICAgICBjb2RlMTI4OiBmdW5jdGlvbiAoc3ltYm9sKSB7DQogICAgICAgICAgICBjb25zdCByID0ge307DQogICAgICAgICAgICBsZXQgcyA9IHN5bWJvbC5kYXRhLnJlcGxhY2UoLygoPyFeW1x4MDAtXHg3Zl0rJCkuKSovLCAnJyk7DQogICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgSFJJDQogICAgICAgICAgICAgICAgci5ocmkgPSBzeW1ib2wuaHJpOw0KICAgICAgICAgICAgICAgIHIudGV4dCA9IHMucmVwbGFjZSgvW1x4MDAtIFx4N2ZdL2csICcgJyk7DQogICAgICAgICAgICAgICAgLy8gbWluaW1pemUgc3ltYm9sIHdpZHRoDQogICAgICAgICAgICAgICAgY29uc3QgZCA9IFtdOw0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBzLnNlYXJjaCgvW14gLV9dLyk7DQogICAgICAgICAgICAgICAgaWYgKC9eXGR7Mn0kLy50ZXN0KHMpKSB7DQogICAgICAgICAgICAgICAgICAgIGQucHVzaCh0aGlzLmMxMjguc3RhcnRjLCBOdW1iZXIocykpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICgvXlxkezQsfS8udGVzdChzKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhjKHRoaXMuYzEyOC5zdGFydGMsIHMsIGQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChwID49IDAgJiYgcy5jaGFyQ29kZUF0KHApIDwgMzIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4YSh0aGlzLmMxMjguc3RhcnRhLCBzLCBkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGIodGhpcy5jMTI4LnN0YXJ0YiwgcywgZCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyBlbmQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNoZWNrIGRpZ2l0IGFuZCBhcHBlbmQgc3RvcCBjaGFyYWN0ZXINCiAgICAgICAgICAgICAgICBkLnB1c2goZC5yZWR1Y2UoKGEsIGMsIGkpID0+IGEgKyBjICogaSkgJSAxMDMsIHRoaXMuYzEyOC5zdG9wKTsNCiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBiYXJzIGFuZCBzcGFjZXMNCiAgICAgICAgICAgICAgICBjb25zdCBxID0gc3ltYm9sLnF1aWV0Wm9uZSA/ICdhJyA6ICcwJzsNCiAgICAgICAgICAgICAgICBjb25zdCBtID0gZC5yZWR1Y2UoKGEsIGMpID0+IGEgKyB0aGlzLmMxMjguZWxlbWVudFtjXSwgcSkgKyBxOw0KICAgICAgICAgICAgICAgIHIud2lkdGhzID0gbS5zcGxpdCgnJykubWFwKGMgPT4gcGFyc2VJbnQoYywgMTYpICogc3ltYm9sLndpZHRoKTsNCiAgICAgICAgICAgICAgICByLmxlbmd0aCA9IHN5bWJvbC53aWR0aCAqIChkLmxlbmd0aCAqIDExICsgKHN5bWJvbC5xdWlldFpvbmUgPyAyMiA6IDIpKTsNCiAgICAgICAgICAgICAgICByLmhlaWdodCA9IHN5bWJvbC5oZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJvY2VzcyBDT0RFMTI4IGNvZGUgc2V0IEE6DQogICAgICAgIGNvZGUxMjhhOiBmdW5jdGlvbiAoeCwgcywgZCkgew0KICAgICAgICAgICAgaWYgKHggIT09IHRoaXMuYzEyOC5zaGlmdCkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL14oKD8hXGR7NCx9KVtceDAwLV9dKSsvLCBtID0+IChtLnNwbGl0KCcnKS5mb3JFYWNoKGMgPT4gZC5wdXNoKChjLmNoYXJDb2RlQXQoMCkgKyA2NCkgJSA5NikpLCAnJykpOw0KICAgICAgICAgICAgcyA9IHMucmVwbGFjZSgvXlxkKD89KFxkXGQpezIsfShcRHwkKSkvLCBtID0+IChkLnB1c2goKG0uY2hhckNvZGVBdCgwKSArIDY0KSAlIDk2KSwgJycpKTsNCiAgICAgICAgICAgIGNvbnN0IHQgPSBzLnNsaWNlKDEpOw0KICAgICAgICAgICAgY29uc3QgcCA9IHQuc2VhcmNoKC9bXiAtX10vKTsNCiAgICAgICAgICAgIGlmICgvXlxkezQsfS8udGVzdChzKSkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGModGhpcy5jMTI4LmF0b2MsIHMsIGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocCA+PSAwICYmIHQuY2hhckNvZGVBdChwKSA8IDMyKSB7DQogICAgICAgICAgICAgICAgZC5wdXNoKHRoaXMuYzEyOC5zaGlmdCwgcy5jaGFyQ29kZUF0KDApIC0gMzIpOw0KICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGEodGhpcy5jMTI4LnNoaWZ0LCB0LCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGIodGhpcy5jMTI4LmF0b2IsIHMsIGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gZW5kDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIHByb2Nlc3MgQ09ERTEyOCBjb2RlIHNldCBCOg0KICAgICAgICBjb2RlMTI4YjogZnVuY3Rpb24gKHgsIHMsIGQpIHsNCiAgICAgICAgICAgIGlmICh4ICE9PSB0aGlzLmMxMjguc2hpZnQpIHsNCiAgICAgICAgICAgICAgICBkLnB1c2goeCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzID0gcy5yZXBsYWNlKC9eKCg/IVxkezQsfSlbIC1ceDdmXSkrLywgbSA9PiAobS5zcGxpdCgnJykuZm9yRWFjaChjID0+IGQucHVzaChjLmNoYXJDb2RlQXQoMCkgLSAzMikpLCAnJykpOw0KICAgICAgICAgICAgcyA9IHMucmVwbGFjZSgvXlxkKD89KFxkXGQpezIsfShcRHwkKSkvLCBtID0+IChkLnB1c2gobS5jaGFyQ29kZUF0KDApIC0gMzIpLCAnJykpOw0KICAgICAgICAgICAgY29uc3QgdCA9IHMuc2xpY2UoMSk7DQogICAgICAgICAgICBjb25zdCBwID0gdC5zZWFyY2goL1teIC1fXS8pOw0KICAgICAgICAgICAgaWYgKC9eXGR7NCx9Ly50ZXN0KHMpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4Yyh0aGlzLmMxMjguYnRvYywgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChwID49IDAgJiYgdC5jaGFyQ29kZUF0KHApID4gOTUpIHsNCiAgICAgICAgICAgICAgICBkLnB1c2godGhpcy5jMTI4LnNoaWZ0LCBzLmNoYXJDb2RlQXQoMCkgKyA2NCk7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4Yih0aGlzLmMxMjguc2hpZnQsIHQsIGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4YSh0aGlzLmMxMjguYnRvYSwgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBlbmQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJvY2VzcyBDT0RFMTI4IGNvZGUgc2V0IEM6DQogICAgICAgIGNvZGUxMjhjOiBmdW5jdGlvbiAoeCwgcywgZCkgew0KICAgICAgICAgICAgaWYgKHggIT09IHRoaXMuYzEyOC5zaGlmdCkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL15cZHs0LH0vZywgbSA9PiBtLnJlcGxhY2UoL1xkezJ9L2csIGMgPT4gKGQucHVzaChOdW1iZXIoYykpLCAnJykpKTsNCiAgICAgICAgICAgIGNvbnN0IHAgPSBzLnNlYXJjaCgvW14gLV9dLyk7DQogICAgICAgICAgICBpZiAocCA+PSAwICYmIHMuY2hhckNvZGVBdChwKSA8IDMyKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4YSh0aGlzLmMxMjguY3RvYSwgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhiKHRoaXMuYzEyOC5jdG9iLCBzLCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIGVuZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyBDT0RFOTMgcGF0dGVybnM6DQogICAgICAgIGM5Mzogew0KICAgICAgICAgICAgZXNjYXBlOiAnY1UsZEEsZEIsZEMsZEQsZEUsZEYsZEcsZEgsZEksZEosZEssZEwsZE0sZE4sZE8sZFAsZFEsZFIsZFMsZFQsZFUsZFYsZFcsZFgsZFksZFosY0EsY0IsY0MsY0QsY0UsICxzQSxzQixzQywkLCUsc0Ysc0csc0gsc0ksc0osKyxzTCwtLC4sLywwLDEsMiwzLDQsNSw2LDcsOCw5LHNaLGNGLGNHLGNILGNJLGNKLGNWLEEsQixDLEQsRSxGLEcsSCxJLEosSyxMLE0sTixPLFAsUSxSLFMsVCxVLFYsVyxYLFksWixjSyxjTCxjTSxjTixjTyxjVyxwQSxwQixwQyxwRCxwRSxwRixwRyxwSCxwSSxwSixwSyxwTCxwTSxwTixwTyxwUCxwUSxwUixwUyxwVCxwVSxwVixwVyxwWCxwWSxwWixjUCxjUSxjUixjUyxjVCcuc3BsaXQoJywnKSwNCiAgICAgICAgICAgIGNvZGU6ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVotLiAkLyslZGNzcCcuc3BsaXQoJycpLnJlZHVjZSgoYSwgYywgaSkgPT4gKGFbY10gPSBpLCBhKSwge30pLA0KICAgICAgICAgICAgZWxlbWVudDogJzEzMTExMiwxMTEyMTMsMTExMzEyLDExMTQxMSwxMjExMTMsMTIxMjEyLDEyMTMxMSwxMTExMTQsMTMxMjExLDE0MTExMSwyMTExMTMsMjExMjEyLDIxMTMxMSwyMjExMTIsMjIxMjExLDIzMTExMSwxMTIxMTMsMTEyMjEyLDExMjMxMSwxMjIxMTIsMTMyMTExLDExMTEyMywxMTEyMjIsMTExMzIxLDEyMTEyMiwxMzExMjEsMjEyMTEyLDIxMjIxMSwyMTExMjIsMjExMjIxLDIyMTEyMSwyMjIxMTEsMTEyMTIyLDExMjIyMSwxMjIxMjEsMTIzMTExLDEyMTEzMSwzMTExMTIsMzExMjExLDMyMTExMSwxMTIxMzEsMTEzMTIxLDIxMTEzMSwxMjEyMjEsMzEyMTExLDMxMTEyMSwxMjIyMTEsMTExMTQxLDExMTE0MTEnLnNwbGl0KCcsJyksDQogICAgICAgICAgICBzdGFydDogNDcsIHN0b3A6IDQ4DQogICAgICAgIH0sDQogICAgICAgIC8vIGdlbmVyYXRlIENPREU5MyBkYXRhOg0KICAgICAgICBjb2RlOTM6IGZ1bmN0aW9uIChzeW1ib2wpIHsNCiAgICAgICAgICAgIGNvbnN0IHIgPSB7fTsNCiAgICAgICAgICAgIGxldCBzID0gc3ltYm9sLmRhdGEucmVwbGFjZSgvKCg/IV5bXHgwMC1ceDdmXSskKS4pKi8sICcnKTsNCiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBIUkkNCiAgICAgICAgICAgICAgICByLmhyaSA9IHN5bWJvbC5ocmk7DQogICAgICAgICAgICAgICAgci50ZXh0ID0gcy5yZXBsYWNlKC9bXHgwMC0gXHg3Zl0vZywgJyAnKTsNCiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY2hlY2sgZGlnaXQNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gcy5zcGxpdCgnJykucmVkdWNlKChhLCBjKSA9PiBhICsgdGhpcy5jOTMuZXNjYXBlW2MuY2hhckNvZGVBdCgwKV0sICcnKS5zcGxpdCgnJykubWFwKGMgPT4gdGhpcy5jOTMuY29kZVtjXSk7DQogICAgICAgICAgICAgICAgZC5wdXNoKGQucmVkdWNlUmlnaHQoKGEsIGMsIGkpID0+IGEgKyBjICogKChkLmxlbmd0aCAtIDEgLSBpKSAlIDIwICsgMSkpICUgNDcpOw0KICAgICAgICAgICAgICAgIGQucHVzaChkLnJlZHVjZVJpZ2h0KChhLCBjLCBpKSA9PiBhICsgYyAqICgoZC5sZW5ndGggLSAxIC0gaSkgJSAxNSArIDEpKSAlIDQ3KTsNCiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgc3RhcnQgY2hhcmFjdGVyIGFuZCBzdG9wIGNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgIGQudW5zaGlmdCh0aGlzLmM5My5zdGFydCk7DQogICAgICAgICAgICAgICAgZC5wdXNoKHRoaXMuYzkzLnN0b3ApOw0KICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlIGJhcnMgYW5kIHNwYWNlcw0KICAgICAgICAgICAgICAgIGNvbnN0IHEgPSBzeW1ib2wucXVpZXRab25lID8gJ2EnIDogJzAnOw0KICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBkLnJlZHVjZSgoYSwgYykgPT4gYSArIHRoaXMuYzkzLmVsZW1lbnRbY10sIHEpICsgcTsNCiAgICAgICAgICAgICAgICByLndpZHRocyA9IG0uc3BsaXQoJycpLm1hcChjID0+IHBhcnNlSW50KGMsIDE2KSAqIHN5bWJvbC53aWR0aCk7DQogICAgICAgICAgICAgICAgci5sZW5ndGggPSBzeW1ib2wud2lkdGggKiAoZC5sZW5ndGggKiA5ICsgKHN5bWJvbC5xdWlldFpvbmUgPyAyMSA6IDEpKTsNCiAgICAgICAgICAgICAgICByLmhlaWdodCA9IHN5bWJvbC5oZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gQ29kYWJhcihOVy03KSBwYXR0ZXJuczoNCiAgICAgICAgbnc3OiB7DQogICAgICAgICAgICAnMCc6ICcyMjIyMjU1JywgJzEnOiAnMjIyMjU1MicsICcyJzogJzIyMjUyMjUnLCAnMyc6ICc1NTIyMjIyJywgJzQnOiAnMjI1MjI1MicsDQogICAgICAgICAgICAnNSc6ICc1MjIyMjUyJywgJzYnOiAnMjUyMjIyNScsICc3JzogJzI1MjI1MjInLCAnOCc6ICcyNTUyMjIyJywgJzknOiAnNTIyNTIyMicsDQogICAgICAgICAgICAnLSc6ICcyMjI1NTIyJywgJyQnOiAnMjI1NTIyMicsICc6JzogJzUyMjI1MjUnLCAnLyc6ICc1MjUyMjI1JywgJy4nOiAnNTI1MjUyMicsDQogICAgICAgICAgICAnKyc6ICcyMjUyNTI1JywgJ0EnOiAnMjI1NTI1MicsICdCJzogJzI1MjUyMjUnLCAnQyc6ICcyMjI1MjU1JywgJ0QnOiAnMjIyNTU1MicNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZ2VuZXJhdGUgQ29kYWJhcihOVy03KSBkYXRhOg0KICAgICAgICBjb2RhYmFyOiBmdW5jdGlvbiAoc3ltYm9sKSB7DQogICAgICAgICAgICBjb25zdCByID0ge307DQogICAgICAgICAgICBsZXQgcyA9IHN5bWJvbC5kYXRhLnJlcGxhY2UoLygoPyFeW0EtRF1bMC05XC0kOi8uK10rW0EtRF0kKS4pKi9pLCAnJyk7DQogICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgSFJJDQogICAgICAgICAgICAgICAgci5ocmkgPSBzeW1ib2wuaHJpOw0KICAgICAgICAgICAgICAgIHIudGV4dCA9IHM7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgYmFycyBhbmQgc3BhY2VzDQogICAgICAgICAgICAgICAgY29uc3QgcSA9IHN5bWJvbC5xdWlldFpvbmUgPyAnYScgOiAnMCc7DQogICAgICAgICAgICAgICAgY29uc3QgbSA9IHMudG9VcHBlckNhc2UoKS5zcGxpdCgnJykucmVkdWNlKChhLCBjKSA9PiBhICsgdGhpcy5udzdbY10gKyAnMicsIHEpLnNsaWNlKDAsIC0xKSArIHE7DQogICAgICAgICAgICAgICAgci53aWR0aHMgPSBtLnNwbGl0KCcnKS5tYXAoYyA9PiBwYXJzZUludChjLCAxNikgKiBzeW1ib2wud2lkdGggKyAxID4+IDEpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBbIDI1LCAzOSwgNTAsIDMsIDUsIDYgXTsNCiAgICAgICAgICAgICAgICByLmxlbmd0aCA9IHMubGVuZ3RoICogd1tzeW1ib2wud2lkdGggLSAyXSAtIChzLm1hdGNoKC9bXGRcLSRdL2cpIHx8IFtdKS5sZW5ndGggKiB3W3N5bWJvbC53aWR0aCArIDFdICsgc3ltYm9sLndpZHRoICogKHN5bWJvbC5xdWlldFpvbmUgPyAxOSA6IC0xKTsNCiAgICAgICAgICAgICAgICByLmhlaWdodCA9IHN5bWJvbC5oZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gSW50ZXJsZWF2ZWQgMiBvZiA1IHBhdHRlcm5zOg0KICAgICAgICBpMjU6IHsNCiAgICAgICAgICAgIGVsZW1lbnQ6ICcyMjU1Miw1MjIyNSwyNTIyNSw1NTIyMiwyMjUyNSw1MjUyMiwyNTUyMiwyMjI1NSw1MjI1MiwyNTI1Micuc3BsaXQoJywnKSwNCiAgICAgICAgICAgIHN0YXJ0OiAnMjIyMicsIHN0b3A6ICc1MjInDQogICAgICAgIH0sDQogICAgICAgIC8vIGdlbmVyYXRlIEludGVybGVhdmVkIDIgb2YgNSBkYXRhOg0KICAgICAgICBpdGY6IGZ1bmN0aW9uIChzeW1ib2wpIHsNCiAgICAgICAgICAgIGNvbnN0IHIgPSB7fTsNCiAgICAgICAgICAgIGxldCBzID0gc3ltYm9sLmRhdGEucmVwbGFjZSgvKCg/IV4oXGR7Mn0pKyQpLikqLywgJycpOw0KICAgICAgICAgICAgaWYgKHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlIEhSSQ0KICAgICAgICAgICAgICAgIHIuaHJpID0gc3ltYm9sLmhyaTsNCiAgICAgICAgICAgICAgICByLnRleHQgPSBzOw0KICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlIGJhcnMgYW5kIHNwYWNlcw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBzeW1ib2wuZGF0YS5yZXBsYWNlKC8oKD8hXihcZHsyfSkrJCkuKSovLCAnJywgJycpLnNwbGl0KCcnKS5tYXAoYyA9PiBOdW1iZXIoYykpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHEgPSBzeW1ib2wucXVpZXRab25lID8gJ2EnIDogJzAnOw0KICAgICAgICAgICAgICAgIGxldCBtID0gcSArIHRoaXMuaTI1LnN0YXJ0Ow0KICAgICAgICAgICAgICAgIGxldCBpID0gMDsNCiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmkyNS5lbGVtZW50W2RbaSsrXV07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmkyNS5lbGVtZW50W2RbaSsrXV07DQogICAgICAgICAgICAgICAgICAgIG0gKz0gYi5zcGxpdCgnJykucmVkdWNlKChhLCBjLCBqKSA9PiBhICsgYyArIHNbal0sICcnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbSArPSB0aGlzLmkyNS5zdG9wICsgcTsNCiAgICAgICAgICAgICAgICByLndpZHRocyA9IG0uc3BsaXQoJycpLm1hcChjID0+IHBhcnNlSW50KGMsIDE2KSAqIHN5bWJvbC53aWR0aCArIDEgPj4gMSk7DQogICAgICAgICAgICAgICAgY29uc3QgdyA9IFsgMTYsIDI1LCAzMiwgMTcsIDI2LCAzNCBdOw0KICAgICAgICAgICAgICAgIHIubGVuZ3RoID0gcy5sZW5ndGggKiB3W3N5bWJvbC53aWR0aCAtIDJdICsgd1tzeW1ib2wud2lkdGggKyAxXSArIHN5bWJvbC53aWR0aCAqIChzeW1ib2wucXVpZXRab25lID8gMjAgOiAwKTsNCiAgICAgICAgICAgICAgICByLmhlaWdodCA9IHN5bWJvbC5oZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gQ09ERTM5IHBhdHRlcm5zOg0KICAgICAgICBjMzk6IHsNCiAgICAgICAgICAgICcwJzogJzIyMjU1MjUyMicsICcxJzogJzUyMjUyMjIyNScsICcyJzogJzIyNTUyMjIyNScsICczJzogJzUyNTUyMjIyMicsICc0JzogJzIyMjU1MjIyNScsDQogICAgICAgICAgICAnNSc6ICc1MjI1NTIyMjInLCAnNic6ICcyMjU1NTIyMjInLCAnNyc6ICcyMjI1MjI1MjUnLCAnOCc6ICc1MjI1MjI1MjInLCAnOSc6ICcyMjU1MjI1MjInLA0KICAgICAgICAgICAgJ0EnOiAnNTIyMjI1MjI1JywgJ0InOiAnMjI1MjI1MjI1JywgJ0MnOiAnNTI1MjI1MjIyJywgJ0QnOiAnMjIyMjU1MjI1JywgJ0UnOiAnNTIyMjU1MjIyJywNCiAgICAgICAgICAgICdGJzogJzIyNTI1NTIyMicsICdHJzogJzIyMjIyNTUyNScsICdIJzogJzUyMjIyNTUyMicsICdJJzogJzIyNTIyNTUyMicsICdKJzogJzIyMjI1NTUyMicsDQogICAgICAgICAgICAnSyc6ICc1MjIyMjIyNTUnLCAnTCc6ICcyMjUyMjIyNTUnLCAnTSc6ICc1MjUyMjIyNTInLCAnTic6ICcyMjIyNTIyNTUnLCAnTyc6ICc1MjIyNTIyNTInLA0KICAgICAgICAgICAgJ1AnOiAnMjI1MjUyMjUyJywgJ1EnOiAnMjIyMjIyNTU1JywgJ1InOiAnNTIyMjIyNTUyJywgJ1MnOiAnMjI1MjIyNTUyJywgJ1QnOiAnMjIyMjUyNTUyJywNCiAgICAgICAgICAgICdVJzogJzU1MjIyMjIyNScsICdWJzogJzI1NTIyMjIyNScsICdXJzogJzU1NTIyMjIyMicsICdYJzogJzI1MjI1MjIyNScsICdZJzogJzU1MjI1MjIyMicsDQogICAgICAgICAgICAnWic6ICcyNTUyNTIyMjInLCAnLSc6ICcyNTIyMjI1MjUnLCAnLic6ICc1NTIyMjI1MjInLCAnICc6ICcyNTUyMjI1MjInLCAnJCc6ICcyNTI1MjUyMjInLA0KICAgICAgICAgICAgJy8nOiAnMjUyNTIyMjUyJywgJysnOiAnMjUyMjI1MjUyJywgJyUnOiAnMjIyNTI1MjUyJywgJyonOiAnMjUyMjUyNTIyJw0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBDT0RFMzkgZGF0YToNCiAgICAgICAgY29kZTM5OiBmdW5jdGlvbiAoc3ltYm9sKSB7DQogICAgICAgICAgICBjb25zdCByID0ge307DQogICAgICAgICAgICBsZXQgcyA9IHN5bWJvbC5kYXRhLnJlcGxhY2UoLygoPyFeXCo/WzAtOUEtWlwtLiAkLyslXStcKj8kKS4pKi8sICcnKTsNCiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgc3RhcnQgY2hhcmFjdGVyIGFuZCBzdG9wIGNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL15cKj8oW14qXSspXCo/JC8sICcqJDEqJyk7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgSFJJDQogICAgICAgICAgICAgICAgci5ocmkgPSBzeW1ib2wuaHJpOw0KICAgICAgICAgICAgICAgIHIudGV4dCA9IHM7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgYmFycyBhbmQgc3BhY2VzDQogICAgICAgICAgICAgICAgY29uc3QgcSA9IHN5bWJvbC5xdWlldFpvbmUgPyAnYScgOiAnMCc7DQogICAgICAgICAgICAgICAgY29uc3QgbSA9IHMuc3BsaXQoJycpLnJlZHVjZSgoYSwgYykgPT4gYSArIHRoaXMuYzM5W2NdICsgJzInLCBxKS5zbGljZSgwLCAtMSkgKyBxOw0KICAgICAgICAgICAgICAgIHIud2lkdGhzID0gbS5zcGxpdCgnJykubWFwKGMgPT4gcGFyc2VJbnQoYywgMTYpICogc3ltYm9sLndpZHRoICsgMSA+PiAxKTsNCiAgICAgICAgICAgICAgICBjb25zdCB3ID0gWyAyOSwgNDUsIDU4IF07DQogICAgICAgICAgICAgICAgci5sZW5ndGggPSBzLmxlbmd0aCAqIHdbc3ltYm9sLndpZHRoIC0gMl0gKyBzeW1ib2wud2lkdGggKiAoc3ltYm9sLnF1aWV0Wm9uZSA/IDE5IDogLTEpOw0KICAgICAgICAgICAgICAgIHIuaGVpZ2h0ID0gc3ltYm9sLmhlaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBVUEMvRUFOL0pBTiBwYXR0ZXJuczoNCiAgICAgICAgZWFuOiB7DQogICAgICAgICAgICBhOiAnMzIxMSwyMjIxLDIxMjIsMTQxMSwxMTMyLDEyMzEsMTExNCwxMzEyLDEyMTMsMzExMicuc3BsaXQoJywnKSwNCiAgICAgICAgICAgIGI6ICcxMTIzLDEyMjIsMjIxMiwxMTQxLDIzMTEsMTMyMSw0MTExLDIxMzEsMzEyMSwyMTEzJy5zcGxpdCgnLCcpLA0KICAgICAgICAgICAgYzogJzMyMTEsMjIyMSwyMTIyLDE0MTEsMTEzMiwxMjMxLDExMTQsMTMxMiwxMjEzLDMxMTInLnNwbGl0KCcsJyksDQogICAgICAgICAgICBnOiAnMTExLDExMTExLDExMTExMSwxMSwxMTInLnNwbGl0KCcsJyksDQogICAgICAgICAgICBwOiAnYWFhYWFhLGFhYmFiYixhYWJiYWIsYWFiYmJhLGFiYWFiYixhYmJhYWIsYWJiYmFhLGFiYWJhYixhYmFiYmEsYWJiYWJhJy5zcGxpdCgnLCcpLA0KICAgICAgICAgICAgZTogJ2JiYmFhYSxiYmFiYWEsYmJhYWJhLGJiYWFhYixiYWJiYWEsYmFhYmJhLGJhYWFiYixiYWJhYmEsYmFiYWFiLGJhYWJhYicuc3BsaXQoJywnKQ0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBVUEMtQSBkYXRhOg0KICAgICAgICB1cGNhOiBmdW5jdGlvbiAoc3ltYm9sKSB7DQogICAgICAgICAgICBjb25zdCBzID0gT2JqZWN0LmFzc2lnbih7fSwgc3ltYm9sKTsNCiAgICAgICAgICAgIHMuZGF0YSA9ICcwJyArIHN5bWJvbC5kYXRhOw0KICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuZWFuMTMocyk7DQogICAgICAgICAgICBpZiAoJ3RleHQnIGluIHIpIHsNCiAgICAgICAgICAgICAgICByLnRleHQgPSByLnRleHQuc2xpY2UoMSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZ2VuZXJhdGUgVVBDLUUgZGF0YToNCiAgICAgICAgdXBjZTogZnVuY3Rpb24gKHN5bWJvbCkgew0KICAgICAgICAgICAgY29uc3QgciA9IHt9Ow0KICAgICAgICAgICAgY29uc3QgZCA9IHN5bWJvbC5kYXRhLnJlcGxhY2UoLygoPyFeMFxkezYsN30kKS4pKi8sICcnKS5zcGxpdCgnJykubWFwKGMgPT4gTnVtYmVyKGMpKTsNCiAgICAgICAgICAgIGlmIChkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY2hlY2sgZGlnaXQNCiAgICAgICAgICAgICAgICBkWzddID0gMDsNCiAgICAgICAgICAgICAgICBkWzddID0gKDEwIC0gdGhpcy51cGNldG9hKGQpLnJlZHVjZSgoYSwgYywgaSkgPT4gYSArIGMgKiAoMyAtIChpICUgMikgKiAyKSwgMCkgJSAxMCkgJSAxMDsNCiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBIUkkNCiAgICAgICAgICAgICAgICByLmhyaSA9IHN5bWJvbC5ocmk7DQogICAgICAgICAgICAgICAgci50ZXh0ID0gZC5qb2luKCcnKTsNCiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBiYXJzIGFuZCBzcGFjZXMNCiAgICAgICAgICAgICAgICBjb25zdCBxID0gc3ltYm9sLnF1aWV0Wm9uZSA/ICc3JyA6ICcwJzsNCiAgICAgICAgICAgICAgICBsZXQgbSA9IHEgKyB0aGlzLmVhbi5nWzBdOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNzsgaSsrKSBtICs9IHRoaXMuZWFuW3RoaXMuZWFuLmVbZFs3XV1baSAtIDFdXVtkW2ldXTsNCiAgICAgICAgICAgICAgICBtICs9IHRoaXMuZWFuLmdbMl0gKyBxOw0KICAgICAgICAgICAgICAgIHIud2lkdGhzID0gbS5zcGxpdCgnJykubWFwKGMgPT4gcGFyc2VJbnQoYywgMTYpICogc3ltYm9sLndpZHRoKTsNCiAgICAgICAgICAgICAgICByLmxlbmd0aCA9IHN5bWJvbC53aWR0aCAqIChzeW1ib2wucXVpZXRab25lID8gNjUgOiA1MSk7DQogICAgICAgICAgICAgICAgci5oZWlnaHQgPSBzeW1ib2wuaGVpZ2h0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0sDQogICAgICAgIC8vIGNvbnZlcnQgVVBDLUUgdG8gVVBDLUE6DQogICAgICAgIHVwY2V0b2E6IGUgPT4gew0KICAgICAgICAgICAgY29uc3QgYSA9IGUuc2xpY2UoMCwgMyk7DQogICAgICAgICAgICBzd2l0Y2ggKGVbNl0pIHsNCiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogY2FzZSAyOg0KICAgICAgICAgICAgICAgICAgICBhLnB1c2goZVs2XSwgMCwgMCwgMCwgMCwgZVszXSwgZVs0XSwgZVs1XSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgMzoNCiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGVbM10sIDAsIDAsIDAsIDAsIDAsIGVbNF0sIGVbNV0pOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIDQ6DQogICAgICAgICAgICAgICAgICAgIGEucHVzaChlWzNdLCBlWzRdLCAwLCAwLCAwLCAwLCAwLCBlWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGVbM10sIGVbNF0sIGVbNV0sIDAsIDAsIDAsIDAsIGVbNl0pOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGEucHVzaChlWzddKTsNCiAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBFQU4tMTMoSkFOLTEzKSBkYXRhOg0KICAgICAgICBlYW4xMzogZnVuY3Rpb24gKHN5bWJvbCkgew0KICAgICAgICAgICAgY29uc3QgciA9IHt9Ow0KICAgICAgICAgICAgY29uc3QgZCA9IHN5bWJvbC5kYXRhLnJlcGxhY2UoLygoPyFeXGR7MTIsMTN9JCkuKSovLCAnJykuc3BsaXQoJycpLm1hcChjID0+IE51bWJlcihjKSk7DQogICAgICAgICAgICBpZiAoZC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNoZWNrIGRpZ2l0DQogICAgICAgICAgICAgICAgZFsxMl0gPSAwOw0KICAgICAgICAgICAgICAgIGRbMTJdID0gKDEwIC0gZC5yZWR1Y2UoKGEsIGMsIGkpID0+IGEgKyBjICogKChpICUgMikgKiAyICsgMSkpICUgMTApICUgMTA7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgSFJJDQogICAgICAgICAgICAgICAgci5ocmkgPSBzeW1ib2wuaHJpOw0KICAgICAgICAgICAgICAgIHIudGV4dCA9IGQuam9pbignJyk7DQogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgYmFycyBhbmQgc3BhY2VzDQogICAgICAgICAgICAgICAgbGV0IG0gPSAoc3ltYm9sLnF1aWV0Wm9uZSA/ICdiJyA6ICcwJykgKyB0aGlzLmVhbi5nWzBdOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNzsgaSsrKSBtICs9IHRoaXMuZWFuW3RoaXMuZWFuLnBbZFswXV1baSAtIDFdXVtkW2ldXTsNCiAgICAgICAgICAgICAgICBtICs9IHRoaXMuZWFuLmdbMV07DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDc7IGkgPCAxMzsgaSsrKSBtICs9IHRoaXMuZWFuLmNbZFtpXV07DQogICAgICAgICAgICAgICAgbSArPSB0aGlzLmVhbi5nWzBdICsgKHN5bWJvbC5xdWlldFpvbmUgPyAnNycgOiAnMCcpOw0KICAgICAgICAgICAgICAgIHIud2lkdGhzID0gbS5zcGxpdCgnJykubWFwKGMgPT4gcGFyc2VJbnQoYywgMTYpICogc3ltYm9sLndpZHRoKTsNCiAgICAgICAgICAgICAgICByLmxlbmd0aCA9IHN5bWJvbC53aWR0aCAqIChzeW1ib2wucXVpZXRab25lID8gMTEzIDogOTUpOw0KICAgICAgICAgICAgICAgIHIuaGVpZ2h0ID0gc3ltYm9sLmhlaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBFQU4tOChKQU4tOCkgZGF0YToNCiAgICAgICAgZWFuODogZnVuY3Rpb24gKHN5bWJvbCkgew0KICAgICAgICAgICAgY29uc3QgciA9IHt9Ow0KICAgICAgICAgICAgY29uc3QgZCA9IHN5bWJvbC5kYXRhLnJlcGxhY2UoLygoPyFeXGR7Nyw4fSQpLikqLywgJycpLnNwbGl0KCcnKS5tYXAoYyA9PiBOdW1iZXIoYykpOw0KICAgICAgICAgICAgaWYgKGQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjaGVjayBkaWdpdA0KICAgICAgICAgICAgICAgIGRbN10gPSAwOw0KICAgICAgICAgICAgICAgIGRbN10gPSAoMTAgLSBkLnJlZHVjZSgoYSwgYywgaSkgPT4gYSArIGMgKiAoMyAtIChpICUgMikgKiAyKSwgMCkgJSAxMCkgJSAxMDsNCiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBIUkkNCiAgICAgICAgICAgICAgICByLmhyaSA9IHN5bWJvbC5ocmk7DQogICAgICAgICAgICAgICAgci50ZXh0ID0gZC5qb2luKCcnKTsNCiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBiYXJzIGFuZCBzcGFjZXMNCiAgICAgICAgICAgICAgICBjb25zdCBxID0gc3ltYm9sLnF1aWV0Wm9uZSA/ICc3JyA6ICcwJzsNCiAgICAgICAgICAgICAgICBsZXQgbSA9IHEgKyB0aGlzLmVhbi5nWzBdOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSBtICs9IHRoaXMuZWFuLmFbZFtpXV07DQogICAgICAgICAgICAgICAgbSArPSB0aGlzLmVhbi5nWzFdOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSA0OyBpIDwgODsgaSsrKSBtICs9IHRoaXMuZWFuLmNbZFtpXV07DQogICAgICAgICAgICAgICAgbSArPSB0aGlzLmVhbi5nWzBdICsgcTsNCiAgICAgICAgICAgICAgICByLndpZHRocyA9IG0uc3BsaXQoJycpLm1hcChjID0+IHBhcnNlSW50KGMsIDE2KSAqIHN5bWJvbC53aWR0aCk7DQogICAgICAgICAgICAgICAgci5sZW5ndGggPSBzeW1ib2wud2lkdGggKiAoc3ltYm9sLnF1aWV0Wm9uZSA/IDgxIDogNjcpOw0KICAgICAgICAgICAgICAgIHIuaGVpZ2h0ID0gc3ltYm9sLmhlaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gbXVsdGlsaW5ndWFsIGNvbnZlcnNpb24gdGFibGUgKGNwNDM3LCBjcDg1MiwgY3A4NTgsIGNwODY2LCBjcDEyNTIpDQogICAgLy8NCiAgICBjb25zdCBtdWx0aXRhYmxlID0ge307DQogICAgY29uc3QgbXVsdGlwYWdlID0gew0KICAgICAgICAnXHgwMCc6ICfDh8O8w6nDosOkw6DDpcOnw6rDq8Oow6/DrsOsw4TDhcOJw6bDhsO0w7bDssO7w7nDv8OWw5zCosKjwqXigqfGksOhw63Ds8O6w7HDkcKqwrrCv+KMkMKswr3CvMKhwqvCu+KWkeKWkuKWk+KUguKUpOKVoeKVouKVluKVleKVo+KVkeKVl+KVneKVnOKVm+KUkOKUlOKUtOKUrOKUnOKUgOKUvOKVnuKVn+KVmuKVlOKVqeKVpuKVoOKVkOKVrOKVp+KVqOKVpOKVpeKVmeKVmOKVkuKVk+KVq+KVquKUmOKUjOKWiOKWhOKWjOKWkOKWgM6xw5/Ok8+AzqPPg8K1z4TOps6YzqnOtOKIns+GzrXiiKniiaHCseKJpeKJpOKMoOKMocO34omIwrDiiJnCt+KImuKBv8Ky4pagwqAnLA0KICAgICAgICAnXHgxMCc6ICfigqzvv73igJrGkuKAnuKApuKAoOKAocuG4oCwxaDigLnFku+/vcW977+977+94oCY4oCZ4oCc4oCd4oCi4oCT4oCUy5zihKLFoeKAusWT77+9xb7FuMKgwqHCosKjwqTCpcKmwqfCqMKpwqrCq8Kswq3CrsKvwrDCscKywrPCtMK1wrbCt8K4wrnCusK7wrzCvcK+wr/DgMOBw4LDg8OEw4XDhsOHw4jDicOKw4vDjMONw47Dj8OQw5HDksOTw5TDlcOWw5fDmMOZw5rDm8Ocw53DnsOfw6DDocOiw6PDpMOlw6bDp8Oow6nDqsOrw6zDrcOuw6/DsMOxw7LDs8O0w7XDtsO3w7jDucO6w7vDvMO9w77DvycsDQogICAgICAgICdceDExJzogJ9CQ0JHQktCT0JTQldCW0JfQmNCZ0JrQm9Cc0J3QntCf0KDQodCi0KPQpNCl0KbQp9Co0KnQqtCr0KzQrdCu0K/QsNCx0LLQs9C00LXQttC30LjQudC60LvQvNC90L7Qv+KWkeKWkuKWk+KUguKUpOKVoeKVouKVluKVleKVo+KVkeKVl+KVneKVnOKVm+KUkOKUlOKUtOKUrOKUnOKUgOKUvOKVnuKVn+KVmuKVlOKVqeKVpuKVoOKVkOKVrOKVp+KVqOKVpOKVpeKVmeKVmOKVkuKVk+KVq+KVquKUmOKUjOKWiOKWhOKWjOKWkOKWgNGA0YHRgtGD0YTRhdGG0YfRiNGJ0YrRi9GM0Y3RjtGP0IHRkdCE0ZTQh9GX0I7RnsKw4oiZwrfiiJrihJbCpOKWoMKgJywNCiAgICAgICAgJ1x4MTInOiAnw4fDvMOpw6LDpMWvxIfDp8WCw6vFkMWRw67FucOExIbDicS5xLrDtMO2xL3EvsWaxZvDlsOcxaTFpcWBw5fEjcOhw63Ds8O6xITEhcW9xb7EmMSZwqzFusSMxZ/Cq8K74paR4paS4paT4pSC4pSkw4HDgsSaxZ7ilaPilZHilZfilZ3Fu8W84pSQ4pSU4pS04pSs4pSc4pSA4pS8xILEg+KVmuKVlOKVqeKVpuKVoOKVkOKVrMKkxJHEkMSOw4vEj8WHw43DjsSb4pSY4pSM4paI4paExaLFruKWgMOTw5/DlMWDxYTFiMWgxaHFlMOaxZXFsMO9w53Fo8K0wq3Lncuby4fLmMKnw7fCuMKwwqjLmcWxxZjFmeKWoMKgJywNCiAgICAgICAgJ1x4MTMnOiAnw4fDvMOpw6LDpMOgw6XDp8Oqw6vDqMOvw67DrMOEw4XDicOmw4bDtMO2w7LDu8O5w7/DlsOcw7jCo8OYw5fGksOhw63Ds8O6w7HDkcKqwrrCv8KuwqzCvcK8wqHCq8K74paR4paS4paT4pSC4pSkw4HDgsOAwqnilaPilZHilZfilZ3CosKl4pSQ4pSU4pS04pSs4pSc4pSA4pS8w6PDg+KVmuKVlOKVqeKVpuKVoOKVkOKVrMKkw7DDkMOKw4vDiOKCrMONw47Dj+KUmOKUjOKWiOKWhMKmw4ziloDDk8Ofw5TDksO1w5XCtcO+w57DmsObw5nDvcOdwq/CtMKtwrHigJfCvsK2wqfDt8K4wrDCqMK3wrnCs8Ky4pagwqAnDQogICAgfTsNCiAgICBjb25zdCBzdGFycGFnZSA9IHsgJ1x4MDAnOiAnXHgwMScsICdceDEwJzogJ1x4MjAnLCAnXHgxMSc6ICdceDBhJywgJ1x4MTInOiAnXHgwNScsICdceDEzJzogJ1x4MDQnIH07DQogICAgZm9yIChjb25zdCBwIG9mIE9iamVjdC5rZXlzKG11bHRpcGFnZSkpIHsNCiAgICAgICAgY29uc3QgcyA9IG11bHRpcGFnZVtwXTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjg7IGkrKykgew0KICAgICAgICAgICAgY29uc3QgYyA9IHNbaV07DQogICAgICAgICAgICBpZiAoIW11bHRpdGFibGVbY10pIHsNCiAgICAgICAgICAgICAgICBtdWx0aXRhYmxlW2NdID0gcCArICQoaSArIDEyOCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLw0KICAgIC8vIEVTQy9QT1MgQ29tbW9uDQogICAgLy8NCiAgICBjb25zdCBfZXNjcG9zID0gew0KICAgICAgICAvLyBwcmludGVyIGNvbmZpZ3VyYXRpb24NCiAgICAgICAgdXBzaWRlRG93bjogZmFsc2UsDQogICAgICAgIHNwYWNpbmc6IGZhbHNlLA0KICAgICAgICBjdXR0aW5nOiB0cnVlLA0KICAgICAgICBncmFkaWVudDogdHJ1ZSwNCiAgICAgICAgZ2FtbWE6IDEuOCwNCiAgICAgICAgdGhyZXNob2xkOiAxMjgsDQogICAgICAgIC8vIHJ1bGVkIGxpbmUgY29tcG9zaXRpb24NCiAgICAgICAgdnJ0YWJsZTogew0KICAgICAgICAgICAgJyAnICAgIDogeyAnICcgOiAnICcsICAgICdceDkwJyA6ICdceDkwJywgJ1x4OTUnIDogJ1x4OTUnLCAnXHg5YScgOiAnXHg5YScsICdceDliJyA6ICdceDliJywgJ1x4OWUnIDogJ1x4OWUnLCAnXHg5ZicgOiAnXHg5ZicgfSwNCiAgICAgICAgICAgICdceDkxJyA6IHsgJyAnIDogJ1x4OTEnLCAnXHg5MCcgOiAnXHg4ZicsICdceDk1JyA6ICdceDkxJywgJ1x4OWEnIDogJ1x4OGYnLCAnXHg5YicgOiAnXHg4ZicsICdceDllJyA6ICdceDhmJywgJ1x4OWYnIDogJ1x4OGYnIH0sDQogICAgICAgICAgICAnXHg5NScgOiB7ICcgJyA6ICdceDk1JywgJ1x4OTAnIDogJ1x4OTAnLCAnXHg5NScgOiAnXHg5NScsICdceDlhJyA6ICdceDkwJywgJ1x4OWInIDogJ1x4OTAnLCAnXHg5ZScgOiAnXHg5MCcsICdceDlmJyA6ICdceDkwJyB9LA0KICAgICAgICAgICAgJ1x4OTgnIDogeyAnICcgOiAnXHg5OCcsICdceDkwJyA6ICdceDhmJywgJ1x4OTUnIDogJ1x4OTEnLCAnXHg5YScgOiAnXHg5MycsICdceDliJyA6ICdceDhmJywgJ1x4OWUnIDogJ1x4OTMnLCAnXHg5ZicgOiAnXHg4ZicgfSwNCiAgICAgICAgICAgICdceDk5JyA6IHsgJyAnIDogJ1x4OTknLCAnXHg5MCcgOiAnXHg4ZicsICdceDk1JyA6ICdceDkxJywgJ1x4OWEnIDogJ1x4OGYnLCAnXHg5YicgOiAnXHg5MicsICdceDllJyA6ICdceDhmJywgJ1x4OWYnIDogJ1x4OTInIH0sDQogICAgICAgICAgICAnXHg5YycgOiB7ICcgJyA6ICdceDljJywgJ1x4OTAnIDogJ1x4OGYnLCAnXHg5NScgOiAnXHg5MScsICdceDlhJyA6ICdceDkzJywgJ1x4OWInIDogJ1x4OGYnLCAnXHg5ZScgOiAnXHg5MycsICdceDlmJyA6ICdceDhmJyB9LA0KICAgICAgICAgICAgJ1x4OWQnIDogeyAnICcgOiAnXHg5ZCcsICdceDkwJyA6ICdceDhmJywgJ1x4OTUnIDogJ1x4OTEnLCAnXHg5YScgOiAnXHg4ZicsICdceDliJyA6ICdceDkyJywgJ1x4OWUnIDogJ1x4OGYnLCAnXHg5ZicgOiAnXHg5MicgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyBjb2RlcGFnZXM6IChFU0MgdCBuKSAoRlMgJikgKEZTIEMgbikgKEVTQyBSIG4pDQogICAgICAgIGNvZGVwYWdlOiB7DQogICAgICAgICAgICBjcDQzNzogJ1x4MWJ0XHgwMCcsIGNwODUyOiAnXHgxYnRceDEyJywgY3A4NTg6ICdceDFidFx4MTMnLCBjcDg2MDogJ1x4MWJ0XHgwMycsDQogICAgICAgICAgICBjcDg2MzogJ1x4MWJ0XHgwNCcsIGNwODY1OiAnXHgxYnRceDA1JywgY3A4NjY6ICdceDFidFx4MTEnLCBjcDEyNTI6ICdceDFidFx4MTAnLA0KICAgICAgICAgICAgY3A5MzI6ICdceDFidFx4MDFceDFjQzFceDFiUlx4MDgnLCBjcDkzNjogJ1x4MWJ0XHgwMFx4MWMmJywNCiAgICAgICAgICAgIGNwOTQ5OiAnXHgxYnRceDAwXHgxYyZceDFiUlx4MGQnLCBjcDk1MDogJ1x4MWJ0XHgwMFx4MWMmJywNCiAgICAgICAgICAgIHNoaWZ0amlzOiAnXHgxYnRceDAxXHgxY0MxXHgxYlJceDA4JywgZ2IxODAzMDogJ1x4MWJ0XHgwMFx4MWMmJywNCiAgICAgICAgICAgIGtzYzU2MDE6ICdceDFidFx4MDBceDFjJlx4MWJSXHgwZCcsIGJpZzU6ICdceDFidFx4MDBceDFjJicsIHRpczYyMDogJ1x4MWJ0XHgxNScNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY29udmVydCB0byBtdWx0aXBsZSBjb2RlcGFnZSBjaGFyYWN0ZXJzOiAoRVNDIHQgbikNCiAgICAgICAgbXVsdGljb252OiB0ZXh0ID0+IHsNCiAgICAgICAgICAgIGxldCBwID0gJycsIHIgPSAnJzsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGMgPSB0ZXh0W2ldOw0KICAgICAgICAgICAgICAgIGlmIChjID4gJ1x4N2YnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBtdWx0aXRhYmxlW2NdOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcSA9IGRbMF07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocCA9PT0gcSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gZFsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJ1x4MWJ0JyArIGQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHE7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByICs9ICc/JzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgciArPSBjOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gRVNDL1BPUyBUaGVybWFsDQogICAgLy8NCiAgICBjb25zdCBfdGhlcm1hbCA9IHsNCiAgICAgICAgYWxpZ25tZW50OiAwLA0KICAgICAgICBsZWZ0OiAwLA0KICAgICAgICB3aWR0aDogNDgsDQogICAgICAgIHJpZ2h0OiAwLA0KICAgICAgICBtYXJnaW46IDAsDQogICAgICAgIG1hcmdpblJpZ2h0OiAwLA0KICAgICAgICAvLyBzdGFydCBwcmludGluZzogRVNDIEAgR1MgYSBuIEVTQyBNIG4gRlMgKCBBIHBMIHBIIGZuIG0gRVNDIFNQIG4gRlMgUyBuMSBuMiAoRVNDIDIpIChFU0MgMyBuKSBFU0MgeyBuIEZTIC4NCiAgICAgICAgb3BlbjogZnVuY3Rpb24gKHByaW50ZXIpIHsNCiAgICAgICAgICAgIHRoaXMudXBzaWRlRG93biA9IHByaW50ZXIudXBzaWRlRG93bjsNCiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHByaW50ZXIuc3BhY2luZzsNCiAgICAgICAgICAgIHRoaXMuY3V0dGluZyA9IHByaW50ZXIuY3V0dGluZzsNCiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnQgPSBwcmludGVyLmdyYWRpZW50Ow0KICAgICAgICAgICAgdGhpcy5nYW1tYSA9IHByaW50ZXIuZ2FtbWE7DQogICAgICAgICAgICB0aGlzLnRocmVzaG9sZCA9IHByaW50ZXIudGhyZXNob2xkOw0KICAgICAgICAgICAgdGhpcy5hbGlnbm1lbnQgPSAwOw0KICAgICAgICAgICAgdGhpcy5sZWZ0ID0gMDsNCiAgICAgICAgICAgIHRoaXMud2lkdGggPSBwcmludGVyLmNwbDsNCiAgICAgICAgICAgIHRoaXMucmlnaHQgPSAwOw0KICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSBwcmludGVyLm1hcmdpbjsNCiAgICAgICAgICAgIHRoaXMubWFyZ2luUmlnaHQgPSBwcmludGVyLm1hcmdpblJpZ2h0Ow0KICAgICAgICAgICAgcmV0dXJuICdceDFiQFx4MWRhXHgwMFx4MWJNJyArIChwcmludGVyLmVuY29kaW5nID09PSAndGlzNjIwJyA/ICdhJyA6ICcwJykgKyAnXHgxYyhBJyArICQoMiwgMCwgNDgsIDApICsgJ1x4MWIgXHgwMFx4MWNTXHgwMFx4MDAnICsgKHRoaXMuc3BhY2luZyA/ICdceDFiMicgOiAnXHgxYjNceDAwJykgKyAnXHgxYnsnICsgJCh0aGlzLnVwc2lkZURvd24pICsgJ1x4MWMuJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZmluaXNoIHByaW50aW5nOiBHUyByIG4NCiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiAodGhpcy5jdXR0aW5nID8gdGhpcy5jdXQoKSA6ICcnKSArICdceDFkcjEnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzZXQgcHJpbnQgYXJlYTogR1MgTCBuTCBuSCBHUyBXIG5MIG5IDQogICAgICAgIGFyZWE6IGZ1bmN0aW9uIChsZWZ0LCB3aWR0aCwgcmlnaHQpIHsNCiAgICAgICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7DQogICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7DQogICAgICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7DQogICAgICAgICAgICBjb25zdCBtID0gKHRoaXMubWFyZ2luICsgbGVmdCkgKiB0aGlzLmNoYXJXaWR0aDsNCiAgICAgICAgICAgIGNvbnN0IHcgPSB3aWR0aCAqIHRoaXMuY2hhcldpZHRoOw0KICAgICAgICAgICAgcmV0dXJuICdceDFkTCcgKyAkKG0gJiAyNTUsIG0gPj4gOCAmIDI1NSkgKyAnXHgxZFcnICsgJCh3ICYgMjU1LCB3ID4+IDggJiAyNTUpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzZXQgbGluZSBhbGlnbm1lbnQ6IEVTQyBhIG4NCiAgICAgICAgYWxpZ246IGZ1bmN0aW9uIChhbGlnbikgew0KICAgICAgICAgICAgdGhpcy5hbGlnbm1lbnQgPSBhbGlnbjsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYmEnICsgJChhbGlnbik7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBhYnNvbHV0ZSBwcmludCBwb3NpdGlvbjogRVNDICQgbkwgbkgNCiAgICAgICAgYWJzb2x1dGU6IGZ1bmN0aW9uIChwb3NpdGlvbikgew0KICAgICAgICAgICAgY29uc3QgcCA9IHBvc2l0aW9uICogdGhpcy5jaGFyV2lkdGg7DQogICAgICAgICAgICByZXR1cm4gJ1x4MWIkJyArICQocCAmIDI1NSwgcCA+PiA4ICYgMjU1KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHJlbGF0aXZlIHByaW50IHBvc2l0aW9uOiBFU0MgXCBuTCBuSA0KICAgICAgICByZWxhdGl2ZTogZnVuY3Rpb24gKHBvc2l0aW9uKSB7DQogICAgICAgICAgICBjb25zdCBwID0gcG9zaXRpb24gKiB0aGlzLmNoYXJXaWR0aDsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYlxcJyArICQocCAmIDI1NSwgcCA+PiA4ICYgMjU1KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgaG9yaXpvbnRhbCBydWxlOiBGUyBDIG4gRlMgLiBFU0MgdCBuIC4uLg0KICAgICAgICBocjogd2lkdGggPT4gJ1x4MWNDMFx4MWMuXHgxYnRceDAxJyArICdceDk1Jy5yZXBlYXQod2lkdGgpLA0KICAgICAgICAvLyBwcmludCB2ZXJ0aWNhbCBydWxlczogR1MgISBuIEZTIEMgbiBGUyAuIEVTQyB0IG4gLi4uDQogICAgICAgIHZyOiBmdW5jdGlvbiAod2lkdGhzLCBoZWlnaHQpIHsNCiAgICAgICAgICAgIHJldHVybiB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgdGhpcy5yZWxhdGl2ZSh3KSArICdceDk2JywgJ1x4MWQhJyArICQoaGVpZ2h0IC0gMSkgKyAnXHgxY0MwXHgxYy5ceDFidFx4MDFceDk2Jyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHN0YXJ0IHJ1bGVzOiBGUyBDIG4gRlMgLiBFU0MgdCBuIC4uLg0KICAgICAgICB2cnN0YXJ0OiB3aWR0aHMgPT4gJ1x4MWNDMFx4MWMuXHgxYnRceDAxJyArIHdpZHRocy5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTEnLCAnXHg5YycpLnNsaWNlKDAsIC0xKSArICdceDlkJywNCiAgICAgICAgLy8gc3RvcCBydWxlczogRlMgQyBuIEZTIC4gRVNDIHQgbiAuLi4NCiAgICAgICAgdnJzdG9wOiB3aWR0aHMgPT4gJ1x4MWNDMFx4MWMuXHgxYnRceDAxJyArIHdpZHRocy5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTAnLCAnXHg5ZScpLnNsaWNlKDAsIC0xKSArICdceDlmJywNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgYW5kIGhvcml6b250YWwgcnVsZXM6IEZTIEMgbiBGUyAuIEVTQyB0IG4gLi4uDQogICAgICAgIHZyaHI6IGZ1bmN0aW9uICh3aWR0aHMxLCB3aWR0aHMyLCBkbCwgZHIpIHsNCiAgICAgICAgICAgIGNvbnN0IHIxID0gJyAnLnJlcGVhdChNYXRoLm1heCgtZGwsIDApKSArIHdpZHRoczEucmVkdWNlKChhLCB3KSA9PiBhICsgJ1x4OTUnLnJlcGVhdCh3KSArICdceDkwJywgZGwgPiAwID8gJ1x4OWUnIDogJ1x4OWEnKS5zbGljZSgwLCAtMSkgKyAoZHIgPCAwID8gJ1x4OWYnIDogJ1x4OWInKSArICcgJy5yZXBlYXQoTWF0aC5tYXgoZHIsIDApKTsNCiAgICAgICAgICAgIGNvbnN0IHIyID0gJyAnLnJlcGVhdChNYXRoLm1heChkbCwgMCkpICsgd2lkdGhzMi5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTEnLCBkbCA8IDAgPyAnXHg5YycgOiAnXHg5OCcpLnNsaWNlKDAsIC0xKSArIChkciA+IDAgPyAnXHg5ZCcgOiAnXHg5OScpICsgJyAnLnJlcGVhdChNYXRoLm1heCgtZHIsIDApKTsNCiAgICAgICAgICAgIHJldHVybiAnXHgxY0MwXHgxYy5ceDFidFx4MDEnICsgcjIuc3BsaXQoJycpLnJlZHVjZSgoYSwgYywgaSkgPT4gYSArIHRoaXMudnJ0YWJsZVtjXVtyMVtpXV0sICcnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IGxpbmUgc3BhY2luZyBhbmQgZmVlZCBuZXcgbGluZTogKEVTQyAyKSAoRVNDIDMgbikNCiAgICAgICAgdnJsZjogZnVuY3Rpb24gKHZyKSB7DQogICAgICAgICAgICByZXR1cm4gKHZyID09PSB0aGlzLnVwc2lkZURvd24gJiYgdGhpcy5zcGFjaW5nID8gJ1x4MWIyJyA6ICdceDFiM1x4MDAnKSArIHRoaXMubGYoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY3V0IHBhcGVyOiBHUyBWIG0gbg0KICAgICAgICBjdXQ6ICgpID0+ICdceDFkVkJceDAwJywNCiAgICAgICAgLy8gdW5kZXJsaW5lIHRleHQ6IEVTQyAtIG4gRlMgLSBuDQogICAgICAgIHVsOiAoKSA9PiAnXHgxYi0yXHgxYy0yJywNCiAgICAgICAgLy8gZW1waGFzaXplIHRleHQ6IEVTQyBFIG4NCiAgICAgICAgZW06ICgpID0+ICdceDFiRTEnLA0KICAgICAgICAvLyBpbnZlcnQgdGV4dDogR1MgQiBuDQogICAgICAgIGl2OiAoKSA9PiAnXHgxZEIxJywNCiAgICAgICAgLy8gc2NhbGUgdXAgdGV4dDogR1MgISBuDQogICAgICAgIHdoOiB3aCA9PiAnXHgxZCEnICsgKHdoIDwgMyA/ICQoKHdoICYgMSkgPDwgNCB8IHdoID4+IDEgJiAxKSA6ICQod2ggLSAyIDw8IDQgfCB3aCAtIDIpKSwNCiAgICAgICAgLy8gY2FuY2VsIHRleHQgZGVjb3JhdGlvbjogRVNDIC0gbiBGUyAtIG4gRVNDIEUgbiBHUyBCIG4gR1MgISBuDQogICAgICAgIG5vcm1hbDogKCkgPT4gJ1x4MWItMFx4MWMtMFx4MWJFMFx4MWRCMFx4MWQhXHgwMCcsDQogICAgICAgIC8vIHByaW50IHRleHQ6DQogICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0ZXh0LCBlbmNvZGluZykgew0KICAgICAgICAgICAgc3dpdGNoIChlbmNvZGluZykgew0KICAgICAgICAgICAgICAgIGNhc2UgJ211bHRpbGluZ3VhbCc6DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm11bHRpY29udih0ZXh0KTsNCiAgICAgICAgICAgICAgICBjYXNlICd0aXM2MjAnOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb2RlcGFnZVtlbmNvZGluZ10gKyB0aGlzLmFycmF5RnJvbSh0ZXh0LCBlbmNvZGluZykucmVkdWNlKChhLCBjKSA9PiBhICsgJ1x4MDAnICsgaWNvbnYuZW5jb2RlKGMsIGVuY29kaW5nKS50b1N0cmluZygnYmluYXJ5JyksICcnKTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb2RlcGFnZVtlbmNvZGluZ10gKyBpY29udi5lbmNvZGUodGV4dCwgZW5jb2RpbmcpLnRvU3RyaW5nKCdiaW5hcnknKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gZmVlZCBuZXcgbGluZTogTEYNCiAgICAgICAgbGY6ICgpID0+ICdceDBhJywNCiAgICAgICAgLy8gaW5zZXJ0IGNvbW1hbmRzOg0KICAgICAgICBjb21tYW5kOiBjb21tYW5kID0+IGNvbW1hbmQsDQogICAgICAgIC8vIGltYWdlIHNwbGl0IHNpemUNCiAgICAgICAgc3BsaXQ6IDUxMiwNCiAgICAgICAgLy8gcHJpbnQgaW1hZ2U6IEdTIDggTCBwMSBwMiBwMyBwNCBtIGZuIGEgYnggYnkgYyB4TCB4SCB5TCB5SCBkMSAuLi4gZGsgR1MgKCBMIHBMIHBIIG0gZm4NCiAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uIChpbWFnZSkgew0KICAgICAgICAgICAgY29uc3QgYWxpZ24gPSBhcmd1bWVudHNbMV0gfHwgdGhpcy5hbGlnbm1lbnQ7DQogICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJndW1lbnRzWzJdIHx8IHRoaXMubGVmdDsNCiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXJndW1lbnRzWzNdIHx8IHRoaXMud2lkdGg7DQogICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3VtZW50c1s0XSB8fCB0aGlzLnJpZ2h0Ow0KICAgICAgICAgICAgbGV0IHIgPSB0aGlzLnVwc2lkZURvd24gPyB0aGlzLmFyZWEocmlnaHQgKyB0aGlzLm1hcmdpblJpZ2h0IC0gdGhpcy5tYXJnaW4sIHdpZHRoLCBsZWZ0KSArIHRoaXMuYWxpZ24oMiAtIGFsaWduKSA6ICcnOw0KICAgICAgICAgICAgY29uc3QgaW1nID0gUE5HLnN5bmMucmVhZChCdWZmZXIuZnJvbShpbWFnZSwgJ2Jhc2U2NCcpKTsNCiAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcud2lkdGg7DQogICAgICAgICAgICBjb25zdCBkID0gQXJyYXkodykuZmlsbCgwKTsNCiAgICAgICAgICAgIGxldCBqID0gdGhpcy51cHNpZGVEb3duID8gaW1nLmRhdGEubGVuZ3RoIC0gNCA6IDA7DQogICAgICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGltZy5oZWlnaHQ7IHogKz0gdGhpcy5zcGxpdCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLm1pbih0aGlzLnNwbGl0LCBpbWcuaGVpZ2h0IC0geik7DQogICAgICAgICAgICAgICAgY29uc3QgbCA9ICh3ICsgNyA+PiAzKSAqIGggKyAxMDsNCiAgICAgICAgICAgICAgICByICs9ICdceDFkOEwnICsgJChsICYgMjU1LCBsID4+IDggJiAyNTUsIGwgPj4gMTYgJiAyNTUsIGwgPj4gMjQgJiAyNTUsIDQ4LCAxMTIsIDQ4LCAxLCAxLCA0OSwgdyAmIDI1NSwgdyA+PiA4ICYgMjU1LCBoICYgMjU1LCBoID4+IDggJiAyNTUpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaDsgeSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBpID0gMCwgZSA9IDA7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdzsgeCArPSA4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIHgsIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBxOyBwKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmID0gTWF0aC5mbG9vcigoZFtpXSArIGUgKiA1KSAvIDE2ICsgTWF0aC5wb3coKChpbWcuZGF0YVtqXSAqIC4yOTkgKyBpbWcuZGF0YVtqICsgMV0gKiAuNTg3ICsgaW1nLmRhdGFbaiArIDJdICogLjExNCAtIDI1NSkgKiBpbWcuZGF0YVtqICsgM10gKyA2NTUyNSkgLyA2NTUyNSwgMSAvIHRoaXMuZ2FtbWEpICogMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICs9IHRoaXMudXBzaWRlRG93biA/IC00IDogNDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmFkaWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmIDwgdGhpcy50aHJlc2hvbGQgPyAoYiB8PSAxMjggPj4gcCwgZikgOiBmIC0gMjU1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSAtIDFdICs9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtpKytdICs9IGUgKiA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgPCB0aGlzLnRocmVzaG9sZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJChiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByICs9ICdceDFkKEwnICsgJCgyLCAwLCA0OCwgNTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IFFSIENvZGU6IEdTICggayBwTCBwSCBjbiBmbiBuMSBuMiBHUyAoIGsgcEwgcEggY24gZm4gbiBHUyAoIGsgcEwgcEggY24gZm4gbiBHUyAoIGsgcEwgcEggY24gZm4gbSBkMSAuLi4gZGsgR1MgKCBrIHBMIHBIIGNuIGZuIG0NCiAgICAgICAgcXJjb2RlOiBmdW5jdGlvbiAoc3ltYm9sLCBlbmNvZGluZykgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBxcmNvZGUgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgbGV0IHIgPSB0aGlzLnVwc2lkZURvd24gPyB0aGlzLmFyZWEodGhpcy5yaWdodCArIHRoaXMubWFyZ2luUmlnaHQgLSB0aGlzLm1hcmdpbiwgdGhpcy53aWR0aCwgdGhpcy5sZWZ0KSArIHRoaXMuYWxpZ24oMiAtIHRoaXMuYWxpZ25tZW50KSA6ICcnOw0KICAgICAgICAgICAgICAgIGlmIChzeW1ib2wuZGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHFyID0gcXJjb2RlKDAsIHN5bWJvbC5sZXZlbC50b1VwcGVyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgcXIuYWRkRGF0YShzeW1ib2wuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIHFyLm1ha2UoKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IHFyLmNyZWF0ZUFTQ0lJKDIsIDApOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51cHNpZGVEb3duKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcgPSBpbWcuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpbWcgPSBpbWcuc3BsaXQoJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcubGVuZ3RoICogc3ltYm9sLmNlbGw7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSB3Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gKHcgKyA3ID4+IDMpICogaCArIDEwOw0KICAgICAgICAgICAgICAgICAgICByICs9ICdceDFkOEwnICsgJChsICYgMjU1LCBsID4+IDggJiAyNTUsIGwgPj4gMTYgJiAyNTUsIGwgPj4gMjQgJiAyNTUsIDQ4LCAxMTIsIDQ4LCAxLCAxLCA0OSwgdyAmIDI1NSwgdyA+PiA4ICYgMjU1LCBoICYgMjU1LCBoID4+IDggJiAyNTUpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltZy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdzsgaiArPSA4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHEgPSBNYXRoLm1pbih3IC0gaiwgOCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBxOyBwKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1tpXVtNYXRoLmZsb29yKChqICsgcCkgLyBzeW1ib2wuY2VsbCkgKiAyXSA9PT0gJyAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiIHw9IDEyOCA+PiBwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgKz0gJChiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3ltYm9sLmNlbGw7IGsrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByICs9ICdceDFkKEwnICsgJCgyLCAwLCA0OCwgNTApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBpY29udi5lbmNvZGUoc3ltYm9sLmRhdGEsIGVuY29kaW5nID09PSAnbXVsdGlsaW5ndWFsJyA/ICdhc2NpaScgOiBlbmNvZGluZykudG9TdHJpbmcoJ2JpbmFyeScpLnNsaWNlKDAsIDcwODkpOw0KICAgICAgICAgICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDAgPyAnXHgxZChrJyArICQoNCwgMCwgNDksIDY1LCA1MCwgMCkgKyAnXHgxZChrJyArICQoMywgMCwgNDksIDY3LCBzeW1ib2wuY2VsbCkgKyAnXHgxZChrJyArICQoMywgMCwgNDksIDY5LCB0aGlzLnFybGV2ZWxbc3ltYm9sLmxldmVsXSkgKyAnXHgxZChrJyArICQoZC5sZW5ndGggKyAzICYgMjU1LCBkLmxlbmd0aCArIDMgPj4gOCAmIDI1NSwgNDksIDgwLCA0OCkgKyBkICsgJ1x4MWQoaycgKyAkKDMsIDAsIDQ5LCA4MSwgNDgpIDogJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIFFSIENvZGUgZXJyb3IgY29ycmVjdGlvbiBsZXZlbDoNCiAgICAgICAgcXJsZXZlbDogew0KICAgICAgICAgICAgbDogNDgsIG06IDQ5LCBxOiA1MCwgaDogNTENCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgYmFyY29kZTogR1MgdyBuIEdTIGggbiBHUyBIIG4gR1MgayBtIG4gZDEgLi4uIGRuDQogICAgICAgIGJhcmNvZGU6IGZ1bmN0aW9uIChzeW1ib2wsIGVuY29kaW5nKSB7DQogICAgICAgICAgICBsZXQgZCA9IGljb252LmVuY29kZShzeW1ib2wuZGF0YSwgZW5jb2RpbmcgPT09ICdtdWx0aWxpbmd1YWwnID8gJ2FzY2lpJyA6IGVuY29kaW5nKS50b1N0cmluZygnYmluYXJ5Jyk7DQogICAgICAgICAgICBjb25zdCBiID0gdGhpcy5iYXJ0eXBlW3N5bWJvbC50eXBlXSArIE51bWJlcigvdXBjfFtlal1hbi8udGVzdChzeW1ib2wudHlwZSkgJiYgc3ltYm9sLmRhdGEubGVuZ3RoIDwgOSk7DQogICAgICAgICAgICBzd2l0Y2ggKGIpIHsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS5lYW46DQogICAgICAgICAgICAgICAgICAgIGQgPSBkLnNsaWNlKDAsIDEyKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSB0aGlzLmJhcnR5cGUudXBjOg0KICAgICAgICAgICAgICAgICAgICBkID0gZC5zbGljZSgwLCAxMSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5iYXJ0eXBlLmVhbiArIDE6DQogICAgICAgICAgICAgICAgICAgIGQgPSBkLnNsaWNlKDAsIDcpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS51cGMgKyAxOg0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy51cGNlKGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS5jb2RlMTI4Og0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy5jb2RlMTI4KGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGQgPSBkLnNsaWNlKDAsIDI1NSk7DQogICAgICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwID8gJ1x4MWR3JyArICQoc3ltYm9sLndpZHRoKSArICdceDFkaCcgKyAkKHN5bWJvbC5oZWlnaHQpICsgJ1x4MWRIJyArICQoc3ltYm9sLmhyaSA/IDIgOiAwKSArICdceDFkaycgKyAkKGIsIGQubGVuZ3RoKSArIGQgOiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gYmFyY29kZSB0eXBlczoNCiAgICAgICAgYmFydHlwZTogew0KICAgICAgICAgICAgdXBjOiA2NSwgZWFuOiA2NywgamFuOiA2NywgY29kZTM5OiA2OSwgaXRmOiA3MCwgY29kYWJhcjogNzEsIG53NzogNzEsIGNvZGU5MzogNzIsIGNvZGUxMjg6IDczDQogICAgICAgIH0sDQogICAgICAgIC8vIGdlbmVyYXRlIFVQQy1FIGRhdGEgKGNvbnZlcnQgVVBDLUUgdG8gVVBDLUEpOg0KICAgICAgICB1cGNlOiBkYXRhID0+IHsNCiAgICAgICAgICAgIGxldCByID0gJyc7DQogICAgICAgICAgICBsZXQgcyA9IGRhdGEucmVwbGFjZSgvKCg/IV4wXGR7Niw3fSQpLikqLywgJycpOw0KICAgICAgICAgICAgaWYgKHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHIgKz0gcy5zbGljZSgwLCAzKTsNCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHNbNl0pIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMCc6IGNhc2UgJzEnOiBjYXNlICcyJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gc1s2XSArICcwMDAwJyArIHNbM10gKyBzWzRdICsgc1s1XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICczJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gc1szXSArICcwMDAwMCcgKyBzWzRdICsgc1s1XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICc0JzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gc1szXSArIHNbNF0gKyAnMDAwMDAnICsgc1s1XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICAgICAgciArPSBzWzNdICsgc1s0XSArIHNbNV0gKyAnMDAwMCcgKyBzWzZdOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0sDQogICAgICAgIC8vIENPREUxMjggc3BlY2lhbCBjaGFyYWN0ZXJzOg0KICAgICAgICBjMTI4OiB7DQogICAgICAgICAgICBzcGVjaWFsOiAxMjMsIGNvZGVhOiA2NSwgY29kZWI6IDY2LCBjb2RlYzogNjcsIHNoaWZ0OiA4Mw0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBDT0RFMTI4IGRhdGEgKG1pbmltaXplIHN5bWJvbCB3aWR0aCk6DQogICAgICAgIGNvZGUxMjg6IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgICAgICBsZXQgciA9ICcnOw0KICAgICAgICAgICAgbGV0IHMgPSBkYXRhLnJlcGxhY2UoLygoPyFeW1x4MDAtXHg3Zl0rJCkuKSovLCAnJykucmVwbGFjZSgvey9nLCAne3snKTsNCiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gW107DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IHMuc2VhcmNoKC9bXiAtX10vKTsNCiAgICAgICAgICAgICAgICBpZiAoL15cZHsyfSQvLnRlc3QocykpIHsNCiAgICAgICAgICAgICAgICAgICAgZC5wdXNoKHRoaXMuYzEyOC5zcGVjaWFsLCB0aGlzLmMxMjguY29kZWMsIE51bWJlcihzKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKC9eXGR7NCx9Ly50ZXN0KHMpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGModGhpcy5jMTI4LmNvZGVjLCBzLCBkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocCA+PSAwICYmIHMuY2hhckNvZGVBdChwKSA8IDMyKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGEodGhpcy5jMTI4LmNvZGVhLCBzLCBkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGIodGhpcy5jMTI4LmNvZGViLCBzLCBkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIGVuZA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByID0gZC5yZWR1Y2UoKGEsIGMpID0+IGEgKyAkKGMpLCAnJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJvY2VzcyBDT0RFMTI4IGNvZGUgc2V0IEE6DQogICAgICAgIGNvZGUxMjhhOiBmdW5jdGlvbiAoeCwgcywgZCkgew0KICAgICAgICAgICAgaWYgKHggIT09IHRoaXMuYzEyOC5zaGlmdCkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh0aGlzLmMxMjguc3BlY2lhbCwgeCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzID0gcy5yZXBsYWNlKC9eKCg/IVxkezQsfSlbXHgwMC1fXSkrLywgbSA9PiAobS5zcGxpdCgnJykuZm9yRWFjaChjID0+IGQucHVzaChjLmNoYXJDb2RlQXQoMCkpKSwgJycpKTsNCiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL15cZCg/PShcZFxkKXsyLH0oXER8JCkpLywgbSA9PiAoZC5wdXNoKG0uY2hhckNvZGVBdCgwKSksICcnKSk7DQogICAgICAgICAgICBjb25zdCB0ID0gcy5zbGljZSgxKTsNCiAgICAgICAgICAgIGNvbnN0IHAgPSB0LnNlYXJjaCgvW14gLV9dLyk7DQogICAgICAgICAgICBpZiAoL15cZHs0LH0vLnRlc3QocykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhjKHRoaXMuYzEyOC5jb2RlYywgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChwID49IDAgJiYgdC5jaGFyQ29kZUF0KHApIDwgMzIpIHsNCiAgICAgICAgICAgICAgICBkLnB1c2godGhpcy5jMTI4LnNwZWNpYWwsIHRoaXMuYzEyOC5zaGlmdCwgcy5jaGFyQ29kZUF0KDApKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhhKHRoaXMuYzEyOC5zaGlmdCwgdCwgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhiKHRoaXMuYzEyOC5jb2RlYiwgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBlbmQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJvY2VzcyBDT0RFMTI4IGNvZGUgc2V0IEI6DQogICAgICAgIGNvZGUxMjhiOiBmdW5jdGlvbiAoeCwgcywgZCkgew0KICAgICAgICAgICAgaWYgKHggIT09IHRoaXMuYzEyOC5zaGlmdCkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh0aGlzLmMxMjguc3BlY2lhbCwgeCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzID0gcy5yZXBsYWNlKC9eKCg/IVxkezQsfSlbIC1ceDdmXSkrLywgbSA9PiAobS5zcGxpdCgnJykuZm9yRWFjaChjID0+IGQucHVzaChjLmNoYXJDb2RlQXQoMCkpKSwgJycpKTsNCiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL15cZCg/PShcZFxkKXsyLH0oXER8JCkpLywgbSA9PiAoZC5wdXNoKG0uY2hhckNvZGVBdCgwKSksICcnKSk7DQogICAgICAgICAgICBjb25zdCB0ID0gcy5zbGljZSgxKTsNCiAgICAgICAgICAgIGNvbnN0IHAgPSB0LnNlYXJjaCgvW14gLV9dLyk7DQogICAgICAgICAgICBpZiAoL15cZHs0LH0vLnRlc3QocykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhjKHRoaXMuYzEyOC5jb2RlYywgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChwID49IDAgJiYgdC5jaGFyQ29kZUF0KHApID4gOTUpIHsNCiAgICAgICAgICAgICAgICBkLnB1c2godGhpcy5jMTI4LnNwZWNpYWwsIHRoaXMuYzEyOC5zaGlmdCwgcy5jaGFyQ29kZUF0KDApKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhiKHRoaXMuYzEyOC5zaGlmdCwgdCwgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhhKHRoaXMuYzEyOC5jb2RlYSwgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBlbmQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJvY2VzcyBDT0RFMTI4IGNvZGUgc2V0IEM6DQogICAgICAgIGNvZGUxMjhjOiBmdW5jdGlvbiAoeCwgcywgZCkgew0KICAgICAgICAgICAgaWYgKHggIT09IHRoaXMuYzEyOC5zaGlmdCkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh0aGlzLmMxMjguc3BlY2lhbCwgeCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzID0gcy5yZXBsYWNlKC9eXGR7NCx9L2csIG0gPT4gbS5yZXBsYWNlKC9cZHsyfS9nLCBjID0+IChkLnB1c2goTnVtYmVyKGMpKSwgJycpKSk7DQogICAgICAgICAgICBjb25zdCBwID0gcy5zZWFyY2goL1teIC1fXS8pOw0KICAgICAgICAgICAgaWYgKHAgPj0gMCAmJiBzLmNoYXJDb2RlQXQocCkgPCAzMikgew0KICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGEodGhpcy5jMTI4LmNvZGVhLCBzLCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGIodGhpcy5jMTI4LmNvZGViLCBzLCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIGVuZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gU0lJDQogICAgLy8NCiAgICBjb25zdCBfc2lpID0gew0KICAgICAgICAvLyBzdGFydCBwcmludGluZzogRVNDIEAgR1MgYSBuIEVTQyBNIG4gRVNDIFNQIG4gRlMgUyBuMSBuMiAoRVNDIDIpIChFU0MgMyBuKSBFU0MgeyBuIEZTIC4NCiAgICAgICAgb3BlbjogZnVuY3Rpb24gKHByaW50ZXIpIHsNCiAgICAgICAgICAgIHRoaXMudXBzaWRlRG93biA9IHByaW50ZXIudXBzaWRlRG93bjsNCiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHByaW50ZXIuc3BhY2luZzsNCiAgICAgICAgICAgIHRoaXMuY3V0dGluZyA9IHByaW50ZXIuY3V0dGluZzsNCiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnQgPSBwcmludGVyLmdyYWRpZW50Ow0KICAgICAgICAgICAgdGhpcy5nYW1tYSA9IHByaW50ZXIuZ2FtbWE7DQogICAgICAgICAgICB0aGlzLnRocmVzaG9sZCA9IHByaW50ZXIudGhyZXNob2xkOw0KICAgICAgICAgICAgdGhpcy5hbGlnbm1lbnQgPSAwOw0KICAgICAgICAgICAgdGhpcy5sZWZ0ID0gMDsNCiAgICAgICAgICAgIHRoaXMud2lkdGggPSBwcmludGVyLmNwbDsNCiAgICAgICAgICAgIHRoaXMucmlnaHQgPSAwOw0KICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSBwcmludGVyLm1hcmdpbjsNCiAgICAgICAgICAgIHRoaXMubWFyZ2luUmlnaHQgPSBwcmludGVyLm1hcmdpblJpZ2h0Ow0KICAgICAgICAgICAgcmV0dXJuICdceDFiQFx4MWRhXHgwMFx4MWJNMFx4MWIgXHgwMFx4MWNTXHgwMFx4MDAnICsgKHRoaXMuc3BhY2luZyA/ICdceDFiMicgOiAnXHgxYjNceDAwJykgKyAnXHgxYnsnICsgJCh0aGlzLnVwc2lkZURvd24pICsgJ1x4MWMuJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZmluaXNoIHByaW50aW5nOiBEQzIgcSBuDQogICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuY3V0dGluZyA/IHRoaXMuY3V0KCkgOiAnJykgKyAnXHgxMnFceDAwJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHByaW50IGFyZWE6IEdTIEwgbkwgbkggR1MgVyBuTCBuSA0KICAgICAgICBhcmVhOiBmdW5jdGlvbiAobGVmdCwgd2lkdGgsIHJpZ2h0KSB7DQogICAgICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0Ow0KICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOw0KICAgICAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0Ow0KICAgICAgICAgICAgY29uc3QgbSA9ICh0aGlzLnVwc2lkZURvd24gPyB0aGlzLm1hcmdpblJpZ2h0ICsgcmlnaHQgOiB0aGlzLm1hcmdpbiArIGxlZnQpICogdGhpcy5jaGFyV2lkdGg7DQogICAgICAgICAgICBjb25zdCB3ID0gd2lkdGggKiB0aGlzLmNoYXJXaWR0aDsNCiAgICAgICAgICAgIHJldHVybiAnXHgxZEwnICsgJChtICYgMjU1LCBtID4+IDggJiAyNTUpICsgJ1x4MWRXJyArICQodyAmIDI1NSwgdyA+PiA4ICYgMjU1KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gaW1hZ2Ugc3BsaXQgc2l6ZQ0KICAgICAgICBzcGxpdDogMTY2MiwNCiAgICAgICAgLy8gcHJpbnQgaW1hZ2U6IEdTIDggTCBwMSBwMiBwMyBwNCBtIGZuIGEgYnggYnkgYyB4TCB4SCB5TCB5SCBkMSAuLi4gZGsgR1MgKCBMIHBMIHBIIG0gZm4NCiAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uIChpbWFnZSkgew0KICAgICAgICAgICAgY29uc3QgYWxpZ24gPSBhcmd1bWVudHNbMV0gfHwgdGhpcy5hbGlnbm1lbnQ7DQogICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJndW1lbnRzWzJdIHx8IHRoaXMubGVmdDsNCiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXJndW1lbnRzWzNdIHx8IHRoaXMud2lkdGg7DQogICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3VtZW50c1s0XSB8fCB0aGlzLnJpZ2h0Ow0KICAgICAgICAgICAgbGV0IHIgPSB0aGlzLnVwc2lkZURvd24gPyB0aGlzLmFyZWEocmlnaHQsIHdpZHRoLCBsZWZ0KSArIHRoaXMuYWxpZ24oMiAtIGFsaWduKSA6ICcnOw0KICAgICAgICAgICAgY29uc3QgaW1nID0gUE5HLnN5bmMucmVhZChCdWZmZXIuZnJvbShpbWFnZSwgJ2Jhc2U2NCcpKTsNCiAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcud2lkdGg7DQogICAgICAgICAgICBjb25zdCBkID0gQXJyYXkodykuZmlsbCgwKTsNCiAgICAgICAgICAgIGxldCBqID0gdGhpcy51cHNpZGVEb3duID8gaW1nLmRhdGEubGVuZ3RoIC0gNCA6IDA7DQogICAgICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGltZy5oZWlnaHQ7IHogKz0gdGhpcy5zcGxpdCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLm1pbih0aGlzLnNwbGl0LCBpbWcuaGVpZ2h0IC0geik7DQogICAgICAgICAgICAgICAgY29uc3QgbCA9ICh3ICsgNyA+PiAzKSAqIGggKyAxMDsNCiAgICAgICAgICAgICAgICByICs9ICdceDFkOEwnICsgJChsICYgMjU1LCBsID4+IDggJiAyNTUsIGwgPj4gMTYgJiAyNTUsIGwgPj4gMjQgJiAyNTUsIDQ4LCAxMTIsIDQ4LCAxLCAxLCA0OSwgdyAmIDI1NSwgdyA+PiA4ICYgMjU1LCBoICYgMjU1LCBoID4+IDggJiAyNTUpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaDsgeSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBpID0gMCwgZSA9IDA7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdzsgeCArPSA4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIHgsIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBxOyBwKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmID0gTWF0aC5mbG9vcigoZFtpXSArIGUgKiA1KSAvIDE2ICsgTWF0aC5wb3coKChpbWcuZGF0YVtqXSAqIC4yOTkgKyBpbWcuZGF0YVtqICsgMV0gKiAuNTg3ICsgaW1nLmRhdGFbaiArIDJdICogLjExNCAtIDI1NSkgKiBpbWcuZGF0YVtqICsgM10gKyA2NTUyNSkgLyA2NTUyNSwgMSAvIHRoaXMuZ2FtbWEpICogMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICs9IHRoaXMudXBzaWRlRG93biA/IC00IDogNDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmFkaWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmIDwgdGhpcy50aHJlc2hvbGQgPyAoYiB8PSAxMjggPj4gcCwgZikgOiBmIC0gMjU1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSAtIDFdICs9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtpKytdICs9IGUgKiA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgPCB0aGlzLnRocmVzaG9sZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJChiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByICs9ICdceDFkKEwnICsgJCgyLCAwLCA0OCwgNTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IFFSIENvZGU6IERDMiA7IG4gR1MgcCAxIG1vZGVsIGUgdiBtb2RlIG5sIG5oIGRrDQogICAgICAgIHFyY29kZTogZnVuY3Rpb24gKHN5bWJvbCwgZW5jb2RpbmcpIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgcXJjb2RlICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIGxldCByID0gdGhpcy51cHNpZGVEb3duID8gdGhpcy5hcmVhKHRoaXMucmlnaHQsIHRoaXMud2lkdGgsIHRoaXMubGVmdCkgKyB0aGlzLmFsaWduKDIgLSB0aGlzLmFsaWdubWVudCkgOiAnJzsNCiAgICAgICAgICAgICAgICBpZiAoc3ltYm9sLmRhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBxciA9IHFyY29kZSgwLCBzeW1ib2wubGV2ZWwudG9VcHBlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgIHFyLmFkZERhdGEoc3ltYm9sLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBxci5tYWtlKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbWcgPSBxci5jcmVhdGVBU0NJSSgyLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXBzaWRlRG93bikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gaW1nLnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaW1nID0gaW1nLnNwbGl0KCdcbicpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gaW1nLmxlbmd0aCAqIHN5bWJvbC5jZWxsOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBoID0gdzsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9ICh3ICsgNyA+PiAzKSAqIGggKyAxMDsNCiAgICAgICAgICAgICAgICAgICAgciArPSAnXHgxZDhMJyArICQobCAmIDI1NSwgbCA+PiA4ICYgMjU1LCBsID4+IDE2ICYgMjU1LCBsID4+IDI0ICYgMjU1LCA0OCwgMTEyLCA0OCwgMSwgMSwgNDksIHcgJiAyNTUsIHcgPj4gOCAmIDI1NSwgaCAmIDI1NSwgaCA+PiA4ICYgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHc7IGogKz0gOCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIGosIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdbaV1bTWF0aC5mbG9vcigoaiArIHApIC8gc3ltYm9sLmNlbGwpICogMl0gPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkICs9ICQoYik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN5bWJvbC5jZWxsOyBrKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICs9IGQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgciArPSAnXHgxZChMJyArICQoMiwgMCwgNDgsIDUwKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gaWNvbnYuZW5jb2RlKHN5bWJvbC5kYXRhLCBlbmNvZGluZyA9PT0gJ211bHRpbGluZ3VhbCcgPyAnYXNjaWknIDogZW5jb2RpbmcpLnRvU3RyaW5nKCdiaW5hcnknKS5zbGljZSgwLCA3MDg5KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwID8gJ1x4MTI7JyArICQoc3ltYm9sLmNlbGwpICsgJ1x4MWRwJyArICQoMSwgMiwgdGhpcy5xcmxldmVsW3N5bWJvbC5sZXZlbF0sIDAsIDc3LCBkLmxlbmd0aCAmIDI1NSwgZC5sZW5ndGggPj4gOCAmIDI1NSkgKyBkIDogJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIFFSIENvZGUgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHM6DQogICAgICAgIHFybGV2ZWw6IHsNCiAgICAgICAgICAgIGw6IDc2LCBtOiA3NywgcTogODEsIGg6IDcyDQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IGJhcmNvZGU6IEdTIHcgbiBHUyBoIG4gR1MgSCBuIEdTIGsgbSBuIGQxIC4uLiBkbg0KICAgICAgICBiYXJjb2RlOiBmdW5jdGlvbiAoc3ltYm9sLCBlbmNvZGluZykgew0KICAgICAgICAgICAgbGV0IGQgPSBpY29udi5lbmNvZGUoc3ltYm9sLmRhdGEsIGVuY29kaW5nID09PSAnbXVsdGlsaW5ndWFsJyA/ICdhc2NpaScgOiBlbmNvZGluZykudG9TdHJpbmcoJ2JpbmFyeScpOw0KICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMuYmFydHlwZVtzeW1ib2wudHlwZV0gKyBOdW1iZXIoL3VwY3xbZWpdYW4vLnRlc3Qoc3ltYm9sLnR5cGUpICYmIHN5bWJvbC5kYXRhLmxlbmd0aCA8IDkpOw0KICAgICAgICAgICAgc3dpdGNoIChiKSB7DQogICAgICAgICAgICAgICAgY2FzZSB0aGlzLmJhcnR5cGUudXBjICsgMToNCiAgICAgICAgICAgICAgICAgICAgZCA9IHRoaXMudXBjZShkKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSB0aGlzLmJhcnR5cGUuY29kYWJhcjoNCiAgICAgICAgICAgICAgICAgICAgZCA9IHRoaXMuY29kYWJhcihkKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSB0aGlzLmJhcnR5cGUuY29kZTkzOg0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy5jb2RlOTMoZCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5iYXJ0eXBlLmNvZGUxMjg6DQogICAgICAgICAgICAgICAgICAgIGQgPSB0aGlzLmNvZGUxMjgoZCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZCA9IGQuc2xpY2UoMCwgMjU1KTsNCiAgICAgICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDAgPyAnXHgxZHcnICsgJChzeW1ib2wud2lkdGgpICsgJ1x4MWRoJyArICQoc3ltYm9sLmhlaWdodCkgKyAnXHgxZEgnICsgJChzeW1ib2wuaHJpID8gMiA6IDApICsgJ1x4MWRrJyArICQoYiwgZC5sZW5ndGgpICsgZCA6ICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBDb2RhYmFyIGRhdGE6DQogICAgICAgIGNvZGFiYXI6IGRhdGEgPT4gZGF0YS50b1VwcGVyQ2FzZSgpLA0KICAgICAgICAvLyBDT0RFOTMgc3BlY2lhbCBjaGFyYWN0ZXJzOg0KICAgICAgICBjOTM6IHsNCiAgICAgICAgICAgIGVzY2FwZTogJ2NVLGRBLGRCLGRDLGRELGRFLGRGLGRHLGRILGRJLGRKLGRLLGRMLGRNLGROLGRPLGRQLGRRLGRSLGRTLGRULGRVLGRWLGRXLGRYLGRZLGRaLGNBLGNCLGNDLGNELGNFLCAsc0Esc0Isc0MsJCwlLHNGLHNHLHNILHNJLHNKLCssc0wsLSwuLC8sMCwxLDIsMyw0LDUsNiw3LDgsOSxzWixjRixjRyxjSCxjSSxjSixjVixBLEIsQyxELEUsRixHLEgsSSxKLEssTCxNLE4sTyxQLFEsUixTLFQsVSxWLFcsWCxZLFosY0ssY0wsY00sY04sY08sY1cscEEscEIscEMscEQscEUscEYscEcscEgscEkscEoscEsscEwscE0scE4scE8scFAscFEscFIscFMscFQscFUscFYscFcscFgscFkscFosY1AsY1EsY1IsY1MsY1QnLnNwbGl0KCcsJyksDQogICAgICAgICAgICBjb2RlOiAnMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaLS4gJC8rJWRjc3AnLnNwbGl0KCcnKS5yZWR1Y2UoKGEsIGMsIGkpID0+IChhW2NdID0gaSwgYSksIHt9KSwNCiAgICAgICAgICAgIHN0YXJ0OiA0Nywgc3RvcDogNDgNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZ2VuZXJhdGUgQ09ERTkzIGRhdGE6DQogICAgICAgIGNvZGU5MzogZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgIGxldCByID0gJyc7DQogICAgICAgICAgICBsZXQgcyA9IGRhdGEucmVwbGFjZSgvKCg/IV5bXHgwMC1ceDdmXSskKS4pKi8sICcnKTsNCiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gcy5zcGxpdCgnJykucmVkdWNlKChhLCBjKSA9PiBhICsgdGhpcy5jOTMuZXNjYXBlW2MuY2hhckNvZGVBdCgwKV0sICcnKS5zcGxpdCgnJykubWFwKGMgPT4gdGhpcy5jOTMuY29kZVtjXSk7DQogICAgICAgICAgICAgICAgZC5wdXNoKHRoaXMuYzkzLnN0b3ApOw0KICAgICAgICAgICAgICAgIHIgPSBkLnJlZHVjZSgoYSwgYykgPT4gYSArICQoYyksICcnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBDT0RFMTI4IHNwZWNpYWwgY2hhcmFjdGVyczoNCiAgICAgICAgYzEyODogew0KICAgICAgICAgICAgc3RhcnRhOiAxMDMsIHN0YXJ0YjogMTA0LCBzdGFydGM6IDEwNSwgYXRvYjogMTAwLCBhdG9jOiA5OSwgYnRvYTogMTAxLCBidG9jOiA5OSwgY3RvYTogMTAxLCBjdG9iOiAxMDAsIHNoaWZ0OiA5OCwgc3RvcDogMTA1DQogICAgICAgIH0sDQogICAgICAgIC8vIGdlbmVyYXRlIENPREUxMjggZGF0YSAobWluaW1pemUgc3ltYm9sIHdpZHRoKToNCiAgICAgICAgY29kZTEyODogZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgIGxldCByID0gJyc7DQogICAgICAgICAgICBsZXQgcyA9IGRhdGEucmVwbGFjZSgvKCg/IV5bXHgwMC1ceDdmXSskKS4pKi8sICcnKTsNCiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gW107DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IHMuc2VhcmNoKC9bXiAtX10vKTsNCiAgICAgICAgICAgICAgICBpZiAoL15cZHsyfSQvLnRlc3QocykpIHsNCiAgICAgICAgICAgICAgICAgICAgZC5wdXNoKHRoaXMuYzEyOC5zdGFydGMsIE51bWJlcihzKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKC9eXGR7NCx9Ly50ZXN0KHMpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGModGhpcy5jMTI4LnN0YXJ0YywgcywgZCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHAgPj0gMCAmJiBzLmNoYXJDb2RlQXQocCkgPCAzMikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhhKHRoaXMuYzEyOC5zdGFydGEsIHMsIGQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4Yih0aGlzLmMxMjguc3RhcnRiLCBzLCBkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIGVuZA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkLnB1c2godGhpcy5jMTI4LnN0b3ApOw0KICAgICAgICAgICAgICAgIHIgPSBkLnJlZHVjZSgoYSwgYykgPT4gYSArICQoYyksICcnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcm9jZXNzIENPREUxMjggY29kZSBzZXQgQToNCiAgICAgICAgY29kZTEyOGE6IGZ1bmN0aW9uICh4LCBzLCBkKSB7DQogICAgICAgICAgICBpZiAoeCAhPT0gdGhpcy5jMTI4LnNoaWZ0KSB7DQogICAgICAgICAgICAgICAgZC5wdXNoKHgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcyA9IHMucmVwbGFjZSgvXigoPyFcZHs0LH0pW1x4MDAtX10pKy8sIG0gPT4gKG0uc3BsaXQoJycpLmZvckVhY2goYyA9PiBkLnB1c2goKGMuY2hhckNvZGVBdCgwKSArIDY0KSAlIDk2KSksICcnKSk7DQogICAgICAgICAgICBzID0gcy5yZXBsYWNlKC9eXGQoPz0oXGRcZCl7Mix9KFxEfCQpKS8sIG0gPT4gKGQucHVzaCgobS5jaGFyQ29kZUF0KDApICsgNjQpICUgOTYpLCAnJykpOw0KICAgICAgICAgICAgY29uc3QgdCA9IHMuc2xpY2UoMSk7DQogICAgICAgICAgICBjb25zdCBwID0gdC5zZWFyY2goL1teIC1fXS8pOw0KICAgICAgICAgICAgaWYgKC9eXGR7NCx9Ly50ZXN0KHMpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4Yyh0aGlzLmMxMjguYXRvYywgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChwID49IDAgJiYgdC5jaGFyQ29kZUF0KHApIDwgMzIpIHsNCiAgICAgICAgICAgICAgICBkLnB1c2godGhpcy5jMTI4LnNoaWZ0LCBzLmNoYXJDb2RlQXQoMCkgLSAzMik7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4YSh0aGlzLmMxMjguc2hpZnQsIHQsIGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2RlMTI4Yih0aGlzLmMxMjguYXRvYiwgcywgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBlbmQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJvY2VzcyBDT0RFMTI4IGNvZGUgc2V0IEI6DQogICAgICAgIGNvZGUxMjhiOiBmdW5jdGlvbiAoeCwgcywgZCkgew0KICAgICAgICAgICAgaWYgKHggIT09IHRoaXMuYzEyOC5zaGlmdCkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL14oKD8hXGR7NCx9KVsgLVx4N2ZdKSsvLCBtID0+IChtLnNwbGl0KCcnKS5mb3JFYWNoKGMgPT4gZC5wdXNoKGMuY2hhckNvZGVBdCgwKSAtIDMyKSksICcnKSk7DQogICAgICAgICAgICBzID0gcy5yZXBsYWNlKC9eXGQoPz0oXGRcZCl7Mix9KFxEfCQpKS8sIG0gPT4gKGQucHVzaChtLmNoYXJDb2RlQXQoMCkgLSAzMiksICcnKSk7DQogICAgICAgICAgICBjb25zdCB0ID0gcy5zbGljZSgxKTsNCiAgICAgICAgICAgIGNvbnN0IHAgPSB0LnNlYXJjaCgvW14gLV9dLyk7DQogICAgICAgICAgICBpZiAoL15cZHs0LH0vLnRlc3QocykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhjKHRoaXMuYzEyOC5idG9jLCBzLCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHAgPj0gMCAmJiB0LmNoYXJDb2RlQXQocCkgPiA5NSkgew0KICAgICAgICAgICAgICAgIGQucHVzaCh0aGlzLmMxMjguc2hpZnQsIHMuY2hhckNvZGVBdCgwKSArIDY0KTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhiKHRoaXMuYzEyOC5zaGlmdCwgdCwgZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhhKHRoaXMuYzEyOC5idG9hLCBzLCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIGVuZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyBwcm9jZXNzIENPREUxMjggY29kZSBzZXQgYzoNCiAgICAgICAgY29kZTEyOGM6IGZ1bmN0aW9uICh4LCBzLCBkKSB7DQogICAgICAgICAgICBpZiAoeCAhPT0gdGhpcy5jMTI4LnNoaWZ0KSB7DQogICAgICAgICAgICAgICAgZC5wdXNoKHgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcyA9IHMucmVwbGFjZSgvXlxkezQsfS9nLCBtID0+IG0ucmVwbGFjZSgvXGR7Mn0vZywgYyA9PiAoZC5wdXNoKE51bWJlcihjKSksICcnKSkpOw0KICAgICAgICAgICAgY29uc3QgcCA9IHMuc2VhcmNoKC9bXiAtX10vKTsNCiAgICAgICAgICAgIGlmIChwID49IDAgJiYgcy5jaGFyQ29kZUF0KHApIDwgMzIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGUxMjhhKHRoaXMuYzEyOC5jdG9hLCBzLCBkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29kZTEyOGIodGhpcy5jMTI4LmN0b2IsIHMsIGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gZW5kDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBDaXRpemVuDQogICAgLy8NCiAgICBjb25zdCBfY2l0aXplbiA9IHsNCiAgICAgICAgLy8gaW1hZ2Ugc3BsaXQgc2l6ZQ0KICAgICAgICBzcGxpdDogMTY2MiwNCiAgICAgICAgLy8gcHJpbnQgYmFyY29kZTogR1MgdyBuIEdTIGggbiBHUyBIIG4gR1MgayBtIG4gZDEgLi4uIGRuDQogICAgICAgIGJhcmNvZGU6IGZ1bmN0aW9uIChzeW1ib2wsIGVuY29kaW5nKSB7DQogICAgICAgICAgICBsZXQgZCA9IGljb252LmVuY29kZShzeW1ib2wuZGF0YSwgZW5jb2RpbmcgPT09ICdtdWx0aWxpbmd1YWwnID8gJ2FzY2lpJyA6IGVuY29kaW5nKS50b1N0cmluZygnYmluYXJ5Jyk7DQogICAgICAgICAgICBjb25zdCBiID0gdGhpcy5iYXJ0eXBlW3N5bWJvbC50eXBlXSArIE51bWJlcigvdXBjfFtlal1hbi8udGVzdChzeW1ib2wudHlwZSkgJiYgc3ltYm9sLmRhdGEubGVuZ3RoIDwgOSk7DQogICAgICAgICAgICBzd2l0Y2ggKGIpIHsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS5lYW46DQogICAgICAgICAgICAgICAgICAgIGQgPSBkLnNsaWNlKDAsIDEyKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSB0aGlzLmJhcnR5cGUudXBjOg0KICAgICAgICAgICAgICAgICAgICBkID0gZC5zbGljZSgwLCAxMSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5iYXJ0eXBlLmVhbiArIDE6DQogICAgICAgICAgICAgICAgICAgIGQgPSBkLnNsaWNlKDAsIDcpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS51cGMgKyAxOg0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy51cGNlKGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS5jb2RhYmFyOg0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy5jb2RhYmFyKGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS5jb2RlMTI4Og0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy5jb2RlMTI4KGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGQgPSBkLnNsaWNlKDAsIDI1NSk7DQogICAgICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwID8gJ1x4MWR3JyArICQoc3ltYm9sLndpZHRoKSArICdceDFkaCcgKyAkKHN5bWJvbC5oZWlnaHQpICsgJ1x4MWRIJyArICQoc3ltYm9sLmhyaSA/IDIgOiAwKSArICdceDFkaycgKyAkKGIsIGQubGVuZ3RoKSArIGQgOiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZ2VuZXJhdGUgQ29kYWJhciBkYXRhOg0KICAgICAgICBjb2RhYmFyOiBkYXRhID0+IGRhdGEudG9VcHBlckNhc2UoKQ0KICAgIH07DQoNCiAgICAvLw0KICAgIC8vIEZ1aml0c3UgSXNvdGVjDQogICAgLy8NCiAgICBjb25zdCBfZml0ID0gew0KICAgICAgICAvLyBpbWFnZSBzcGxpdCBzaXplDQogICAgICAgIHNwbGl0OiAxNjYyLA0KICAgICAgICAvLyBwcmludCBpbWFnZTogR1MgOCBMIHAxIHAyIHAzIHA0IG0gZm4gYSBieCBieSBjIHhMIHhIIHlMIHlIIGQxIC4uLiBkayBHUyAoIEwgcEwgcEggbSBmbg0KICAgICAgICBpbWFnZTogZnVuY3Rpb24gKGltYWdlKSB7DQogICAgICAgICAgICBjb25zdCBhbGlnbiA9IGFyZ3VtZW50c1sxXSB8fCB0aGlzLmFsaWdubWVudDsNCiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhcmd1bWVudHNbMl0gfHwgdGhpcy5sZWZ0Ow0KICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBhcmd1bWVudHNbM10gfHwgdGhpcy53aWR0aDsNCiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYXJndW1lbnRzWzRdIHx8IHRoaXMucmlnaHQ7DQogICAgICAgICAgICBjb25zdCBpbWcgPSBQTkcuc3luYy5yZWFkKEJ1ZmZlci5mcm9tKGltYWdlLCAnYmFzZTY0JykpOw0KICAgICAgICAgICAgY29uc3QgdyA9IGltZy53aWR0aDsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBBcnJheSh3KS5maWxsKDApOw0KICAgICAgICAgICAgY29uc3QgcyA9IFtdOw0KICAgICAgICAgICAgbGV0IGogPSAwOw0KICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBpbWcuaGVpZ2h0OyB6ICs9IHRoaXMuc3BsaXQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBoID0gTWF0aC5taW4odGhpcy5zcGxpdCwgaW1nLmhlaWdodCAtIHopOw0KICAgICAgICAgICAgICAgIGNvbnN0IGwgPSAodyArIDcgPj4gMykgKiBoICsgMTA7DQogICAgICAgICAgICAgICAgbGV0IHIgPSAnXHgxZDhMJyArICQobCAmIDI1NSwgbCA+PiA4ICYgMjU1LCBsID4+IDE2ICYgMjU1LCBsID4+IDI0ICYgMjU1LCA0OCwgMTEyLCA0OCwgMSwgMSwgNDksIHcgJiAyNTUsIHcgPj4gOCAmIDI1NSwgaCAmIDI1NSwgaCA+PiA4ICYgMjU1KTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGg7IHkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDAsIGUgPSAwOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHc7IHggKz0gOCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcSA9IE1hdGgubWluKHcgLSB4LCA4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZiA9IE1hdGguZmxvb3IoKGRbaV0gKyBlICogNSkgLyAxNiArIE1hdGgucG93KCgoaW1nLmRhdGFbal0gKiAuMjk5ICsgaW1nLmRhdGFbaiArIDFdICogLjU4NyArIGltZy5kYXRhW2ogKyAyXSAqIC4xMTQgLSAyNTUpICogaW1nLmRhdGFbaiArIDNdICsgNjU1MjUpIC8gNjU1MjUsIDEgLyB0aGlzLmdhbW1hKSAqIDI1NSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaiArPSA0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyYWRpZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaV0gPSBlICogMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGYgPCB0aGlzLnRocmVzaG9sZCA/IChiIHw9IDEyOCA+PiBwLCBmKSA6IGYgLSAyNTU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtpIC0gMV0gKz0gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2krK10gKz0gZSAqIDc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZiA8IHRoaXMudGhyZXNob2xkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiIHw9IDEyOCA+PiBwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgciArPSAkKGIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHIgKz0gJ1x4MWQoTCcgKyAkKDIsIDAsIDQ4LCA1MCk7DQogICAgICAgICAgICAgICAgcy5wdXNoKHIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMudXBzaWRlRG93bikgew0KICAgICAgICAgICAgICAgIHMucmV2ZXJzZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICh0aGlzLnVwc2lkZURvd24gJiYgYWxpZ24gPT09IDIgPyB0aGlzLmFyZWEocmlnaHQsIHdpZHRoLCBsZWZ0KSA6ICcnKSArIHMuam9pbignJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IFFSIENvZGU6IEdTICggayBwTCBwSCBjbiBmbiBuMSBuMiBHUyAoIGsgcEwgcEggY24gZm4gbiBHUyAoIGsgcEwgcEggY24gZm4gbiBHUyAoIGsgcEwgcEggY24gZm4gbSBkMSAuLi4gZGsgR1MgKCBrIHBMIHBIIGNuIGZuIG0NCiAgICAgICAgcXJjb2RlOiBmdW5jdGlvbiAoc3ltYm9sLCBlbmNvZGluZykgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBxcmNvZGUgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgbGV0IHIgPSB0aGlzLnVwc2lkZURvd24gJiYgdGhpcy5hbGlnbm1lbnQgPT09IDIgPyB0aGlzLmFyZWEodGhpcy5yaWdodCwgdGhpcy53aWR0aCwgdGhpcy5sZWZ0KSA6ICcnOw0KICAgICAgICAgICAgICAgIGlmIChzeW1ib2wuZGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHFyID0gcXJjb2RlKDAsIHN5bWJvbC5sZXZlbC50b1VwcGVyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgcXIuYWRkRGF0YShzeW1ib2wuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIHFyLm1ha2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gcXIuY3JlYXRlQVNDSUkoMiwgMCkuc3BsaXQoJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcubGVuZ3RoICogc3ltYm9sLmNlbGw7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSB3Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gKHcgKyA3ID4+IDMpICogaCArIDEwOw0KICAgICAgICAgICAgICAgICAgICByICs9ICdceDFkOEwnICsgJChsICYgMjU1LCBsID4+IDggJiAyNTUsIGwgPj4gMTYgJiAyNTUsIGwgPj4gMjQgJiAyNTUsIDQ4LCAxMTIsIDQ4LCAxLCAxLCA0OSwgdyAmIDI1NSwgdyA+PiA4ICYgMjU1LCBoICYgMjU1LCBoID4+IDggJiAyNTUpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltZy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdzsgaiArPSA4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHEgPSBNYXRoLm1pbih3IC0gaiwgOCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBxOyBwKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1tpXVtNYXRoLmZsb29yKChqICsgcCkgLyBzeW1ib2wuY2VsbCkgKiAyXSA9PT0gJyAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiIHw9IDEyOCA+PiBwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgKz0gJChiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3ltYm9sLmNlbGw7IGsrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByICs9ICdceDFkKEwnICsgJCgyLCAwLCA0OCwgNTApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBpY29udi5lbmNvZGUoc3ltYm9sLmRhdGEsIGVuY29kaW5nID09PSAnbXVsdGlsaW5ndWFsJyA/ICdhc2NpaScgOiBlbmNvZGluZykudG9TdHJpbmcoJ2JpbmFyeScpLnNsaWNlKDAsIDcwODkpOw0KICAgICAgICAgICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDAgPyAnXHgxZChrJyArICQoNCwgMCwgNDksIDY1LCA1MCwgMCkgKyAnXHgxZChrJyArICQoMywgMCwgNDksIDY3LCBzeW1ib2wuY2VsbCkgKyAnXHgxZChrJyArICQoMywgMCwgNDksIDY5LCB0aGlzLnFybGV2ZWxbc3ltYm9sLmxldmVsXSkgKyAnXHgxZChrJyArICQoZC5sZW5ndGggKyAzICYgMjU1LCBkLmxlbmd0aCArIDMgPj4gOCAmIDI1NSwgNDksIDgwLCA0OCkgKyBkICsgJ1x4MWQoaycgKyAkKDMsIDAsIDQ5LCA4MSwgNDgpIDogJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBFU0MvUE9TIEltcGFjdA0KICAgIC8vDQogICAgY29uc3QgX2ltcGFjdCA9IHsNCiAgICAgICAgZm9udDogMCwNCiAgICAgICAgc3R5bGU6IDAsDQogICAgICAgIGNvbG9yOiAwLA0KICAgICAgICBsZWZ0OiAwLA0KICAgICAgICByaWdodDogMCwNCiAgICAgICAgcG9zaXRpb246IDAsDQogICAgICAgIG1hcmdpbjogMCwNCiAgICAgICAgbWFyZ2luUmlnaHQ6IDAsDQogICAgICAgIHJlZDogW10sDQogICAgICAgIGJsYWNrOiBbXSwNCiAgICAgICAgLy8gc3RhcnQgcHJpbnRpbmc6IEVTQyBAIEdTIGEgbiBFU0MgTSBuIChFU0MgMikgKEVTQyAzIG4pIEVTQyB7IG4NCiAgICAgICAgb3BlbjogZnVuY3Rpb24gKHByaW50ZXIpIHsNCiAgICAgICAgICAgIHRoaXMuc3R5bGUgPSB0aGlzLmZvbnQ7DQogICAgICAgICAgICB0aGlzLmNvbG9yID0gMDsNCiAgICAgICAgICAgIHRoaXMubGVmdCA9IDA7DQogICAgICAgICAgICB0aGlzLnJpZ2h0ID0gMDsNCiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSAwOw0KICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSBwcmludGVyLm1hcmdpbjsNCiAgICAgICAgICAgIHRoaXMubWFyZ2luUmlnaHQgPSBwcmludGVyLm1hcmdpblJpZ2h0Ow0KICAgICAgICAgICAgdGhpcy5yZWQgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuYmxhY2sgPSBbXTsNCiAgICAgICAgICAgIHRoaXMudXBzaWRlRG93biA9IHByaW50ZXIudXBzaWRlRG93bjsNCiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHByaW50ZXIuc3BhY2luZzsNCiAgICAgICAgICAgIHRoaXMuY3V0dGluZyA9IHByaW50ZXIuY3V0dGluZzsNCiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnQgPSBwcmludGVyLmdyYWRpZW50Ow0KICAgICAgICAgICAgdGhpcy5nYW1tYSA9IHByaW50ZXIuZ2FtbWE7DQogICAgICAgICAgICB0aGlzLnRocmVzaG9sZCA9IHByaW50ZXIudGhyZXNob2xkOw0KICAgICAgICAgICAgcmV0dXJuICdceDFiQFx4MWRhXHgwMFx4MWJNJyArICQodGhpcy5mb250KSArICh0aGlzLnNwYWNpbmcgPyAnXHgxYjInIDogJ1x4MWIzXHgxMicpICsgJ1x4MWJ7JyArICQodGhpcy51cHNpZGVEb3duKSArICdceDFjLic7DQogICAgICAgIH0sDQogICAgICAgIC8vIGZpbmlzaCBwcmludGluZzogR1MgciBuDQogICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuY3V0dGluZyA/IHRoaXMuY3V0KCkgOiAnJykgKyAnXHgxZHIxJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHByaW50IGFyZWE6DQogICAgICAgIGFyZWE6IGZ1bmN0aW9uIChsZWZ0LCB3aWR0aCwgcmlnaHQpIHsNCiAgICAgICAgICAgIHRoaXMubGVmdCA9IHRoaXMubWFyZ2luICsgbGVmdDsNCiAgICAgICAgICAgIHRoaXMucmlnaHQgPSByaWdodCArIHRoaXMubWFyZ2luUmlnaHQ7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBsaW5lIGFsaWdubWVudDogRVNDIGEgbg0KICAgICAgICBhbGlnbjogYWxpZ24gPT4gJ1x4MWJhJyArICQoYWxpZ24pLA0KICAgICAgICAvLyBzZXQgYWJzb2x1dGUgcHJpbnQgcG9zaXRpb246DQogICAgICAgIGFic29sdXRlOiBmdW5jdGlvbiAocG9zaXRpb24pIHsNCiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHJlbGF0aXZlIHByaW50IHBvc2l0aW9uOg0KICAgICAgICByZWxhdGl2ZTogZnVuY3Rpb24gKHBvc2l0aW9uKSB7DQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uICs9IE1hdGgucm91bmQocG9zaXRpb24pOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcmludCBob3Jpem9udGFsIHJ1bGU6IEVTQyB0IG4gLi4uDQogICAgICAgIGhyOiBmdW5jdGlvbiAod2lkdGgpIHsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYiEnICsgJCh0aGlzLmZvbnQpICsgJyAnLnJlcGVhdCh0aGlzLmxlZnQpICsgJ1x4MWJ0XHgwMScgKyAnXHg5NScucmVwZWF0KHdpZHRoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgcnVsZXM6IEVTQyAhIG4gRVNDIHQgbiAuLi4NCiAgICAgICAgdnI6IGZ1bmN0aW9uICh3aWR0aHMsIGhlaWdodCkgew0KICAgICAgICAgICAgY29uc3QgZCA9ICdceDFiIScgKyAkKHRoaXMuZm9udCArIChoZWlnaHQgPiAxID8gMTYgOiAwKSkgKyAnXHgxYnRceDAxXHg5Nic7DQogICAgICAgICAgICB0aGlzLmJsYWNrLnB1c2goeyBkYXRhOiBkLCBpbmRleDogdGhpcy5wb3NpdGlvbiwgbGVuZ3RoOiAxIH0pOw0KICAgICAgICAgICAgd2lkdGhzLmZvckVhY2godyA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiArPSB3ICsgMTsNCiAgICAgICAgICAgICAgICB0aGlzLmJsYWNrLnB1c2goeyBkYXRhOiBkLCBpbmRleDogdGhpcy5wb3NpdGlvbiwgbGVuZ3RoOiAxIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHN0YXJ0IHJ1bGVzOiBFU0MgISBuIEVTQyB0IG4gLi4uDQogICAgICAgIHZyc3RhcnQ6IGZ1bmN0aW9uICh3aWR0aHMpIHsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYiEnICsgJCh0aGlzLmZvbnQpICsgJyAnLnJlcGVhdCh0aGlzLmxlZnQpICsgJ1x4MWJ0XHgwMScgKyB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgJ1x4OTUnLnJlcGVhdCh3KSArICdceDkxJywgJ1x4OWMnKS5zbGljZSgwLCAtMSkgKyAnXHg5ZCc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHN0b3AgcnVsZXM6IEVTQyAhIG4gRVNDIHQgbiAuLi4NCiAgICAgICAgdnJzdG9wOiBmdW5jdGlvbiAod2lkdGhzKSB7DQogICAgICAgICAgICByZXR1cm4gJ1x4MWIhJyArICQodGhpcy5mb250KSArICcgJy5yZXBlYXQodGhpcy5sZWZ0KSArICdceDFidFx4MDEnICsgd2lkdGhzLnJlZHVjZSgoYSwgdykgPT4gYSArICdceDk1Jy5yZXBlYXQodykgKyAnXHg5MCcsICdceDllJykuc2xpY2UoMCwgLTEpICsgJ1x4OWYnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcmludCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBydWxlczogRVNDICEgbiBFU0MgdCBuIC4uLg0KICAgICAgICB2cmhyOiBmdW5jdGlvbiAod2lkdGhzMSwgd2lkdGhzMiwgZGwsIGRyKSB7DQogICAgICAgICAgICBjb25zdCByMSA9ICcgJy5yZXBlYXQoTWF0aC5tYXgoLWRsLCAwKSkgKyB3aWR0aHMxLnJlZHVjZSgoYSwgdykgPT4gYSArICdceDk1Jy5yZXBlYXQodykgKyAnXHg5MCcsIGRsID4gMCA/ICdceDllJyA6ICdceDlhJykuc2xpY2UoMCwgLTEpICsgKGRyIDwgMCA/ICdceDlmJyA6ICdceDliJykgKyAnICcucmVwZWF0KE1hdGgubWF4KGRyLCAwKSk7DQogICAgICAgICAgICBjb25zdCByMiA9ICcgJy5yZXBlYXQoTWF0aC5tYXgoZGwsIDApKSArIHdpZHRoczIucmVkdWNlKChhLCB3KSA9PiBhICsgJ1x4OTUnLnJlcGVhdCh3KSArICdceDkxJywgZGwgPCAwID8gJ1x4OWMnIDogJ1x4OTgnKS5zbGljZSgwLCAtMSkgKyAoZHIgPiAwID8gJ1x4OWQnIDogJ1x4OTknKSArICcgJy5yZXBlYXQoTWF0aC5tYXgoLWRyLCAwKSk7DQogICAgICAgICAgICByZXR1cm4gJ1x4MWIhJyArICQodGhpcy5mb250KSArICcgJy5yZXBlYXQodGhpcy5sZWZ0KSArICdceDFidFx4MDEnICsgcjIuc3BsaXQoJycpLnJlZHVjZSgoYSwgYywgaSkgPT4gYSArIHRoaXMudnJ0YWJsZVtjXVtyMVtpXV0sICcnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IGxpbmUgc3BhY2luZyBhbmQgZmVlZCBuZXcgbGluZTogKEVTQyAyKSAoRVNDIDMgbikNCiAgICAgICAgdnJsZjogZnVuY3Rpb24gKHZyKSB7DQogICAgICAgICAgICByZXR1cm4gKHZyID09PSB0aGlzLnVwc2lkZURvd24gJiYgdGhpcy5zcGFjaW5nID8gJ1x4MWIyJyA6ICdceDFiM1x4MTInKSArIHRoaXMubGYoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY3V0IHBhcGVyOiBHUyBWIG0gbg0KICAgICAgICBjdXQ6ICgpID0+ICdceDFkVkJceDAwJywNCiAgICAgICAgLy8gdW5kZXJsaW5lIHRleHQ6DQogICAgICAgIHVsOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnN0eWxlICs9IDEyODsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZW1waGFzaXplIHRleHQ6DQogICAgICAgIGVtOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnN0eWxlICs9IDg7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGludmVydCB0ZXh0Og0KICAgICAgICBpdjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy5jb2xvciA9IDE7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNjYWxlIHVwIHRleHQ6DQogICAgICAgIHdoOiBmdW5jdGlvbiAod2gpIHsNCiAgICAgICAgICAgIGlmICh3aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlICs9IHdoIDwgMyA/IDY0ID4+IHdoIDogNDg7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGNhbmNlbCB0ZXh0IGRlY29yYXRpb246DQogICAgICAgIG5vcm1hbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy5zdHlsZSA9IHRoaXMuZm9udDsNCiAgICAgICAgICAgIHRoaXMuY29sb3IgPSAwOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcmludCB0ZXh0Og0KICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodGV4dCwgZW5jb2RpbmcpIHsNCiAgICAgICAgICAgIGNvbnN0IHQgPSBpY29udi5lbmNvZGUodGV4dCwgZW5jb2RpbmcgPT09ICdtdWx0aWxpbmd1YWwnID8gJ2FzY2lpJyA6IGVuY29kaW5nKS50b1N0cmluZygnYmluYXJ5Jyk7DQogICAgICAgICAgICBjb25zdCBkID0gJ1x4MWIhJyArICQodGhpcy5zdHlsZSkgKyAoZW5jb2RpbmcgPT09ICdtdWx0aWxpbmd1YWwnID8gdGhpcy5tdWx0aWNvbnYodGV4dCkgOiB0aGlzLmNvZGVwYWdlW2VuY29kaW5nXSArIGljb252LmVuY29kZSh0ZXh0LCBlbmNvZGluZykudG9TdHJpbmcoJ2JpbmFyeScpKTsNCiAgICAgICAgICAgIGNvbnN0IGwgPSB0Lmxlbmd0aCAqICh0aGlzLnN0eWxlICYgMzIgPyAyIDogMSk7DQogICAgICAgICAgICBpZiAodGhpcy5jb2xvciA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlZC5wdXNoKHsgZGF0YTogZCwgaW5kZXg6IHRoaXMucG9zaXRpb24sIGxlbmd0aDogbCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuYmxhY2sucHVzaCh7IGRhdGE6IGQsIGluZGV4OiB0aGlzLnBvc2l0aW9uLCBsZW5ndGg6IGwgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uICs9IGw7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGZlZWQgbmV3IGxpbmU6IExGDQogICAgICAgIGxmOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBsZXQgciA9ICcnOw0KICAgICAgICAgICAgaWYgKHRoaXMucmVkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBsZXQgcCA9IDA7DQogICAgICAgICAgICAgICAgciArPSB0aGlzLnJlZC5zb3J0KChhLCBiKSA9PiBhLmluZGV4IC0gYi5pbmRleCkucmVkdWNlKChhLCBjKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBhICsgJ1x4MWIhJyArICQodGhpcy5mb250KSArICcgJy5yZXBlYXQoYy5pbmRleCAtIHApICsgYy5kYXRhOw0KICAgICAgICAgICAgICAgICAgICBwID0gYy5pbmRleCArIGMubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gczsNCiAgICAgICAgICAgICAgICB9LCAnXHgxYnJceDAxXHgxYiEnICsgJCh0aGlzLmZvbnQpICsgJyAnLnJlcGVhdCh0aGlzLmxlZnQpKSArICdceDBkXHgxYnJceDAwJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmJsYWNrLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBsZXQgcCA9IDA7DQogICAgICAgICAgICAgICAgciArPSB0aGlzLmJsYWNrLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KS5yZWR1Y2UoKGEsIGMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IGEgKyAnXHgxYiEnICsgJCh0aGlzLmZvbnQpICsgJyAnLnJlcGVhdChjLmluZGV4IC0gcCkgKyBjLmRhdGE7DQogICAgICAgICAgICAgICAgICAgIHAgPSBjLmluZGV4ICsgYy5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzOw0KICAgICAgICAgICAgICAgIH0sICdceDFiIScgKyAkKHRoaXMuZm9udCkgKyAnICcucmVwZWF0KHRoaXMubGVmdCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgciArPSAnXHgwYSc7DQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDsNCiAgICAgICAgICAgIHRoaXMucmVkID0gW107DQogICAgICAgICAgICB0aGlzLmJsYWNrID0gW107DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gaW5zZXJ0IGNvbW1hbmRzOg0KICAgICAgICBjb21tYW5kOiBjb21tYW5kID0+IGNvbW1hbmQsDQogICAgICAgIC8vIHByaW50IGltYWdlOiBFU0MgKiAwIHdMIHdIIGQxIC4uLiBkayBFU0MgSiBuDQogICAgICAgIGltYWdlOiBmdW5jdGlvbiAoaW1hZ2UpIHsNCiAgICAgICAgICAgIGxldCByID0gJyc7DQogICAgICAgICAgICBjb25zdCBpbWcgPSBQTkcuc3luYy5yZWFkKEJ1ZmZlci5mcm9tKGltYWdlLCAnYmFzZTY0JykpOw0KICAgICAgICAgICAgY29uc3QgdyA9IGltZy53aWR0aDsNCiAgICAgICAgICAgIGlmICh3IDwgMTAyNCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBBcnJheSh3KS5maWxsKDApOw0KICAgICAgICAgICAgICAgIGxldCBqID0gdGhpcy51cHNpZGVEb3duID8gaW1nLmRhdGEubGVuZ3RoIC0gNCA6IDA7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBpbWcuaGVpZ2h0OyB5ICs9IDgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IEFycmF5KHcpLmZpbGwoMCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLm1pbig4LCBpbWcuaGVpZ2h0IC0geSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgaDsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDAsIGUgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3OyB4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmID0gTWF0aC5mbG9vcigoZFtpXSArIGUgKiA1KSAvIDE2ICsgTWF0aC5wb3coKChpbWcuZGF0YVtqXSAqIC4yOTkgKyBpbWcuZGF0YVtqICsgMV0gKiAuNTg3ICsgaW1nLmRhdGFbaiArIDJdICogLjExNCAtIDI1NSkgKiBpbWcuZGF0YVtqICsgM10gKyA2NTUyNSkgLyA2NTUyNSwgMSAvIHRoaXMuZ2FtbWEpICogMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICs9IHRoaXMudXBzaWRlRG93biA/IC00IDogNDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmFkaWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmIDwgdGhpcy50aHJlc2hvbGQgPyAodGhpcy51cHNpZGVEb3duID8gYlt3IC0geCAtIDFdIHw9IDEgPDwgcCA6IGJbeF0gfD0gMTI4ID4+IHAsIGYpIDogZiAtIDI1NTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2kgLSAxXSArPSBlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSsrXSArPSBlICogNzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmIDwgdGhpcy50aHJlc2hvbGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBzaWRlRG93biA/IGJbdyAtIHggLSAxXSB8PSAxIDw8IHAgOiBiW3hdIHw9IDEyOCA+PiBwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHIgKz0gJyAnLnJlcGVhdCh0aGlzLmxlZnQpICsgJ1x4MWIqXHgwMCcgKyAkKHcgJiAyNTUsIHcgPj4gOCAmIDI1NSkgKyBiLnJlZHVjZSgoYSwgYykgPT4gYSArICQoYyksICcnKSArICcgJy5yZXBlYXQodGhpcy5yaWdodCkgKyAnXHgxYkonICsgJChoICogMik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBFU0MvUE9TIEltcGFjdCBGb250IEINCiAgICAvLw0KICAgIGNvbnN0IF9mb250YiA9IHsNCiAgICAgICAgZm9udDogMQ0KICAgIH07DQoNCiAgICAvLw0KICAgIC8vIFN0YXJQUk5UIENvbW1vbg0KICAgIC8vDQogICAgY29uc3QgX3N0YXIgPSB7DQogICAgICAgIC8vIHByaW50ZXIgY29uZmlndXJhdGlvbg0KICAgICAgICB1cHNpZGVEb3duOiBmYWxzZSwNCiAgICAgICAgc3BhY2luZzogZmFsc2UsDQogICAgICAgIGN1dHRpbmc6IHRydWUsDQogICAgICAgIGdyYWRpZW50OiB0cnVlLA0KICAgICAgICBnYW1tYTogMS44LA0KICAgICAgICB0aHJlc2hvbGQ6IDEyOCwNCiAgICAgICAgbWFyZ2luOiAwLA0KICAgICAgICAvLyBzdGFydCBwcmludGluZzogRVNDIEAgRVNDIFJTIGEgbiAoRVNDIFJTIFIgbikgRVNDIFJTIEYgbiBFU0MgU1AgbiBFU0MgcyBuMSBuMiAoRVNDIHogbikgKEVTQyAwKSAoU0kpIChEQzIpDQogICAgICAgIG9wZW46IGZ1bmN0aW9uIChwcmludGVyKSB7DQogICAgICAgICAgICB0aGlzLnVwc2lkZURvd24gPSBwcmludGVyLnVwc2lkZURvd247DQogICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBwcmludGVyLnNwYWNpbmc7DQogICAgICAgICAgICB0aGlzLmN1dHRpbmcgPSBwcmludGVyLmN1dHRpbmc7DQogICAgICAgICAgICB0aGlzLmdyYWRpZW50ID0gcHJpbnRlci5ncmFkaWVudDsNCiAgICAgICAgICAgIHRoaXMuZ2FtbWEgPSBwcmludGVyLmdhbW1hOw0KICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBwcmludGVyLnRocmVzaG9sZDsNCiAgICAgICAgICAgIHRoaXMubWFyZ2luID0gcHJpbnRlci5tYXJnaW47DQogICAgICAgICAgICByZXR1cm4gJ1x4MWJAXHgxYlx4MWVhXHgwMCcgKyAocHJpbnRlci5lbmNvZGluZyA9PT0gJ3RpczYyMCcgPyAnXHgxYlx4MWVSXHgwMSc6ICcnKSArICdceDFiXHgxZUZceDAwXHgxYiAwXHgxYnMwMCcgKyAodGhpcy5zcGFjaW5nID8gJ1x4MWJ6MScgOiAnXHgxYjAnKSArICh0aGlzLnVwc2lkZURvd24gPyAnXHgwZicgOiAnXHgxMicpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBmaW5pc2ggcHJpbnRpbmc6IEVTQyBHUyBFVFggcyBuMSBuMg0KICAgICAgICBjbG9zZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuICh0aGlzLmN1dHRpbmcgPyB0aGlzLmN1dCgpIDogJycpICsgJ1x4MWJceDFkXHgwM1x4MDFceDAwXHgwMCc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBwcmludCBhcmVhOiBFU0MgbCBuIEVTQyBRIG4NCiAgICAgICAgYXJlYTogZnVuY3Rpb24gKGxlZnQsIHdpZHRoLCByaWdodCkgew0KICAgICAgICAgICAgcmV0dXJuICdceDFibCcgKyAkKDApICsgJ1x4MWJRJyArICQodGhpcy5tYXJnaW4gKyBsZWZ0ICsgd2lkdGggKyByaWdodCkgKyAnXHgxYmwnICsgJCh0aGlzLm1hcmdpbiArIGxlZnQpICsgJ1x4MWJRJyArICQodGhpcy5tYXJnaW4gKyBsZWZ0ICsgd2lkdGgpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzZXQgbGluZSBhbGlnbm1lbnQ6IEVTQyBHUyBhIG4NCiAgICAgICAgYWxpZ246IGFsaWduID0+ICdceDFiXHgxZGEnICsgJChhbGlnbiksDQogICAgICAgIC8vIHNldCBhYnNvbHV0ZSBwcmludCBwb3NpdGlvbjogRVNDIEdTIEEgbjEgbjINCiAgICAgICAgYWJzb2x1dGU6IGZ1bmN0aW9uIChwb3NpdGlvbikgew0KICAgICAgICAgICAgY29uc3QgcCA9IHBvc2l0aW9uICogdGhpcy5jaGFyV2lkdGg7DQogICAgICAgICAgICByZXR1cm4gJ1x4MWJceDFkQScgKyAkKHAgJiAyNTUsIHAgPj4gOCAmIDI1NSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCByZWxhdGl2ZSBwcmludCBwb3NpdGlvbjogRVNDIEdTIFIgbjEgbjINCiAgICAgICAgcmVsYXRpdmU6IGZ1bmN0aW9uIChwb3NpdGlvbikgew0KICAgICAgICAgICAgY29uc3QgcCA9IHBvc2l0aW9uICogdGhpcy5jaGFyV2lkdGg7DQogICAgICAgICAgICByZXR1cm4gJ1x4MWJceDFkUicgKyAkKHAgJiAyNTUsIHAgPj4gOCAmIDI1NSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBsaW5lIHNwYWNpbmcgYW5kIGZlZWQgbmV3IGxpbmU6IChFU0MgeiBuKSAoRVNDIDApDQogICAgICAgIHZybGY6IGZ1bmN0aW9uICh2cikgew0KICAgICAgICAgICAgcmV0dXJuICh0aGlzLnVwc2lkZURvd24gPyB0aGlzLmxmKCkgOiAnJykgKyAodnIgPT09IHRoaXMudXBzaWRlRG93biAmJiB0aGlzLnNwYWNpbmcgPyAnXHgxYnoxJyA6ICdceDFiMCcpICsgKHRoaXMudXBzaWRlRG93biA/ICcnIDogdGhpcy5sZigpKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY3V0IHBhcGVyOiBFU0MgZCBuDQogICAgICAgIGN1dDogKCkgPT4gJ1x4MWJkMycsDQogICAgICAgIC8vIHVuZGVybGluZSB0ZXh0OiBFU0MgLSBuDQogICAgICAgIHVsOiAoKSA9PiAnXHgxYi0xJywNCiAgICAgICAgLy8gZW1waGFzaXplIHRleHQ6IEVTQyBFDQogICAgICAgIGVtOiAoKSA9PiAnXHgxYkUnLA0KICAgICAgICAvLyBpbnZlcnQgdGV4dDogRVNDIDQNCiAgICAgICAgaXY6ICgpID0+ICdceDFiNCcsDQogICAgICAgIC8vIHNjYWxlIHVwIHRleHQ6IEVTQyBpIG4xIG4yDQogICAgICAgIHdoOiB3aCA9PiAnXHgxYmknICsgKHdoIDwgMyA/ICQod2ggPj4gMSAmIDEsIHdoICYgMSkgOiAkKHdoIC0gMiwgd2ggLSAyKSksDQogICAgICAgIC8vIGNhbmNlbCB0ZXh0IGRlY29yYXRpb246IEVTQyAtIG4gRVNDIEYgRVNDIDUgRVNDIGkgbjEgbjINCiAgICAgICAgbm9ybWFsOiAoKSA9PiAnXHgxYi0wXHgxYkZceDFiNVx4MWJpJyArICQoMCwgMCksDQogICAgICAgIC8vIHByaW50IHRleHQ6DQogICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0ZXh0LCBlbmNvZGluZykgew0KICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nID09PSAnbXVsdGlsaW5ndWFsJyA/IHRoaXMubXVsdGljb252KHRleHQpIDogdGhpcy5jb2RlcGFnZVtlbmNvZGluZ10gKyBpY29udi5lbmNvZGUodGV4dCwgZW5jb2RpbmcpLnRvU3RyaW5nKCdiaW5hcnknKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY29kZXBhZ2VzOiAoRVNDIEdTIHQgbikgKEVTQyAkIG4pIChFU0MgUiBuKQ0KICAgICAgICBjb2RlcGFnZTogew0KICAgICAgICAgICAgY3A0Mzc6ICdceDFiXHgxZHRceDAxJywgY3A4NTI6ICdceDFiXHgxZHRceDA1JywgY3A4NTg6ICdceDFiXHgxZHRceDA0JywgY3A4NjA6ICdceDFiXHgxZHRceDA2JywNCiAgICAgICAgICAgIGNwODYzOiAnXHgxYlx4MWR0XHgwOCcsIGNwODY1OiAnXHgxYlx4MWR0XHgwOScsIGNwODY2OiAnXHgxYlx4MWR0XHgwYScsIGNwMTI1MjogJ1x4MWJceDFkdFx4MjAnLA0KICAgICAgICAgICAgY3A5MzI6ICdceDFiJDFceDFiUjgnLCBjcDkzNjogJycsIGNwOTQ5OiAnXHgxYlJEJywgY3A5NTA6ICcnLA0KICAgICAgICAgICAgc2hpZnRqaXM6ICdceDFiJDFceDFiUjgnLCBnYjE4MDMwOiAnJywga3NjNTYwMTogJ1x4MWJSRCcsIGJpZzU6ICcnLCB0aXM2MjA6ICdceDFiXHgxZHRceDYxJw0KICAgICAgICB9LA0KICAgICAgICAvLyBjb252ZXJ0IHRvIG11bHRpcGxlIGNvZGVwYWdlIGNoYXJhY3RlcnM6IChFU0MgR1MgdCBuKQ0KICAgICAgICBtdWx0aWNvbnY6IHRleHQgPT4gew0KICAgICAgICAgICAgbGV0IHAgPSAnJywgciA9ICcnOw0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgY29uc3QgYyA9IHRleHRbaV07DQogICAgICAgICAgICAgICAgaWYgKGMgPiAnXHg3ZicpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IG11bHRpdGFibGVbY107DQogICAgICAgICAgICAgICAgICAgIGlmIChkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gZFswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID09PSBxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgciArPSBkWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgciArPSAnXHgxYlx4MWR0JyArIHN0YXJwYWdlW3FdICsgZFsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gcTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJz8nOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByICs9IGM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgIH0sDQogICAgICAgIC8vIGZlZWQgbmV3IGxpbmU6IExGDQogICAgICAgIGxmOiAoKSA9PiAnXHgwYScsDQogICAgICAgIC8vIGluc2VydCBjb21tYW5kczoNCiAgICAgICAgY29tbWFuZDogY29tbWFuZCA9PiBjb21tYW5kLA0KICAgICAgICAvLyBpbWFnZSBzcGxpdCBzaXplDQogICAgICAgIHNwbGl0OiAyNDAwLA0KICAgICAgICAvLyBwcmludCBpbWFnZTogRVNDIEdTIFMgbSB4TCB4SCB5TCB5SCBuIFtkMTEgZDEyIC4uLiBkMWtdDQogICAgICAgIGltYWdlOiBmdW5jdGlvbiAoaW1hZ2UpIHsNCiAgICAgICAgICAgIGNvbnN0IGltZyA9IFBORy5zeW5jLnJlYWQoQnVmZmVyLmZyb20oaW1hZ2UsICdiYXNlNjQnKSk7DQogICAgICAgICAgICBjb25zdCB3ID0gaW1nLndpZHRoOw0KICAgICAgICAgICAgY29uc3QgZCA9IEFycmF5KHcpLmZpbGwoMCk7DQogICAgICAgICAgICBjb25zdCBsID0gdyArIDcgPj4gMzsNCiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTsNCiAgICAgICAgICAgIGxldCBqID0gMDsNCiAgICAgICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgaW1nLmhlaWdodDsgeiArPSB0aGlzLnNwbGl0KSB7DQogICAgICAgICAgICAgICAgY29uc3QgaCA9IE1hdGgubWluKHRoaXMuc3BsaXQsIGltZy5oZWlnaHQgLSB6KTsNCiAgICAgICAgICAgICAgICBsZXQgciA9ICdceDFiXHgxZFMnICsgJCgxLCBsICYgMjU1LCBsID4+IDggJiAyNTUsIGggJiAyNTUsIGggPj4gOCAmIDI1NSwgMCk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoOyB5KyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwLCBlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3OyB4ICs9IDgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHEgPSBNYXRoLm1pbih3IC0geCwgOCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IHE7IHArKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBNYXRoLmZsb29yKChkW2ldICsgZSAqIDUpIC8gMTYgKyBNYXRoLnBvdygoKGltZy5kYXRhW2pdICogLjI5OSArIGltZy5kYXRhW2ogKyAxXSAqIC41ODcgKyBpbWcuZGF0YVtqICsgMl0gKiAuMTE0IC0gMjU1KSAqIGltZy5kYXRhW2ogKyAzXSArIDY1NTI1KSAvIDY1NTI1LCAxIC8gdGhpcy5nYW1tYSkgKiAyNTUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogKz0gNDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmFkaWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmIDwgdGhpcy50aHJlc2hvbGQgPyAoYiB8PSAxMjggPj4gcCwgZikgOiBmIC0gMjU1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSAtIDFdICs9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtpKytdICs9IGUgKiA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgPCB0aGlzLnRocmVzaG9sZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJChiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzLnB1c2gocik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy51cHNpZGVEb3duKSB7DQogICAgICAgICAgICAgICAgcy5yZXZlcnNlKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcy5qb2luKCcnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgUVIgQ29kZTogRVNDIEdTIHkgUyAwIG4gRVNDIEdTIHkgUyAxIG4gRVNDIEdTIHkgUyAyIG4gRVNDIEdTIHkgRCAxIG0gbkwgbkggZDEgZDIgLi4uIGRrIEVTQyBHUyB5IFANCiAgICAgICAgcXJjb2RlOiBmdW5jdGlvbiAoc3ltYm9sLCBlbmNvZGluZykgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBxcmNvZGUgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgbGV0IHIgPSAnJzsNCiAgICAgICAgICAgICAgICBpZiAoc3ltYm9sLmRhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBxciA9IHFyY29kZSgwLCBzeW1ib2wubGV2ZWwudG9VcHBlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgIHFyLmFkZERhdGEoc3ltYm9sLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBxci5tYWtlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IHFyLmNyZWF0ZUFTQ0lJKDIsIDApLnNwbGl0KCdcbicpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gaW1nLmxlbmd0aCAqIHN5bWJvbC5jZWxsOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBoID0gdzsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IHcgKyA3ID4+IDM7DQogICAgICAgICAgICAgICAgICAgIHIgKz0gJ1x4MWJceDFkUycgKyAkKDEsIGwgJiAyNTUsIGwgPj4gOCAmIDI1NSwgaCAmIDI1NSwgaCA+PiA4ICYgMjU1LCAwKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHc7IGogKz0gOCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIGosIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdbaV1bTWF0aC5mbG9vcigoaiArIHApIC8gc3ltYm9sLmNlbGwpICogMl0gPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkICs9ICQoYik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN5bWJvbC5jZWxsOyBrKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICs9IGQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gaWNvbnYuZW5jb2RlKHN5bWJvbC5kYXRhLCBlbmNvZGluZyA9PT0gJ211bHRpbGluZ3VhbCcgPyAnYXNjaWknIDogZW5jb2RpbmcpLnRvU3RyaW5nKCdiaW5hcnknKS5zbGljZSgwLCA3MDg5KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwID8gJ1x4MWJceDFkeVMwJyArICQoMikgKyAnXHgxYlx4MWR5UzEnICsgJCh0aGlzLnFybGV2ZWxbc3ltYm9sLmxldmVsXSkgKyAnXHgxYlx4MWR5UzInICsgJChzeW1ib2wuY2VsbCkgKyAnXHgxYlx4MWR5RDEnICsgJCgwLCBkLmxlbmd0aCAmIDI1NSwgZC5sZW5ndGggPj4gOCAmIDI1NSkgKyBkICsgJ1x4MWJceDFkeVAnIDogJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIFFSIENvZGUgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHM6DQogICAgICAgIHFybGV2ZWw6IHsNCiAgICAgICAgICAgIGw6IDAsIG06IDEsIHE6IDIsIGg6IDMNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgYmFyY29kZTogRVNDIGIgbjEgbjIgbjMgbjQgZDEgLi4uIGRrIFJTDQogICAgICAgIGJhcmNvZGU6IGZ1bmN0aW9uIChzeW1ib2wsIGVuY29kaW5nKSB7DQogICAgICAgICAgICBsZXQgZCA9IGljb252LmVuY29kZShzeW1ib2wuZGF0YSwgZW5jb2RpbmcgPT09ICdtdWx0aWxpbmd1YWwnID8gJ2FzY2lpJyA6IGVuY29kaW5nKS50b1N0cmluZygnYmluYXJ5Jyk7DQogICAgICAgICAgICBjb25zdCBiID0gdGhpcy5iYXJ0eXBlW3N5bWJvbC50eXBlXSAtIE51bWJlcigvdXBjfFtlal1hbi8udGVzdChzeW1ib2wudHlwZSkgJiYgc3ltYm9sLmRhdGEubGVuZ3RoIDwgOSk7DQogICAgICAgICAgICBzd2l0Y2ggKGIpIHsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS51cGMgLSAxOg0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy51cGNlKGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIHRoaXMuYmFydHlwZS5jb2RlMTI4Og0KICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy5jb2RlMTI4KGQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IHUgPSBzeW1ib2wudHlwZSA9PT0gJ2l0ZicgPyBbIDQ5LCA1NiwgNTAgXVtzeW1ib2wud2lkdGggLSAyXSA6IHN5bWJvbC53aWR0aCArICgvXihjb2RlMzl8Y29kYWJhcnxudzcpJC8udGVzdChzeW1ib2wudHlwZSkgPyA1MCA6IDQ3KTsNCiAgICAgICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDAgPyAnXHgxYmInICsgJChiLCBzeW1ib2wuaHJpID8gNTAgOiA0OSwgdSwgc3ltYm9sLmhlaWdodCkgKyBkICsgJ1x4MWUnIDogJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIGJhcmNvZGUgdHlwZXM6DQogICAgICAgIGJhcnR5cGU6IHsNCiAgICAgICAgICAgIHVwYzogNDksIGVhbjogNTEsIGphbjogNTEsIGNvZGUzOTogNTIsIGl0ZjogNTMsIGNvZGFiYXI6IDU2LCBudzc6IDU2LCBjb2RlOTM6IDU1LCBjb2RlMTI4OiA1NA0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBVUEMtRSBkYXRhIChjb252ZXJ0IFVQQy1FIHRvIFVQQy1BKToNCiAgICAgICAgdXBjZTogZGF0YSA9PiB7DQogICAgICAgICAgICBsZXQgciA9ICcnOw0KICAgICAgICAgICAgbGV0IHMgPSBkYXRhLnJlcGxhY2UoLygoPyFeMFxkezYsN30kKS4pKi8sICcnKTsNCiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICByICs9IHMuc2xpY2UoMCwgMyk7DQogICAgICAgICAgICAgICAgc3dpdGNoIChzWzZdKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJzAnOiBjYXNlICcxJzogY2FzZSAnMic6DQogICAgICAgICAgICAgICAgICAgICAgICByICs9IHNbNl0gKyAnMDAwMCcgKyBzWzNdICsgc1s0XSArIHNbNV07DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMyc6DQogICAgICAgICAgICAgICAgICAgICAgICByICs9IHNbM10gKyAnMDAwMDAnICsgc1s0XSArIHNbNV07DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnNCc6DQogICAgICAgICAgICAgICAgICAgICAgICByICs9IHNbM10gKyBzWzRdICsgJzAwMDAwJyArIHNbNV07DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gc1szXSArIHNbNF0gKyBzWzVdICsgJzAwMDAnICsgc1s2XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBnZW5lcmF0ZSBDT0RFMTI4IGRhdGE6DQogICAgICAgIGNvZGUxMjg6IGRhdGEgPT4gZGF0YS5yZXBsYWNlKC8oKD8hXltceDAwLVx4N2ZdKyQpLikqLywgJycpLnJlcGxhY2UoLyUvZywgJyUwJykucmVwbGFjZSgvW1x4MDAtXHgxZl0vZywgbSA9PiAnJScgKyAkKG0uY2hhckNvZGVBdCgwKSArIDY0KSkucmVwbGFjZSgvXHg3Zi9nLCAnJTUnKQ0KICAgIH07DQoNCiAgICAvLw0KICAgIC8vIFN0YXIgTGluZSBNb2RlDQogICAgLy8NCiAgICBjb25zdCBfbGluZSA9IHsNCiAgICAgICAgLy8gZmluaXNoIHByaW50aW5nOiBFU0MgR1MgRVRYIHMgbjEgbjIgRU9UDQogICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuY3V0dGluZyA/IHRoaXMuY3V0KCkgOiAnJykgKyAnXHgxYlx4MWRceDAzXHgwMVx4MDBceDAwXHgwNCc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IGltYWdlOiBFU0MgayBuMSBuMiBkMSAuLi4gZGsNCiAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uIChpbWFnZSkgew0KICAgICAgICAgICAgY29uc3QgaW1nID0gUE5HLnN5bmMucmVhZChCdWZmZXIuZnJvbShpbWFnZSwgJ2Jhc2U2NCcpKTsNCiAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcud2lkdGg7DQogICAgICAgICAgICBjb25zdCBoID0gaW1nLmhlaWdodDsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBBcnJheSh3KS5maWxsKDApOw0KICAgICAgICAgICAgY29uc3QgbCA9IHcgKyA3ID4+IDM7DQogICAgICAgICAgICBjb25zdCBzID0gW107DQogICAgICAgICAgICBsZXQgaiA9IDA7DQogICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGg7IHkgKz0gMjQpIHsNCiAgICAgICAgICAgICAgICBsZXQgciA9ICdceDFiaycgKyAkKGwgJiAyNTUsIGwgPj4gOCAmIDI1NSk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCAyNDsgeisrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh5ICsgeiA8IGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gMCwgZSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHc7IHggKz0gOCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIHgsIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBNYXRoLmZsb29yKChkW2ldICsgZSAqIDUpIC8gMTYgKyBNYXRoLnBvdygoKGltZy5kYXRhW2pdICogLjI5OSArIGltZy5kYXRhW2ogKyAxXSAqIC41ODcgKyBpbWcuZGF0YVtqICsgMl0gKiAuMTE0IC0gMjU1KSAqIGltZy5kYXRhW2ogKyAzXSArIDY1NTI1KSAvIDY1NTI1LCAxIC8gdGhpcy5nYW1tYSkgKiAyNTUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICs9IDQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyYWRpZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gZiA8IHRoaXMudGhyZXNob2xkID8gKGIgfD0gMTI4ID4+IHAsIGYpIDogZiAtIDI1NTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSAtIDFdICs9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2krK10gKz0gZSAqIDc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZiA8IHRoaXMudGhyZXNob2xkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICs9ICQoYik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByICs9ICdceDAwJy5yZXBlYXQobCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcy5wdXNoKHIgKyAnXHgwYScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMudXBzaWRlRG93bikgew0KICAgICAgICAgICAgICAgIHMucmV2ZXJzZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICdceDFiMCcgKyBzLmpvaW4oJycpICsgKHRoaXMuc3BhY2luZyA/ICdceDFiejEnIDogJ1x4MWIwJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IFFSIENvZGU6IEVTQyBHUyB5IFMgMCBuIEVTQyBHUyB5IFMgMSBuIEVTQyBHUyB5IFMgMiBuIEVTQyBHUyB5IEQgMSBtIG5MIG5IIGQxIGQyIC4uLiBkayBFU0MgR1MgeSBQDQogICAgICAgIHFyY29kZTogZnVuY3Rpb24gKHN5bWJvbCwgZW5jb2RpbmcpIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgcXJjb2RlICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIGxldCByID0gJyc7DQogICAgICAgICAgICAgICAgaWYgKHN5bWJvbC5kYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXIgPSBxcmNvZGUoMCwgc3ltYm9sLmxldmVsLnRvVXBwZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICBxci5hZGREYXRhKHN5bWJvbC5kYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgcXIubWFrZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBxci5jcmVhdGVBU0NJSSgyLCAwKS5zcGxpdCgnXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGltZy5sZW5ndGggKiBzeW1ib2wuY2VsbDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IHcgKyA3ID4+IDM7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHc7IGogKz0gOCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIGosIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdbaV1bTWF0aC5mbG9vcigoaiArIHApIC8gc3ltYm9sLmNlbGwpICogMl0gPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkICs9ICQoYik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN5bWJvbC5jZWxsOyBrKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnB1c2goZCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHMubGVuZ3RoICUgMjQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSAnXHgwMCcucmVwZWF0KGwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwc2lkZURvd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHMucmV2ZXJzZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHIgKz0gJ1x4MWIwJzsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBzLmxlbmd0aDsgayArPSAyNCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHMuc2xpY2UoaywgayArIDI0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwc2lkZURvd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJldmVyc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJ1x4MWJrJyArICQobCAmIDI1NSwgbCA+PiA4ICYgMjU1KSArIGEuam9pbignJykgKyAnXHgwYSc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgciArPSAodGhpcy5zcGFjaW5nID8gJ1x4MWJ6MScgOiAnXHgxYjAnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gaWNvbnYuZW5jb2RlKHN5bWJvbC5kYXRhLCBlbmNvZGluZyA9PT0gJ211bHRpbGluZ3VhbCcgPyAnYXNjaWknIDogZW5jb2RpbmcpLnRvU3RyaW5nKCdiaW5hcnknKS5zbGljZSgwLCA3MDg5KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gJ1x4MWJceDFkeVMwJyArICQoMikgKyAnXHgxYlx4MWR5UzEnICsgJCh0aGlzLnFybGV2ZWxbc3ltYm9sLmxldmVsXSkgKyAnXHgxYlx4MWR5UzInICsgJChzeW1ib2wuY2VsbCkgKyAnXHgxYlx4MWR5RDEnICsgJCgwLCBkLmxlbmd0aCAmIDI1NSwgZC5sZW5ndGggPj4gOCAmIDI1NSkgKyBkICsgJ1x4MWJceDFkeVAnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gU3RhciBNb2RlIG9uIGRvdCBpbXBhY3QgcHJpbnRlcnMNCiAgICAvLw0KICAgIGNvbnN0IF9kb3QgPSB7DQogICAgICAgIGZvbnQ6IDAsDQogICAgICAgIC8vIHN0YXJ0IHByaW50aW5nOiBFU0MgQCBFU0MgUlMgYSBuIChFU0MgTSkgKEVTQyBQKSAoRVNDIDopIEVTQyBTUCBuIEVTQyBzIG4xIG4yIChFU0MgeiBuKSAoRVNDIDApIChTSSkgKERDMikNCiAgICAgICAgb3BlbjogZnVuY3Rpb24gKHByaW50ZXIpIHsNCiAgICAgICAgICAgIHRoaXMudXBzaWRlRG93biA9IHByaW50ZXIudXBzaWRlRG93bjsNCiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHByaW50ZXIuc3BhY2luZzsNCiAgICAgICAgICAgIHRoaXMuY3V0dGluZyA9IHByaW50ZXIuY3V0dGluZzsNCiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnQgPSBwcmludGVyLmdyYWRpZW50Ow0KICAgICAgICAgICAgdGhpcy5nYW1tYSA9IHByaW50ZXIuZ2FtbWE7DQogICAgICAgICAgICB0aGlzLnRocmVzaG9sZCA9IHByaW50ZXIudGhyZXNob2xkOw0KICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSBwcmludGVyLm1hcmdpbjsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYkBceDFiXHgxZWFceDAwXHgxYicgKyBbICdNJywgJ1AnLCAnOicgXVt0aGlzLmZvbnRdICsgJ1x4MWIgXHgwMFx4MWJzXHgwMFx4MDAnICsgKHRoaXMuc3BhY2luZyA/ICdceDFielx4MDEnIDogJ1x4MWIwJykgKyAodGhpcy51cHNpZGVEb3duID8gJ1x4MGYnIDogJ1x4MTInKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZmluaXNoIHByaW50aW5nOiBFU0MgR1MgRVRYIHMgbjEgbjIgRU9UDQogICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuY3V0dGluZyA/IHRoaXMuY3V0KCkgOiAnJykgKyAnXHgxYlx4MWRceDAzXHgwMVx4MDBceDAwXHgwNCc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNjYWxlIHVwIHRleHQ6IEVTQyBXIG4gRVNDIGggbg0KICAgICAgICB3aDogd2ggPT4gJ1x4MWJXJyArICQod2ggPCAzID8gd2ggJiAxIDogMSkgKyAnXHgxYmgnICsgJCh3aCA8IDMgPyB3aCA+PiAxICYgMSA6IDEpLA0KICAgICAgICAvLyBjYW5jZWwgdGV4dCBkZWNvcmF0aW9uOiBFU0MgLSBuIEVTQyBGIEVTQyA1IEVTQyBXIG4gRVNDIGggbg0KICAgICAgICBub3JtYWw6ICgpID0+ICdceDFiLVx4MDBceDFiRlx4MWI1XHgxYlcnICsgJCgwKSArICdceDFiaCcgKyAkKDApLA0KICAgICAgICAvLyBwcmludCBpbWFnZTogRVNDIDAgRVNDIEsgbiBOVUwgZDEgLi4uIGRuIExGIChFU0MgeiBuKSAoRVNDIDApDQogICAgICAgIGltYWdlOiBmdW5jdGlvbiAoaW1hZ2UpIHsNCiAgICAgICAgICAgIGNvbnN0IGltZyA9IFBORy5zeW5jLnJlYWQoQnVmZmVyLmZyb20oaW1hZ2UsICdiYXNlNjQnKSk7DQogICAgICAgICAgICBjb25zdCB3ID0gTWF0aC5taW4oaW1nLndpZHRoLCAyNTUpOw0KICAgICAgICAgICAgY29uc3QgZCA9IEFycmF5KHcpLmZpbGwoMCk7DQogICAgICAgICAgICBjb25zdCBzID0gW107DQogICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGltZy5oZWlnaHQ7IHkgKz0gOCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBBcnJheSh3KS5maWxsKDApOw0KICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLm1pbig4LCBpbWcuaGVpZ2h0IC0geSk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBoOyBwKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwLCBlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGogPSAoeSArIHApICogaW1nLndpZHRoICogNDsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3OyB4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBNYXRoLmZsb29yKChkW2ldICsgZSAqIDUpIC8gMTYgKyBNYXRoLnBvdygoKGltZy5kYXRhW2pdICogLjI5OSArIGltZy5kYXRhW2ogKyAxXSAqIC41ODcgKyBpbWcuZGF0YVtqICsgMl0gKiAuMTE0IC0gMjU1KSAqIGltZy5kYXRhW2ogKyAzXSArIDY1NTI1KSAvIDY1NTI1LCAxIC8gdGhpcy5nYW1tYSkgKiAyNTUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaiArPSA0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JhZGllbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGYgPCB0aGlzLnRocmVzaG9sZCA/IChiW3hdIHw9IDEyOCA+PiBwLCBmKSA6IGYgLSAyNTU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSAtIDFdICs9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSsrXSArPSBlICogNzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmIDwgdGhpcy50aHJlc2hvbGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYlt4XSB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcy5wdXNoKCdceDFiSycgKyAkKHcpICsgJ1x4MDAnICsgYi5yZWR1Y2UoKGEsIGMpID0+IGEgKyAkKGMpLCAnJykgKyAnXHgwYScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMudXBzaWRlRG93bikgew0KICAgICAgICAgICAgICAgIHMucmV2ZXJzZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICdceDFiMCcgKyBzLmpvaW4oJycpICsgKHRoaXMuc3BhY2luZyA/ICdceDFielx4MDEnIDogJ1x4MWIwJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IFFSIENvZGU6DQogICAgICAgIHFyY29kZTogKHN5bWJvbCwgZW5jb2RpbmcpID0+ICcnLA0KICAgICAgICAvLyBwcmludCBiYXJjb2RlOg0KICAgICAgICBiYXJjb2RlOiAoc3ltYm9sLCBlbmNvZGluZykgPT4gJycNCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBTdGFyIE1vZGUgb24gZG90IGltcGFjdCBwcmludGVycyAoRm9udCA1eDkgMlAtMSkNCiAgICAvLw0KICAgIGNvbnN0IF9mb250MiA9IHsNCiAgICAgICAgZm9udDogMSwNCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBTdGFyIE1vZGUgb24gZG90IGltcGFjdCBwcmludGVycyAoRm9udCA1eDkgM1AtMSkNCiAgICAvLw0KICAgIGNvbnN0IF9mb250MyA9IHsNCiAgICAgICAgZm9udDogMiwNCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBDb21tYW5kIEVtdWxhdG9yIFN0YXIgTGluZSBNb2RlDQogICAgLy8NCiAgICBjb25zdCBfZW11ID0gew0KICAgICAgICAvLyBzZXQgbGluZSBzcGFjaW5nIGFuZCBmZWVkIG5ldyBsaW5lOiAoRVNDIHogbikgKEVTQyAwKQ0KICAgICAgICB2cmxmOiBmdW5jdGlvbiAodnIpIHsNCiAgICAgICAgICAgIHJldHVybiAodnIgPT09IHRoaXMudXBzaWRlRG93biAmJiB0aGlzLnNwYWNpbmcgPyAnXHgxYnoxJyA6ICdceDFiMCcpICsgdGhpcy5sZigpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gU3RhciBTQkNTDQogICAgLy8NCiAgICBjb25zdCBfc2JjcyA9IHsNCiAgICAgICAgLy8gcHJpbnQgaG9yaXpvbnRhbCBydWxlOiBFU0MgR1MgdCBuIC4uLg0KICAgICAgICBocjogd2lkdGggPT4gJ1x4MWJceDFkdFx4MDEnICsgJ1x4YzQnLnJlcGVhdCh3aWR0aCksDQogICAgICAgIC8vIHByaW50IHZlcnRpY2FsIHJ1bGVzOiBFU0MgaSBuMSBuMiBFU0MgR1MgdCBuIC4uLg0KICAgICAgICB2cjogZnVuY3Rpb24gKHdpZHRocywgaGVpZ2h0KSB7DQogICAgICAgICAgICByZXR1cm4gd2lkdGhzLnJlZHVjZSgoYSwgdykgPT4gYSArIHRoaXMucmVsYXRpdmUodykgKyAnXHhiMycsICdceDFiaScgKyAkKGhlaWdodCAtIDEsIDApICsgJ1x4MWJceDFkdFx4MDFceGIzJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHN0YXJ0IHJ1bGVzOiBFU0MgR1MgdCBuIC4uLg0KICAgICAgICB2cnN0YXJ0OiB3aWR0aHMgPT4gJ1x4MWJceDFkdFx4MDEnICsgd2lkdGhzLnJlZHVjZSgoYSwgdykgPT4gYSArICdceGM0Jy5yZXBlYXQodykgKyAnXHhjMicsICdceGRhJykuc2xpY2UoMCwgLTEpICsgJ1x4YmYnLA0KICAgICAgICAvLyBzdG9wIHJ1bGVzOiBFU0MgR1MgdCBuIC4uLg0KICAgICAgICB2cnN0b3A6IHdpZHRocyA9PiAnXHgxYlx4MWR0XHgwMScgKyB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgJ1x4YzQnLnJlcGVhdCh3KSArICdceGMxJywgJ1x4YzAnKS5zbGljZSgwLCAtMSkgKyAnXHhkOScsDQogICAgICAgIC8vIHByaW50IHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHJ1bGVzOiBFU0MgR1MgdCBuIC4uLg0KICAgICAgICB2cmhyOiBmdW5jdGlvbiAod2lkdGhzMSwgd2lkdGhzMiwgZGwsIGRyKSB7DQogICAgICAgICAgICBjb25zdCByMSA9ICcgJy5yZXBlYXQoTWF0aC5tYXgoLWRsLCAwKSkgKyB3aWR0aHMxLnJlZHVjZSgoYSwgdykgPT4gYSArICdceGM0Jy5yZXBlYXQodykgKyAnXHhjMScsICdceGMwJykuc2xpY2UoMCwgLTEpICsgJ1x4ZDknICsgJyAnLnJlcGVhdChNYXRoLm1heChkciwgMCkpOw0KICAgICAgICAgICAgY29uc3QgcjIgPSAnICcucmVwZWF0KE1hdGgubWF4KGRsLCAwKSkgKyB3aWR0aHMyLnJlZHVjZSgoYSwgdykgPT4gYSArICdceGM0Jy5yZXBlYXQodykgKyAnXHhjMicsICdceGRhJykuc2xpY2UoMCwgLTEpICsgJ1x4YmYnICsgJyAnLnJlcGVhdChNYXRoLm1heCgtZHIsIDApKTsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYlx4MWR0XHgwMScgKyByMi5zcGxpdCgnJykucmVkdWNlKChhLCBjLCBpKSA9PiBhICsgdGhpcy52cnRhYmxlW2NdW3IxW2ldXSwgJycpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBydWxlZCBsaW5lIGNvbXBvc2l0aW9uDQogICAgICAgIHZydGFibGU6IHsNCiAgICAgICAgICAgICcgJyAgICA6IHsgJyAnIDogJyAnLCAgICAnXHhjMCcgOiAnXHhjMCcsICdceGMxJyA6ICdceGMxJywgJ1x4YzQnIDogJ1x4YzQnLCAnXHhkOScgOiAnXHhkOScgfSwNCiAgICAgICAgICAgICdceGJmJyA6IHsgJyAnIDogJ1x4YmYnLCAnXHhjMCcgOiAnXHhjNScsICdceGMxJyA6ICdceGM1JywgJ1x4YzQnIDogJ1x4YzInLCAnXHhkOScgOiAnXHhiNCcgfSwNCiAgICAgICAgICAgICdceGMyJyA6IHsgJyAnIDogJ1x4YzInLCAnXHhjMCcgOiAnXHhjNScsICdceGMxJyA6ICdceGM1JywgJ1x4YzQnIDogJ1x4YzInLCAnXHhkOScgOiAnXHhjNScgfSwNCiAgICAgICAgICAgICdceGM0JyA6IHsgJyAnIDogJ1x4YzQnLCAnXHhjMCcgOiAnXHhjMScsICdceGMxJyA6ICdceGMxJywgJ1x4YzQnIDogJ1x4YzQnLCAnXHhkOScgOiAnXHhjMScgfSwNCiAgICAgICAgICAgICdceGRhJyA6IHsgJyAnIDogJ1x4ZGEnLCAnXHhjMCcgOiAnXHhjMycsICdceGMxJyA6ICdceGM1JywgJ1x4YzQnIDogJ1x4YzInLCAnXHhkOScgOiAnXHhjNScgfQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gU3RhciBNQkNTIEphcGFuZXNlDQogICAgLy8NCiAgICBjb25zdCBfbWJjcyA9IHsNCiAgICAgICAgLy8gcHJpbnQgaG9yaXpvbnRhbCBydWxlOiBFU0MgJCBuIC4uLg0KICAgICAgICBocjogd2lkdGggPT4gJ1x4MWIkMCcgKyAnXHg5NScucmVwZWF0KHdpZHRoKSwNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgcnVsZXM6IEVTQyBpIG4xIG4yIEVTQyAkIG4gLi4uDQogICAgICAgIHZyOiBmdW5jdGlvbiAod2lkdGhzLCBoZWlnaHQpIHsNCiAgICAgICAgICAgIHJldHVybiB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgdGhpcy5yZWxhdGl2ZSh3KSArICdceDk2JywgJ1x4MWJpJyArICQoaGVpZ2h0IC0gMSwgMCkgKyAnXHgxYiQwXHg5NicpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzdGFydCBydWxlczogRVNDICQgbiAuLi4NCiAgICAgICAgdnJzdGFydDogd2lkdGhzID0+ICdceDFiJDAnICsgd2lkdGhzLnJlZHVjZSgoYSwgdykgPT4gYSArICdceDk1Jy5yZXBlYXQodykgKyAnXHg5MScsICdceDljJykuc2xpY2UoMCwgLTEpICsgJ1x4OWQnLA0KICAgICAgICAvLyBzdG9wIHJ1bGVzOiBFU0MgJCBuIC4uLg0KICAgICAgICB2cnN0b3A6IHdpZHRocyA9PiAnXHgxYiQwJyArIHdpZHRocy5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTAnLCAnXHg5ZScpLnNsaWNlKDAsIC0xKSArICdceDlmJywNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgYW5kIGhvcml6b250YWwgcnVsZXM6IEVTQyAkIG4gLi4uDQogICAgICAgIHZyaHI6IGZ1bmN0aW9uICh3aWR0aHMxLCB3aWR0aHMyLCBkbCwgZHIpIHsNCiAgICAgICAgICAgIGNvbnN0IHIxID0gJyAnLnJlcGVhdChNYXRoLm1heCgtZGwsIDApKSArIHdpZHRoczEucmVkdWNlKChhLCB3KSA9PiBhICsgJ1x4OTUnLnJlcGVhdCh3KSArICdceDkwJywgZGwgPiAwID8gJ1x4OWUnIDogJ1x4OWEnKS5zbGljZSgwLCAtMSkgKyAoZHIgPCAwID8gJ1x4OWYnIDogJ1x4OWInKSArICcgJy5yZXBlYXQoTWF0aC5tYXgoZHIsIDApKTsNCiAgICAgICAgICAgIGNvbnN0IHIyID0gJyAnLnJlcGVhdChNYXRoLm1heChkbCwgMCkpICsgd2lkdGhzMi5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTEnLCBkbCA8IDAgPyAnXHg5YycgOiAnXHg5OCcpLnNsaWNlKDAsIC0xKSArIChkciA+IDAgPyAnXHg5ZCcgOiAnXHg5OScpICsgJyAnLnJlcGVhdChNYXRoLm1heCgtZHIsIDApKTsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYiQwJyArIHIyLnNwbGl0KCcnKS5yZWR1Y2UoKGEsIGMsIGkpID0+IGEgKyB0aGlzLnZydGFibGVbY11bcjFbaV1dLCAnJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHJ1bGVkIGxpbmUgY29tcG9zaXRpb24NCiAgICAgICAgdnJ0YWJsZTogew0KICAgICAgICAgICAgJyAnICAgIDogeyAnICcgOiAnICcsICAgICdceDkwJyA6ICdceDkwJywgJ1x4OTUnIDogJ1x4OTUnLCAnXHg5YScgOiAnXHg5YScsICdceDliJyA6ICdceDliJywgJ1x4OWUnIDogJ1x4OWUnLCAnXHg5ZicgOiAnXHg5ZicgfSwNCiAgICAgICAgICAgICdceDkxJyA6IHsgJyAnIDogJ1x4OTEnLCAnXHg5MCcgOiAnXHg4ZicsICdceDk1JyA6ICdceDkxJywgJ1x4OWEnIDogJ1x4OGYnLCAnXHg5YicgOiAnXHg4ZicsICdceDllJyA6ICdceDhmJywgJ1x4OWYnIDogJ1x4OGYnIH0sDQogICAgICAgICAgICAnXHg5NScgOiB7ICcgJyA6ICdceDk1JywgJ1x4OTAnIDogJ1x4OTAnLCAnXHg5NScgOiAnXHg5NScsICdceDlhJyA6ICdceDkwJywgJ1x4OWInIDogJ1x4OTAnLCAnXHg5ZScgOiAnXHg5MCcsICdceDlmJyA6ICdceDkwJyB9LA0KICAgICAgICAgICAgJ1x4OTgnIDogeyAnICcgOiAnXHg5OCcsICdceDkwJyA6ICdceDhmJywgJ1x4OTUnIDogJ1x4OTEnLCAnXHg5YScgOiAnXHg5MycsICdceDliJyA6ICdceDhmJywgJ1x4OWUnIDogJ1x4OTMnLCAnXHg5ZicgOiAnXHg4ZicgfSwNCiAgICAgICAgICAgICdceDk5JyA6IHsgJyAnIDogJ1x4OTknLCAnXHg5MCcgOiAnXHg4ZicsICdceDk1JyA6ICdceDkxJywgJ1x4OWEnIDogJ1x4OGYnLCAnXHg5YicgOiAnXHg5MicsICdceDllJyA6ICdceDhmJywgJ1x4OWYnIDogJ1x4OTInIH0sDQogICAgICAgICAgICAnXHg5YycgOiB7ICcgJyA6ICdceDljJywgJ1x4OTAnIDogJ1x4OGYnLCAnXHg5NScgOiAnXHg5MScsICdceDlhJyA6ICdceDkzJywgJ1x4OWInIDogJ1x4OGYnLCAnXHg5ZScgOiAnXHg5MycsICdceDlmJyA6ICdceDhmJyB9LA0KICAgICAgICAgICAgJ1x4OWQnIDogeyAnICcgOiAnXHg5ZCcsICdceDkwJyA6ICdceDhmJywgJ1x4OTUnIDogJ1x4OTEnLCAnXHg5YScgOiAnXHg4ZicsICdceDliJyA6ICdceDkyJywgJ1x4OWUnIDogJ1x4OGYnLCAnXHg5ZicgOiAnXHg5MicgfQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gU3RhciBNQkNTIENoaW5lc2UgS29yZWFuDQogICAgLy8NCiAgICBjb25zdCBfbWJjczIgPSB7DQogICAgICAgIC8vIHByaW50IGhvcml6b250YWwgcnVsZTogLSAuLi4NCiAgICAgICAgaHI6IHdpZHRoID0+ICctJy5yZXBlYXQod2lkdGgpLA0KICAgICAgICAvLyBwcmludCB2ZXJ0aWNhbCBydWxlczogRVNDIGkgbjEgbjIgfCAuLi4NCiAgICAgICAgdnI6IGZ1bmN0aW9uICh3aWR0aHMsIGhlaWdodCkgew0KICAgICAgICAgICAgcmV0dXJuIHdpZHRocy5yZWR1Y2UoKGEsIHcpID0+IGEgKyB0aGlzLnJlbGF0aXZlKHcpICsgJ3wnLCAnXHgxYmknICsgJChoZWlnaHQgLSAxLCAwKSArICd8Jyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHN0YXJ0IHJ1bGVzOiArIC0gLi4uDQogICAgICAgIHZyc3RhcnQ6IHdpZHRocyA9PiB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgJy0nLnJlcGVhdCh3KSArICcrJywgJysnKSwNCiAgICAgICAgLy8gc3RvcCBydWxlczogKyAtIC4uLg0KICAgICAgICB2cnN0b3A6IHdpZHRocyA9PiB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgJy0nLnJlcGVhdCh3KSArICcrJywgJysnKSwNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgYW5kIGhvcml6b250YWwgcnVsZXM6ICsgLSAuLi4NCiAgICAgICAgdnJocjogZnVuY3Rpb24gKHdpZHRoczEsIHdpZHRoczIsIGRsLCBkcikgew0KICAgICAgICAgICAgY29uc3QgcjEgPSAnICcucmVwZWF0KE1hdGgubWF4KC1kbCwgMCkpICsgd2lkdGhzMS5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnLScucmVwZWF0KHcpICsgJysnLCAnKycpICsgJyAnLnJlcGVhdChNYXRoLm1heChkciwgMCkpOw0KICAgICAgICAgICAgY29uc3QgcjIgPSAnICcucmVwZWF0KE1hdGgubWF4KGRsLCAwKSkgKyB3aWR0aHMyLnJlZHVjZSgoYSwgdykgPT4gYSArICctJy5yZXBlYXQodykgKyAnKycsICcrJykgKyAnICcucmVwZWF0KE1hdGgubWF4KC1kciwgMCkpOw0KICAgICAgICAgICAgcmV0dXJuIHIyLnNwbGl0KCcnKS5yZWR1Y2UoKGEsIGMsIGkpID0+IGEgKyB0aGlzLnZydGFibGVbY11bcjFbaV1dLCAnJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHJ1bGVkIGxpbmUgY29tcG9zaXRpb24NCiAgICAgICAgdnJ0YWJsZTogew0KICAgICAgICAgICAgJyAnIDogeyAnICcgOiAnICcsICcrJyA6ICcrJywgJy0nIDogJy0nIH0sDQogICAgICAgICAgICAnKycgOiB7ICcgJyA6ICcrJywgJysnIDogJysnLCAnLScgOiAnKycgfSwNCiAgICAgICAgICAgICctJyA6IHsgJyAnIDogJy0nLCAnKycgOiAnKycsICctJyA6ICctJyB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLy8NCiAgICAvLyBTdGFyIEdyYXBoaWMgTW9kZQ0KICAgIC8vDQogICAgY29uc3QgX3N0YXJncmFwaGljID0gew0KICAgICAgICAvLyBwcmludGVyIGNvbmZpZ3VyYXRpb24NCiAgICAgICAgdXBzaWRlRG93bjogZmFsc2UsDQogICAgICAgIHNwYWNpbmc6IGZhbHNlLA0KICAgICAgICBjdXR0aW5nOiB0cnVlLA0KICAgICAgICBncmFkaWVudDogdHJ1ZSwNCiAgICAgICAgZ2FtbWE6IDEuOCwNCiAgICAgICAgdGhyZXNob2xkOiAxMjgsDQogICAgICAgIGFsaWdubWVudDogMCwNCiAgICAgICAgbGVmdDogMCwNCiAgICAgICAgd2lkdGg6IDQ4LA0KICAgICAgICByaWdodDogMCwNCiAgICAgICAgbWFyZ2luOiAwLA0KICAgICAgICAvLyBzdGFydCBwcmludGluZzogRVNDIFJTIGEgbiBFU0MgKiByIEEgRVNDICogciBQIG4gTlVMIChFU0MgKiByIEUgbiBOVUwpDQogICAgICAgIG9wZW46IGZ1bmN0aW9uIChwcmludGVyKSB7DQogICAgICAgICAgICB0aGlzLnVwc2lkZURvd24gPSBwcmludGVyLnVwc2lkZURvd247DQogICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBwcmludGVyLnNwYWNpbmc7DQogICAgICAgICAgICB0aGlzLmN1dHRpbmcgPSBwcmludGVyLmN1dHRpbmc7DQogICAgICAgICAgICB0aGlzLmdyYWRpZW50ID0gcHJpbnRlci5ncmFkaWVudDsNCiAgICAgICAgICAgIHRoaXMuZ2FtbWEgPSBwcmludGVyLmdhbW1hOw0KICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBwcmludGVyLnRocmVzaG9sZDsNCiAgICAgICAgICAgIHRoaXMuYWxpZ25tZW50ID0gMDsNCiAgICAgICAgICAgIHRoaXMubGVmdCA9IDA7DQogICAgICAgICAgICB0aGlzLndpZHRoID0gcHJpbnRlci5jcGw7DQogICAgICAgICAgICB0aGlzLnJpZ2h0ID0gMDsNCiAgICAgICAgICAgIHRoaXMubWFyZ2luID0gKHByaW50ZXIudXBzaWRlRG93biA/IHByaW50ZXIubWFyZ2luUmlnaHQgOiBwcmludGVyLm1hcmdpbikgKiB0aGlzLmNoYXJXaWR0aDsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYlx4MWVhXHgwMFx4MWIqckFceDFiKnJQMFx4MDAnICsgKHRoaXMuY3V0dGluZyA/ICcnIDogJ1x4MWIqckUxXHgwMCcpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBmaW5pc2ggcHJpbnRpbmc6IEVTQyAqIHIgQiBFU0MgQUNLIFNPSA0KICAgICAgICBjbG9zZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuICdceDFiKnJCXHgxYlx4MDZceDAxJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHByaW50IGFyZWE6DQogICAgICAgIGFyZWE6IGZ1bmN0aW9uIChsZWZ0LCB3aWR0aCwgcmlnaHQpIHsNCiAgICAgICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7DQogICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7DQogICAgICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBsaW5lIGFsaWdubWVudDoNCiAgICAgICAgYWxpZ246IGZ1bmN0aW9uIChhbGlnbikgew0KICAgICAgICAgICAgdGhpcy5hbGlnbm1lbnQgPSBhbGlnbjsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY3V0IHBhcGVyOiBFU0MgRkYgTlVMDQogICAgICAgIGN1dDogKCkgPT4gJ1x4MWJceDBjXHgwMCcsDQogICAgICAgIC8vIGZlZWQgbmV3IGxpbmU6IEVTQyAqIHIgWSBuIE5VTA0KICAgICAgICBsZjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuICdceDFiKnJZJyArIHRoaXMuY2hhcldpZHRoICogKHRoaXMuc3BhY2luZyA/IDIuNSA6IDIpICsgJ1x4MDAnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBpbnNlcnQgY29tbWFuZHM6DQogICAgICAgIGNvbW1hbmQ6IGNvbW1hbmQgPT4gY29tbWFuZCwNCiAgICAgICAgLy8gcHJpbnQgaW1hZ2U6IGIgbjEgbjIgZGF0YQ0KICAgICAgICBpbWFnZTogZnVuY3Rpb24gKGltYWdlKSB7DQogICAgICAgICAgICBjb25zdCBhbGlnbiA9IGFyZ3VtZW50c1sxXSB8fCB0aGlzLmFsaWdubWVudDsNCiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhcmd1bWVudHNbMl0gfHwgdGhpcy5sZWZ0Ow0KICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBhcmd1bWVudHNbM10gfHwgdGhpcy53aWR0aDsNCiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYXJndW1lbnRzWzRdIHx8IHRoaXMucmlnaHQ7DQogICAgICAgICAgICBsZXQgciA9ICcnOw0KICAgICAgICAgICAgY29uc3QgaW1nID0gUE5HLnN5bmMucmVhZChCdWZmZXIuZnJvbShpbWFnZSwgJ2Jhc2U2NCcpKTsNCiAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcud2lkdGg7DQogICAgICAgICAgICBjb25zdCBkID0gQXJyYXkodykuZmlsbCgwKTsNCiAgICAgICAgICAgIGNvbnN0IG0gPSB0aGlzLm1hcmdpbiArIE1hdGgubWF4KCh0aGlzLnVwc2lkZURvd24gPyByaWdodCA6IGxlZnQpICogdGhpcy5jaGFyV2lkdGggKyAod2lkdGggKiB0aGlzLmNoYXJXaWR0aCAtIHcpICogKHRoaXMudXBzaWRlRG93biA/IDIgLSBhbGlnbiA6IGFsaWduKSA+PiAxLCAwKTsNCiAgICAgICAgICAgIGNvbnN0IGwgPSBtICsgdyArIDcgPj4gMzsNCiAgICAgICAgICAgIGxldCBqID0gdGhpcy51cHNpZGVEb3duID8gaW1nLmRhdGEubGVuZ3RoIC0gNCA6IDA7DQogICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGltZy5oZWlnaHQ7IHkrKykgew0KICAgICAgICAgICAgICAgIGxldCBpID0gMCwgZSA9IDA7DQogICAgICAgICAgICAgICAgciArPSAnYicgKyAkKGwgJiAyNTUsIGwgPj4gOCAmIDI1NSk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBtICsgdzsgeCArPSA4KSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcSA9IE1hdGgubWluKG0gKyB3IC0geCwgOCk7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobSA8PSB4ICsgcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBNYXRoLmZsb29yKChkW2ldICsgZSAqIDUpIC8gMTYgKyBNYXRoLnBvdygoKGltZy5kYXRhW2pdICogLjI5OSArIGltZy5kYXRhW2ogKyAxXSAqIC41ODcgKyBpbWcuZGF0YVtqICsgMl0gKiAuMTE0IC0gMjU1KSAqIGltZy5kYXRhW2ogKyAzXSArIDY1NTI1KSAvIDY1NTI1LCAxIC8gdGhpcy5nYW1tYSkgKiAyNTUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogKz0gdGhpcy51cHNpZGVEb3duID8gLTQgOiA0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyYWRpZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaV0gPSBlICogMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGYgPCB0aGlzLnRocmVzaG9sZCA/IChiIHw9IDEyOCA+PiBwLCBmKSA6IGYgLSAyNTU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtpIC0gMV0gKz0gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2krK10gKz0gZSAqIDc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZiA8IHRoaXMudGhyZXNob2xkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiIHw9IDEyOCA+PiBwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHIgKz0gJChiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvLw0KICAgIC8vIFBsYWluIFRleHQNCiAgICAvLw0KICAgIGNvbnN0IF90ZXh0ID0gew0KICAgICAgICBsZWZ0OiAwLA0KICAgICAgICB3aWR0aDogNDgsDQogICAgICAgIHBvc2l0aW9uOiAwLA0KICAgICAgICBzY2FsZTogMSwNCiAgICAgICAgYnVmZmVyOiBbXSwNCiAgICAgICAgLy8gc3RhcnQgcHJpbnRpbmc6DQogICAgICAgIG9wZW46IGZ1bmN0aW9uIChwcmludGVyKSB7DQogICAgICAgICAgICB0aGlzLmxlZnQgPSAwOw0KICAgICAgICAgICAgdGhpcy53aWR0aCA9IHByaW50ZXIuY3BsOw0KICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7DQogICAgICAgICAgICB0aGlzLnNjYWxlID0gMTsNCiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gW107DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNldCBwcmludCBhcmVhOg0KICAgICAgICBhcmVhOiBmdW5jdGlvbiAobGVmdCwgd2lkdGgsIHJpZ2h0KSB7DQogICAgICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0Ow0KICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBzZXQgYWJzb2x1dGUgcHJpbnQgcG9zaXRpb246DQogICAgICAgIGFic29sdXRlOiBmdW5jdGlvbiAocG9zaXRpb24pIHsNCiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IHJlbGF0aXZlIHByaW50IHBvc2l0aW9uOg0KICAgICAgICByZWxhdGl2ZTogZnVuY3Rpb24gKHBvc2l0aW9uKSB7DQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uICs9IE1hdGgucm91bmQocG9zaXRpb24pOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcmludCBob3Jpem9udGFsIHJ1bGU6DQogICAgICAgIGhyOiBmdW5jdGlvbiAod2lkdGgpIHsNCiAgICAgICAgICAgIHJldHVybiAnICcucmVwZWF0KHRoaXMubGVmdCkgKyAnLScucmVwZWF0KHdpZHRoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgcnVsZXM6DQogICAgICAgIHZyOiBmdW5jdGlvbiAod2lkdGhzLCBoZWlnaHQpIHsNCiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2goeyBkYXRhOiAnfCcsIGluZGV4OiB0aGlzLnBvc2l0aW9uLCBsZW5ndGg6IDEgfSk7DQogICAgICAgICAgICB3aWR0aHMuZm9yRWFjaCh3ID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uICs9IHcgKyAxOw0KICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2goeyBkYXRhOiAnfCcsIGluZGV4OiB0aGlzLnBvc2l0aW9uLCBsZW5ndGg6IDEgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc3RhcnQgcnVsZXM6DQogICAgICAgIHZyc3RhcnQ6IGZ1bmN0aW9uICh3aWR0aHMpIHsNCiAgICAgICAgICAgIHJldHVybiAnICcucmVwZWF0KHRoaXMubGVmdCkgKyB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgJy0nLnJlcGVhdCh3KSArICcrJywgJysnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gc3RvcCBydWxlczoNCiAgICAgICAgdnJzdG9wOiBmdW5jdGlvbiAod2lkdGhzKSB7DQogICAgICAgICAgICByZXR1cm4gJyAnLnJlcGVhdCh0aGlzLmxlZnQpICsgd2lkdGhzLnJlZHVjZSgoYSwgdykgPT4gYSArICctJy5yZXBlYXQodykgKyAnKycsICcrJyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHByaW50IHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHJ1bGVzOg0KICAgICAgICB2cmhyOiBmdW5jdGlvbiAod2lkdGhzMSwgd2lkdGhzMiwgZGwsIGRyKSB7DQogICAgICAgICAgICBjb25zdCByMSA9ICcgJy5yZXBlYXQoTWF0aC5tYXgoLWRsLCAwKSkgKyB3aWR0aHMxLnJlZHVjZSgoYSwgdykgPT4gYSArICctJy5yZXBlYXQodykgKyAnKycsICcrJykgKyAnICcucmVwZWF0KE1hdGgubWF4KGRyLCAwKSk7DQogICAgICAgICAgICBjb25zdCByMiA9ICcgJy5yZXBlYXQoTWF0aC5tYXgoZGwsIDApKSArIHdpZHRoczIucmVkdWNlKChhLCB3KSA9PiBhICsgJy0nLnJlcGVhdCh3KSArICcrJywgJysnKSArICcgJy5yZXBlYXQoTWF0aC5tYXgoLWRyLCAwKSk7DQogICAgICAgICAgICByZXR1cm4gJyAnLnJlcGVhdCh0aGlzLmxlZnQpICsgcjIuc3BsaXQoJycpLnJlZHVjZSgoYSwgYywgaSkgPT4gYSArIHRoaXMudnJ0YWJsZVtjXVtyMVtpXV0sICcnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcnVsZWQgbGluZSBjb21wb3NpdGlvbg0KICAgICAgICB2cnRhYmxlOiB7DQogICAgICAgICAgICAnICcgOiB7ICcgJyA6ICcgJywgJysnIDogJysnLCAnLScgOiAnLScgfSwNCiAgICAgICAgICAgICcrJyA6IHsgJyAnIDogJysnLCAnKycgOiAnKycsICctJyA6ICcrJyB9LA0KICAgICAgICAgICAgJy0nIDogeyAnICcgOiAnLScsICcrJyA6ICcrJywgJy0nIDogJy0nIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gc2V0IGxpbmUgc3BhY2luZyBhbmQgZmVlZCBuZXcgbGluZToNCiAgICAgICAgdnJsZjogZnVuY3Rpb24odnIpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmxmKCk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHNjYWxlIHVwIHRleHQ6DQogICAgICAgIHdoOiBmdW5jdGlvbiAod2gpIHsNCiAgICAgICAgICAgIGNvbnN0IHcgPSB3aCA8IDIgPyB3aCArIDEgOiB3aCAtIDE7DQogICAgICAgICAgICB0aGlzLnNjYWxlID0gdzsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gY2FuY2VsIHRleHQgZGVjb3JhdGlvbjoNCiAgICAgICAgbm9ybWFsOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnNjYWxlID0gMTsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgdGV4dDoNCiAgICAgICAgdGV4dDogZnVuY3Rpb24gKHRleHQsIGVuY29kaW5nKSB7DQogICAgICAgICAgICBjb25zdCBkID0gdGhpcy5hcnJheUZyb20odGV4dCwgZW5jb2RpbmcpLnJlZHVjZSgoYSwgYykgPT4gYSArIGMgKyAnICcucmVwZWF0KHRoaXMubWVhc3VyZVRleHQoYywgZW5jb2RpbmcpICogKHRoaXMuc2NhbGUgLSAxKSksICcnKTsNCiAgICAgICAgICAgIGNvbnN0IGwgPSB0aGlzLm1lYXN1cmVUZXh0KHRleHQsIGVuY29kaW5nKSAqIHRoaXMuc2NhbGU7DQogICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHsgZGF0YTogZCwgaW5kZXg6IHRoaXMucG9zaXRpb24sIGxlbmd0aDogbCB9KTsNCiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gKz0gbDsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZmVlZCBuZXcgbGluZToNCiAgICAgICAgbGY6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGxldCByID0gJyc7DQogICAgICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGxldCBwID0gMDsNCiAgICAgICAgICAgICAgICByICs9IHRoaXMuYnVmZmVyLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KS5yZWR1Y2UoKGEsIGMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IGEgKyAnICcucmVwZWF0KGMuaW5kZXggLSBwKSArIGMuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgcCA9IGMuaW5kZXggKyBjLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7DQogICAgICAgICAgICAgICAgfSwgJyAnLnJlcGVhdCh0aGlzLmxlZnQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHIgKz0gJ1xuJzsNCiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSAwOw0KICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsNCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vDQogICAgLy8gRVNDL1BPUyBHZW5lcmljDQogICAgLy8NCiAgICBjb25zdCBfZ2VuZXJpYyA9IHsNCiAgICAgICAgLy8gc3RhcnQgcHJpbnRpbmc6IEVTQyBAIEdTIGEgbiBFU0MgTSBuIEVTQyBTUCBuIEZTIFMgbjEgbjIgKEVTQyAyKSAoRVNDIDMgbikgRVNDIHsgbiBGUyAuDQogICAgICAgIG9wZW46IGZ1bmN0aW9uIChwcmludGVyKSB7DQogICAgICAgICAgICB0aGlzLnVwc2lkZURvd24gPSBwcmludGVyLnVwc2lkZURvd247DQogICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBwcmludGVyLnNwYWNpbmc7DQogICAgICAgICAgICB0aGlzLmN1dHRpbmcgPSBwcmludGVyLmN1dHRpbmc7DQogICAgICAgICAgICB0aGlzLmdyYWRpZW50ID0gcHJpbnRlci5ncmFkaWVudDsNCiAgICAgICAgICAgIHRoaXMuZ2FtbWEgPSBwcmludGVyLmdhbW1hOw0KICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBwcmludGVyLnRocmVzaG9sZDsNCiAgICAgICAgICAgIHRoaXMuYWxpZ25tZW50ID0gMDsNCiAgICAgICAgICAgIHRoaXMubGVmdCA9IDA7DQogICAgICAgICAgICB0aGlzLndpZHRoID0gcHJpbnRlci5jcGw7DQogICAgICAgICAgICB0aGlzLnJpZ2h0ID0gMDsNCiAgICAgICAgICAgIHRoaXMubWFyZ2luID0gcHJpbnRlci5tYXJnaW47DQogICAgICAgICAgICB0aGlzLm1hcmdpblJpZ2h0ID0gcHJpbnRlci5tYXJnaW5SaWdodDsNCiAgICAgICAgICAgIHJldHVybiAnXHgxYkBceDFkYVx4MDBceDFiTVx4MDBceDFiIFx4MDBceDFjU1x4MDBceDAwJyArICh0aGlzLnNwYWNpbmcgPyAnXHgxYjInIDogJ1x4MWIzXHgwMCcpICsgJ1x4MWJ7JyArICQodGhpcy51cHNpZGVEb3duKSArICdceDFjLic7DQogICAgICAgIH0sDQogICAgICAgIC8vIGZpbmlzaCBwcmludGluZzogR1MgciBuDQogICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuY3V0dGluZyA/IHRoaXMuY3V0KCkgOiAnJykgKyAnXHgxZHJceDAxJzsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gcHJpbnQgaG9yaXpvbnRhbCBydWxlOiBGUyBDIG4gRlMgLiBFU0MgdCBuIC4uLg0KICAgICAgICBocjogd2lkdGggPT4gJ1x4MWNDXHgwMFx4MWMuXHgxYnRceDAxJyArICdceDk1Jy5yZXBlYXQod2lkdGgpLA0KICAgICAgICAvLyBwcmludCB2ZXJ0aWNhbCBydWxlczogR1MgISBuIEZTIEMgbiBGUyAuIEVTQyB0IG4gLi4uDQogICAgICAgIHZyOiBmdW5jdGlvbiAod2lkdGhzLCBoZWlnaHQpIHsNCiAgICAgICAgICAgIHJldHVybiB3aWR0aHMucmVkdWNlKChhLCB3KSA9PiBhICsgdGhpcy5yZWxhdGl2ZSh3KSArICdceDk2JywgJ1x4MWQhJyArICQoaGVpZ2h0IC0gMSkgKyAnXHgxY0NceDAwXHgxYy5ceDFidFx4MDFceDk2Jyk7DQogICAgICAgIH0sDQogICAgICAgIC8vIHN0YXJ0IHJ1bGVzOiBGUyBDIG4gRlMgLiBFU0MgdCBuIC4uLg0KICAgICAgICB2cnN0YXJ0OiB3aWR0aHMgPT4gJ1x4MWNDXHgwMFx4MWMuXHgxYnRceDAxJyArIHdpZHRocy5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTEnLCAnXHg5YycpLnNsaWNlKDAsIC0xKSArICdceDlkJywNCiAgICAgICAgLy8gc3RvcCBydWxlczogRlMgQyBuIEZTIC4gRVNDIHQgbiAuLi4NCiAgICAgICAgdnJzdG9wOiB3aWR0aHMgPT4gJ1x4MWNDXHgwMFx4MWMuXHgxYnRceDAxJyArIHdpZHRocy5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTAnLCAnXHg5ZScpLnNsaWNlKDAsIC0xKSArICdceDlmJywNCiAgICAgICAgLy8gcHJpbnQgdmVydGljYWwgYW5kIGhvcml6b250YWwgcnVsZXM6IEZTIEMgbiBGUyAuIEVTQyB0IG4gLi4uDQogICAgICAgIHZyaHI6IGZ1bmN0aW9uICh3aWR0aHMxLCB3aWR0aHMyLCBkbCwgZHIpIHsNCiAgICAgICAgICAgIGNvbnN0IHIxID0gJyAnLnJlcGVhdChNYXRoLm1heCgtZGwsIDApKSArIHdpZHRoczEucmVkdWNlKChhLCB3KSA9PiBhICsgJ1x4OTUnLnJlcGVhdCh3KSArICdceDkwJywgZGwgPiAwID8gJ1x4OWUnIDogJ1x4OWEnKS5zbGljZSgwLCAtMSkgKyAoZHIgPCAwID8gJ1x4OWYnIDogJ1x4OWInKSArICcgJy5yZXBlYXQoTWF0aC5tYXgoZHIsIDApKTsNCiAgICAgICAgICAgIGNvbnN0IHIyID0gJyAnLnJlcGVhdChNYXRoLm1heChkbCwgMCkpICsgd2lkdGhzMi5yZWR1Y2UoKGEsIHcpID0+IGEgKyAnXHg5NScucmVwZWF0KHcpICsgJ1x4OTEnLCBkbCA8IDAgPyAnXHg5YycgOiAnXHg5OCcpLnNsaWNlKDAsIC0xKSArIChkciA+IDAgPyAnXHg5ZCcgOiAnXHg5OScpICsgJyAnLnJlcGVhdChNYXRoLm1heCgtZHIsIDApKTsNCiAgICAgICAgICAgIHJldHVybiAnXHgxY0NceDAwXHgxYy5ceDFidFx4MDEnICsgcjIuc3BsaXQoJycpLnJlZHVjZSgoYSwgYywgaSkgPT4gYSArIHRoaXMudnJ0YWJsZVtjXVtyMVtpXV0sICcnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gdW5kZXJsaW5lIHRleHQ6IEVTQyAtIG4gRlMgLSBuDQogICAgICAgIHVsOiAoKSA9PiAnXHgxYi1ceDAyXHgxYy1ceDAyJywNCiAgICAgICAgLy8gZW1waGFzaXplIHRleHQ6IEVTQyBFIG4NCiAgICAgICAgZW06ICgpID0+ICdceDFiRVx4MDEnLA0KICAgICAgICAvLyBpbnZlcnQgdGV4dDogR1MgQiBuDQogICAgICAgIGl2OiAoKSA9PiAnXHgxZEJceDAxJywNCiAgICAgICAgLy8gc2NhbGUgdXAgdGV4dDogR1MgISBuDQogICAgICAgIHdoOiB3aCA9PiAnXHgxZCEnICsgKHdoIDwgMyA/ICQoKHdoICYgMSkgPDwgNCB8IHdoID4+IDEgJiAxKSA6ICQod2ggLSAyIDw8IDQgfCB3aCAtIDIpKSwNCiAgICAgICAgLy8gY2FuY2VsIHRleHQgZGVjb3JhdGlvbjogRVNDIC0gbiBGUyAtIG4gRVNDIEUgbiBHUyBCIG4gR1MgISBuDQogICAgICAgIG5vcm1hbDogKCkgPT4gJ1x4MWItXHgwMFx4MWMtXHgwMFx4MWJFXHgwMFx4MWRCXHgwMFx4MWQhXHgwMCcsDQogICAgICAgIC8vIGltYWdlIHNwbGl0IHNpemUNCiAgICAgICAgc3BsaXQ6IDIwNDgsDQogICAgICAgIC8vIHByaW50IGltYWdlOiBHUyB2IDAgbSB4TCB4SCB5TCB5SCBkMSAuLi4gZGsNCiAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uIChpbWFnZSkgew0KICAgICAgICAgICAgY29uc3QgYWxpZ24gPSBhcmd1bWVudHNbMV0gfHwgdGhpcy5hbGlnbm1lbnQ7DQogICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJndW1lbnRzWzJdIHx8IHRoaXMubGVmdDsNCiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXJndW1lbnRzWzNdIHx8IHRoaXMud2lkdGg7DQogICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3VtZW50c1s0XSB8fCB0aGlzLnJpZ2h0Ow0KICAgICAgICAgICAgbGV0IHIgPSB0aGlzLnVwc2lkZURvd24gPyB0aGlzLmFyZWEocmlnaHQgKyB0aGlzLm1hcmdpblJpZ2h0IC0gdGhpcy5tYXJnaW4sIHdpZHRoLCBsZWZ0KSArIHRoaXMuYWxpZ24oMiAtIGFsaWduKSA6ICcnOw0KICAgICAgICAgICAgY29uc3QgaW1nID0gUE5HLnN5bmMucmVhZChCdWZmZXIuZnJvbShpbWFnZSwgJ2Jhc2U2NCcpKTsNCiAgICAgICAgICAgIGNvbnN0IHcgPSBpbWcud2lkdGg7DQogICAgICAgICAgICBjb25zdCBkID0gQXJyYXkodykuZmlsbCgwKTsNCiAgICAgICAgICAgIGxldCBqID0gdGhpcy51cHNpZGVEb3duID8gaW1nLmRhdGEubGVuZ3RoIC0gNCA6IDA7DQogICAgICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGltZy5oZWlnaHQ7IHogKz0gdGhpcy5zcGxpdCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLm1pbih0aGlzLnNwbGl0LCBpbWcuaGVpZ2h0IC0geik7DQogICAgICAgICAgICAgICAgY29uc3QgbCA9IHcgKyA3ID4+IDM7DQogICAgICAgICAgICAgICAgciArPSAnXHgxZHYwJyArICQoMCwgbCAmIDI1NSwgbCA+PiA4ICYgMjU1LCBoICYgMjU1LCBoID4+IDggJiAyNTUpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaDsgeSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBpID0gMCwgZSA9IDA7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdzsgeCArPSA4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIHgsIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBxOyBwKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmID0gTWF0aC5mbG9vcigoZFtpXSArIGUgKiA1KSAvIDE2ICsgTWF0aC5wb3coKChpbWcuZGF0YVtqXSAqIC4yOTkgKyBpbWcuZGF0YVtqICsgMV0gKiAuNTg3ICsgaW1nLmRhdGFbaiArIDJdICogLjExNCAtIDI1NSkgKiBpbWcuZGF0YVtqICsgM10gKyA2NTUyNSkgLyA2NTUyNSwgMSAvIHRoaXMuZ2FtbWEpICogMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICs9IHRoaXMudXBzaWRlRG93biA/IC00IDogNDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmFkaWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gZSAqIDM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmIDwgdGhpcy50aHJlc2hvbGQgPyAoYiB8PSAxMjggPj4gcCwgZikgOiBmIC0gMjU1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbaSAtIDFdICs9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtpKytdICs9IGUgKiA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgPCB0aGlzLnRocmVzaG9sZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gJChiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9LA0KICAgICAgICAvLyBwcmludCBRUiBDb2RlOiBHUyAoIGsgcEwgcEggY24gZm4gbjEgbjIgR1MgKCBrIHBMIHBIIGNuIGZuIG4gR1MgKCBrIHBMIHBIIGNuIGZuIG4gR1MgKCBrIHBMIHBIIGNuIGZuIG0gZDEgLi4uIGRrIEdTICggayBwTCBwSCBjbiBmbiBtDQogICAgICAgIHFyY29kZTogZnVuY3Rpb24gKHN5bWJvbCwgZW5jb2RpbmcpIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgcXJjb2RlICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIGxldCByID0gdGhpcy51cHNpZGVEb3duID8gdGhpcy5hcmVhKHRoaXMucmlnaHQgKyB0aGlzLm1hcmdpblJpZ2h0IC0gdGhpcy5tYXJnaW4sIHRoaXMud2lkdGgsIHRoaXMubGVmdCkgKyB0aGlzLmFsaWduKDIgLSB0aGlzLmFsaWdubWVudCkgOiAnJzsNCiAgICAgICAgICAgICAgICBpZiAoc3ltYm9sLmRhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBxciA9IHFyY29kZSgwLCBzeW1ib2wubGV2ZWwudG9VcHBlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgIHFyLmFkZERhdGEoc3ltYm9sLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBxci5tYWtlKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbWcgPSBxci5jcmVhdGVBU0NJSSgyLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXBzaWRlRG93bikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gaW1nLnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaW1nID0gaW1nLnNwbGl0KCdcbicpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gaW1nLmxlbmd0aCAqIHN5bWJvbC5jZWxsOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBoID0gdzsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IHcgKyA3ID4+IDM7DQogICAgICAgICAgICAgICAgICAgIHIgKz0gJ1x4MWR2MCcgKyAkKDAsIGwgJiAyNTUsIGwgPj4gOCAmIDI1NSwgaCAmIDI1NSwgaCA+PiA4ICYgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHc7IGogKz0gOCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gTWF0aC5taW4odyAtIGosIDgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdbaV1bTWF0aC5mbG9vcigoaiArIHApIC8gc3ltYm9sLmNlbGwpICogMl0gPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAxMjggPj4gcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkICs9ICQoYik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN5bWJvbC5jZWxsOyBrKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICs9IGQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gaWNvbnYuZW5jb2RlKHN5bWJvbC5kYXRhLCBlbmNvZGluZyA9PT0gJ211bHRpbGluZ3VhbCcgPyAnYXNjaWknIDogZW5jb2RpbmcpLnRvU3RyaW5nKCdiaW5hcnknKS5zbGljZSgwLCA3MDg5KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwID8gJ1x4MWQoaycgKyAkKDQsIDAsIDQ5LCA2NSwgNTAsIDApICsgJ1x4MWQoaycgKyAkKDMsIDAsIDQ5LCA2Nywgc3ltYm9sLmNlbGwpICsgJ1x4MWQoaycgKyAkKDMsIDAsIDQ5LCA2OSwgdGhpcy5xcmxldmVsW3N5bWJvbC5sZXZlbF0pICsgJ1x4MWQoaycgKyAkKGQubGVuZ3RoICsgMyAmIDI1NSwgZC5sZW5ndGggKyAzID4+IDggJiAyNTUsIDQ5LCA4MCwgNDgpICsgZCArICdceDFkKGsnICsgJCgzLCAwLCA0OSwgODEsIDQ4KSA6ICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gY29tbWFuZCBzZXQNCiAgICBjb25zdCBfY29tbWFuZHMgPSB7DQogICAgICAgIGJhc2U6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlKSwNCiAgICAgICAgc3ZnOiBPYmplY3QuYXNzaWduKHt9LCBfYmFzZSwgX3N2ZyksDQogICAgICAgIHRleHQ6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfdGV4dCksDQogICAgICAgIGVzY3BvczogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9lc2Nwb3MsIF90aGVybWFsKSwNCiAgICAgICAgZXBzb246IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfZXNjcG9zLCBfdGhlcm1hbCksDQogICAgICAgIHNpaTogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9lc2Nwb3MsIF90aGVybWFsLCBfc2lpKSwNCiAgICAgICAgY2l0aXplbjogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9lc2Nwb3MsIF90aGVybWFsLCBfY2l0aXplbiksDQogICAgICAgIGZpdDogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9lc2Nwb3MsIF90aGVybWFsLCBfZml0KSwNCiAgICAgICAgaW1wYWN0OiBPYmplY3QuYXNzaWduKHt9LCBfYmFzZSwgX2VzY3BvcywgX2ltcGFjdCksDQogICAgICAgIGltcGFjdGI6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfZXNjcG9zLCBfaW1wYWN0LCBfZm9udGIpLA0KICAgICAgICBnZW5lcmljOiBPYmplY3QuYXNzaWduKHt9LCBfYmFzZSwgX2VzY3BvcywgX3RoZXJtYWwsIF9nZW5lcmljKSwNCiAgICAgICAgc3RhcnNiY3M6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfc3RhciwgX3NiY3MpLA0KICAgICAgICBzdGFybWJjczogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9zdGFyLCBfbWJjcyksDQogICAgICAgIHN0YXJtYmNzMjogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9zdGFyLCBfbWJjczIpLA0KICAgICAgICBzdGFybGluZXNiY3M6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfc3RhciwgX2xpbmUsIF9zYmNzKSwNCiAgICAgICAgc3RhcmxpbmVtYmNzOiBPYmplY3QuYXNzaWduKHt9LCBfYmFzZSwgX3N0YXIsIF9saW5lLCBfbWJjcyksDQogICAgICAgIHN0YXJsaW5lbWJjczI6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfc3RhciwgX2xpbmUsIF9tYmNzMiksDQogICAgICAgIGVtdXN0YXJsaW5lc2JjczogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9zdGFyLCBfbGluZSwgX2VtdSwgX3NiY3MpLA0KICAgICAgICBlbXVzdGFybGluZW1iY3M6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfc3RhciwgX2xpbmUsIF9lbXUsIF9tYmNzKSwNCiAgICAgICAgZW11c3RhcmxpbmVtYmNzMjogT2JqZWN0LmFzc2lnbih7fSwgX2Jhc2UsIF9zdGFyLCBfbGluZSwgX2VtdSwgX21iY3MyKSwNCiAgICAgICAgc3RhcmdyYXBoaWM6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfc3RhcmdyYXBoaWMpLA0KICAgICAgICBzdGFyaW1wYWN0OiBPYmplY3QuYXNzaWduKHt9LCBfYmFzZSwgX3N0YXIsIF9kb3QsIF9zYmNzKSwNCiAgICAgICAgc3RhcmltcGFjdDI6IE9iamVjdC5hc3NpZ24oe30sIF9iYXNlLCBfc3RhciwgX2RvdCwgX2ZvbnQyLCBfc2JjcyksDQogICAgICAgIHN0YXJpbXBhY3QzOiBPYmplY3QuYXNzaWduKHt9LCBfYmFzZSwgX3N0YXIsIF9kb3QsIF9mb250MywgX3NiY3MpDQogICAgfTsNCiAgICBjb25zdCBjb21tYW5kcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgX2NvbW1hbmRzKTsNCg0KICAgIC8vIHdlYiBicm93c2VyDQogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHdpbmRvdy5yZWNlaXB0bGluZSA9IHsgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sIGNyZWF0ZVRyYW5zZm9ybTogY3JlYXRlVHJhbnNmb3JtLCBjb21tYW5kczogY29tbWFuZHMsIGJhcmNvZGU6IGJhcmNvZGUgfTsNCiAgICB9DQogICAgLy8gTm9kZS5qcw0KICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHsgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sIGNyZWF0ZVRyYW5zZm9ybTogY3JlYXRlVHJhbnNmb3JtLCBjb21tYW5kczogY29tbWFuZHMsIGJhcmNvZGU6IGJhcmNvZGUgfTsNCiAgICB9DQoNCn0pKCk7DQo="></script>
    <script type="text/javascript" src="data:application/javascript;base64,Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gUVIgQ29kZSBHZW5lcmF0b3IgZm9yIEphdmFTY3JpcHQKLy8KLy8gQ29weXJpZ2h0IChjKSAyMDA5IEthenVoaWtvIEFyYXNlCi8vCi8vIFVSTDogaHR0cDovL3d3dy5kLXByb2plY3QuY29tLwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6Ci8vICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAovLwovLyBUaGUgd29yZCAnUVIgQ29kZScgaXMgcmVnaXN0ZXJlZCB0cmFkZW1hcmsgb2YKLy8gREVOU08gV0FWRSBJTkNPUlBPUkFURUQKLy8gIGh0dHA6Ly93d3cuZGVuc28td2F2ZS5jb20vcXJjb2RlL2ZhcXBhdGVudC1lLmh0bWwKLy8KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCnZhciBxcmNvZGUgPSBmdW5jdGlvbigpIHsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBxcmNvZGUKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKioKICAgKiBxcmNvZGUKICAgKiBAcGFyYW0gdHlwZU51bWJlciAxIHRvIDQwCiAgICogQHBhcmFtIGVycm9yQ29ycmVjdGlvbkxldmVsICdMJywnTScsJ1EnLCdIJwogICAqLwogIHZhciBxcmNvZGUgPSBmdW5jdGlvbih0eXBlTnVtYmVyLCBlcnJvckNvcnJlY3Rpb25MZXZlbCkgewoKICAgIHZhciBQQUQwID0gMHhFQzsKICAgIHZhciBQQUQxID0gMHgxMTsKCiAgICB2YXIgX3R5cGVOdW1iZXIgPSB0eXBlTnVtYmVyOwogICAgdmFyIF9lcnJvckNvcnJlY3Rpb25MZXZlbCA9IFFSRXJyb3JDb3JyZWN0aW9uTGV2ZWxbZXJyb3JDb3JyZWN0aW9uTGV2ZWxdOwogICAgdmFyIF9tb2R1bGVzID0gbnVsbDsKICAgIHZhciBfbW9kdWxlQ291bnQgPSAwOwogICAgdmFyIF9kYXRhQ2FjaGUgPSBudWxsOwogICAgdmFyIF9kYXRhTGlzdCA9IFtdOwoKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIHZhciBtYWtlSW1wbCA9IGZ1bmN0aW9uKHRlc3QsIG1hc2tQYXR0ZXJuKSB7CgogICAgICBfbW9kdWxlQ291bnQgPSBfdHlwZU51bWJlciAqIDQgKyAxNzsKICAgICAgX21vZHVsZXMgPSBmdW5jdGlvbihtb2R1bGVDb3VudCkgewogICAgICAgIHZhciBtb2R1bGVzID0gbmV3IEFycmF5KG1vZHVsZUNvdW50KTsKICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBtb2R1bGVDb3VudDsgcm93ICs9IDEpIHsKICAgICAgICAgIG1vZHVsZXNbcm93XSA9IG5ldyBBcnJheShtb2R1bGVDb3VudCk7CiAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudDsgY29sICs9IDEpIHsKICAgICAgICAgICAgbW9kdWxlc1tyb3ddW2NvbF0gPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbW9kdWxlczsKICAgICAgfShfbW9kdWxlQ291bnQpOwoKICAgICAgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybigwLCAwKTsKICAgICAgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybihfbW9kdWxlQ291bnQgLSA3LCAwKTsKICAgICAgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybigwLCBfbW9kdWxlQ291bnQgLSA3KTsKICAgICAgc2V0dXBQb3NpdGlvbkFkanVzdFBhdHRlcm4oKTsKICAgICAgc2V0dXBUaW1pbmdQYXR0ZXJuKCk7CiAgICAgIHNldHVwVHlwZUluZm8odGVzdCwgbWFza1BhdHRlcm4pOwoKICAgICAgaWYgKF90eXBlTnVtYmVyID49IDcpIHsKICAgICAgICBzZXR1cFR5cGVOdW1iZXIodGVzdCk7CiAgICAgIH0KCiAgICAgIGlmIChfZGF0YUNhY2hlID09IG51bGwpIHsKICAgICAgICBfZGF0YUNhY2hlID0gY3JlYXRlRGF0YShfdHlwZU51bWJlciwgX2Vycm9yQ29ycmVjdGlvbkxldmVsLCBfZGF0YUxpc3QpOwogICAgICB9CgogICAgICBtYXBEYXRhKF9kYXRhQ2FjaGUsIG1hc2tQYXR0ZXJuKTsKICAgIH07CgogICAgdmFyIHNldHVwUG9zaXRpb25Qcm9iZVBhdHRlcm4gPSBmdW5jdGlvbihyb3csIGNvbCkgewoKICAgICAgZm9yICh2YXIgciA9IC0xOyByIDw9IDc7IHIgKz0gMSkgewoKICAgICAgICBpZiAocm93ICsgciA8PSAtMSB8fCBfbW9kdWxlQ291bnQgPD0gcm93ICsgcikgY29udGludWU7CgogICAgICAgIGZvciAodmFyIGMgPSAtMTsgYyA8PSA3OyBjICs9IDEpIHsKCiAgICAgICAgICBpZiAoY29sICsgYyA8PSAtMSB8fCBfbW9kdWxlQ291bnQgPD0gY29sICsgYykgY29udGludWU7CgogICAgICAgICAgaWYgKCAoMCA8PSByICYmIHIgPD0gNiAmJiAoYyA9PSAwIHx8IGMgPT0gNikgKQogICAgICAgICAgICAgIHx8ICgwIDw9IGMgJiYgYyA8PSA2ICYmIChyID09IDAgfHwgciA9PSA2KSApCiAgICAgICAgICAgICAgfHwgKDIgPD0gciAmJiByIDw9IDQgJiYgMiA8PSBjICYmIGMgPD0gNCkgKSB7CiAgICAgICAgICAgIF9tb2R1bGVzW3JvdyArIHJdW2NvbCArIGNdID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9tb2R1bGVzW3JvdyArIHJdW2NvbCArIGNdID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHZhciBnZXRCZXN0TWFza1BhdHRlcm4gPSBmdW5jdGlvbigpIHsKCiAgICAgIHZhciBtaW5Mb3N0UG9pbnQgPSAwOwogICAgICB2YXIgcGF0dGVybiA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkgKz0gMSkgewoKICAgICAgICBtYWtlSW1wbCh0cnVlLCBpKTsKCiAgICAgICAgdmFyIGxvc3RQb2ludCA9IFFSVXRpbC5nZXRMb3N0UG9pbnQoX3RoaXMpOwoKICAgICAgICBpZiAoaSA9PSAwIHx8IG1pbkxvc3RQb2ludCA+IGxvc3RQb2ludCkgewogICAgICAgICAgbWluTG9zdFBvaW50ID0gbG9zdFBvaW50OwogICAgICAgICAgcGF0dGVybiA9IGk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcGF0dGVybjsKICAgIH07CgogICAgdmFyIHNldHVwVGltaW5nUGF0dGVybiA9IGZ1bmN0aW9uKCkgewoKICAgICAgZm9yICh2YXIgciA9IDg7IHIgPCBfbW9kdWxlQ291bnQgLSA4OyByICs9IDEpIHsKICAgICAgICBpZiAoX21vZHVsZXNbcl1bNl0gIT0gbnVsbCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIF9tb2R1bGVzW3JdWzZdID0gKHIgJSAyID09IDApOwogICAgICB9CgogICAgICBmb3IgKHZhciBjID0gODsgYyA8IF9tb2R1bGVDb3VudCAtIDg7IGMgKz0gMSkgewogICAgICAgIGlmIChfbW9kdWxlc1s2XVtjXSAhPSBudWxsKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgX21vZHVsZXNbNl1bY10gPSAoYyAlIDIgPT0gMCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHNldHVwUG9zaXRpb25BZGp1c3RQYXR0ZXJuID0gZnVuY3Rpb24oKSB7CgogICAgICB2YXIgcG9zID0gUVJVdGlsLmdldFBhdHRlcm5Qb3NpdGlvbihfdHlwZU51bWJlcik7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvcy5sZW5ndGg7IGkgKz0gMSkgewoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBvcy5sZW5ndGg7IGogKz0gMSkgewoKICAgICAgICAgIHZhciByb3cgPSBwb3NbaV07CiAgICAgICAgICB2YXIgY29sID0gcG9zW2pdOwoKICAgICAgICAgIGlmIChfbW9kdWxlc1tyb3ddW2NvbF0gIT0gbnVsbCkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciByID0gLTI7IHIgPD0gMjsgciArPSAxKSB7CgogICAgICAgICAgICBmb3IgKHZhciBjID0gLTI7IGMgPD0gMjsgYyArPSAxKSB7CgogICAgICAgICAgICAgIGlmIChyID09IC0yIHx8IHIgPT0gMiB8fCBjID09IC0yIHx8IGMgPT0gMgogICAgICAgICAgICAgICAgICB8fCAociA9PSAwICYmIGMgPT0gMCkgKSB7CiAgICAgICAgICAgICAgICBfbW9kdWxlc1tyb3cgKyByXVtjb2wgKyBjXSA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF9tb2R1bGVzW3JvdyArIHJdW2NvbCArIGNdID0gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHZhciBzZXR1cFR5cGVOdW1iZXIgPSBmdW5jdGlvbih0ZXN0KSB7CgogICAgICB2YXIgYml0cyA9IFFSVXRpbC5nZXRCQ0hUeXBlTnVtYmVyKF90eXBlTnVtYmVyKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTg7IGkgKz0gMSkgewogICAgICAgIHZhciBtb2QgPSAoIXRlc3QgJiYgKCAoYml0cyA+PiBpKSAmIDEpID09IDEpOwogICAgICAgIF9tb2R1bGVzW01hdGguZmxvb3IoaSAvIDMpXVtpICUgMyArIF9tb2R1bGVDb3VudCAtIDggLSAzXSA9IG1vZDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxODsgaSArPSAxKSB7CiAgICAgICAgdmFyIG1vZCA9ICghdGVzdCAmJiAoIChiaXRzID4+IGkpICYgMSkgPT0gMSk7CiAgICAgICAgX21vZHVsZXNbaSAlIDMgKyBfbW9kdWxlQ291bnQgLSA4IC0gM11bTWF0aC5mbG9vcihpIC8gMyldID0gbW9kOwogICAgICB9CiAgICB9OwoKICAgIHZhciBzZXR1cFR5cGVJbmZvID0gZnVuY3Rpb24odGVzdCwgbWFza1BhdHRlcm4pIHsKCiAgICAgIHZhciBkYXRhID0gKF9lcnJvckNvcnJlY3Rpb25MZXZlbCA8PCAzKSB8IG1hc2tQYXR0ZXJuOwogICAgICB2YXIgYml0cyA9IFFSVXRpbC5nZXRCQ0hUeXBlSW5mbyhkYXRhKTsKCiAgICAgIC8vIHZlcnRpY2FsCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkgKz0gMSkgewoKICAgICAgICB2YXIgbW9kID0gKCF0ZXN0ICYmICggKGJpdHMgPj4gaSkgJiAxKSA9PSAxKTsKCiAgICAgICAgaWYgKGkgPCA2KSB7CiAgICAgICAgICBfbW9kdWxlc1tpXVs4XSA9IG1vZDsKICAgICAgICB9IGVsc2UgaWYgKGkgPCA4KSB7CiAgICAgICAgICBfbW9kdWxlc1tpICsgMV1bOF0gPSBtb2Q7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9tb2R1bGVzW19tb2R1bGVDb3VudCAtIDE1ICsgaV1bOF0gPSBtb2Q7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBob3Jpem9udGFsCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkgKz0gMSkgewoKICAgICAgICB2YXIgbW9kID0gKCF0ZXN0ICYmICggKGJpdHMgPj4gaSkgJiAxKSA9PSAxKTsKCiAgICAgICAgaWYgKGkgPCA4KSB7CiAgICAgICAgICBfbW9kdWxlc1s4XVtfbW9kdWxlQ291bnQgLSBpIC0gMV0gPSBtb2Q7CiAgICAgICAgfSBlbHNlIGlmIChpIDwgOSkgewogICAgICAgICAgX21vZHVsZXNbOF1bMTUgLSBpIC0gMSArIDFdID0gbW9kOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfbW9kdWxlc1s4XVsxNSAtIGkgLSAxXSA9IG1vZDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIGZpeGVkIG1vZHVsZQogICAgICBfbW9kdWxlc1tfbW9kdWxlQ291bnQgLSA4XVs4XSA9ICghdGVzdCk7CiAgICB9OwoKICAgIHZhciBtYXBEYXRhID0gZnVuY3Rpb24oZGF0YSwgbWFza1BhdHRlcm4pIHsKCiAgICAgIHZhciBpbmMgPSAtMTsKICAgICAgdmFyIHJvdyA9IF9tb2R1bGVDb3VudCAtIDE7CiAgICAgIHZhciBiaXRJbmRleCA9IDc7CiAgICAgIHZhciBieXRlSW5kZXggPSAwOwogICAgICB2YXIgbWFza0Z1bmMgPSBRUlV0aWwuZ2V0TWFza0Z1bmN0aW9uKG1hc2tQYXR0ZXJuKTsKCiAgICAgIGZvciAodmFyIGNvbCA9IF9tb2R1bGVDb3VudCAtIDE7IGNvbCA+IDA7IGNvbCAtPSAyKSB7CgogICAgICAgIGlmIChjb2wgPT0gNikgY29sIC09IDE7CgogICAgICAgIHdoaWxlICh0cnVlKSB7CgogICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAyOyBjICs9IDEpIHsKCiAgICAgICAgICAgIGlmIChfbW9kdWxlc1tyb3ddW2NvbCAtIGNdID09IG51bGwpIHsKCiAgICAgICAgICAgICAgdmFyIGRhcmsgPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKGJ5dGVJbmRleCA8IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBkYXJrID0gKCAoIChkYXRhW2J5dGVJbmRleF0gPj4+IGJpdEluZGV4KSAmIDEpID09IDEpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIG1hc2sgPSBtYXNrRnVuYyhyb3csIGNvbCAtIGMpOwoKICAgICAgICAgICAgICBpZiAobWFzaykgewogICAgICAgICAgICAgICAgZGFyayA9ICFkYXJrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX21vZHVsZXNbcm93XVtjb2wgLSBjXSA9IGRhcms7CiAgICAgICAgICAgICAgYml0SW5kZXggLT0gMTsKCiAgICAgICAgICAgICAgaWYgKGJpdEluZGV4ID09IC0xKSB7CiAgICAgICAgICAgICAgICBieXRlSW5kZXggKz0gMTsKICAgICAgICAgICAgICAgIGJpdEluZGV4ID0gNzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByb3cgKz0gaW5jOwoKICAgICAgICAgIGlmIChyb3cgPCAwIHx8IF9tb2R1bGVDb3VudCA8PSByb3cpIHsKICAgICAgICAgICAgcm93IC09IGluYzsKICAgICAgICAgICAgaW5jID0gLWluYzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHZhciBjcmVhdGVCeXRlcyA9IGZ1bmN0aW9uKGJ1ZmZlciwgcnNCbG9ja3MpIHsKCiAgICAgIHZhciBvZmZzZXQgPSAwOwoKICAgICAgdmFyIG1heERjQ291bnQgPSAwOwogICAgICB2YXIgbWF4RWNDb3VudCA9IDA7CgogICAgICB2YXIgZGNkYXRhID0gbmV3IEFycmF5KHJzQmxvY2tzLmxlbmd0aCk7CiAgICAgIHZhciBlY2RhdGEgPSBuZXcgQXJyYXkocnNCbG9ja3MubGVuZ3RoKTsKCiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgcnNCbG9ja3MubGVuZ3RoOyByICs9IDEpIHsKCiAgICAgICAgdmFyIGRjQ291bnQgPSByc0Jsb2Nrc1tyXS5kYXRhQ291bnQ7CiAgICAgICAgdmFyIGVjQ291bnQgPSByc0Jsb2Nrc1tyXS50b3RhbENvdW50IC0gZGNDb3VudDsKCiAgICAgICAgbWF4RGNDb3VudCA9IE1hdGgubWF4KG1heERjQ291bnQsIGRjQ291bnQpOwogICAgICAgIG1heEVjQ291bnQgPSBNYXRoLm1heChtYXhFY0NvdW50LCBlY0NvdW50KTsKCiAgICAgICAgZGNkYXRhW3JdID0gbmV3IEFycmF5KGRjQ291bnQpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjZGF0YVtyXS5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgZGNkYXRhW3JdW2ldID0gMHhmZiAmIGJ1ZmZlci5nZXRCdWZmZXIoKVtpICsgb2Zmc2V0XTsKICAgICAgICB9CiAgICAgICAgb2Zmc2V0ICs9IGRjQ291bnQ7CgogICAgICAgIHZhciByc1BvbHkgPSBRUlV0aWwuZ2V0RXJyb3JDb3JyZWN0UG9seW5vbWlhbChlY0NvdW50KTsKICAgICAgICB2YXIgcmF3UG9seSA9IHFyUG9seW5vbWlhbChkY2RhdGFbcl0sIHJzUG9seS5nZXRMZW5ndGgoKSAtIDEpOwoKICAgICAgICB2YXIgbW9kUG9seSA9IHJhd1BvbHkubW9kKHJzUG9seSk7CiAgICAgICAgZWNkYXRhW3JdID0gbmV3IEFycmF5KHJzUG9seS5nZXRMZW5ndGgoKSAtIDEpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWNkYXRhW3JdLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICB2YXIgbW9kSW5kZXggPSBpICsgbW9kUG9seS5nZXRMZW5ndGgoKSAtIGVjZGF0YVtyXS5sZW5ndGg7CiAgICAgICAgICBlY2RhdGFbcl1baV0gPSAobW9kSW5kZXggPj0gMCk/IG1vZFBvbHkuZ2V0QXQobW9kSW5kZXgpIDogMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciB0b3RhbENvZGVDb3VudCA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnNCbG9ja3MubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB0b3RhbENvZGVDb3VudCArPSByc0Jsb2Nrc1tpXS50b3RhbENvdW50OwogICAgICB9CgogICAgICB2YXIgZGF0YSA9IG5ldyBBcnJheSh0b3RhbENvZGVDb3VudCk7CiAgICAgIHZhciBpbmRleCA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heERjQ291bnQ7IGkgKz0gMSkgewogICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgcnNCbG9ja3MubGVuZ3RoOyByICs9IDEpIHsKICAgICAgICAgIGlmIChpIDwgZGNkYXRhW3JdLmxlbmd0aCkgewogICAgICAgICAgICBkYXRhW2luZGV4XSA9IGRjZGF0YVtyXVtpXTsKICAgICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4RWNDb3VudDsgaSArPSAxKSB7CiAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCByc0Jsb2Nrcy5sZW5ndGg7IHIgKz0gMSkgewogICAgICAgICAgaWYgKGkgPCBlY2RhdGFbcl0ubGVuZ3RoKSB7CiAgICAgICAgICAgIGRhdGFbaW5kZXhdID0gZWNkYXRhW3JdW2ldOwogICAgICAgICAgICBpbmRleCArPSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9OwoKICAgIHZhciBjcmVhdGVEYXRhID0gZnVuY3Rpb24odHlwZU51bWJlciwgZXJyb3JDb3JyZWN0aW9uTGV2ZWwsIGRhdGFMaXN0KSB7CgogICAgICB2YXIgcnNCbG9ja3MgPSBRUlJTQmxvY2suZ2V0UlNCbG9ja3ModHlwZU51bWJlciwgZXJyb3JDb3JyZWN0aW9uTGV2ZWwpOwoKICAgICAgdmFyIGJ1ZmZlciA9IHFyQml0QnVmZmVyKCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFMaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgdmFyIGRhdGEgPSBkYXRhTGlzdFtpXTsKICAgICAgICBidWZmZXIucHV0KGRhdGEuZ2V0TW9kZSgpLCA0KTsKICAgICAgICBidWZmZXIucHV0KGRhdGEuZ2V0TGVuZ3RoKCksIFFSVXRpbC5nZXRMZW5ndGhJbkJpdHMoZGF0YS5nZXRNb2RlKCksIHR5cGVOdW1iZXIpICk7CiAgICAgICAgZGF0YS53cml0ZShidWZmZXIpOwogICAgICB9CgogICAgICAvLyBjYWxjIG51bSBtYXggZGF0YS4KICAgICAgdmFyIHRvdGFsRGF0YUNvdW50ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByc0Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIHRvdGFsRGF0YUNvdW50ICs9IHJzQmxvY2tzW2ldLmRhdGFDb3VudDsKICAgICAgfQoKICAgICAgaWYgKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSA+IHRvdGFsRGF0YUNvdW50ICogOCkgewogICAgICAgIHRocm93ICdjb2RlIGxlbmd0aCBvdmVyZmxvdy4gKCcKICAgICAgICAgICsgYnVmZmVyLmdldExlbmd0aEluQml0cygpCiAgICAgICAgICArICc+JwogICAgICAgICAgKyB0b3RhbERhdGFDb3VudCAqIDgKICAgICAgICAgICsgJyknOwogICAgICB9CgogICAgICAvLyBlbmQgY29kZQogICAgICBpZiAoYnVmZmVyLmdldExlbmd0aEluQml0cygpICsgNCA8PSB0b3RhbERhdGFDb3VudCAqIDgpIHsKICAgICAgICBidWZmZXIucHV0KDAsIDQpOwogICAgICB9CgogICAgICAvLyBwYWRkaW5nCiAgICAgIHdoaWxlIChidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkgJSA4ICE9IDApIHsKICAgICAgICBidWZmZXIucHV0Qml0KGZhbHNlKTsKICAgICAgfQoKICAgICAgLy8gcGFkZGluZwogICAgICB3aGlsZSAodHJ1ZSkgewoKICAgICAgICBpZiAoYnVmZmVyLmdldExlbmd0aEluQml0cygpID49IHRvdGFsRGF0YUNvdW50ICogOCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGJ1ZmZlci5wdXQoUEFEMCwgOCk7CgogICAgICAgIGlmIChidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkgPj0gdG90YWxEYXRhQ291bnQgKiA4KSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgYnVmZmVyLnB1dChQQUQxLCA4KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNyZWF0ZUJ5dGVzKGJ1ZmZlciwgcnNCbG9ja3MpOwogICAgfTsKCiAgICBfdGhpcy5hZGREYXRhID0gZnVuY3Rpb24oZGF0YSwgbW9kZSkgewoKICAgICAgbW9kZSA9IG1vZGUgfHwgJ0J5dGUnOwoKICAgICAgdmFyIG5ld0RhdGEgPSBudWxsOwoKICAgICAgc3dpdGNoKG1vZGUpIHsKICAgICAgY2FzZSAnTnVtZXJpYycgOgogICAgICAgIG5ld0RhdGEgPSBxck51bWJlcihkYXRhKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnQWxwaGFudW1lcmljJyA6CiAgICAgICAgbmV3RGF0YSA9IHFyQWxwaGFOdW0oZGF0YSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ0J5dGUnIDoKICAgICAgICBuZXdEYXRhID0gcXI4Qml0Qnl0ZShkYXRhKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnS2FuamknIDoKICAgICAgICBuZXdEYXRhID0gcXJLYW5qaShkYXRhKTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdCA6CiAgICAgICAgdGhyb3cgJ21vZGU6JyArIG1vZGU7CiAgICAgIH0KCiAgICAgIF9kYXRhTGlzdC5wdXNoKG5ld0RhdGEpOwogICAgICBfZGF0YUNhY2hlID0gbnVsbDsKICAgIH07CgogICAgX3RoaXMuaXNEYXJrID0gZnVuY3Rpb24ocm93LCBjb2wpIHsKICAgICAgaWYgKHJvdyA8IDAgfHwgX21vZHVsZUNvdW50IDw9IHJvdyB8fCBjb2wgPCAwIHx8IF9tb2R1bGVDb3VudCA8PSBjb2wpIHsKICAgICAgICB0aHJvdyByb3cgKyAnLCcgKyBjb2w7CiAgICAgIH0KICAgICAgcmV0dXJuIF9tb2R1bGVzW3Jvd11bY29sXTsKICAgIH07CgogICAgX3RoaXMuZ2V0TW9kdWxlQ291bnQgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF9tb2R1bGVDb3VudDsKICAgIH07CgogICAgX3RoaXMubWFrZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3R5cGVOdW1iZXIgPCAxKSB7CiAgICAgICAgdmFyIHR5cGVOdW1iZXIgPSAxOwoKICAgICAgICBmb3IgKDsgdHlwZU51bWJlciA8IDQwOyB0eXBlTnVtYmVyKyspIHsKICAgICAgICAgIHZhciByc0Jsb2NrcyA9IFFSUlNCbG9jay5nZXRSU0Jsb2Nrcyh0eXBlTnVtYmVyLCBfZXJyb3JDb3JyZWN0aW9uTGV2ZWwpOwogICAgICAgICAgdmFyIGJ1ZmZlciA9IHFyQml0QnVmZmVyKCk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZGF0YUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSBfZGF0YUxpc3RbaV07CiAgICAgICAgICAgIGJ1ZmZlci5wdXQoZGF0YS5nZXRNb2RlKCksIDQpOwogICAgICAgICAgICBidWZmZXIucHV0KGRhdGEuZ2V0TGVuZ3RoKCksIFFSVXRpbC5nZXRMZW5ndGhJbkJpdHMoZGF0YS5nZXRNb2RlKCksIHR5cGVOdW1iZXIpICk7CiAgICAgICAgICAgIGRhdGEud3JpdGUoYnVmZmVyKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdG90YWxEYXRhQ291bnQgPSAwOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByc0Jsb2Nrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0b3RhbERhdGFDb3VudCArPSByc0Jsb2Nrc1tpXS5kYXRhQ291bnQ7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSA8PSB0b3RhbERhdGFDb3VudCAqIDgpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdHlwZU51bWJlciA9IHR5cGVOdW1iZXI7CiAgICAgIH0KCiAgICAgIG1ha2VJbXBsKGZhbHNlLCBnZXRCZXN0TWFza1BhdHRlcm4oKSApOwogICAgfTsKCiAgICBfdGhpcy5jcmVhdGVUYWJsZVRhZyA9IGZ1bmN0aW9uKGNlbGxTaXplLCBtYXJnaW4pIHsKCiAgICAgIGNlbGxTaXplID0gY2VsbFNpemUgfHwgMjsKICAgICAgbWFyZ2luID0gKHR5cGVvZiBtYXJnaW4gPT0gJ3VuZGVmaW5lZCcpPyBjZWxsU2l6ZSAqIDQgOiBtYXJnaW47CgogICAgICB2YXIgcXJIdG1sID0gJyc7CgogICAgICBxckh0bWwgKz0gJzx0YWJsZSBzdHlsZT0iJzsKICAgICAgcXJIdG1sICs9ICcgYm9yZGVyLXdpZHRoOiAwcHg7IGJvcmRlci1zdHlsZTogbm9uZTsnOwogICAgICBxckh0bWwgKz0gJyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyc7CiAgICAgIHFySHRtbCArPSAnIHBhZGRpbmc6IDBweDsgbWFyZ2luOiAnICsgbWFyZ2luICsgJ3B4Oyc7CiAgICAgIHFySHRtbCArPSAnIj4nOwogICAgICBxckh0bWwgKz0gJzx0Ym9keT4nOwoKICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBfdGhpcy5nZXRNb2R1bGVDb3VudCgpOyByICs9IDEpIHsKCiAgICAgICAgcXJIdG1sICs9ICc8dHI+JzsKCiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBfdGhpcy5nZXRNb2R1bGVDb3VudCgpOyBjICs9IDEpIHsKICAgICAgICAgIHFySHRtbCArPSAnPHRkIHN0eWxlPSInOwogICAgICAgICAgcXJIdG1sICs9ICcgYm9yZGVyLXdpZHRoOiAwcHg7IGJvcmRlci1zdHlsZTogbm9uZTsnOwogICAgICAgICAgcXJIdG1sICs9ICcgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsnOwogICAgICAgICAgcXJIdG1sICs9ICcgcGFkZGluZzogMHB4OyBtYXJnaW46IDBweDsnOwogICAgICAgICAgcXJIdG1sICs9ICcgd2lkdGg6ICcgKyBjZWxsU2l6ZSArICdweDsnOwogICAgICAgICAgcXJIdG1sICs9ICcgaGVpZ2h0OiAnICsgY2VsbFNpemUgKyAncHg7JzsKICAgICAgICAgIHFySHRtbCArPSAnIGJhY2tncm91bmQtY29sb3I6ICc7CiAgICAgICAgICBxckh0bWwgKz0gX3RoaXMuaXNEYXJrKHIsIGMpPyAnIzAwMDAwMCcgOiAnI2ZmZmZmZic7CiAgICAgICAgICBxckh0bWwgKz0gJzsnOwogICAgICAgICAgcXJIdG1sICs9ICciLz4nOwogICAgICAgIH0KCiAgICAgICAgcXJIdG1sICs9ICc8L3RyPic7CiAgICAgIH0KCiAgICAgIHFySHRtbCArPSAnPC90Ym9keT4nOwogICAgICBxckh0bWwgKz0gJzwvdGFibGU+JzsKCiAgICAgIHJldHVybiBxckh0bWw7CiAgICB9OwoKICAgIF90aGlzLmNyZWF0ZVN2Z1RhZyA9IGZ1bmN0aW9uKGNlbGxTaXplLCBtYXJnaW4sIGFsdCwgdGl0bGUpIHsKCiAgICAgIHZhciBvcHRzID0ge307CiAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09ICdvYmplY3QnKSB7CiAgICAgICAgLy8gQ2FsbGVkIGJ5IG9wdGlvbnMuCiAgICAgICAgb3B0cyA9IGFyZ3VtZW50c1swXTsKICAgICAgICAvLyBvdmVyd3JpdGUgY2VsbFNpemUgYW5kIG1hcmdpbi4KICAgICAgICBjZWxsU2l6ZSA9IG9wdHMuY2VsbFNpemU7CiAgICAgICAgbWFyZ2luID0gb3B0cy5tYXJnaW47CiAgICAgICAgYWx0ID0gb3B0cy5hbHQ7CiAgICAgICAgdGl0bGUgPSBvcHRzLnRpdGxlOwogICAgICB9CgogICAgICBjZWxsU2l6ZSA9IGNlbGxTaXplIHx8IDI7CiAgICAgIG1hcmdpbiA9ICh0eXBlb2YgbWFyZ2luID09ICd1bmRlZmluZWQnKT8gY2VsbFNpemUgKiA0IDogbWFyZ2luOwoKICAgICAgLy8gQ29tcG9zZSBhbHQgcHJvcGVydHkgc3Vycm9nYXRlCiAgICAgIGFsdCA9ICh0eXBlb2YgYWx0ID09PSAnc3RyaW5nJykgPyB7dGV4dDogYWx0fSA6IGFsdCB8fCB7fTsKICAgICAgYWx0LnRleHQgPSBhbHQudGV4dCB8fCBudWxsOwogICAgICBhbHQuaWQgPSAoYWx0LnRleHQpID8gYWx0LmlkIHx8ICdxcmNvZGUtZGVzY3JpcHRpb24nIDogbnVsbDsKCiAgICAgIC8vIENvbXBvc2UgdGl0bGUgcHJvcGVydHkgc3Vycm9nYXRlCiAgICAgIHRpdGxlID0gKHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycpID8ge3RleHQ6IHRpdGxlfSA6IHRpdGxlIHx8IHt9OwogICAgICB0aXRsZS50ZXh0ID0gdGl0bGUudGV4dCB8fCBudWxsOwogICAgICB0aXRsZS5pZCA9ICh0aXRsZS50ZXh0KSA/IHRpdGxlLmlkIHx8ICdxcmNvZGUtdGl0bGUnIDogbnVsbDsKCiAgICAgIHZhciBzaXplID0gX3RoaXMuZ2V0TW9kdWxlQ291bnQoKSAqIGNlbGxTaXplICsgbWFyZ2luICogMjsKICAgICAgdmFyIGMsIG1jLCByLCBtciwgcXJTdmc9JycsIHJlY3Q7CgogICAgICByZWN0ID0gJ2wnICsgY2VsbFNpemUgKyAnLDAgMCwnICsgY2VsbFNpemUgKwogICAgICAgICcgLScgKyBjZWxsU2l6ZSArICcsMCAwLC0nICsgY2VsbFNpemUgKyAneiAnOwoKICAgICAgcXJTdmcgKz0gJzxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciJzsKICAgICAgcXJTdmcgKz0gIW9wdHMuc2NhbGFibGUgPyAnIHdpZHRoPSInICsgc2l6ZSArICdweCIgaGVpZ2h0PSInICsgc2l6ZSArICdweCInIDogJyc7CiAgICAgIHFyU3ZnICs9ICcgdmlld0JveD0iMCAwICcgKyBzaXplICsgJyAnICsgc2l6ZSArICciICc7CiAgICAgIHFyU3ZnICs9ICcgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pbllNaW4gbWVldCInOwogICAgICBxclN2ZyArPSAodGl0bGUudGV4dCB8fCBhbHQudGV4dCkgPyAnIHJvbGU9ImltZyIgYXJpYS1sYWJlbGxlZGJ5PSInICsKICAgICAgICAgIGVzY2FwZVhtbChbdGl0bGUuaWQsIGFsdC5pZF0uam9pbignICcpLnRyaW0oKSApICsgJyInIDogJyc7CiAgICAgIHFyU3ZnICs9ICc+JzsKICAgICAgcXJTdmcgKz0gKHRpdGxlLnRleHQpID8gJzx0aXRsZSBpZD0iJyArIGVzY2FwZVhtbCh0aXRsZS5pZCkgKyAnIj4nICsKICAgICAgICAgIGVzY2FwZVhtbCh0aXRsZS50ZXh0KSArICc8L3RpdGxlPicgOiAnJzsKICAgICAgcXJTdmcgKz0gKGFsdC50ZXh0KSA/ICc8ZGVzY3JpcHRpb24gaWQ9IicgKyBlc2NhcGVYbWwoYWx0LmlkKSArICciPicgKwogICAgICAgICAgZXNjYXBlWG1sKGFsdC50ZXh0KSArICc8L2Rlc2NyaXB0aW9uPicgOiAnJzsKICAgICAgcXJTdmcgKz0gJzxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IndoaXRlIiBjeD0iMCIgY3k9IjAiLz4nOwogICAgICBxclN2ZyArPSAnPHBhdGggZD0iJzsKCiAgICAgIGZvciAociA9IDA7IHIgPCBfdGhpcy5nZXRNb2R1bGVDb3VudCgpOyByICs9IDEpIHsKICAgICAgICBtciA9IHIgKiBjZWxsU2l6ZSArIG1hcmdpbjsKICAgICAgICBmb3IgKGMgPSAwOyBjIDwgX3RoaXMuZ2V0TW9kdWxlQ291bnQoKTsgYyArPSAxKSB7CiAgICAgICAgICBpZiAoX3RoaXMuaXNEYXJrKHIsIGMpICkgewogICAgICAgICAgICBtYyA9IGMqY2VsbFNpemUrbWFyZ2luOwogICAgICAgICAgICBxclN2ZyArPSAnTScgKyBtYyArICcsJyArIG1yICsgcmVjdDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHFyU3ZnICs9ICciIHN0cm9rZT0idHJhbnNwYXJlbnQiIGZpbGw9ImJsYWNrIi8+JzsKICAgICAgcXJTdmcgKz0gJzwvc3ZnPic7CgogICAgICByZXR1cm4gcXJTdmc7CiAgICB9OwoKICAgIF90aGlzLmNyZWF0ZURhdGFVUkwgPSBmdW5jdGlvbihjZWxsU2l6ZSwgbWFyZ2luKSB7CgogICAgICBjZWxsU2l6ZSA9IGNlbGxTaXplIHx8IDI7CiAgICAgIG1hcmdpbiA9ICh0eXBlb2YgbWFyZ2luID09ICd1bmRlZmluZWQnKT8gY2VsbFNpemUgKiA0IDogbWFyZ2luOwoKICAgICAgdmFyIHNpemUgPSBfdGhpcy5nZXRNb2R1bGVDb3VudCgpICogY2VsbFNpemUgKyBtYXJnaW4gKiAyOwogICAgICB2YXIgbWluID0gbWFyZ2luOwogICAgICB2YXIgbWF4ID0gc2l6ZSAtIG1hcmdpbjsKCiAgICAgIHJldHVybiBjcmVhdGVEYXRhVVJMKHNpemUsIHNpemUsIGZ1bmN0aW9uKHgsIHkpIHsKICAgICAgICBpZiAobWluIDw9IHggJiYgeCA8IG1heCAmJiBtaW4gPD0geSAmJiB5IDwgbWF4KSB7CiAgICAgICAgICB2YXIgYyA9IE1hdGguZmxvb3IoICh4IC0gbWluKSAvIGNlbGxTaXplKTsKICAgICAgICAgIHZhciByID0gTWF0aC5mbG9vciggKHkgLSBtaW4pIC8gY2VsbFNpemUpOwogICAgICAgICAgcmV0dXJuIF90aGlzLmlzRGFyayhyLCBjKT8gMCA6IDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgfSApOwogICAgfTsKCiAgICBfdGhpcy5jcmVhdGVJbWdUYWcgPSBmdW5jdGlvbihjZWxsU2l6ZSwgbWFyZ2luLCBhbHQpIHsKCiAgICAgIGNlbGxTaXplID0gY2VsbFNpemUgfHwgMjsKICAgICAgbWFyZ2luID0gKHR5cGVvZiBtYXJnaW4gPT0gJ3VuZGVmaW5lZCcpPyBjZWxsU2l6ZSAqIDQgOiBtYXJnaW47CgogICAgICB2YXIgc2l6ZSA9IF90aGlzLmdldE1vZHVsZUNvdW50KCkgKiBjZWxsU2l6ZSArIG1hcmdpbiAqIDI7CgogICAgICB2YXIgaW1nID0gJyc7CiAgICAgIGltZyArPSAnPGltZyc7CiAgICAgIGltZyArPSAnXHUwMDIwc3JjPSInOwogICAgICBpbWcgKz0gX3RoaXMuY3JlYXRlRGF0YVVSTChjZWxsU2l6ZSwgbWFyZ2luKTsKICAgICAgaW1nICs9ICciJzsKICAgICAgaW1nICs9ICdcdTAwMjB3aWR0aD0iJzsKICAgICAgaW1nICs9IHNpemU7CiAgICAgIGltZyArPSAnIic7CiAgICAgIGltZyArPSAnXHUwMDIwaGVpZ2h0PSInOwogICAgICBpbWcgKz0gc2l6ZTsKICAgICAgaW1nICs9ICciJzsKICAgICAgaWYgKGFsdCkgewogICAgICAgIGltZyArPSAnXHUwMDIwYWx0PSInOwogICAgICAgIGltZyArPSBlc2NhcGVYbWwoYWx0KTsKICAgICAgICBpbWcgKz0gJyInOwogICAgICB9CiAgICAgIGltZyArPSAnLz4nOwoKICAgICAgcmV0dXJuIGltZzsKICAgIH07CgogICAgdmFyIGVzY2FwZVhtbCA9IGZ1bmN0aW9uKHMpIHsKICAgICAgdmFyIGVzY2FwZWQgPSAnJzsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgdmFyIGMgPSBzLmNoYXJBdChpKTsKICAgICAgICBzd2l0Y2goYykgewogICAgICAgIGNhc2UgJzwnOiBlc2NhcGVkICs9ICcmbHQ7JzsgYnJlYWs7CiAgICAgICAgY2FzZSAnPic6IGVzY2FwZWQgKz0gJyZndDsnOyBicmVhazsKICAgICAgICBjYXNlICcmJzogZXNjYXBlZCArPSAnJmFtcDsnOyBicmVhazsKICAgICAgICBjYXNlICciJzogZXNjYXBlZCArPSAnJnF1b3Q7JzsgYnJlYWs7CiAgICAgICAgZGVmYXVsdCA6IGVzY2FwZWQgKz0gYzsgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBlc2NhcGVkOwogICAgfTsKCiAgICB2YXIgX2NyZWF0ZUhhbGZBU0NJSSA9IGZ1bmN0aW9uKG1hcmdpbikgewogICAgICB2YXIgY2VsbFNpemUgPSAxOwogICAgICBtYXJnaW4gPSAodHlwZW9mIG1hcmdpbiA9PSAndW5kZWZpbmVkJyk/IGNlbGxTaXplICogMiA6IG1hcmdpbjsKCiAgICAgIHZhciBzaXplID0gX3RoaXMuZ2V0TW9kdWxlQ291bnQoKSAqIGNlbGxTaXplICsgbWFyZ2luICogMjsKICAgICAgdmFyIG1pbiA9IG1hcmdpbjsKICAgICAgdmFyIG1heCA9IHNpemUgLSBtYXJnaW47CgogICAgICB2YXIgeSwgeCwgcjEsIHIyLCBwOwoKICAgICAgdmFyIGJsb2NrcyA9IHsKICAgICAgICAn4paI4paIJzogJ+KWiCcsCiAgICAgICAgJ+KWiCAnOiAn4paAJywKICAgICAgICAnIOKWiCc6ICfiloQnLAogICAgICAgICcgICc6ICcgJwogICAgICB9OwoKICAgICAgdmFyIGJsb2Nrc0xhc3RMaW5lTm9NYXJnaW4gPSB7CiAgICAgICAgJ+KWiOKWiCc6ICfiloAnLAogICAgICAgICfiloggJzogJ+KWgCcsCiAgICAgICAgJyDilognOiAnICcsCiAgICAgICAgJyAgJzogJyAnCiAgICAgIH07CgogICAgICB2YXIgYXNjaWkgPSAnJzsKICAgICAgZm9yICh5ID0gMDsgeSA8IHNpemU7IHkgKz0gMikgewogICAgICAgIHIxID0gTWF0aC5mbG9vcigoeSAtIG1pbikgLyBjZWxsU2l6ZSk7CiAgICAgICAgcjIgPSBNYXRoLmZsb29yKCh5ICsgMSAtIG1pbikgLyBjZWxsU2l6ZSk7CiAgICAgICAgZm9yICh4ID0gMDsgeCA8IHNpemU7IHggKz0gMSkgewogICAgICAgICAgcCA9ICfilognOwoKICAgICAgICAgIGlmIChtaW4gPD0geCAmJiB4IDwgbWF4ICYmIG1pbiA8PSB5ICYmIHkgPCBtYXggJiYgX3RoaXMuaXNEYXJrKHIxLCBNYXRoLmZsb29yKCh4IC0gbWluKSAvIGNlbGxTaXplKSkpIHsKICAgICAgICAgICAgcCA9ICcgJzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAobWluIDw9IHggJiYgeCA8IG1heCAmJiBtaW4gPD0geSsxICYmIHkrMSA8IG1heCAmJiBfdGhpcy5pc0RhcmsocjIsIE1hdGguZmxvb3IoKHggLSBtaW4pIC8gY2VsbFNpemUpKSkgewogICAgICAgICAgICBwICs9ICcgJzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBwICs9ICfilognOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIE91dHB1dCAyIGNoYXJhY3RlcnMgcGVyIHBpeGVsLCB0byBjcmVhdGUgZnVsbCBzcXVhcmUuIDEgY2hhcmFjdGVyIHBlciBwaXhlbHMgZ2l2ZXMgb25seSBoYWxmIHdpZHRoIG9mIHNxdWFyZS4KICAgICAgICAgIGFzY2lpICs9IChtYXJnaW4gPCAxICYmIHkrMSA+PSBtYXgpID8gYmxvY2tzTGFzdExpbmVOb01hcmdpbltwXSA6IGJsb2Nrc1twXTsKICAgICAgICB9CgogICAgICAgIGFzY2lpICs9ICdcbic7CiAgICAgIH0KCiAgICAgIGlmIChzaXplICUgMiAmJiBtYXJnaW4gPiAwKSB7CiAgICAgICAgcmV0dXJuIGFzY2lpLnN1YnN0cmluZygwLCBhc2NpaS5sZW5ndGggLSBzaXplIC0gMSkgKyBBcnJheShzaXplKzEpLmpvaW4oJ+KWgCcpOwogICAgICB9CgogICAgICByZXR1cm4gYXNjaWkuc3Vic3RyaW5nKDAsIGFzY2lpLmxlbmd0aC0xKTsKICAgIH07CgogICAgX3RoaXMuY3JlYXRlQVNDSUkgPSBmdW5jdGlvbihjZWxsU2l6ZSwgbWFyZ2luKSB7CiAgICAgIGNlbGxTaXplID0gY2VsbFNpemUgfHwgMTsKCiAgICAgIGlmIChjZWxsU2l6ZSA8IDIpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZUhhbGZBU0NJSShtYXJnaW4pOwogICAgICB9CgogICAgICBjZWxsU2l6ZSAtPSAxOwogICAgICBtYXJnaW4gPSAodHlwZW9mIG1hcmdpbiA9PSAndW5kZWZpbmVkJyk/IGNlbGxTaXplICogMiA6IG1hcmdpbjsKCiAgICAgIHZhciBzaXplID0gX3RoaXMuZ2V0TW9kdWxlQ291bnQoKSAqIGNlbGxTaXplICsgbWFyZ2luICogMjsKICAgICAgdmFyIG1pbiA9IG1hcmdpbjsKICAgICAgdmFyIG1heCA9IHNpemUgLSBtYXJnaW47CgogICAgICB2YXIgeSwgeCwgciwgcDsKCiAgICAgIHZhciB3aGl0ZSA9IEFycmF5KGNlbGxTaXplKzEpLmpvaW4oJ+KWiOKWiCcpOwogICAgICB2YXIgYmxhY2sgPSBBcnJheShjZWxsU2l6ZSsxKS5qb2luKCcgICcpOwoKICAgICAgdmFyIGFzY2lpID0gJyc7CiAgICAgIHZhciBsaW5lID0gJyc7CiAgICAgIGZvciAoeSA9IDA7IHkgPCBzaXplOyB5ICs9IDEpIHsKICAgICAgICByID0gTWF0aC5mbG9vciggKHkgLSBtaW4pIC8gY2VsbFNpemUpOwogICAgICAgIGxpbmUgPSAnJzsKICAgICAgICBmb3IgKHggPSAwOyB4IDwgc2l6ZTsgeCArPSAxKSB7CiAgICAgICAgICBwID0gMTsKCiAgICAgICAgICBpZiAobWluIDw9IHggJiYgeCA8IG1heCAmJiBtaW4gPD0geSAmJiB5IDwgbWF4ICYmIF90aGlzLmlzRGFyayhyLCBNYXRoLmZsb29yKCh4IC0gbWluKSAvIGNlbGxTaXplKSkpIHsKICAgICAgICAgICAgcCA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gT3V0cHV0IDIgY2hhcmFjdGVycyBwZXIgcGl4ZWwsIHRvIGNyZWF0ZSBmdWxsIHNxdWFyZS4gMSBjaGFyYWN0ZXIgcGVyIHBpeGVscyBnaXZlcyBvbmx5IGhhbGYgd2lkdGggb2Ygc3F1YXJlLgogICAgICAgICAgbGluZSArPSBwID8gd2hpdGUgOiBibGFjazsKICAgICAgICB9CgogICAgICAgIGZvciAociA9IDA7IHIgPCBjZWxsU2l6ZTsgciArPSAxKSB7CiAgICAgICAgICBhc2NpaSArPSBsaW5lICsgJ1xuJzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBhc2NpaS5zdWJzdHJpbmcoMCwgYXNjaWkubGVuZ3RoLTEpOwogICAgfTsKCiAgICBfdGhpcy5yZW5kZXJUbzJkQ29udGV4dCA9IGZ1bmN0aW9uKGNvbnRleHQsIGNlbGxTaXplKSB7CiAgICAgIGNlbGxTaXplID0gY2VsbFNpemUgfHwgMjsKICAgICAgdmFyIGxlbmd0aCA9IF90aGlzLmdldE1vZHVsZUNvdW50KCk7CiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGxlbmd0aDsgcm93KyspIHsKICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBsZW5ndGg7IGNvbCsrKSB7CiAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IF90aGlzLmlzRGFyayhyb3csIGNvbCkgPyAnYmxhY2snIDogJ3doaXRlJzsKICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3Qocm93ICogY2VsbFNpemUsIGNvbCAqIGNlbGxTaXplLCBjZWxsU2l6ZSwgY2VsbFNpemUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBfdGhpczsKICB9OwoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIHFyY29kZS5zdHJpbmdUb0J5dGVzCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgcXJjb2RlLnN0cmluZ1RvQnl0ZXNGdW5jcyA9IHsKICAgICdkZWZhdWx0JyA6IGZ1bmN0aW9uKHMpIHsKICAgICAgdmFyIGJ5dGVzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIHZhciBjID0gcy5jaGFyQ29kZUF0KGkpOwogICAgICAgIGJ5dGVzLnB1c2goYyAmIDB4ZmYpOwogICAgICB9CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICB9OwoKICBxcmNvZGUuc3RyaW5nVG9CeXRlcyA9IHFyY29kZS5zdHJpbmdUb0J5dGVzRnVuY3NbJ2RlZmF1bHQnXTsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBxcmNvZGUuY3JlYXRlU3RyaW5nVG9CeXRlcwogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8qKgogICAqIEBwYXJhbSB1bmljb2RlRGF0YSBiYXNlNjQgc3RyaW5nIG9mIGJ5dGUgYXJyYXkuCiAgICogWzE2Yml0IFVuaWNvZGVdLFsxNmJpdCBCeXRlc10sIC4uLgogICAqIEBwYXJhbSBudW1DaGFycwogICAqLwogIHFyY29kZS5jcmVhdGVTdHJpbmdUb0J5dGVzID0gZnVuY3Rpb24odW5pY29kZURhdGEsIG51bUNoYXJzKSB7CgogICAgLy8gY3JlYXRlIGNvbnZlcnNpb24gbWFwLgoKICAgIHZhciB1bmljb2RlTWFwID0gZnVuY3Rpb24oKSB7CgogICAgICB2YXIgYmluID0gYmFzZTY0RGVjb2RlSW5wdXRTdHJlYW0odW5pY29kZURhdGEpOwogICAgICB2YXIgcmVhZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBiID0gYmluLnJlYWQoKTsKICAgICAgICBpZiAoYiA9PSAtMSkgdGhyb3cgJ2VvZic7CiAgICAgICAgcmV0dXJuIGI7CiAgICAgIH07CgogICAgICB2YXIgY291bnQgPSAwOwogICAgICB2YXIgdW5pY29kZU1hcCA9IHt9OwogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIHZhciBiMCA9IGJpbi5yZWFkKCk7CiAgICAgICAgaWYgKGIwID09IC0xKSBicmVhazsKICAgICAgICB2YXIgYjEgPSByZWFkKCk7CiAgICAgICAgdmFyIGIyID0gcmVhZCgpOwogICAgICAgIHZhciBiMyA9IHJlYWQoKTsKICAgICAgICB2YXIgayA9IFN0cmluZy5mcm9tQ2hhckNvZGUoIChiMCA8PCA4KSB8IGIxKTsKICAgICAgICB2YXIgdiA9IChiMiA8PCA4KSB8IGIzOwogICAgICAgIHVuaWNvZGVNYXBba10gPSB2OwogICAgICAgIGNvdW50ICs9IDE7CiAgICAgIH0KICAgICAgaWYgKGNvdW50ICE9IG51bUNoYXJzKSB7CiAgICAgICAgdGhyb3cgY291bnQgKyAnICE9ICcgKyBudW1DaGFyczsKICAgICAgfQoKICAgICAgcmV0dXJuIHVuaWNvZGVNYXA7CiAgICB9KCk7CgogICAgdmFyIHVua25vd25DaGFyID0gJz8nLmNoYXJDb2RlQXQoMCk7CgogICAgcmV0dXJuIGZ1bmN0aW9uKHMpIHsKICAgICAgdmFyIGJ5dGVzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIHZhciBjID0gcy5jaGFyQ29kZUF0KGkpOwogICAgICAgIGlmIChjIDwgMTI4KSB7CiAgICAgICAgICBieXRlcy5wdXNoKGMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgYiA9IHVuaWNvZGVNYXBbcy5jaGFyQXQoaSldOwogICAgICAgICAgaWYgKHR5cGVvZiBiID09ICdudW1iZXInKSB7CiAgICAgICAgICAgIGlmICggKGIgJiAweGZmKSA9PSBiKSB7CiAgICAgICAgICAgICAgLy8gMWJ5dGUKICAgICAgICAgICAgICBieXRlcy5wdXNoKGIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIDJieXRlcwogICAgICAgICAgICAgIGJ5dGVzLnB1c2goYiA+Pj4gOCk7CiAgICAgICAgICAgICAgYnl0ZXMucHVzaChiICYgMHhmZik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ5dGVzLnB1c2godW5rbm93bkNoYXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gYnl0ZXM7CiAgICB9OwogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gUVJNb2RlCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgdmFyIFFSTW9kZSA9IHsKICAgIE1PREVfTlVNQkVSIDogICAgMSA8PCAwLAogICAgTU9ERV9BTFBIQV9OVU0gOiAxIDw8IDEsCiAgICBNT0RFXzhCSVRfQllURSA6IDEgPDwgMiwKICAgIE1PREVfS0FOSkkgOiAgICAgMSA8PCAzCiAgfTsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBRUkVycm9yQ29ycmVjdGlvbkxldmVsCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgdmFyIFFSRXJyb3JDb3JyZWN0aW9uTGV2ZWwgPSB7CiAgICBMIDogMSwKICAgIE0gOiAwLAogICAgUSA6IDMsCiAgICBIIDogMgogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gUVJNYXNrUGF0dGVybgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHZhciBRUk1hc2tQYXR0ZXJuID0gewogICAgUEFUVEVSTjAwMCA6IDAsCiAgICBQQVRURVJOMDAxIDogMSwKICAgIFBBVFRFUk4wMTAgOiAyLAogICAgUEFUVEVSTjAxMSA6IDMsCiAgICBQQVRURVJOMTAwIDogNCwKICAgIFBBVFRFUk4xMDEgOiA1LAogICAgUEFUVEVSTjExMCA6IDYsCiAgICBQQVRURVJOMTExIDogNwogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gUVJVdGlsCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgdmFyIFFSVXRpbCA9IGZ1bmN0aW9uKCkgewoKICAgIHZhciBQQVRURVJOX1BPU0lUSU9OX1RBQkxFID0gWwogICAgICBbXSwKICAgICAgWzYsIDE4XSwKICAgICAgWzYsIDIyXSwKICAgICAgWzYsIDI2XSwKICAgICAgWzYsIDMwXSwKICAgICAgWzYsIDM0XSwKICAgICAgWzYsIDIyLCAzOF0sCiAgICAgIFs2LCAyNCwgNDJdLAogICAgICBbNiwgMjYsIDQ2XSwKICAgICAgWzYsIDI4LCA1MF0sCiAgICAgIFs2LCAzMCwgNTRdLAogICAgICBbNiwgMzIsIDU4XSwKICAgICAgWzYsIDM0LCA2Ml0sCiAgICAgIFs2LCAyNiwgNDYsIDY2XSwKICAgICAgWzYsIDI2LCA0OCwgNzBdLAogICAgICBbNiwgMjYsIDUwLCA3NF0sCiAgICAgIFs2LCAzMCwgNTQsIDc4XSwKICAgICAgWzYsIDMwLCA1NiwgODJdLAogICAgICBbNiwgMzAsIDU4LCA4Nl0sCiAgICAgIFs2LCAzNCwgNjIsIDkwXSwKICAgICAgWzYsIDI4LCA1MCwgNzIsIDk0XSwKICAgICAgWzYsIDI2LCA1MCwgNzQsIDk4XSwKICAgICAgWzYsIDMwLCA1NCwgNzgsIDEwMl0sCiAgICAgIFs2LCAyOCwgNTQsIDgwLCAxMDZdLAogICAgICBbNiwgMzIsIDU4LCA4NCwgMTEwXSwKICAgICAgWzYsIDMwLCA1OCwgODYsIDExNF0sCiAgICAgIFs2LCAzNCwgNjIsIDkwLCAxMThdLAogICAgICBbNiwgMjYsIDUwLCA3NCwgOTgsIDEyMl0sCiAgICAgIFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0sCiAgICAgIFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0sCiAgICAgIFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0sCiAgICAgIFs2LCAzNCwgNjAsIDg2LCAxMTIsIDEzOF0sCiAgICAgIFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0Ml0sCiAgICAgIFs2LCAzNCwgNjIsIDkwLCAxMTgsIDE0Nl0sCiAgICAgIFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNiwgMTUwXSwKICAgICAgWzYsIDI0LCA1MCwgNzYsIDEwMiwgMTI4LCAxNTRdLAogICAgICBbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0sCiAgICAgIFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSwKICAgICAgWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdLAogICAgICBbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDIsIDE3MF0KICAgIF07CiAgICB2YXIgRzE1ID0gKDEgPDwgMTApIHwgKDEgPDwgOCkgfCAoMSA8PCA1KSB8ICgxIDw8IDQpIHwgKDEgPDwgMikgfCAoMSA8PCAxKSB8ICgxIDw8IDApOwogICAgdmFyIEcxOCA9ICgxIDw8IDEyKSB8ICgxIDw8IDExKSB8ICgxIDw8IDEwKSB8ICgxIDw8IDkpIHwgKDEgPDwgOCkgfCAoMSA8PCA1KSB8ICgxIDw8IDIpIHwgKDEgPDwgMCk7CiAgICB2YXIgRzE1X01BU0sgPSAoMSA8PCAxNCkgfCAoMSA8PCAxMikgfCAoMSA8PCAxMCkgfCAoMSA8PCA0KSB8ICgxIDw8IDEpOwoKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIHZhciBnZXRCQ0hEaWdpdCA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGRpZ2l0ID0gMDsKICAgICAgd2hpbGUgKGRhdGEgIT0gMCkgewogICAgICAgIGRpZ2l0ICs9IDE7CiAgICAgICAgZGF0YSA+Pj49IDE7CiAgICAgIH0KICAgICAgcmV0dXJuIGRpZ2l0OwogICAgfTsKCiAgICBfdGhpcy5nZXRCQ0hUeXBlSW5mbyA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGQgPSBkYXRhIDw8IDEwOwogICAgICB3aGlsZSAoZ2V0QkNIRGlnaXQoZCkgLSBnZXRCQ0hEaWdpdChHMTUpID49IDApIHsKICAgICAgICBkIF49IChHMTUgPDwgKGdldEJDSERpZ2l0KGQpIC0gZ2V0QkNIRGlnaXQoRzE1KSApICk7CiAgICAgIH0KICAgICAgcmV0dXJuICggKGRhdGEgPDwgMTApIHwgZCkgXiBHMTVfTUFTSzsKICAgIH07CgogICAgX3RoaXMuZ2V0QkNIVHlwZU51bWJlciA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGQgPSBkYXRhIDw8IDEyOwogICAgICB3aGlsZSAoZ2V0QkNIRGlnaXQoZCkgLSBnZXRCQ0hEaWdpdChHMTgpID49IDApIHsKICAgICAgICBkIF49IChHMTggPDwgKGdldEJDSERpZ2l0KGQpIC0gZ2V0QkNIRGlnaXQoRzE4KSApICk7CiAgICAgIH0KICAgICAgcmV0dXJuIChkYXRhIDw8IDEyKSB8IGQ7CiAgICB9OwoKICAgIF90aGlzLmdldFBhdHRlcm5Qb3NpdGlvbiA9IGZ1bmN0aW9uKHR5cGVOdW1iZXIpIHsKICAgICAgcmV0dXJuIFBBVFRFUk5fUE9TSVRJT05fVEFCTEVbdHlwZU51bWJlciAtIDFdOwogICAgfTsKCiAgICBfdGhpcy5nZXRNYXNrRnVuY3Rpb24gPSBmdW5jdGlvbihtYXNrUGF0dGVybikgewoKICAgICAgc3dpdGNoIChtYXNrUGF0dGVybikgewoKICAgICAgY2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4wMDAgOgogICAgICAgIHJldHVybiBmdW5jdGlvbihpLCBqKSB7IHJldHVybiAoaSArIGopICUgMiA9PSAwOyB9OwogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAwMSA6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGksIGopIHsgcmV0dXJuIGkgJSAyID09IDA7IH07CiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDEwIDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSwgaikgeyByZXR1cm4gaiAlIDMgPT0gMDsgfTsKICAgICAgY2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4wMTEgOgogICAgICAgIHJldHVybiBmdW5jdGlvbihpLCBqKSB7IHJldHVybiAoaSArIGopICUgMyA9PSAwOyB9OwogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjEwMCA6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGksIGopIHsgcmV0dXJuIChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpICkgJSAyID09IDA7IH07CiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTAxIDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSwgaikgeyByZXR1cm4gKGkgKiBqKSAlIDIgKyAoaSAqIGopICUgMyA9PSAwOyB9OwogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjExMCA6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGksIGopIHsgcmV0dXJuICggKGkgKiBqKSAlIDIgKyAoaSAqIGopICUgMykgJSAyID09IDA7IH07CiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTExIDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSwgaikgeyByZXR1cm4gKCAoaSAqIGopICUgMyArIChpICsgaikgJSAyKSAlIDIgPT0gMDsgfTsKCiAgICAgIGRlZmF1bHQgOgogICAgICAgIHRocm93ICdiYWQgbWFza1BhdHRlcm46JyArIG1hc2tQYXR0ZXJuOwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLmdldEVycm9yQ29ycmVjdFBvbHlub21pYWwgPSBmdW5jdGlvbihlcnJvckNvcnJlY3RMZW5ndGgpIHsKICAgICAgdmFyIGEgPSBxclBvbHlub21pYWwoWzFdLCAwKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlcnJvckNvcnJlY3RMZW5ndGg7IGkgKz0gMSkgewogICAgICAgIGEgPSBhLm11bHRpcGx5KHFyUG9seW5vbWlhbChbMSwgUVJNYXRoLmdleHAoaSldLCAwKSApOwogICAgICB9CiAgICAgIHJldHVybiBhOwogICAgfTsKCiAgICBfdGhpcy5nZXRMZW5ndGhJbkJpdHMgPSBmdW5jdGlvbihtb2RlLCB0eXBlKSB7CgogICAgICBpZiAoMSA8PSB0eXBlICYmIHR5cGUgPCAxMCkgewoKICAgICAgICAvLyAxIC0gOQoKICAgICAgICBzd2l0Y2gobW9kZSkgewogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfTlVNQkVSICAgIDogcmV0dXJuIDEwOwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNIDogcmV0dXJuIDk7CiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV84QklUX0JZVEUgOiByZXR1cm4gODsKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFX0tBTkpJICAgICA6IHJldHVybiA4OwogICAgICAgIGRlZmF1bHQgOgogICAgICAgICAgdGhyb3cgJ21vZGU6JyArIG1vZGU7CiAgICAgICAgfQoKICAgICAgfSBlbHNlIGlmICh0eXBlIDwgMjcpIHsKCiAgICAgICAgLy8gMTAgLSAyNgoKICAgICAgICBzd2l0Y2gobW9kZSkgewogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfTlVNQkVSICAgIDogcmV0dXJuIDEyOwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNIDogcmV0dXJuIDExOwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFIDogcmV0dXJuIDE2OwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfS0FOSkkgICAgIDogcmV0dXJuIDEwOwogICAgICAgIGRlZmF1bHQgOgogICAgICAgICAgdGhyb3cgJ21vZGU6JyArIG1vZGU7CiAgICAgICAgfQoKICAgICAgfSBlbHNlIGlmICh0eXBlIDwgNDEpIHsKCiAgICAgICAgLy8gMjcgLSA0MAoKICAgICAgICBzd2l0Y2gobW9kZSkgewogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfTlVNQkVSICAgIDogcmV0dXJuIDE0OwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNIDogcmV0dXJuIDEzOwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFIDogcmV0dXJuIDE2OwogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfS0FOSkkgICAgIDogcmV0dXJuIDEyOwogICAgICAgIGRlZmF1bHQgOgogICAgICAgICAgdGhyb3cgJ21vZGU6JyArIG1vZGU7CiAgICAgICAgfQoKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyAndHlwZTonICsgdHlwZTsKICAgICAgfQogICAgfTsKCiAgICBfdGhpcy5nZXRMb3N0UG9pbnQgPSBmdW5jdGlvbihxcmNvZGUpIHsKCiAgICAgIHZhciBtb2R1bGVDb3VudCA9IHFyY29kZS5nZXRNb2R1bGVDb3VudCgpOwoKICAgICAgdmFyIGxvc3RQb2ludCA9IDA7CgogICAgICAvLyBMRVZFTDEKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewoKICAgICAgICAgIHZhciBzYW1lQ291bnQgPSAwOwogICAgICAgICAgdmFyIGRhcmsgPSBxcmNvZGUuaXNEYXJrKHJvdywgY29sKTsKCiAgICAgICAgICBmb3IgKHZhciByID0gLTE7IHIgPD0gMTsgciArPSAxKSB7CgogICAgICAgICAgICBpZiAocm93ICsgciA8IDAgfHwgbW9kdWxlQ291bnQgPD0gcm93ICsgcikgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBjID0gLTE7IGMgPD0gMTsgYyArPSAxKSB7CgogICAgICAgICAgICAgIGlmIChjb2wgKyBjIDwgMCB8fCBtb2R1bGVDb3VudCA8PSBjb2wgKyBjKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyID09IDAgJiYgYyA9PSAwKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChkYXJrID09IHFyY29kZS5pc0Rhcmsocm93ICsgciwgY29sICsgYykgKSB7CiAgICAgICAgICAgICAgICBzYW1lQ291bnQgKz0gMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtZUNvdW50ID4gNSkgewogICAgICAgICAgICBsb3N0UG9pbnQgKz0gKDMgKyBzYW1lQ291bnQgLSA1KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyBMRVZFTDIKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50IC0gMTsgcm93ICs9IDEpIHsKICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudCAtIDE7IGNvbCArPSAxKSB7CiAgICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wpICkgY291bnQgKz0gMTsKICAgICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdyArIDEsIGNvbCkgKSBjb3VudCArPSAxOwogICAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyAxKSApIGNvdW50ICs9IDE7CiAgICAgICAgICBpZiAocXJjb2RlLmlzRGFyayhyb3cgKyAxLCBjb2wgKyAxKSApIGNvdW50ICs9IDE7CiAgICAgICAgICBpZiAoY291bnQgPT0gMCB8fCBjb3VudCA9PSA0KSB7CiAgICAgICAgICAgIGxvc3RQb2ludCArPSAzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gTEVWRUwzCgogICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBtb2R1bGVDb3VudDsgcm93ICs9IDEpIHsKICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudCAtIDY7IGNvbCArPSAxKSB7CiAgICAgICAgICBpZiAocXJjb2RlLmlzRGFyayhyb3csIGNvbCkKICAgICAgICAgICAgICAmJiAhcXJjb2RlLmlzRGFyayhyb3csIGNvbCArIDEpCiAgICAgICAgICAgICAgJiYgIHFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyAyKQogICAgICAgICAgICAgICYmICBxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgMykKICAgICAgICAgICAgICAmJiAgcXJjb2RlLmlzRGFyayhyb3csIGNvbCArIDQpCiAgICAgICAgICAgICAgJiYgIXFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyA1KQogICAgICAgICAgICAgICYmICBxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgNikgKSB7CiAgICAgICAgICAgIGxvc3RQb2ludCArPSA0MDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewogICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50IC0gNjsgcm93ICs9IDEpIHsKICAgICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdywgY29sKQogICAgICAgICAgICAgICYmICFxcmNvZGUuaXNEYXJrKHJvdyArIDEsIGNvbCkKICAgICAgICAgICAgICAmJiAgcXJjb2RlLmlzRGFyayhyb3cgKyAyLCBjb2wpCiAgICAgICAgICAgICAgJiYgIHFyY29kZS5pc0Rhcmsocm93ICsgMywgY29sKQogICAgICAgICAgICAgICYmICBxcmNvZGUuaXNEYXJrKHJvdyArIDQsIGNvbCkKICAgICAgICAgICAgICAmJiAhcXJjb2RlLmlzRGFyayhyb3cgKyA1LCBjb2wpCiAgICAgICAgICAgICAgJiYgIHFyY29kZS5pc0Rhcmsocm93ICsgNiwgY29sKSApIHsKICAgICAgICAgICAgbG9zdFBvaW50ICs9IDQwOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gTEVWRUw0CgogICAgICB2YXIgZGFya0NvdW50ID0gMDsKCiAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewogICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wpICkgewogICAgICAgICAgICBkYXJrQ291bnQgKz0gMTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciByYXRpbyA9IE1hdGguYWJzKDEwMCAqIGRhcmtDb3VudCAvIG1vZHVsZUNvdW50IC8gbW9kdWxlQ291bnQgLSA1MCkgLyA1OwogICAgICBsb3N0UG9pbnQgKz0gcmF0aW8gKiAxMDsKCiAgICAgIHJldHVybiBsb3N0UG9pbnQ7CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9KCk7CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gUVJNYXRoCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgdmFyIFFSTWF0aCA9IGZ1bmN0aW9uKCkgewoKICAgIHZhciBFWFBfVEFCTEUgPSBuZXcgQXJyYXkoMjU2KTsKICAgIHZhciBMT0dfVEFCTEUgPSBuZXcgQXJyYXkoMjU2KTsKCiAgICAvLyBpbml0aWFsaXplIHRhYmxlcwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHsKICAgICAgRVhQX1RBQkxFW2ldID0gMSA8PCBpOwogICAgfQogICAgZm9yICh2YXIgaSA9IDg7IGkgPCAyNTY7IGkgKz0gMSkgewogICAgICBFWFBfVEFCTEVbaV0gPSBFWFBfVEFCTEVbaSAtIDRdCiAgICAgICAgXiBFWFBfVEFCTEVbaSAtIDVdCiAgICAgICAgXiBFWFBfVEFCTEVbaSAtIDZdCiAgICAgICAgXiBFWFBfVEFCTEVbaSAtIDhdOwogICAgfQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTU7IGkgKz0gMSkgewogICAgICBMT0dfVEFCTEVbRVhQX1RBQkxFW2ldIF0gPSBpOwogICAgfQoKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIF90aGlzLmdsb2cgPSBmdW5jdGlvbihuKSB7CgogICAgICBpZiAobiA8IDEpIHsKICAgICAgICB0aHJvdyAnZ2xvZygnICsgbiArICcpJzsKICAgICAgfQoKICAgICAgcmV0dXJuIExPR19UQUJMRVtuXTsKICAgIH07CgogICAgX3RoaXMuZ2V4cCA9IGZ1bmN0aW9uKG4pIHsKCiAgICAgIHdoaWxlIChuIDwgMCkgewogICAgICAgIG4gKz0gMjU1OwogICAgICB9CgogICAgICB3aGlsZSAobiA+PSAyNTYpIHsKICAgICAgICBuIC09IDI1NTsKICAgICAgfQoKICAgICAgcmV0dXJuIEVYUF9UQUJMRVtuXTsKICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH0oKTsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBxclBvbHlub21pYWwKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICBmdW5jdGlvbiBxclBvbHlub21pYWwobnVtLCBzaGlmdCkgewoKICAgIGlmICh0eXBlb2YgbnVtLmxlbmd0aCA9PSAndW5kZWZpbmVkJykgewogICAgICB0aHJvdyBudW0ubGVuZ3RoICsgJy8nICsgc2hpZnQ7CiAgICB9CgogICAgdmFyIF9udW0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9mZnNldCA9IDA7CiAgICAgIHdoaWxlIChvZmZzZXQgPCBudW0ubGVuZ3RoICYmIG51bVtvZmZzZXRdID09IDApIHsKICAgICAgICBvZmZzZXQgKz0gMTsKICAgICAgfQogICAgICB2YXIgX251bSA9IG5ldyBBcnJheShudW0ubGVuZ3RoIC0gb2Zmc2V0ICsgc2hpZnQpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGggLSBvZmZzZXQ7IGkgKz0gMSkgewogICAgICAgIF9udW1baV0gPSBudW1baSArIG9mZnNldF07CiAgICAgIH0KICAgICAgcmV0dXJuIF9udW07CiAgICB9KCk7CgogICAgdmFyIF90aGlzID0ge307CgogICAgX3RoaXMuZ2V0QXQgPSBmdW5jdGlvbihpbmRleCkgewogICAgICByZXR1cm4gX251bVtpbmRleF07CiAgICB9OwoKICAgIF90aGlzLmdldExlbmd0aCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX251bS5sZW5ndGg7CiAgICB9OwoKICAgIF90aGlzLm11bHRpcGx5ID0gZnVuY3Rpb24oZSkgewoKICAgICAgdmFyIG51bSA9IG5ldyBBcnJheShfdGhpcy5nZXRMZW5ndGgoKSArIGUuZ2V0TGVuZ3RoKCkgLSAxKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuZ2V0TGVuZ3RoKCk7IGkgKz0gMSkgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZS5nZXRMZW5ndGgoKTsgaiArPSAxKSB7CiAgICAgICAgICBudW1baSArIGpdIF49IFFSTWF0aC5nZXhwKFFSTWF0aC5nbG9nKF90aGlzLmdldEF0KGkpICkgKyBRUk1hdGguZ2xvZyhlLmdldEF0KGopICkgKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBxclBvbHlub21pYWwobnVtLCAwKTsKICAgIH07CgogICAgX3RoaXMubW9kID0gZnVuY3Rpb24oZSkgewoKICAgICAgaWYgKF90aGlzLmdldExlbmd0aCgpIC0gZS5nZXRMZW5ndGgoKSA8IDApIHsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgIH0KCiAgICAgIHZhciByYXRpbyA9IFFSTWF0aC5nbG9nKF90aGlzLmdldEF0KDApICkgLSBRUk1hdGguZ2xvZyhlLmdldEF0KDApICk7CgogICAgICB2YXIgbnVtID0gbmV3IEFycmF5KF90aGlzLmdldExlbmd0aCgpICk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuZ2V0TGVuZ3RoKCk7IGkgKz0gMSkgewogICAgICAgIG51bVtpXSA9IF90aGlzLmdldEF0KGkpOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGUuZ2V0TGVuZ3RoKCk7IGkgKz0gMSkgewogICAgICAgIG51bVtpXSBePSBRUk1hdGguZ2V4cChRUk1hdGguZ2xvZyhlLmdldEF0KGkpICkgKyByYXRpbyk7CiAgICAgIH0KCiAgICAgIC8vIHJlY3Vyc2l2ZSBjYWxsCiAgICAgIHJldHVybiBxclBvbHlub21pYWwobnVtLCAwKS5tb2QoZSk7CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9OwoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFFSUlNCbG9jawogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHZhciBRUlJTQmxvY2sgPSBmdW5jdGlvbigpIHsKCiAgICB2YXIgUlNfQkxPQ0tfVEFCTEUgPSBbCgogICAgICAvLyBMCiAgICAgIC8vIE0KICAgICAgLy8gUQogICAgICAvLyBICgogICAgICAvLyAxCiAgICAgIFsxLCAyNiwgMTldLAogICAgICBbMSwgMjYsIDE2XSwKICAgICAgWzEsIDI2LCAxM10sCiAgICAgIFsxLCAyNiwgOV0sCgogICAgICAvLyAyCiAgICAgIFsxLCA0NCwgMzRdLAogICAgICBbMSwgNDQsIDI4XSwKICAgICAgWzEsIDQ0LCAyMl0sCiAgICAgIFsxLCA0NCwgMTZdLAoKICAgICAgLy8gMwogICAgICBbMSwgNzAsIDU1XSwKICAgICAgWzEsIDcwLCA0NF0sCiAgICAgIFsyLCAzNSwgMTddLAogICAgICBbMiwgMzUsIDEzXSwKCiAgICAgIC8vIDQKICAgICAgWzEsIDEwMCwgODBdLAogICAgICBbMiwgNTAsIDMyXSwKICAgICAgWzIsIDUwLCAyNF0sCiAgICAgIFs0LCAyNSwgOV0sCgogICAgICAvLyA1CiAgICAgIFsxLCAxMzQsIDEwOF0sCiAgICAgIFsyLCA2NywgNDNdLAogICAgICBbMiwgMzMsIDE1LCAyLCAzNCwgMTZdLAogICAgICBbMiwgMzMsIDExLCAyLCAzNCwgMTJdLAoKICAgICAgLy8gNgogICAgICBbMiwgODYsIDY4XSwKICAgICAgWzQsIDQzLCAyN10sCiAgICAgIFs0LCA0MywgMTldLAogICAgICBbNCwgNDMsIDE1XSwKCiAgICAgIC8vIDcKICAgICAgWzIsIDk4LCA3OF0sCiAgICAgIFs0LCA0OSwgMzFdLAogICAgICBbMiwgMzIsIDE0LCA0LCAzMywgMTVdLAogICAgICBbNCwgMzksIDEzLCAxLCA0MCwgMTRdLAoKICAgICAgLy8gOAogICAgICBbMiwgMTIxLCA5N10sCiAgICAgIFsyLCA2MCwgMzgsIDIsIDYxLCAzOV0sCiAgICAgIFs0LCA0MCwgMTgsIDIsIDQxLCAxOV0sCiAgICAgIFs0LCA0MCwgMTQsIDIsIDQxLCAxNV0sCgogICAgICAvLyA5CiAgICAgIFsyLCAxNDYsIDExNl0sCiAgICAgIFszLCA1OCwgMzYsIDIsIDU5LCAzN10sCiAgICAgIFs0LCAzNiwgMTYsIDQsIDM3LCAxN10sCiAgICAgIFs0LCAzNiwgMTIsIDQsIDM3LCAxM10sCgogICAgICAvLyAxMAogICAgICBbMiwgODYsIDY4LCAyLCA4NywgNjldLAogICAgICBbNCwgNjksIDQzLCAxLCA3MCwgNDRdLAogICAgICBbNiwgNDMsIDE5LCAyLCA0NCwgMjBdLAogICAgICBbNiwgNDMsIDE1LCAyLCA0NCwgMTZdLAoKICAgICAgLy8gMTEKICAgICAgWzQsIDEwMSwgODFdLAogICAgICBbMSwgODAsIDUwLCA0LCA4MSwgNTFdLAogICAgICBbNCwgNTAsIDIyLCA0LCA1MSwgMjNdLAogICAgICBbMywgMzYsIDEyLCA4LCAzNywgMTNdLAoKICAgICAgLy8gMTIKICAgICAgWzIsIDExNiwgOTIsIDIsIDExNywgOTNdLAogICAgICBbNiwgNTgsIDM2LCAyLCA1OSwgMzddLAogICAgICBbNCwgNDYsIDIwLCA2LCA0NywgMjFdLAogICAgICBbNywgNDIsIDE0LCA0LCA0MywgMTVdLAoKICAgICAgLy8gMTMKICAgICAgWzQsIDEzMywgMTA3XSwKICAgICAgWzgsIDU5LCAzNywgMSwgNjAsIDM4XSwKICAgICAgWzgsIDQ0LCAyMCwgNCwgNDUsIDIxXSwKICAgICAgWzEyLCAzMywgMTEsIDQsIDM0LCAxMl0sCgogICAgICAvLyAxNAogICAgICBbMywgMTQ1LCAxMTUsIDEsIDE0NiwgMTE2XSwKICAgICAgWzQsIDY0LCA0MCwgNSwgNjUsIDQxXSwKICAgICAgWzExLCAzNiwgMTYsIDUsIDM3LCAxN10sCiAgICAgIFsxMSwgMzYsIDEyLCA1LCAzNywgMTNdLAoKICAgICAgLy8gMTUKICAgICAgWzUsIDEwOSwgODcsIDEsIDExMCwgODhdLAogICAgICBbNSwgNjUsIDQxLCA1LCA2NiwgNDJdLAogICAgICBbNSwgNTQsIDI0LCA3LCA1NSwgMjVdLAogICAgICBbMTEsIDM2LCAxMiwgNywgMzcsIDEzXSwKCiAgICAgIC8vIDE2CiAgICAgIFs1LCAxMjIsIDk4LCAxLCAxMjMsIDk5XSwKICAgICAgWzcsIDczLCA0NSwgMywgNzQsIDQ2XSwKICAgICAgWzE1LCA0MywgMTksIDIsIDQ0LCAyMF0sCiAgICAgIFszLCA0NSwgMTUsIDEzLCA0NiwgMTZdLAoKICAgICAgLy8gMTcKICAgICAgWzEsIDEzNSwgMTA3LCA1LCAxMzYsIDEwOF0sCiAgICAgIFsxMCwgNzQsIDQ2LCAxLCA3NSwgNDddLAogICAgICBbMSwgNTAsIDIyLCAxNSwgNTEsIDIzXSwKICAgICAgWzIsIDQyLCAxNCwgMTcsIDQzLCAxNV0sCgogICAgICAvLyAxOAogICAgICBbNSwgMTUwLCAxMjAsIDEsIDE1MSwgMTIxXSwKICAgICAgWzksIDY5LCA0MywgNCwgNzAsIDQ0XSwKICAgICAgWzE3LCA1MCwgMjIsIDEsIDUxLCAyM10sCiAgICAgIFsyLCA0MiwgMTQsIDE5LCA0MywgMTVdLAoKICAgICAgLy8gMTkKICAgICAgWzMsIDE0MSwgMTEzLCA0LCAxNDIsIDExNF0sCiAgICAgIFszLCA3MCwgNDQsIDExLCA3MSwgNDVdLAogICAgICBbMTcsIDQ3LCAyMSwgNCwgNDgsIDIyXSwKICAgICAgWzksIDM5LCAxMywgMTYsIDQwLCAxNF0sCgogICAgICAvLyAyMAogICAgICBbMywgMTM1LCAxMDcsIDUsIDEzNiwgMTA4XSwKICAgICAgWzMsIDY3LCA0MSwgMTMsIDY4LCA0Ml0sCiAgICAgIFsxNSwgNTQsIDI0LCA1LCA1NSwgMjVdLAogICAgICBbMTUsIDQzLCAxNSwgMTAsIDQ0LCAxNl0sCgogICAgICAvLyAyMQogICAgICBbNCwgMTQ0LCAxMTYsIDQsIDE0NSwgMTE3XSwKICAgICAgWzE3LCA2OCwgNDJdLAogICAgICBbMTcsIDUwLCAyMiwgNiwgNTEsIDIzXSwKICAgICAgWzE5LCA0NiwgMTYsIDYsIDQ3LCAxN10sCgogICAgICAvLyAyMgogICAgICBbMiwgMTM5LCAxMTEsIDcsIDE0MCwgMTEyXSwKICAgICAgWzE3LCA3NCwgNDZdLAogICAgICBbNywgNTQsIDI0LCAxNiwgNTUsIDI1XSwKICAgICAgWzM0LCAzNywgMTNdLAoKICAgICAgLy8gMjMKICAgICAgWzQsIDE1MSwgMTIxLCA1LCAxNTIsIDEyMl0sCiAgICAgIFs0LCA3NSwgNDcsIDE0LCA3NiwgNDhdLAogICAgICBbMTEsIDU0LCAyNCwgMTQsIDU1LCAyNV0sCiAgICAgIFsxNiwgNDUsIDE1LCAxNCwgNDYsIDE2XSwKCiAgICAgIC8vIDI0CiAgICAgIFs2LCAxNDcsIDExNywgNCwgMTQ4LCAxMThdLAogICAgICBbNiwgNzMsIDQ1LCAxNCwgNzQsIDQ2XSwKICAgICAgWzExLCA1NCwgMjQsIDE2LCA1NSwgMjVdLAogICAgICBbMzAsIDQ2LCAxNiwgMiwgNDcsIDE3XSwKCiAgICAgIC8vIDI1CiAgICAgIFs4LCAxMzIsIDEwNiwgNCwgMTMzLCAxMDddLAogICAgICBbOCwgNzUsIDQ3LCAxMywgNzYsIDQ4XSwKICAgICAgWzcsIDU0LCAyNCwgMjIsIDU1LCAyNV0sCiAgICAgIFsyMiwgNDUsIDE1LCAxMywgNDYsIDE2XSwKCiAgICAgIC8vIDI2CiAgICAgIFsxMCwgMTQyLCAxMTQsIDIsIDE0MywgMTE1XSwKICAgICAgWzE5LCA3NCwgNDYsIDQsIDc1LCA0N10sCiAgICAgIFsyOCwgNTAsIDIyLCA2LCA1MSwgMjNdLAogICAgICBbMzMsIDQ2LCAxNiwgNCwgNDcsIDE3XSwKCiAgICAgIC8vIDI3CiAgICAgIFs4LCAxNTIsIDEyMiwgNCwgMTUzLCAxMjNdLAogICAgICBbMjIsIDczLCA0NSwgMywgNzQsIDQ2XSwKICAgICAgWzgsIDUzLCAyMywgMjYsIDU0LCAyNF0sCiAgICAgIFsxMiwgNDUsIDE1LCAyOCwgNDYsIDE2XSwKCiAgICAgIC8vIDI4CiAgICAgIFszLCAxNDcsIDExNywgMTAsIDE0OCwgMTE4XSwKICAgICAgWzMsIDczLCA0NSwgMjMsIDc0LCA0Nl0sCiAgICAgIFs0LCA1NCwgMjQsIDMxLCA1NSwgMjVdLAogICAgICBbMTEsIDQ1LCAxNSwgMzEsIDQ2LCAxNl0sCgogICAgICAvLyAyOQogICAgICBbNywgMTQ2LCAxMTYsIDcsIDE0NywgMTE3XSwKICAgICAgWzIxLCA3MywgNDUsIDcsIDc0LCA0Nl0sCiAgICAgIFsxLCA1MywgMjMsIDM3LCA1NCwgMjRdLAogICAgICBbMTksIDQ1LCAxNSwgMjYsIDQ2LCAxNl0sCgogICAgICAvLyAzMAogICAgICBbNSwgMTQ1LCAxMTUsIDEwLCAxNDYsIDExNl0sCiAgICAgIFsxOSwgNzUsIDQ3LCAxMCwgNzYsIDQ4XSwKICAgICAgWzE1LCA1NCwgMjQsIDI1LCA1NSwgMjVdLAogICAgICBbMjMsIDQ1LCAxNSwgMjUsIDQ2LCAxNl0sCgogICAgICAvLyAzMQogICAgICBbMTMsIDE0NSwgMTE1LCAzLCAxNDYsIDExNl0sCiAgICAgIFsyLCA3NCwgNDYsIDI5LCA3NSwgNDddLAogICAgICBbNDIsIDU0LCAyNCwgMSwgNTUsIDI1XSwKICAgICAgWzIzLCA0NSwgMTUsIDI4LCA0NiwgMTZdLAoKICAgICAgLy8gMzIKICAgICAgWzE3LCAxNDUsIDExNV0sCiAgICAgIFsxMCwgNzQsIDQ2LCAyMywgNzUsIDQ3XSwKICAgICAgWzEwLCA1NCwgMjQsIDM1LCA1NSwgMjVdLAogICAgICBbMTksIDQ1LCAxNSwgMzUsIDQ2LCAxNl0sCgogICAgICAvLyAzMwogICAgICBbMTcsIDE0NSwgMTE1LCAxLCAxNDYsIDExNl0sCiAgICAgIFsxNCwgNzQsIDQ2LCAyMSwgNzUsIDQ3XSwKICAgICAgWzI5LCA1NCwgMjQsIDE5LCA1NSwgMjVdLAogICAgICBbMTEsIDQ1LCAxNSwgNDYsIDQ2LCAxNl0sCgogICAgICAvLyAzNAogICAgICBbMTMsIDE0NSwgMTE1LCA2LCAxNDYsIDExNl0sCiAgICAgIFsxNCwgNzQsIDQ2LCAyMywgNzUsIDQ3XSwKICAgICAgWzQ0LCA1NCwgMjQsIDcsIDU1LCAyNV0sCiAgICAgIFs1OSwgNDYsIDE2LCAxLCA0NywgMTddLAoKICAgICAgLy8gMzUKICAgICAgWzEyLCAxNTEsIDEyMSwgNywgMTUyLCAxMjJdLAogICAgICBbMTIsIDc1LCA0NywgMjYsIDc2LCA0OF0sCiAgICAgIFszOSwgNTQsIDI0LCAxNCwgNTUsIDI1XSwKICAgICAgWzIyLCA0NSwgMTUsIDQxLCA0NiwgMTZdLAoKICAgICAgLy8gMzYKICAgICAgWzYsIDE1MSwgMTIxLCAxNCwgMTUyLCAxMjJdLAogICAgICBbNiwgNzUsIDQ3LCAzNCwgNzYsIDQ4XSwKICAgICAgWzQ2LCA1NCwgMjQsIDEwLCA1NSwgMjVdLAogICAgICBbMiwgNDUsIDE1LCA2NCwgNDYsIDE2XSwKCiAgICAgIC8vIDM3CiAgICAgIFsxNywgMTUyLCAxMjIsIDQsIDE1MywgMTIzXSwKICAgICAgWzI5LCA3NCwgNDYsIDE0LCA3NSwgNDddLAogICAgICBbNDksIDU0LCAyNCwgMTAsIDU1LCAyNV0sCiAgICAgIFsyNCwgNDUsIDE1LCA0NiwgNDYsIDE2XSwKCiAgICAgIC8vIDM4CiAgICAgIFs0LCAxNTIsIDEyMiwgMTgsIDE1MywgMTIzXSwKICAgICAgWzEzLCA3NCwgNDYsIDMyLCA3NSwgNDddLAogICAgICBbNDgsIDU0LCAyNCwgMTQsIDU1LCAyNV0sCiAgICAgIFs0MiwgNDUsIDE1LCAzMiwgNDYsIDE2XSwKCiAgICAgIC8vIDM5CiAgICAgIFsyMCwgMTQ3LCAxMTcsIDQsIDE0OCwgMTE4XSwKICAgICAgWzQwLCA3NSwgNDcsIDcsIDc2LCA0OF0sCiAgICAgIFs0MywgNTQsIDI0LCAyMiwgNTUsIDI1XSwKICAgICAgWzEwLCA0NSwgMTUsIDY3LCA0NiwgMTZdLAoKICAgICAgLy8gNDAKICAgICAgWzE5LCAxNDgsIDExOCwgNiwgMTQ5LCAxMTldLAogICAgICBbMTgsIDc1LCA0NywgMzEsIDc2LCA0OF0sCiAgICAgIFszNCwgNTQsIDI0LCAzNCwgNTUsIDI1XSwKICAgICAgWzIwLCA0NSwgMTUsIDYxLCA0NiwgMTZdCiAgICBdOwoKICAgIHZhciBxclJTQmxvY2sgPSBmdW5jdGlvbih0b3RhbENvdW50LCBkYXRhQ291bnQpIHsKICAgICAgdmFyIF90aGlzID0ge307CiAgICAgIF90aGlzLnRvdGFsQ291bnQgPSB0b3RhbENvdW50OwogICAgICBfdGhpcy5kYXRhQ291bnQgPSBkYXRhQ291bnQ7CiAgICAgIHJldHVybiBfdGhpczsKICAgIH07CgogICAgdmFyIF90aGlzID0ge307CgogICAgdmFyIGdldFJzQmxvY2tUYWJsZSA9IGZ1bmN0aW9uKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdGlvbkxldmVsKSB7CgogICAgICBzd2l0Y2goZXJyb3JDb3JyZWN0aW9uTGV2ZWwpIHsKICAgICAgY2FzZSBRUkVycm9yQ29ycmVjdGlvbkxldmVsLkwgOgogICAgICAgIHJldHVybiBSU19CTE9DS19UQUJMRVsodHlwZU51bWJlciAtIDEpICogNCArIDBdOwogICAgICBjYXNlIFFSRXJyb3JDb3JyZWN0aW9uTGV2ZWwuTSA6CiAgICAgICAgcmV0dXJuIFJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyIC0gMSkgKiA0ICsgMV07CiAgICAgIGNhc2UgUVJFcnJvckNvcnJlY3Rpb25MZXZlbC5RIDoKICAgICAgICByZXR1cm4gUlNfQkxPQ0tfVEFCTEVbKHR5cGVOdW1iZXIgLSAxKSAqIDQgKyAyXTsKICAgICAgY2FzZSBRUkVycm9yQ29ycmVjdGlvbkxldmVsLkggOgogICAgICAgIHJldHVybiBSU19CTE9DS19UQUJMRVsodHlwZU51bWJlciAtIDEpICogNCArIDNdOwogICAgICBkZWZhdWx0IDoKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLmdldFJTQmxvY2tzID0gZnVuY3Rpb24odHlwZU51bWJlciwgZXJyb3JDb3JyZWN0aW9uTGV2ZWwpIHsKCiAgICAgIHZhciByc0Jsb2NrID0gZ2V0UnNCbG9ja1RhYmxlKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdGlvbkxldmVsKTsKCiAgICAgIGlmICh0eXBlb2YgcnNCbG9jayA9PSAndW5kZWZpbmVkJykgewogICAgICAgIHRocm93ICdiYWQgcnMgYmxvY2sgQCB0eXBlTnVtYmVyOicgKyB0eXBlTnVtYmVyICsKICAgICAgICAgICAgJy9lcnJvckNvcnJlY3Rpb25MZXZlbDonICsgZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CiAgICAgIH0KCiAgICAgIHZhciBsZW5ndGggPSByc0Jsb2NrLmxlbmd0aCAvIDM7CgogICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewoKICAgICAgICB2YXIgY291bnQgPSByc0Jsb2NrW2kgKiAzICsgMF07CiAgICAgICAgdmFyIHRvdGFsQ291bnQgPSByc0Jsb2NrW2kgKiAzICsgMV07CiAgICAgICAgdmFyIGRhdGFDb3VudCA9IHJzQmxvY2tbaSAqIDMgKyAyXTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb3VudDsgaiArPSAxKSB7CiAgICAgICAgICBsaXN0LnB1c2gocXJSU0Jsb2NrKHRvdGFsQ291bnQsIGRhdGFDb3VudCkgKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBsaXN0OwogICAgfTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfSgpOwoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIHFyQml0QnVmZmVyCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgdmFyIHFyQml0QnVmZmVyID0gZnVuY3Rpb24oKSB7CgogICAgdmFyIF9idWZmZXIgPSBbXTsKICAgIHZhciBfbGVuZ3RoID0gMDsKCiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICBfdGhpcy5nZXRCdWZmZXIgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF9idWZmZXI7CiAgICB9OwoKICAgIF90aGlzLmdldEF0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICAgICAgdmFyIGJ1ZkluZGV4ID0gTWF0aC5mbG9vcihpbmRleCAvIDgpOwogICAgICByZXR1cm4gKCAoX2J1ZmZlcltidWZJbmRleF0gPj4+ICg3IC0gaW5kZXggJSA4KSApICYgMSkgPT0gMTsKICAgIH07CgogICAgX3RoaXMucHV0ID0gZnVuY3Rpb24obnVtLCBsZW5ndGgpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgICAgIF90aGlzLnB1dEJpdCggKCAobnVtID4+PiAobGVuZ3RoIC0gaSAtIDEpICkgJiAxKSA9PSAxKTsKICAgICAgfQogICAgfTsKCiAgICBfdGhpcy5nZXRMZW5ndGhJbkJpdHMgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF9sZW5ndGg7CiAgICB9OwoKICAgIF90aGlzLnB1dEJpdCA9IGZ1bmN0aW9uKGJpdCkgewoKICAgICAgdmFyIGJ1ZkluZGV4ID0gTWF0aC5mbG9vcihfbGVuZ3RoIC8gOCk7CiAgICAgIGlmIChfYnVmZmVyLmxlbmd0aCA8PSBidWZJbmRleCkgewogICAgICAgIF9idWZmZXIucHVzaCgwKTsKICAgICAgfQoKICAgICAgaWYgKGJpdCkgewogICAgICAgIF9idWZmZXJbYnVmSW5kZXhdIHw9ICgweDgwID4+PiAoX2xlbmd0aCAlIDgpICk7CiAgICAgIH0KCiAgICAgIF9sZW5ndGggKz0gMTsKICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gcXJOdW1iZXIKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICB2YXIgcXJOdW1iZXIgPSBmdW5jdGlvbihkYXRhKSB7CgogICAgdmFyIF9tb2RlID0gUVJNb2RlLk1PREVfTlVNQkVSOwogICAgdmFyIF9kYXRhID0gZGF0YTsKCiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICBfdGhpcy5nZXRNb2RlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfbW9kZTsKICAgIH07CgogICAgX3RoaXMuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgICAgIHJldHVybiBfZGF0YS5sZW5ndGg7CiAgICB9OwoKICAgIF90aGlzLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7CgogICAgICB2YXIgZGF0YSA9IF9kYXRhOwoKICAgICAgdmFyIGkgPSAwOwoKICAgICAgd2hpbGUgKGkgKyAyIDwgZGF0YS5sZW5ndGgpIHsKICAgICAgICBidWZmZXIucHV0KHN0clRvTnVtKGRhdGEuc3Vic3RyaW5nKGksIGkgKyAzKSApLCAxMCk7CiAgICAgICAgaSArPSAzOwogICAgICB9CgogICAgICBpZiAoaSA8IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaWYgKGRhdGEubGVuZ3RoIC0gaSA9PSAxKSB7CiAgICAgICAgICBidWZmZXIucHV0KHN0clRvTnVtKGRhdGEuc3Vic3RyaW5nKGksIGkgKyAxKSApLCA0KTsKICAgICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoIC0gaSA9PSAyKSB7CiAgICAgICAgICBidWZmZXIucHV0KHN0clRvTnVtKGRhdGEuc3Vic3RyaW5nKGksIGkgKyAyKSApLCA3KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgdmFyIHN0clRvTnVtID0gZnVuY3Rpb24ocykgewogICAgICB2YXIgbnVtID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgbnVtID0gbnVtICogMTAgKyBjaGF0VG9OdW0ocy5jaGFyQXQoaSkgKTsKICAgICAgfQogICAgICByZXR1cm4gbnVtOwogICAgfTsKCiAgICB2YXIgY2hhdFRvTnVtID0gZnVuY3Rpb24oYykgewogICAgICBpZiAoJzAnIDw9IGMgJiYgYyA8PSAnOScpIHsKICAgICAgICByZXR1cm4gYy5jaGFyQ29kZUF0KDApIC0gJzAnLmNoYXJDb2RlQXQoMCk7CiAgICAgIH0KICAgICAgdGhyb3cgJ2lsbGVnYWwgY2hhciA6JyArIGM7CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9OwoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIHFyQWxwaGFOdW0KICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICB2YXIgcXJBbHBoYU51bSA9IGZ1bmN0aW9uKGRhdGEpIHsKCiAgICB2YXIgX21vZGUgPSBRUk1vZGUuTU9ERV9BTFBIQV9OVU07CiAgICB2YXIgX2RhdGEgPSBkYXRhOwoKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIF90aGlzLmdldE1vZGUgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF9tb2RlOwogICAgfTsKCiAgICBfdGhpcy5nZXRMZW5ndGggPSBmdW5jdGlvbihidWZmZXIpIHsKICAgICAgcmV0dXJuIF9kYXRhLmxlbmd0aDsKICAgIH07CgogICAgX3RoaXMud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHsKCiAgICAgIHZhciBzID0gX2RhdGE7CgogICAgICB2YXIgaSA9IDA7CgogICAgICB3aGlsZSAoaSArIDEgPCBzLmxlbmd0aCkgewogICAgICAgIGJ1ZmZlci5wdXQoCiAgICAgICAgICBnZXRDb2RlKHMuY2hhckF0KGkpICkgKiA0NSArCiAgICAgICAgICBnZXRDb2RlKHMuY2hhckF0KGkgKyAxKSApLCAxMSk7CiAgICAgICAgaSArPSAyOwogICAgICB9CgogICAgICBpZiAoaSA8IHMubGVuZ3RoKSB7CiAgICAgICAgYnVmZmVyLnB1dChnZXRDb2RlKHMuY2hhckF0KGkpICksIDYpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBnZXRDb2RlID0gZnVuY3Rpb24oYykgewoKICAgICAgaWYgKCcwJyA8PSBjICYmIGMgPD0gJzknKSB7CiAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgwKSAtICcwJy5jaGFyQ29kZUF0KDApOwogICAgICB9IGVsc2UgaWYgKCdBJyA8PSBjICYmIGMgPD0gJ1onKSB7CiAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgwKSAtICdBJy5jaGFyQ29kZUF0KDApICsgMTA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgY2FzZSAnICcgOiByZXR1cm4gMzY7CiAgICAgICAgY2FzZSAnJCcgOiByZXR1cm4gMzc7CiAgICAgICAgY2FzZSAnJScgOiByZXR1cm4gMzg7CiAgICAgICAgY2FzZSAnKicgOiByZXR1cm4gMzk7CiAgICAgICAgY2FzZSAnKycgOiByZXR1cm4gNDA7CiAgICAgICAgY2FzZSAnLScgOiByZXR1cm4gNDE7CiAgICAgICAgY2FzZSAnLicgOiByZXR1cm4gNDI7CiAgICAgICAgY2FzZSAnLycgOiByZXR1cm4gNDM7CiAgICAgICAgY2FzZSAnOicgOiByZXR1cm4gNDQ7CiAgICAgICAgZGVmYXVsdCA6CiAgICAgICAgICB0aHJvdyAnaWxsZWdhbCBjaGFyIDonICsgYzsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gcXI4Qml0Qnl0ZQogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHZhciBxcjhCaXRCeXRlID0gZnVuY3Rpb24oZGF0YSkgewoKICAgIHZhciBfbW9kZSA9IFFSTW9kZS5NT0RFXzhCSVRfQllURTsKICAgIHZhciBfZGF0YSA9IGRhdGE7CiAgICB2YXIgX2J5dGVzID0gcXJjb2RlLnN0cmluZ1RvQnl0ZXMoZGF0YSk7CgogICAgdmFyIF90aGlzID0ge307CgogICAgX3RoaXMuZ2V0TW9kZSA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX21vZGU7CiAgICB9OwoKICAgIF90aGlzLmdldExlbmd0aCA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgICByZXR1cm4gX2J5dGVzLmxlbmd0aDsKICAgIH07CgogICAgX3RoaXMud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfYnl0ZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBidWZmZXIucHV0KF9ieXRlc1tpXSwgOCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gcXJLYW5qaQogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHZhciBxckthbmppID0gZnVuY3Rpb24oZGF0YSkgewoKICAgIHZhciBfbW9kZSA9IFFSTW9kZS5NT0RFX0tBTkpJOwogICAgdmFyIF9kYXRhID0gZGF0YTsKCiAgICB2YXIgc3RyaW5nVG9CeXRlcyA9IHFyY29kZS5zdHJpbmdUb0J5dGVzRnVuY3NbJ1NKSVMnXTsKICAgIGlmICghc3RyaW5nVG9CeXRlcykgewogICAgICB0aHJvdyAnc2ppcyBub3Qgc3VwcG9ydGVkLic7CiAgICB9CiAgICAhZnVuY3Rpb24oYywgY29kZSkgewogICAgICAvLyBzZWxmIHRlc3QgZm9yIHNqaXMgc3VwcG9ydC4KICAgICAgdmFyIHRlc3QgPSBzdHJpbmdUb0J5dGVzKGMpOwogICAgICBpZiAodGVzdC5sZW5ndGggIT0gMiB8fCAoICh0ZXN0WzBdIDw8IDgpIHwgdGVzdFsxXSkgIT0gY29kZSkgewogICAgICAgIHRocm93ICdzamlzIG5vdCBzdXBwb3J0ZWQuJzsKICAgICAgfQogICAgfSgnXHU1M2NiJywgMHg5NzQ2KTsKCiAgICB2YXIgX2J5dGVzID0gc3RyaW5nVG9CeXRlcyhkYXRhKTsKCiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICBfdGhpcy5nZXRNb2RlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfbW9kZTsKICAgIH07CgogICAgX3RoaXMuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgICAgIHJldHVybiB+fihfYnl0ZXMubGVuZ3RoIC8gMik7CiAgICB9OwoKICAgIF90aGlzLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7CgogICAgICB2YXIgZGF0YSA9IF9ieXRlczsKCiAgICAgIHZhciBpID0gMDsKCiAgICAgIHdoaWxlIChpICsgMSA8IGRhdGEubGVuZ3RoKSB7CgogICAgICAgIHZhciBjID0gKCAoMHhmZiAmIGRhdGFbaV0pIDw8IDgpIHwgKDB4ZmYgJiBkYXRhW2kgKyAxXSk7CgogICAgICAgIGlmICgweDgxNDAgPD0gYyAmJiBjIDw9IDB4OUZGQykgewogICAgICAgICAgYyAtPSAweDgxNDA7CiAgICAgICAgfSBlbHNlIGlmICgweEUwNDAgPD0gYyAmJiBjIDw9IDB4RUJCRikgewogICAgICAgICAgYyAtPSAweEMxNDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93ICdpbGxlZ2FsIGNoYXIgYXQgJyArIChpICsgMSkgKyAnLycgKyBjOwogICAgICAgIH0KCiAgICAgICAgYyA9ICggKGMgPj4+IDgpICYgMHhmZikgKiAweEMwICsgKGMgJiAweGZmKTsKCiAgICAgICAgYnVmZmVyLnB1dChjLCAxMyk7CgogICAgICAgIGkgKz0gMjsKICAgICAgfQoKICAgICAgaWYgKGkgPCBkYXRhLmxlbmd0aCkgewogICAgICAgIHRocm93ICdpbGxlZ2FsIGNoYXIgYXQgJyArIChpICsgMSk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH07CgogIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgLy8gR0lGIFN1cHBvcnQgZXRjLgogIC8vCgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gYnl0ZUFycmF5T3V0cHV0U3RyZWFtCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgdmFyIGJ5dGVBcnJheU91dHB1dFN0cmVhbSA9IGZ1bmN0aW9uKCkgewoKICAgIHZhciBfYnl0ZXMgPSBbXTsKCiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICBfdGhpcy53cml0ZUJ5dGUgPSBmdW5jdGlvbihiKSB7CiAgICAgIF9ieXRlcy5wdXNoKGIgJiAweGZmKTsKICAgIH07CgogICAgX3RoaXMud3JpdGVTaG9ydCA9IGZ1bmN0aW9uKGkpIHsKICAgICAgX3RoaXMud3JpdGVCeXRlKGkpOwogICAgICBfdGhpcy53cml0ZUJ5dGUoaSA+Pj4gOCk7CiAgICB9OwoKICAgIF90aGlzLndyaXRlQnl0ZXMgPSBmdW5jdGlvbihiLCBvZmYsIGxlbikgewogICAgICBvZmYgPSBvZmYgfHwgMDsKICAgICAgbGVuID0gbGVuIHx8IGIubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7CiAgICAgICAgX3RoaXMud3JpdGVCeXRlKGJbaSArIG9mZl0pOwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLndyaXRlU3RyaW5nID0gZnVuY3Rpb24ocykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBfdGhpcy53cml0ZUJ5dGUocy5jaGFyQ29kZUF0KGkpICk7CiAgICAgIH0KICAgIH07CgogICAgX3RoaXMudG9CeXRlQXJyYXkgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF9ieXRlczsKICAgIH07CgogICAgX3RoaXMudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHMgPSAnJzsKICAgICAgcyArPSAnWyc7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2J5dGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICBzICs9ICcsJzsKICAgICAgICB9CiAgICAgICAgcyArPSBfYnl0ZXNbaV07CiAgICAgIH0KICAgICAgcyArPSAnXSc7CiAgICAgIHJldHVybiBzOwogICAgfTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfTsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBiYXNlNjRFbmNvZGVPdXRwdXRTdHJlYW0KICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICB2YXIgYmFzZTY0RW5jb2RlT3V0cHV0U3RyZWFtID0gZnVuY3Rpb24oKSB7CgogICAgdmFyIF9idWZmZXIgPSAwOwogICAgdmFyIF9idWZsZW4gPSAwOwogICAgdmFyIF9sZW5ndGggPSAwOwogICAgdmFyIF9iYXNlNjQgPSAnJzsKCiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICB2YXIgd3JpdGVFbmNvZGVkID0gZnVuY3Rpb24oYikgewogICAgICBfYmFzZTY0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZW5jb2RlKGIgJiAweDNmKSApOwogICAgfTsKCiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24obikgewogICAgICBpZiAobiA8IDApIHsKICAgICAgICAvLyBlcnJvci4KICAgICAgfSBlbHNlIGlmIChuIDwgMjYpIHsKICAgICAgICByZXR1cm4gMHg0MSArIG47CiAgICAgIH0gZWxzZSBpZiAobiA8IDUyKSB7CiAgICAgICAgcmV0dXJuIDB4NjEgKyAobiAtIDI2KTsKICAgICAgfSBlbHNlIGlmIChuIDwgNjIpIHsKICAgICAgICByZXR1cm4gMHgzMCArIChuIC0gNTIpOwogICAgICB9IGVsc2UgaWYgKG4gPT0gNjIpIHsKICAgICAgICByZXR1cm4gMHgyYjsKICAgICAgfSBlbHNlIGlmIChuID09IDYzKSB7CiAgICAgICAgcmV0dXJuIDB4MmY7CiAgICAgIH0KICAgICAgdGhyb3cgJ246JyArIG47CiAgICB9OwoKICAgIF90aGlzLndyaXRlQnl0ZSA9IGZ1bmN0aW9uKG4pIHsKCiAgICAgIF9idWZmZXIgPSAoX2J1ZmZlciA8PCA4KSB8IChuICYgMHhmZik7CiAgICAgIF9idWZsZW4gKz0gODsKICAgICAgX2xlbmd0aCArPSAxOwoKICAgICAgd2hpbGUgKF9idWZsZW4gPj0gNikgewogICAgICAgIHdyaXRlRW5jb2RlZChfYnVmZmVyID4+PiAoX2J1ZmxlbiAtIDYpICk7CiAgICAgICAgX2J1ZmxlbiAtPSA2OwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLmZsdXNoID0gZnVuY3Rpb24oKSB7CgogICAgICBpZiAoX2J1ZmxlbiA+IDApIHsKICAgICAgICB3cml0ZUVuY29kZWQoX2J1ZmZlciA8PCAoNiAtIF9idWZsZW4pICk7CiAgICAgICAgX2J1ZmZlciA9IDA7CiAgICAgICAgX2J1ZmxlbiA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChfbGVuZ3RoICUgMyAhPSAwKSB7CiAgICAgICAgLy8gcGFkZGluZwogICAgICAgIHZhciBwYWRsZW4gPSAzIC0gX2xlbmd0aCAlIDM7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWRsZW47IGkgKz0gMSkgewogICAgICAgICAgX2Jhc2U2NCArPSAnPSc7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIF90aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfYmFzZTY0OwogICAgfTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfTsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBiYXNlNjREZWNvZGVJbnB1dFN0cmVhbQogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHZhciBiYXNlNjREZWNvZGVJbnB1dFN0cmVhbSA9IGZ1bmN0aW9uKHN0cikgewoKICAgIHZhciBfc3RyID0gc3RyOwogICAgdmFyIF9wb3MgPSAwOwogICAgdmFyIF9idWZmZXIgPSAwOwogICAgdmFyIF9idWZsZW4gPSAwOwoKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIF90aGlzLnJlYWQgPSBmdW5jdGlvbigpIHsKCiAgICAgIHdoaWxlIChfYnVmbGVuIDwgOCkgewoKICAgICAgICBpZiAoX3BvcyA+PSBfc3RyLmxlbmd0aCkgewogICAgICAgICAgaWYgKF9idWZsZW4gPT0gMCkgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICB9CiAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBlbmQgb2YgZmlsZS4vJyArIF9idWZsZW47CiAgICAgICAgfQoKICAgICAgICB2YXIgYyA9IF9zdHIuY2hhckF0KF9wb3MpOwogICAgICAgIF9wb3MgKz0gMTsKCiAgICAgICAgaWYgKGMgPT0gJz0nKSB7CiAgICAgICAgICBfYnVmbGVuID0gMDsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9IGVsc2UgaWYgKGMubWF0Y2goL15ccyQvKSApIHsKICAgICAgICAgIC8vIGlnbm9yZSBpZiB3aGl0ZXNwYWNlLgogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBfYnVmZmVyID0gKF9idWZmZXIgPDwgNikgfCBkZWNvZGUoYy5jaGFyQ29kZUF0KDApICk7CiAgICAgICAgX2J1ZmxlbiArPSA2OwogICAgICB9CgogICAgICB2YXIgbiA9IChfYnVmZmVyID4+PiAoX2J1ZmxlbiAtIDgpICkgJiAweGZmOwogICAgICBfYnVmbGVuIC09IDg7CiAgICAgIHJldHVybiBuOwogICAgfTsKCiAgICB2YXIgZGVjb2RlID0gZnVuY3Rpb24oYykgewogICAgICBpZiAoMHg0MSA8PSBjICYmIGMgPD0gMHg1YSkgewogICAgICAgIHJldHVybiBjIC0gMHg0MTsKICAgICAgfSBlbHNlIGlmICgweDYxIDw9IGMgJiYgYyA8PSAweDdhKSB7CiAgICAgICAgcmV0dXJuIGMgLSAweDYxICsgMjY7CiAgICAgIH0gZWxzZSBpZiAoMHgzMCA8PSBjICYmIGMgPD0gMHgzOSkgewogICAgICAgIHJldHVybiBjIC0gMHgzMCArIDUyOwogICAgICB9IGVsc2UgaWYgKGMgPT0gMHgyYikgewogICAgICAgIHJldHVybiA2MjsKICAgICAgfSBlbHNlIGlmIChjID09IDB4MmYpIHsKICAgICAgICByZXR1cm4gNjM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgJ2M6JyArIGM7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH07CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gZ2lmSW1hZ2UgKEIvVykKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICB2YXIgZ2lmSW1hZ2UgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7CgogICAgdmFyIF93aWR0aCA9IHdpZHRoOwogICAgdmFyIF9oZWlnaHQgPSBoZWlnaHQ7CiAgICB2YXIgX2RhdGEgPSBuZXcgQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIF90aGlzLnNldFBpeGVsID0gZnVuY3Rpb24oeCwgeSwgcGl4ZWwpIHsKICAgICAgX2RhdGFbeSAqIF93aWR0aCArIHhdID0gcGl4ZWw7CiAgICB9OwoKICAgIF90aGlzLndyaXRlID0gZnVuY3Rpb24ob3V0KSB7CgogICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyBHSUYgU2lnbmF0dXJlCgogICAgICBvdXQud3JpdGVTdHJpbmcoJ0dJRjg3YScpOwoKICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gU2NyZWVuIERlc2NyaXB0b3IKCiAgICAgIG91dC53cml0ZVNob3J0KF93aWR0aCk7CiAgICAgIG91dC53cml0ZVNob3J0KF9oZWlnaHQpOwoKICAgICAgb3V0LndyaXRlQnl0ZSgweDgwKTsgLy8gMmJpdAogICAgICBvdXQud3JpdGVCeXRlKDApOwogICAgICBvdXQud3JpdGVCeXRlKDApOwoKICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gR2xvYmFsIENvbG9yIE1hcAoKICAgICAgLy8gYmxhY2sKICAgICAgb3V0LndyaXRlQnl0ZSgweDAwKTsKICAgICAgb3V0LndyaXRlQnl0ZSgweDAwKTsKICAgICAgb3V0LndyaXRlQnl0ZSgweDAwKTsKCiAgICAgIC8vIHdoaXRlCiAgICAgIG91dC53cml0ZUJ5dGUoMHhmZik7CiAgICAgIG91dC53cml0ZUJ5dGUoMHhmZik7CiAgICAgIG91dC53cml0ZUJ5dGUoMHhmZik7CgogICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyBJbWFnZSBEZXNjcmlwdG9yCgogICAgICBvdXQud3JpdGVTdHJpbmcoJywnKTsKICAgICAgb3V0LndyaXRlU2hvcnQoMCk7CiAgICAgIG91dC53cml0ZVNob3J0KDApOwogICAgICBvdXQud3JpdGVTaG9ydChfd2lkdGgpOwogICAgICBvdXQud3JpdGVTaG9ydChfaGVpZ2h0KTsKICAgICAgb3V0LndyaXRlQnl0ZSgwKTsKCiAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgIC8vIExvY2FsIENvbG9yIE1hcAoKICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gUmFzdGVyIERhdGEKCiAgICAgIHZhciBsendNaW5Db2RlU2l6ZSA9IDI7CiAgICAgIHZhciByYXN0ZXIgPSBnZXRMWldSYXN0ZXIobHp3TWluQ29kZVNpemUpOwoKICAgICAgb3V0LndyaXRlQnl0ZShsendNaW5Db2RlU2l6ZSk7CgogICAgICB2YXIgb2Zmc2V0ID0gMDsKCiAgICAgIHdoaWxlIChyYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0ID4gMjU1KSB7CiAgICAgICAgb3V0LndyaXRlQnl0ZSgyNTUpOwogICAgICAgIG91dC53cml0ZUJ5dGVzKHJhc3Rlciwgb2Zmc2V0LCAyNTUpOwogICAgICAgIG9mZnNldCArPSAyNTU7CiAgICAgIH0KCiAgICAgIG91dC53cml0ZUJ5dGUocmFzdGVyLmxlbmd0aCAtIG9mZnNldCk7CiAgICAgIG91dC53cml0ZUJ5dGVzKHJhc3Rlciwgb2Zmc2V0LCByYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0KTsKICAgICAgb3V0LndyaXRlQnl0ZSgweDAwKTsKCiAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgIC8vIEdJRiBUZXJtaW5hdG9yCiAgICAgIG91dC53cml0ZVN0cmluZygnOycpOwogICAgfTsKCiAgICB2YXIgYml0T3V0cHV0U3RyZWFtID0gZnVuY3Rpb24ob3V0KSB7CgogICAgICB2YXIgX291dCA9IG91dDsKICAgICAgdmFyIF9iaXRMZW5ndGggPSAwOwogICAgICB2YXIgX2JpdEJ1ZmZlciA9IDA7CgogICAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICAgIF90aGlzLndyaXRlID0gZnVuY3Rpb24oZGF0YSwgbGVuZ3RoKSB7CgogICAgICAgIGlmICggKGRhdGEgPj4+IGxlbmd0aCkgIT0gMCkgewogICAgICAgICAgdGhyb3cgJ2xlbmd0aCBvdmVyJzsKICAgICAgICB9CgogICAgICAgIHdoaWxlIChfYml0TGVuZ3RoICsgbGVuZ3RoID49IDgpIHsKICAgICAgICAgIF9vdXQud3JpdGVCeXRlKDB4ZmYgJiAoIChkYXRhIDw8IF9iaXRMZW5ndGgpIHwgX2JpdEJ1ZmZlcikgKTsKICAgICAgICAgIGxlbmd0aCAtPSAoOCAtIF9iaXRMZW5ndGgpOwogICAgICAgICAgZGF0YSA+Pj49ICg4IC0gX2JpdExlbmd0aCk7CiAgICAgICAgICBfYml0QnVmZmVyID0gMDsKICAgICAgICAgIF9iaXRMZW5ndGggPSAwOwogICAgICAgIH0KCiAgICAgICAgX2JpdEJ1ZmZlciA9IChkYXRhIDw8IF9iaXRMZW5ndGgpIHwgX2JpdEJ1ZmZlcjsKICAgICAgICBfYml0TGVuZ3RoID0gX2JpdExlbmd0aCArIGxlbmd0aDsKICAgICAgfTsKCiAgICAgIF90aGlzLmZsdXNoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKF9iaXRMZW5ndGggPiAwKSB7CiAgICAgICAgICBfb3V0LndyaXRlQnl0ZShfYml0QnVmZmVyKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZXR1cm4gX3RoaXM7CiAgICB9OwoKICAgIHZhciBnZXRMWldSYXN0ZXIgPSBmdW5jdGlvbihsendNaW5Db2RlU2l6ZSkgewoKICAgICAgdmFyIGNsZWFyQ29kZSA9IDEgPDwgbHp3TWluQ29kZVNpemU7CiAgICAgIHZhciBlbmRDb2RlID0gKDEgPDwgbHp3TWluQ29kZVNpemUpICsgMTsKICAgICAgdmFyIGJpdExlbmd0aCA9IGx6d01pbkNvZGVTaXplICsgMTsKCiAgICAgIC8vIFNldHVwIExaV1RhYmxlCiAgICAgIHZhciB0YWJsZSA9IGx6d1RhYmxlKCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsZWFyQ29kZTsgaSArPSAxKSB7CiAgICAgICAgdGFibGUuYWRkKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkgKTsKICAgICAgfQogICAgICB0YWJsZS5hZGQoU3RyaW5nLmZyb21DaGFyQ29kZShjbGVhckNvZGUpICk7CiAgICAgIHRhYmxlLmFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGVuZENvZGUpICk7CgogICAgICB2YXIgYnl0ZU91dCA9IGJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICB2YXIgYml0T3V0ID0gYml0T3V0cHV0U3RyZWFtKGJ5dGVPdXQpOwoKICAgICAgLy8gY2xlYXIgY29kZQogICAgICBiaXRPdXQud3JpdGUoY2xlYXJDb2RlLCBiaXRMZW5ndGgpOwoKICAgICAgdmFyIGRhdGFJbmRleCA9IDA7CgogICAgICB2YXIgcyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoX2RhdGFbZGF0YUluZGV4XSk7CiAgICAgIGRhdGFJbmRleCArPSAxOwoKICAgICAgd2hpbGUgKGRhdGFJbmRleCA8IF9kYXRhLmxlbmd0aCkgewoKICAgICAgICB2YXIgYyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoX2RhdGFbZGF0YUluZGV4XSk7CiAgICAgICAgZGF0YUluZGV4ICs9IDE7CgogICAgICAgIGlmICh0YWJsZS5jb250YWlucyhzICsgYykgKSB7CgogICAgICAgICAgcyA9IHMgKyBjOwoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIGJpdE91dC53cml0ZSh0YWJsZS5pbmRleE9mKHMpLCBiaXRMZW5ndGgpOwoKICAgICAgICAgIGlmICh0YWJsZS5zaXplKCkgPCAweGZmZikgewoKICAgICAgICAgICAgaWYgKHRhYmxlLnNpemUoKSA9PSAoMSA8PCBiaXRMZW5ndGgpICkgewogICAgICAgICAgICAgIGJpdExlbmd0aCArPSAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0YWJsZS5hZGQocyArIGMpOwogICAgICAgICAgfQoKICAgICAgICAgIHMgPSBjOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYml0T3V0LndyaXRlKHRhYmxlLmluZGV4T2YocyksIGJpdExlbmd0aCk7CgogICAgICAvLyBlbmQgY29kZQogICAgICBiaXRPdXQud3JpdGUoZW5kQ29kZSwgYml0TGVuZ3RoKTsKCiAgICAgIGJpdE91dC5mbHVzaCgpOwoKICAgICAgcmV0dXJuIGJ5dGVPdXQudG9CeXRlQXJyYXkoKTsKICAgIH07CgogICAgdmFyIGx6d1RhYmxlID0gZnVuY3Rpb24oKSB7CgogICAgICB2YXIgX21hcCA9IHt9OwogICAgICB2YXIgX3NpemUgPSAwOwoKICAgICAgdmFyIF90aGlzID0ge307CgogICAgICBfdGhpcy5hZGQgPSBmdW5jdGlvbihrZXkpIHsKICAgICAgICBpZiAoX3RoaXMuY29udGFpbnMoa2V5KSApIHsKICAgICAgICAgIHRocm93ICdkdXAga2V5OicgKyBrZXk7CiAgICAgICAgfQogICAgICAgIF9tYXBba2V5XSA9IF9zaXplOwogICAgICAgIF9zaXplICs9IDE7CiAgICAgIH07CgogICAgICBfdGhpcy5zaXplID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIF9zaXplOwogICAgICB9OwoKICAgICAgX3RoaXMuaW5kZXhPZiA9IGZ1bmN0aW9uKGtleSkgewogICAgICAgIHJldHVybiBfbWFwW2tleV07CiAgICAgIH07CgogICAgICBfdGhpcy5jb250YWlucyA9IGZ1bmN0aW9uKGtleSkgewogICAgICAgIHJldHVybiB0eXBlb2YgX21hcFtrZXldICE9ICd1bmRlZmluZWQnOwogICAgICB9OwoKICAgICAgcmV0dXJuIF90aGlzOwogICAgfTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfTsKCiAgdmFyIGNyZWF0ZURhdGFVUkwgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCBnZXRQaXhlbCkgewogICAgdmFyIGdpZiA9IGdpZkltYWdlKHdpZHRoLCBoZWlnaHQpOwogICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkgKz0gMSkgewogICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4ICs9IDEpIHsKICAgICAgICBnaWYuc2V0UGl4ZWwoeCwgeSwgZ2V0UGl4ZWwoeCwgeSkgKTsKICAgICAgfQogICAgfQoKICAgIHZhciBiID0gYnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7CiAgICBnaWYud3JpdGUoYik7CgogICAgdmFyIGJhc2U2NCA9IGJhc2U2NEVuY29kZU91dHB1dFN0cmVhbSgpOwogICAgdmFyIGJ5dGVzID0gYi50b0J5dGVBcnJheSgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBiYXNlNjQud3JpdGVCeXRlKGJ5dGVzW2ldKTsKICAgIH0KICAgIGJhc2U2NC5mbHVzaCgpOwoKICAgIHJldHVybiAnZGF0YTppbWFnZS9naWY7YmFzZTY0LCcgKyBiYXNlNjQ7CiAgfTsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyByZXR1cm5zIHFyY29kZSBmdW5jdGlvbi4KCiAgcmV0dXJuIHFyY29kZTsKfSgpOwoKLy8gbXVsdGlieXRlIHN1cHBvcnQKIWZ1bmN0aW9uKCkgewoKICBxcmNvZGUuc3RyaW5nVG9CeXRlc0Z1bmNzWydVVEYtOCddID0gZnVuY3Rpb24ocykgewogICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODcyOTQwNS9ob3ctdG8tY29udmVydC11dGY4LXN0cmluZy10by1ieXRlLWFycmF5CiAgICBmdW5jdGlvbiB0b1VURjhBcnJheShzdHIpIHsKICAgICAgdmFyIHV0ZjggPSBbXTsKICAgICAgZm9yICh2YXIgaT0wOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGNoYXJjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgaWYgKGNoYXJjb2RlIDwgMHg4MCkgdXRmOC5wdXNoKGNoYXJjb2RlKTsKICAgICAgICBlbHNlIGlmIChjaGFyY29kZSA8IDB4ODAwKSB7CiAgICAgICAgICB1dGY4LnB1c2goMHhjMCB8IChjaGFyY29kZSA+PiA2KSwKICAgICAgICAgICAgICAweDgwIHwgKGNoYXJjb2RlICYgMHgzZikpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChjaGFyY29kZSA8IDB4ZDgwMCB8fCBjaGFyY29kZSA+PSAweGUwMDApIHsKICAgICAgICAgIHV0ZjgucHVzaCgweGUwIHwgKGNoYXJjb2RlID4+IDEyKSwKICAgICAgICAgICAgICAweDgwIHwgKChjaGFyY29kZT4+NikgJiAweDNmKSwKICAgICAgICAgICAgICAweDgwIHwgKGNoYXJjb2RlICYgMHgzZikpOwogICAgICAgIH0KICAgICAgICAvLyBzdXJyb2dhdGUgcGFpcgogICAgICAgIGVsc2UgewogICAgICAgICAgaSsrOwogICAgICAgICAgLy8gVVRGLTE2IGVuY29kZXMgMHgxMDAwMC0weDEwRkZGRiBieQogICAgICAgICAgLy8gc3VidHJhY3RpbmcgMHgxMDAwMCBhbmQgc3BsaXR0aW5nIHRoZQogICAgICAgICAgLy8gMjAgYml0cyBvZiAweDAtMHhGRkZGRiBpbnRvIHR3byBoYWx2ZXMKICAgICAgICAgIGNoYXJjb2RlID0gMHgxMDAwMCArICgoKGNoYXJjb2RlICYgMHgzZmYpPDwxMCkKICAgICAgICAgICAgfCAoc3RyLmNoYXJDb2RlQXQoaSkgJiAweDNmZikpOwogICAgICAgICAgdXRmOC5wdXNoKDB4ZjAgfCAoY2hhcmNvZGUgPj4xOCksCiAgICAgICAgICAgICAgMHg4MCB8ICgoY2hhcmNvZGU+PjEyKSAmIDB4M2YpLAogICAgICAgICAgICAgIDB4ODAgfCAoKGNoYXJjb2RlPj42KSAmIDB4M2YpLAogICAgICAgICAgICAgIDB4ODAgfCAoY2hhcmNvZGUgJiAweDNmKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB1dGY4OwogICAgfQogICAgcmV0dXJuIHRvVVRGOEFycmF5KHMpOwogIH07Cgp9KCk7CgooZnVuY3Rpb24gKGZhY3RvcnkpIHsKICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7CiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CiAgfQp9KGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBxcmNvZGU7Cn0pKTsKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gUVIgQ29kZSBHZW5lcmF0b3IgZm9yIEphdmFTY3JpcHQgVVRGOCBTdXBwb3J0IChvcHRpb25hbCkKLy8KLy8gQ29weXJpZ2h0IChjKSAyMDExIEthenVoaWtvIEFyYXNlCi8vCi8vIFVSTDogaHR0cDovL3d3dy5kLXByb2plY3QuY29tLwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6Ci8vICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAovLwovLyBUaGUgd29yZCAnUVIgQ29kZScgaXMgcmVnaXN0ZXJlZCB0cmFkZW1hcmsgb2YKLy8gREVOU08gV0FWRSBJTkNPUlBPUkFURUQKLy8gIGh0dHA6Ly93d3cuZGVuc28td2F2ZS5jb20vcXJjb2RlL2ZhcXBhdGVudC1lLmh0bWwKLy8KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiFmdW5jdGlvbihxcmNvZGUpIHsKCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBvdmVyd3JpdGUgcXJjb2RlLnN0cmluZ1RvQnl0ZXMKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICBxcmNvZGUuc3RyaW5nVG9CeXRlcyA9IHFyY29kZS5zdHJpbmdUb0J5dGVzRnVuY3NbJ1VURi04J107Cgp9KHFyY29kZSk7Cg=="></script>
<meta name="referrer" content="no-referrer"><link href="data:image/vnd.microsoft.icon;base64,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AAAAAAXdsQAAAAAAAAAAAAAAbd7t7u7u7piIiIiIiIiIiIiIi+7piIiIiIiIiIiIiIi+7e7e7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7e7d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3u3u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u3u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7t7d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7e7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==" rel="icon"><link rel="canonical" href="https://receiptline.github.io/designer/"></head>
<body onload="initialize()"><script type="application/json" data-single-file-options>{"saveUrl":"https://receiptline.github.io/designer/","saveDate":1734784440966,"visitDate":1734784292282,"filenameTemplate":"{page-title}.{filename-extension}","filenameReplacedCharacters":["~","+","?","%","*",":","|","\"","<",">","\\\\","\u0000-\u001f",""],"filenameReplacementCharacter":"-","filenameReplacementCharacters":["～","＋","？","％","＊","：","｜","＂","＜","＞","＼"],"filenameMaxLengthUnit":"bytes","filenameMaxLength":"192","replaceEmojisInFilename":false,"compressContent":false,"selfExtractingArchive":false,"extractDataFromPage":false,"referrer":"","title":"ReceiptLine Designer","info":{"description":"","lang":"","author":"","creator":"","publisher":"","heading":""}}</script>
    <header>
        <div>
            <button id="load" class="tooltip" data-tooltip="open">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M.5,23.5l4,-15h19l-4,15zv-19h2l1,-2h5l1,2h10v4"></path>
                </svg>
            </button>
            <button id="save" class="tooltip" data-tooltip="download">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M11.5,.5v16m-4,-4l4,4l4,-4M4.5,8.5h-4v15h22v-15h-4"></path>
                </svg>
            </button>
            <label for="zoom">Zoom</label>
            <input id="zoom" type="range" value="20" min="10" max="30" step="2">
        </div>
        <div>
            <button id="img" class="tooltip" data-tooltip="image">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M.5,.5h23v23h-23zM.5,17.5l15,-10l8,8"></path>
                    <circle stroke="#000" fill="none" stroke-width="1" cx="6" cy="6" r="2.5"></circle>
                </svg>
            </button>
            <button id="bar" class="tooltip" data-tooltip="barcode">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path fill="#000" d="M0,1h2v20h-2zM4,1h1v20h-1zM6,1h1v20h-1zM8,1h1v20h-1zM10,1h1v20h-1zM13,1h1v20h-1zM15,1h1v20h-1zM17,1h1v20h-1zM19,1h1v20h-1zM22,1h2v20h-2z"></path>
                    <path fill="#000" d="M3,22h2v2h-2zM7,22h2v2h-2zM11,22h2v2h-2zM15,22h2v2h-2zM19,22h2v2h-2z"></path>
                </svg>
            </button>
            <button id="qr" class="tooltip" data-tooltip="2D code">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path fill="#000" d="M0,0h5v5h-5zM19,0h5v5h-5zM0,19h5v5h-5z"></path>
                    <path fill="#000" d="M7,1h2v2h-2zM11,1h2v2h-2zM15,1h2v2h-2z"></path>
                    <path fill="#000" d="M9,3h2v2h-2zM13,3h2v2h-2z"></path>
                    <path fill="#000" d="M7,5h2v2h-2zM11,5h2v2h-2zM15,5h2v2h-2z"></path>
                    <path fill="#000" d="M1,7h2v2h-2zM5,7h2v2h-2zM9,7h2v2h-2zM13,7h2v2h-2zM17,7h2v2h-2zM21,7h2v2h-2z"></path>
                    <path fill="#000" d="M3,9h2v2h-2zM7,9h2v2h-2zM11,9h2v2h-2zM15,9h2v2h-2zM19,9h2v2h-2z"></path>
                    <path fill="#000" d="M1,11h2v2h-2zM5,11h2v2h-2zM9,11h2v2h-2zM13,11h2v2h-2zM17,11h2v2h-2zM21,11h2v2h-2z"></path>
                    <path fill="#000" d="M3,13h2v2h-2zM7,13h2v2h-2zM11,13h2v2h-2zM15,13h2v2h-2zM19,13h2v2h-2z"></path>
                    <path fill="#000" d="M1,15h2v2h-2zM5,15h2v2h-2zM9,15h2v2h-2zM13,15h2v2h-2zM17,15h2v2h-2zM21,15h2v2h-2z"></path>
                    <path fill="#000" d="M7,17h2v2h-2zM11,17h2v2h-2zM15,17h2v2h-2zM19,17h2v2h-2z"></path>
                    <path fill="#000" d="M9,19h2v2h-2zM13,19h2v2h-2zM17,19h2v2h-2zM21,19h2v2h-2z"></path>
                    <path fill="#000" d="M7,21h2v2h-2zM11,21h2v2h-2zM15,21h2v2h-2zM19,21h2v2h-2z"></path>
                </svg>
            </button>
            <button id="format" class="tooltip" data-tooltip="formatting">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M.5,.5v23M.5,11.5h23M23.5,.5v23M4.5,7.5l-4,4l4,4M19.5,7.5l4,4l-4,4"></path>
                </svg>
            </button>
            <button id="col" class="tooltip" data-tooltip="column delimiter">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M11.5,.5v23"></path>
                </svg>
            </button>
            <button id="hr" class="tooltip" data-tooltip="horizontal rule">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M.5,11.5h23"></path>
                </svg>
            </button>
            <button id="cut" class="tooltip" data-tooltip="paper cut">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="#000" fill="none" stroke-width="1" d="M12,12.5l-7.5,-3a2,2,0,1,1,.5,0M12,11.5l-7.5,3a2,2,0,1,0,.5,0"></path>
                    <path fill="#000" d="M12,12l10,-4q-1,-1,-2.5,-1l-10,4v2l10,4q1.5,0,2.5,-1z"></path>
                </svg>
            </button>
            <button id="ul" class="tooltip" data-tooltip="underline">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <text x="12" y="20" text-anchor="middle" fill="#000" font-family="monospace" font-size="24" text-decoration="underline">a</text>
                </svg>
            </button>
            <button id="em" class="tooltip" data-tooltip="emphasis">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <text x="12" y="20" text-anchor="middle" fill="#000" font-family="monospace" font-size="24" font-weight="bold">a</text>
                </svg>
            </button>
            <button id="iv" class="tooltip" data-tooltip="invert">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path fill="#000" d="M0,0h24v24h-24z"></path>
                    <text x="12" y="20" text-anchor="middle" fill="#fff" font-family="monospace" font-size="24">a</text>
                </svg>
            </button>
            <button id="wh" class="tooltip" data-tooltip="size">
                <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <text x="6" y="20" text-anchor="middle" fill="#000" font-family="monospace" font-size="24" transform="scale(2,1)">a</text>
                </svg>
            </button>
        </div>
        <div>
            <select id="lang">
                <option value="-">(default)</option>
                <option value="ja">ja</option>
                <option value="zh-Hans">zh-Hans</option>
                <option value="zh-Hant">zh-Hant</option>
                <option value="ko">ko</option>
                <option value="th">th</option>
            </select>
            <label for="linewidth">Width</label>
            <input id="linewidth" type="range" value="576" min="288" max="576" step="12">
            <span id="dots">576</span> dots / <span id="cpl">48</span> cpl
            <input id="landscape" type="checkbox">
            <label for="landscape">Landscape</label>
            <input id="linespace" type="checkbox">
            <label for="linespace">Spacing</label>
        </div>
        <div class="hidden">
            <input id="printerid" type="text" size="8" value="printer1">
            <button id="send">Send</button>
        </div>
    </header>
    <hr>
    <main>
        <textarea id="edit" rows="24" cols="80"
        placeholder="|~~You could win a $1000 GiftCard!
        |~~Visit survey.walmart.com#7TNHS9PQY3W
        |~~For more details, see back of receipt.
        {image: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}
        WM Supercenter
        509-754-8837  Mgr: GALEN
        1399 NAT WASHINGTON WAY
        EPHRATA WA 98823
        |~~~ST# 03260 OP# 000273 TE# 70 TR# 07332 
         ITEMS SOLD 7
        TC# 9856 9737 7222 8835 3943
        {code:1234343233333334567676545566255676543; option:code128,1,50,nohri}
        |~~PG 318 TRP   0054034639125          18.66 X
        |~~CRICUT DC3   0093573638862         349.00 X
        |~~CRICUT T12   0093573544330          10.00 X
        |~~PG 318 TRP   0054034639125          18.66 X
        |~~CRICUT T12   0093573544330          10.00 X
        |~~PG 318 TRP   0054034639125          18.66 X
        |~~SGR SE9180   0840163304924         698.99 X
             SUBTOTAL        1134.96~~| 
            TAX~1~~ 8.500 %           96.47~~|
                   TOTAL        1231.43~~|
                    CASH TEND       1300.00~~|
                     CHANGE DUE         68.56~~|
        |~~E-Cycle Washington Free Recycling
        |~~for Computers Monitors and TVs
        |~~www.ecyclewashington.org
        |~~1-800-RECYCLE
        |~~****** RETURN & EXCHANGE POLICY ******
        |~~Electronics may be returned
        |~~for refund or exchange with receipt
        |~~WITHIN 30 DAYS
        |~~**************************************
        {code:https://receiptline.github.io/designer/; option:qrcode,17,SSSSSDGSDF GFDDG} |
        Scan for 30-day free trial|
        |"~~~Low Prices You Can Trust. Every Day.
            12/14/24 19:20:05
        autofocus="autofocus"></textarea>
        <section>
            <div class="paper">
                <div id="printarea"></div>
            </div>
        </section>
    </main>
    <hr>
    <details>
        <summary>Grammar</summary>
        <article>
            <div>
                <strong>Columns</strong>
                <ul>
                    <li>1st</li>
                    <li><b>|</b>1st<b>|</b></li>
                    <li>1st<b>|</b>2nd</li>
                    <li><b>|</b>1st<b>|</b>2nd<b>|</b></li>
                    <li>1st<b>|</b> ... <b>|</b>nth</li>
                    <li><b>|</b>1st<b>|</b> ... <b>|</b>nth<b>|</b></li>
                </ul>
                <strong>Alignment</strong>
                <ul>
                    <li>center</li>
                    <li><b>|</b>center<b>|</b></li>
                    <li><b>|␣</b>center<b>␣|</b></li>
                    <li><b>|</b>left</li>
                    <li><b>|</b>left<b>␣|</b></li>
                    <li>left<b>␣|</b></li>
                    <li>right<b>|</b></li>
                    <li><b>|</b>␣right<b>|</b></li>
                    <li><b>|</b>␣right</li>
                </ul>
            </div>
            <div>
                <strong>Special characters in text</strong>
                <ul>
                    <li><b>\</b> : character escape</li>
                    <li><b>|</b> : column delimiter</li>
                    <li><b>{</b> : property delimiter (start)</li>
                    <li><b>}</b> : property delimiter (end)</li>
                    <li><b>-</b> (1 or more, exclusive) : horizontal rule</li>
                    <li><b>=</b> (1 or more, exclusive) : paper cut</li>
                    <li><b>~</b> : space</li>
                    <li><b>_</b> : underline</li>
                    <li><b>"</b> : emphasis</li>
                    <li><b>`</b> : invert</li>
                    <li><b>^</b> : double width</li>
                    <li><b>^^</b> : double height</li>
                    <li><b>^^^</b> : 2x size</li>
                    <li><b>^^^^</b> : 3x size</li>
                    <li><b>^^^^^</b> : 4x size</li>
                    <li><b>^^^^^^</b> : 5x size</li>
                    <li><b>^^^^^^^</b> (7 or more) : 6x size</li>
                </ul>
            </div>
            <div>
                <strong>Escape characters in text</strong>
                <ul>
                    <li><b>\\</b> : \</li>
                    <li><b>\|</b> : |</li>
                    <li><b>\{</b> : {</li>
                    <li><b>\}</b> : }</li>
                    <li><b>\-</b> : - (cancel horizontal rule)</li>
                    <li><b>\=</b> : = (cancel paper cut)</li>
                    <li><b>\~</b> : ~</li>
                    <li><b>\_</b> : _</li>
                    <li><b>\"</b> : "</li>
                    <li><b>\`</b> : `</li>
                    <li><b>\^</b> : ^</li>
                    <li><b>\n</b> : wrap text manually</li>
                    <li><b>\x<i>nn</i></b> : hexadecimal character code</li>
                    <li><b>\<i>char</i></b> (others) : ignore</li>
                </ul>
            </div>
            <div>
                <strong>Properties</strong>
                <ul>
                    <li><b>{i</b>|<b>image:</b> base64 png format<b>}</b></li>
                    <li class="nolist">image (recommended: monochrome, critical chunks only)</li>
                    <li><b>{c</b>|<b>code:</b> string<b>}</b></li>
                    <li class="nolist">barcode / 2D code</li>
                    <li><b>{o</b>|<b>option:</b> value, value ...<b>}</b></li>
                    <li class="nolist">barcode / 2D code options (default: code128 2 72 nohri / 3 L)</li>
                    <li><b>{a</b>|<b>align:</b> left|center|right<b>}</b></li>
                    <li class="nolist">line alignment (default: center)</li>
                    <li><b>{w</b>|<b>width:</b> number|*, number|* ...<b>}</b></li>
                    <li class="nolist">column width (default: auto)</li>
                    <li><b>{b</b>|<b>border:</b> none|space|line|0-2<b>}</b></li>
                    <li class="nolist">column border (default: space)</li>
                    <li><b>{t</b>|<b>text:</b> wrap|nowrap<b>}</b></li>
                    <li class="nolist">text wrapping (default: wrap)</li>
                    <li><b>{x</b>|<b>command:</b> string<b>}</b></li>
                    <li class="nolist">device-specific commands</li>
                    <li><b>{_</b>|<b>comment:</b> string<b>}</b></li>
                    <li class="nolist">comment</li>
                </ul>
            </div>
            <div>
                <strong>Special characters in property values</strong>
                <ul>
                    <li><b>\</b> : character escape</li>
                    <li><b>|</b> : column delimiter</li>
                    <li><b>{</b> : property delimiter (start)</li>
                    <li><b>}</b> : property delimiter (end)</li>
                    <li><b>:</b> : key-value separator</li>
                    <li><b>;</b> : key-value delimiter</li>
                </ul>
                <strong>Escape characters in property</strong>
                <ul>
                    <li><b>\\</b> : \</li>
                    <li><b>\|</b> : |</li>
                    <li><b>\{</b> : {</li>
                    <li><b>\}</b> : }</li>
                    <li><b>\;</b> : ;</li>
                    <li><b>\n</b> : new line</li>
                    <li><b>\x<i>nn</i></b> : hexadecimal character code</li>
                    <li><b>\<i>char</i></b> (others) : ignore</li>
                </ul>
            </div>
        </article>
    </details>
    <details>
        <summary>Syntax</summary>
        <article>
            <div>
                <figure>
                    <figcaption>document</figcaption>
                    <img alt="document" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKwAAABHCAMAAACtbFyrAAAAY1BMVEUAAAAFBQUYGBgZGBgXHRcxMDAxMTAvOy86OTg9PDs9PTw/Pj1DQkFHRkVPTk1KXEppaGdtbGtiemJ7eXiOjIt8m3yUuZSysK62tLLDwL+t2K3Qzczb2Nbx7uzz8O7M/8z18vAyr3PqAAABrklEQVRo3u3ZaXOCMBAG4EWhWC0i5ZDLwv//lS5CReTQ5po6vvvFTEbDMyHZHFL9QkHAAgsssMACCyywwAILLLBKsSQWb4wNw3BUMoN98GSaRoxKM9jqr/GwxaUnAwvsu2JtIrcr2S/Qs+4rYs0Pg6XY3pRH2O+2MifqS0TJLXbczvbJxUM1tqriS2VOPBp8t0oobqqSf46Nm26u/PZ7vk7s8pjdN20djs9hR2P2eGh+vjc0wSKu3mRzE2yITZpOzQc9W9fZhj8iI9jCItrdZYO4fXNx9579ZlrFXGm3E4zus8GOyCpMYD3uV+kVjPvWM4BNuTKTxmZcSPVjA55bCvYGPMsC/ViH57MCLOeSD/3YFVGpAFsSrVVgl09C3MxJwRnsNMUROIMtx6BnxbHcsyv9R/HBmBXH8ph19GP7bCAVk9lAObbPszIxnWfV38hcVzCZmF7B1GOvewOJmNkbaLjr+t11iY+BuV2Xjou5bj9bivz2p1zYz2q5RYysSxL6JNGwotoYti48KaxX1AaxnMECZ/0lAl05QSr4TPynACywwAILLLDAAgsssMCO4wzRkFN28RIweQAAAABJRU5ErkJggg==">
                </figure>
                <figure>
                    <figcaption>line</figcaption>
                    <img alt="line" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbAAAAA+CAMAAAB9Xb4EAAAAWlBMVEUAAAAEBQQZGBgZGRgXHRcxMTA3NzYvOy89PTw8SjxNTExKXEpNYE1YblhubGxubWxiemJ7eXhpg2l8m3ytqqmtq6mUuZSUupS3tbOt2K235be45rjM/8z18vAjCib1AAADSklEQVR42u2afYOiIBDGZzta9pZeaCnLcr//17wZQMWytPJ0u3uef0oUGPjNwGTQN/RSIkwBgEEABgEYgEEABgEYgEEABgEYgEEABgEYgEEABgEYgEEABo0EjPrp0Xr0l9u/NqzDaj6jsTSbrw8A9gyw3TuNrfftYMA2m83Ft38b2Jqm0LrVltuz3wqsHtaViSm69Gi9vhrSLtYnl78t98diLB33yzfu8/P77tkHsBhfi1Mxrk6LKzEGYF3Atlz6VYyvL+53B2D3A+N8Y1FMIY6xdwC7u96B96/TJMBOvI8dXhOYJlJTAeMdbFlMoyXR6lUjzEwGbE60jzYQZfyRx6w7q+tlfOm088W6n4mKa1BsKvctmNhH3cieaA5g99b7RVTm88rWn1kCzJLjuopRcpnqQywXJIYf10aqMzEbB+jESh3aOBLNBgJ2W4kXZeIzpvDOZ9KJKfXRUo+HELwsq5zNA+OmcnZKbcPjSp6zod1mBx3tP2pXDcyoBJgTXoXVAZhNXUsstSF+uD9Xd6Q9tdwDa1STsHMR2DV7bv3MfwpYQY69R8eR6N4TY8Tl2FOd91hVR5iTG9yeISnmCbAyHfx51kGXQzxoVwWsuaV6q0LcZCF26oFIofG7sBKkVUe23J2N3GtEWAJ2dGDaKApzGjyt58T4R40OUxlc+QyYLpSRx6zU4a9nHXQBe9CuNMLagTXi1btSEWzUzSW9Bla234iw4YH13MN4RVBxd1bpdtxRr7TYT1DeC1izgyHtmjX3MOlR2cbsu9Le3K+0LtmpsmpXMk1guo6wzF8IMEHlkp12wD2sJ7CMeK2n6D7J4t5RT1MYZ+uSKOO7AHbWwZB21VniNWAh6eAbHpBJspFkSTSXSYfwkfJMnmgDNkGWyHMqWZNtrkidE+qTW1clHVmIf+tvaL+K+DWNfkslvrZnHQxp16r6HRZT7jwkPKm8gbkLwaqSVTEmHaEfc5bW852Q0/PtOERXjrz8HbbGmw686cC7RLxL/FHAdhO+rd8CGP4Pwz/OP/4fZ5zpeLEzHf/hqantBKemdjjm9tS5xPWo5xJX451LhHBUGwIwAIMADAIwAIMADAIwAIMADAIwAIMADAIwAIMADAIwSPQH7rtlCasjAnsAAAAASUVORK5CYII=">
                </figure>
                <figure>
                    <figcaption>columns</figcaption>
                    <img alt="columns" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUQAAABlCAMAAAACs2rTAAAAllBMVEUAAAAEBQQFBQUYGBgZGBgZGRgXHRceHh0hISAxMDAxMTA3NzYvOy86OTg9PDs9PTw/Pj1DQkE7SjtHRkVNTExPTk1KXEpNYE1YblhpaGdtbGtubGxubWxiemJ7eXhpg2mOjIt8m3ytqqmtq6mUuZSUupSysK62tLK3tbPDwL+t2K3Qzcy35bfb2Na45rjz8O7M/8z18vAV7nOyAAAEgklEQVR42u2ci1biMBCGR8WuYF3dVRG5eAFBQIT6/i+3U1RobZmm04TA8s/xKLSx+fulSTOdSekDVtkICAAREAERBoiACIiACANEQAREQIQBIiACIiDCABEQDwPia7te+0OCndTbrzt0oi71KiG+Xcf1/qYCu37bEYRu9eogPh2TkSg6ftoJho71qiDexvXdj96lMov30X1c7HYHGLrWq4H4xHVdTAwKTi64pP9r0bleBcQ37htXhmWvuIf4Hhfd61VA5DH6wrgwt+21Z4ju9ZaH+MqX/MS49IRL+53pbEFveYhtHqNLFOfRuu0V4hb0lodYJxqlNow7jdpqjlBrdMepvSOiulS/HduaXksQT4iSc4XBeeaMzvuJ/e/sC3iFaFevMcSHh4fMp/V8imtdrL92c8+pu7H81iFa0SsSyYe4FpUjL91SN1ziqDWcRd82G7aOeNvNxishW1dU1USIVvSKRBQQU2NG3K538x/nNL9LtW1mTNouRCt6bUNM3r36vP8x56weefvA7O7oHKIVvZYhpuZRPEbf5Z4Wt+252TzNNUQ7ei1DTM7oxzy+zHNFzXmcGRt5DK4h2tFrF2LKt+QRprUW8kLT9ZcWUcfId5Ug9njntBpES3ptQvzxlKNBNNwgakjUMHqKIl+Jz9UgWtNrC2LO87ZTotkGUTP2BYye5zmDaFWvDqKpRRtERbmlf60+XeYd4zn+Fnz98xoib36OAv71XZ4/cE8P8+q6dKRXntjvEMQevURRGERT6kVRc3m0zytxyhB5L/9MQ4qCHm9uRvHfg4R4JkIMmjHJIP6JD9DLQgyiMIyLLTeHoXOIZ9UgSiPAymqmY4wQ90hC/Lq0muHqmzFEo/iIXq9tjyVhpnc7Ke6RgLjswXyU/O5MIkSj+Iher0OIHXHe1TWKeyS7WDwvXPbir4732XvCzzvOcmcYUjOgv/H8sUnxwJi8OxfGR/R6HUJMewBJUSkPQIx72PRYiuIjer0OIaZ90aSopC8qxz1sQiyMj6j1uoQ4EJ6K9M3iHlZ956L4iFqvS4hGz+fkuIdViIXxEa1epxBNnhTLcQ+rEIvjI0q9CogFEYVM24oxi02iFg5iLIvCRlfqVcRYSlk/J3o2+Pgo0bIWA1XFEHV6rYdMszOHbiqO2xkb1OoPokqve4iaWon26riACIiACIiA+D9AlLO3ANHgZIuytwBRzhRTexaLg4IoZ4qpfVxNbuH+QpQzxdRPWzRZrvsLsSCP2ih7K8d85Yf7gViQ0W+UvZU1bysVPC3VFTPFDLO3MuZtzYwniGKmmGH21k/zt3rL16JxKVNMFR/2uY7Q28p7IVPstGymgu8Vrf5eXyCuQS6XM+N7bbXHd0BIq+EVED2u8vf6Io3N72UoCbHW8Pq+iV18G0mlbDNArHB3BsS0Vcg2A8R8j6VUthkg5vvOZbK3AHFt6uwtQEx7z6rsLUBMmjJ7CxAz12L57C1ATJuL7K2Dg+gie+sAIe6PASIgAiIgwgAREAEREGGACIiACIgwQAREQAREGCBu0f4BMRxEXZSbUvAAAAAASUVORK5CYII=">
                </figure>
                <figure>
                    <figcaption>column</figcaption>
                    <img alt="column" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATwAAABcCAMAAADEWPnaAAAAWlBMVEUAAAAFBQUYGBgXHRceHh4hISExMDAvOy86OTg9PTw/Pj1HRkVPTk1KXEppaGdtbGtiemJ7eXiOjIt8m3yUuZSysK62tLLDwL+t2K3Qzczb2Nbz8O7M/8z18vDT5ZaQAAADc0lEQVR42u3b7WKaMBQG4GOzmbY2FU2sqHj/t7kTAgSqfAgEB77nx9aChuRZQgI5oyuidxAIgAc84AEPATzgAQ94COABD3jAAx4CeMADHvAQI+NRtxi/xPBXAN6T8Xa73c1Pr4nXLHEXzxdzr0A+lrTFw01LHo3xr1DT1gYJ4AEPeMADHvBmiidVTZlKAq8VT9bhibngNUd+PUFkEkWkEm0Pq3JFmuKjtkST/iZc2RSlJRlJpOPq55IOZRL97Vnnj46L8kF4CemIYu4rMVeoPOB64xU9z7YqtnqKtKC7Pa8d70/POk+DJ5WgKOsg9q/R8DQVXVBlZ8fC61DngXgd73kRt88OAzcc5L37x+V8+LaX/nronqddocU4e+ye92Uv+H04963zNBOGIWHsr5FtWCTqKnJ85wP77ng8mNx9j/+QPMbSplo8P+M24e355PtxYJ0nmG253wuZ/mtWD//+3ifR6tQJLy5NGGTsBGKyDvJ7wqgr7rQi+hyhzv/PUoX73maiRfKG+92y1nlHPvQzCd4PnzoubJHMs8Z2ErwtzxVLe8I4EK0nwVsTHZaGdyZ6mwTvjej8RLwgexiX+uaOu4fBZy5P3MMIs5kyId7yth6BN2R7nWhR1wEe8IAHPOAFbxSFCeABr2XlHxTvskg8/8zZ51m285NpwzP0jPH8246geA1vb2aM59+zBcVreG84Yzz/hjckXtMb6xnj+b2FkHhNeyVzxit2tQLiNe7SzRmv2E8dhmcorsNr2R+eNV6+kz8Uz9zHa81MmDfedb+qZI4YIpuUom1eABm32e3OEinpUpgitwkeE8nI5pbI9Pva7oanOVWmkmmy2l8Xi3c9bSppN0wSM4F2jgmZLDEqToQ9yHrKflTmCT9aFD0vzWZRVE3T2ZyuC8bjFct2XcaLsiyUVDDPHckSIhgoS8srQ+XDlkVjn+XEn1lvfyZuyzP+414ZT2di2TTgMnkE4yk3N/jswzzJJ8djbtUpd2W5eGyW9p8MrzpsufspSxWlPa+El35altPrXhIvchOGG5yxz4USSvgJI8+Bddl0yn3F5oolr42naxYkQnVYs2jg9cWTInllPEN+oXaz5i3nC9+GpnJK7Ev2vACvpIAHvCa8gBtAwAMe8BDAAx7wgIcAHvCABzzgIYAHPOABDwE84AEPeC8e/wCLwHukq8B79gAAAABJRU5ErkJggg==">
                </figure>
            </div>
            <div>
                <figure>
                    <figcaption>text</figcaption>
                    <img alt="text" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKwAAABQCAMAAACzv26IAAAAY1BMVEUAAAAFBQUYGBgZGBgXHRceHh4hISExMDAxMTAvOy86OTg9PTw/Pj1HRkVPTk1KXEppaGdtbGtiemJ7eXiOjIt8m3yUuZSysK62tLLDwL+t2K3Qzczb2Nbx7uzz8O7M/8z18vBb37gOAAAB2UlEQVRo3u3YDXOCMAwG4ODYGE5ElA8RHPz/X7m0MgWtqJR2yt7cqcgd5blcGkqpfqEgYIEFFlhggQUWWGCBBRbY6WE3m83FkZ24cWcVlogujiylrv/OwAILLLDTwfbFF+nEh2Ic9YhPgH3/59j+ml2KsVZZ+T2kLstsJS5fWppgMZ+e5xrzKJ/zCLEVbOEQLTSn/YLIKWxgA86rdpPi3AYWsFs+mWtjcx5lax4b8dwaof/zLIvMYz2i7K4Wdy0OF2dEn+axM6JyBGxJ9DYGtv9NiIfZj4DdqzgD3sH6o5PZ6tFoZ3Zm/lW8U7PDsVyznnnsqRtoYZXdYHTsqc/qYNV9dvwdmeMTTAerfoKNjz2uDRRYn9y7sFfWBgb2un5XXarMru/BXl11mdiYa9azA7E961kju4ix0zT4k8IVfxPGhuKn2om/ofz110TrFlaEE9fWsHURnGHJr6pUYPmT0q45mfIX46vE7WKDoraI5Q4WeS1sIn0ysyKbiTTKFPPBWRl40XbgPXX2BTrYVs0KrCQesL7yofCH2J2oz8oPj1g3FDl9TmxTjFyyRGJupeIr4SmWyPP+k2EfXRsACyywN7HD38GAnQrWegALLLDAAgsssMACC+wrY38A8A8UzRDNuQYAAAAASUVORK5CYII=">
                </figure>
                <figure>
                    <figcaption>char</figcaption>
                    <img alt="char" src="data:image/png;base64,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">
                </figure>
                <figure>
                    <figcaption>escape</figcaption>
                    <img alt="escape" src="data:image/png;base64,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">
                </figure>
                <figure>
                    <figcaption>ws (whitespace)</figcaption>
                    <img alt="ws" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAABQCAMAAABiWGr4AAAAk1BMVEUAAAAEBQQFBQUWFRUWFhYYGBgZGBgXHRceHh4hISExMDAxMTA3NzYvOy86OTg9PTw/Pj1HRkVNTExPTk1KXEpNYE1YblhpaGdtbGtubGxubWxiemJ7eXhpg2mOjIt8m3ytqqmtq6mUuZSUupSysK62tLK3tbPDwL+t2K3Qzcy35bfb2Na45rjx7uzz8O7M/8z18vDR2wEJAAACrklEQVR42u2a61riMBCGP3EFF6grGhAoUs4UwU3v/+p2eqBNaTe6Nmlxn5lfbSDJvEzmSzKK4D8yMAzDMAzDMAzDMAzDMAzDMAzDMAzDMMy/wMxms8LTddgHnpXBACg8XclPr/eMYRiGYRiGYb4LjM5+wab9LJmnfMZvAHPPMBVy5jkc62Vz/G0jL46bl3D455oEYE7ND3uLeb5/oBnmtcAcWsCjZdl6BFqHOmAGFBfrIkyxGdQAs6XGvXWYPc2ytQ8zptyvYX8kFRjbh+kCm1zDbtJrV1bkdm+6y426Abr2Ye6Ao/K67BvbYvoLVaGBOxMw+ps2DfOevU2N7pjTbOD3Mne/UAPQWy4yTzTlzWj9Jqva23p0Q2M96SNjvNSk5kwYl+FJmrHTUI1Nac4Yh1HUbEGzv0pz9krjLXVqZhxG2Wco94fSpFFs+rp9xnxFMz0B7ChfTkZhTpQ3O80JwDxMejajjBlJszYCJpqzmYVa8/nU3APWsQ8CjpQu4CcS63/Cbw8Qjhv2InOSxjXQ05yabRTOk/vMD+CsyY4IvfN9eCusvM/A0Peohxs/SIhEoYFbzX3Gyl8B5q0kBPJDGEHf8qKweR01ZB4UKinOoUnGbc2D2mCCw+ACJl1dkW+ZOZ2wyY3cFNJxs0+AOBxhBx9uDmZwCGqEIYUed4uRKcD40ZvoyGwlqUkTL7M4dilMd7z9ok9V6mLtQs4UYFZRmxvBeMXECVdXrgPlTLtCWa0CTKZmf4VRl1kexgmzpCMuOsRq1gTMJN1nztIcrqsLYU4EIE4qhccRsSJH0iyUfWbaDIzNE0DtMDbPZvXDLC2cmhdNwdi8z9QPY/Gm2QCMvRpAEzDBwmB1Zhk0DEMKPTVSN5vsKnvC/wjEMAzDMAzDMAzDMAzDMAzDMAxzBfYHjkbIxqlp8hMAAAAASUVORK5CYII=">
                </figure>
            </div>
            <div>
                <figure>
                    <figcaption>property</figcaption>
                    <img alt="property" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARwAAABcCAMAAACLBfoKAAAAjVBMVEUAAAAEBQQFBQUYGBgZGBgZGRgXHRcxMDAxMTA3NzYvOy86OTg9PDs9PTw/Pj1DQkFHRkVNTExPTk1KXEpNYE1YblhpaGdtbGtubGxubWxiemJ7eXhpg2mOjIt8m3ytqqmtq6mUuZSUupSysK62tLK3tbPDwL+t2K3Qzcy35bfb2Na45rjz8O7M/8z18vBmMtg3AAAEBUlEQVR42u2bC1uqQBCGJ/Og2TllkamUJpaiKfz/n3dmUZHVWXDXRURmnh7jzsfL3mZ2gIhNacAIGA7DYTgMh+EwHIbDcBgOG8NhOAyH4TAchsNwGA7DUdts0G7Czprt4eyEe9mxQrTZhDN5ONL88HUlcIy0nQzn4+PjaEm2Ial6eBVwdLTlPCnQD3G0JNkLbr/rTZfhzpbT3h1ue8mFE55ruXC0tOU8qQkc8W7eVgeqV2+5ZecScPS02YfzhVs/Cd2fuH1SMhxNbfbhYHv3RgrH9/NQMhxNbdbhzLBOr0gBK6zbs1Lh6GqzDgdrdS91VxeCZLkHMDgPjpt3SDYcSZsPXupEUpt1OG2AaZhS4O9XpgDtM0uOdxYcWds49d5obdbh/AFYKuAscTxaKhxZmwSH1GYGJ9tCBZwwdcw/Yik5c7s2FuejBcF2g49wtocFm/Wwg78Aju4djuDQZ2YPLs+HExjACcAbw9hzUL8vSkvg4xr4bgeXO3E75gty8V5fQExegQ4cv2Q4HrihERwfXytWoc5ms+fHa64jQInreO5mhysecWxwh9g66VPtwcmoic2DNifIb3Nexb3fvyk4TnKZHRyx6iAc5fv/fheXe6VupKvtCnqrEV7mcZ5ukBM4Y9Hd+lLJcbf1zBWHuQScKJo/4r/RNfZWA2mcI8HpkR7MogHwJPdWoiaJP2fTIDtBvMGJ65L4CbYNMuxqQ3DQWz0BNBZRjjYJDqmt4BFyGo5ihNzFcmN9hIxlp5s3Qk7DudAI+cB/SY2Qaf/lBy8ytw5njgs/2dqkEfKFfKtokuH5EhG3PrbFBfhW2Cr3z9ZWejynhf1LAXC+6ca/7HiOZrTtHuC3ADi/imFD0ZFAuzFk3LEuIIa8VnlZBceQT7AvIsI/UbqbhQTYlS6ohrbC5q2G0tzQYJbhi18Wjoa20mc8T5qGu6LrMhyGw3AYTr3hmOVs1AKOac7GTcBZZx9hlLOxvgk4e99KYWY5G+hb3Vcfzt4rV5cbg5wN9Mpb1Yezj+fQnpBhzgYdz6kanH0kkDTDnA1FJLBqcPYxZLIPN8zZoGPI1YOTzD4oWpyeIq6VlbOhmH2oHpxk3ooyeaZJMnXOhnLeqoJwdjOeVI8u50VIRs+frn8zZjyrCCcaNeJx3d+8tISwk56Hywh4NUbRzcCJFl2rcLqL6IbgYI/ebzWfc+GEipyNlN23+j8X0lz2hyFN3TbnklY2HLm3CkTq0okZhjWAc5gXEeblbNQJjjxCdr3Ts5prAEf2rRyNfPg6wNHMi6gXHONvcGoBx/TrrXrAMfzuryZwLOZF3CAce3kRNwnnOo3hMByGw3AYDsNhOAyH4TAcNobDcBgOw2E4DIfh3Iz9B7FTqformPd4AAAAAElFTkSuQmCC">
                </figure>
                <figure>
                    <figcaption>member</figcaption>
                    <img alt="member" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAABcCAMAAAAmnl0XAAAAk1BMVEUAAAAEBQQFBQUYGBgZGBgZGRgXHRceHh0hISAxMDAxMTA3NzYvOy86OTg9PDs9PTw/Pj1DQkFHRkVNTExPTk1KXEpNYE1YblhpaGdtbGtubGxubWxiemJ7eXhpg2mOjIt8m3ytqqmtq6mUuZSUupSysK62tLK3tbPDwL+t2K3Qzcy35bfb2Na45rjz8O7M/8z18vCc1LTdAAAEcElEQVR42u2b61qjMBCGR+2y24q7roq1LVpaepCe8P6vbifgttAGgTQgod/3w0fTpMmE12RIZugDungRpgACBBAggAABBAggQAABAggQQIAAAgQQIIAAAQQIIEAAAQIIEECAAAIE0MVDQMUECAABIAAEgKD1EIR5AgSAABAAAkAACAABIAAEgAAQAAJAAAgAQUktBt3OXzJR/5+1ReSHDpETeqLYSUJgoG66g0W9EKweRL+/jYYgJM+lwLbDgGEIbdMhEHpY1QjB+JpaAIHtWOSSGz91N2wBBHQ9rg2CJ9Hfy3xjuE/gEkVbQrw12Gb7BLvN/EU8lqeaIBhzX3fv5juGPlm++NO1ws8fhjuG73c89HEtEKx4L7hvxdsB7wGWHa0I6WJz3w7ueUdY1QEB+4R3eEVsqHgteKgBggXP0TsgaOqOwINfVA/BgH1CHBY1VuwdDqqHoEs0BwSN1ZyoVz0EN0QbQNBYbYg61UPAU7QzGoJ2xxjuFEavBMEHIGi0hYAAEACCixcggAABBAggQAB9AwSqnnbJQAndHv5y2OvsK3V6o6XuN4kzA0POHAcgyIdgentS8XYCCE70+vp68pvsRMpECEbSqqN2QbAr9UTlEHxJ1Ybo5vCp0jl8kXbnts+A4JHLr/qz9b7eeta/4rLHDAgqt0+/vbK7nZx1ojQEc6KusRCIdeB5e1R1+5yxFpgJgeyWVzcEiftq4yCYcOmbpPIbl0/bAoEs3kMzBMnIFeMgYJ/wWVqb14LbtkAgi/zSDEEyhs00CJbsD2yltbfsFyxbAoEsBlQvBKloVg2TZOd9hU4I2CPoZ1TvEw1rgUBkvPnV2iuJBtcJwVFcu45JcmuEoEc0y6g+kwVlVbMS+FVDIMkL0QWBJMPFNAh+EK0zqq9lQVmmQnCaIaYGQRUZvn9k+YAMgUNWvDFwM1985ieWzJz2yv2Knt0wLFpfsR9HWCIsC+x9aQRBIL7Dicy0UomQGsZx0M+Ch2iaICiS4ZsBgRcxIDKBwsg2X8xd4faq/ZaEQLWfgLzIrBgJJ7ESWE78q/gwOAxFwzi+D4ICGb4ZEES1/X25bSXnJLe9ar+S5bSSftgcj4JPA+1TCLy4vqVxHAf9Og+CQpcRqhm+R+1EK1/8x3yulp5DZXyK4v12zvAJVO1jc+LHzfY5Ugj8kj6USia17hPDTGOLZ/ie+ASusCjyC2LnwA1LTHLxftNvB6ntIPftQNU+YU4Q+7/+yUpgi+0g2gytKuytHYIyGb7H5wTRwhZ5Tl5sZhlvuUS/w9Q5QQqCvuz2QIN9+0fP5tns0EVuYLT6B8JqAUhU4ldhb/0QaHyF8nBiqOvW1FQIbAt3B5cNgUdJb0f3pEy/uEWcAIIGrQSIJwAEiCxqBgQ5EWl1x+AhxvDs/EmFGMMSccfmRRtPJNHG04+WQ6A95NxwCPhNcZTKOxi2LO+gZgiglggQQIAAAgQQIIAAAQQIIEAAAQIIEECAAAIEECCAAAEECCBAAAECCBBAJ/oHYVXG0IRQIG8AAAAASUVORK5CYII=">
                </figure>
                <figure>
                    <figcaption>key</figcaption>
                    <img alt="key" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbQAAABRCAMAAACNFKPxAAAAllBMVEUAAAAEBQQFBQUWFRUWFhYYGBgZGBgZGRgXHRceHh4hISExMDAxMTA3NzYvOy86OTg9PTw/Pj1HRkVNTExPTk1KXEpNYE1YblhpaGdtbGtubGxubWxiemJ7eXhpg2mOjIt8m3ytqqmtq6mUuZSUupSysK62tLK3tbPDwL+t2K3Qzcy35bfb2Na45rjx7uzz8O7M/8z18vBm1duPAAAEgElEQVR42u2cgXaiMBBFU3frsqulW1tqVVqjaBWrXfz/n9tJUEgAKWg1Au+dowdRMHKdzGRmlG2hyonhEgAaBGgQoAEaBGgQoAEaBGgQoAEaBGgQoEGABmgQoEGABmhQNaEtht02u7Ta3dECzI6FNr1jpnQ3AbSMfa+vr6ktXSNmUqPaU/mCQBY0ui6pLU2PtP+mP/sILq2PWf+G3vux9qaUT+AYaMLOnjeBGW2eG2Br3w9tQnvfAnN6o/efAlq5QygGeQ5MimztDtBKHbIgf7YxCm1Dfm0BaGUOIY/WD8yqz9gQ0Moc0mVsFl0+X4TgnnpBLRmVnxfajLEuoJU55BdjaqzPGXM0aA6RdM4c+TPWBrTUIflSL6BtuywBzbKUx9IWHZ0yiSt7nPCxS/dkp34BaspY/mZsVUF/Cn+C74fmMc/XCAgGqeuuzqCcntZOYVviNK5k4QS22wxovw1Cc6zw5sonXAklyTA0pNDZSZ5MN0Vvd56g8LQKaCVn1Lbm08LzeioD4dS4wky8imuUVGZkZAKkayVfdoRPexJjeZmv/1XBb63nL2K4T5ePHkN/ZisWIhyaCo18HIHjKjM73JsxPfKToscxDfd+WaF4Y3lPIx5fAtpQWac5csKjOyu2m0ScIQIRLcKU06U2Ee4CETsVoeSs0zKyj6sWYw8VCxMfGGutmpwR6ZGdVS64J1vrNTj3+E6DXVYO2pJG/X4BaNMryPJnVK8HFINUcB1N0cigPvU0N4p5vUL1tA5jc30eN9HFUrrLZZ4VVJ0B2nVWrm8ZW6vzwd3VLtG0Lpd11vLlCGjV7BGhJz6vZYQlPsFnFpYjekQKaGKwG+tA1VqzNGNzQem5gizttnQ++VgHuhgZ6XscHqx+qj7NaBdLuS4X8mmdi0G7OinRo+kuljJdLpnRY2OgKes04yvJ4ivN7HVaY6DFGRHzOZviOZ3sjEhzoEW5R72LxdqVjNQqrGWa2r7L5UDusTnQoiy/VoeIawhx2TZwbPUx08vlstbO7At0uRzM8jcI2r6e9lOt+MmykQrNsfaFVyX34mrQeKqSe4Yulx859bQmQduOW6na+gFoXGtrcfRSOvfTXS08lWHzEj1ovqwuecUm3904W+Nt46FtV70voYnp0VJ3cOZ7en5Tb03aHaVBS5TfBWNXnMMTdBMny4HWW20BTUT+g04mNC/yVGQ4rmo4th3enKgIm2xNsnZuL/5C+JrP42xfo/eKTqt0ns7g/cjPWMef77ZzfVpoKn4i7lAxcenU4h2Wve9kie1Oi1Nkg4t8J69QB+CpnZt1hJYfPUpmXPdxBMbVWpNUaH7YS+arzBz9i6BMj36J6BHQYg1z12mOblaiM0Vam50o5PlaIMLVUMSO+gUTgUjKaMt1uTQZWpUyIoC2V4Vyj4C217QCWf4JoCV0JfU0JyoE+t/6q/Ga/mNPdSrXgKbbWiV6RABN0eSKu7FO/W+GGv+hmZEullO6XACtzgI0QIMADQI0QIMADQI0QIMADQI0QIMADQI0CNAADQI06LD+A7PMwI5YMm/OAAAAAElFTkSuQmCC">
                </figure>
                <figure>
                    <figcaption>value</figcaption>
                    <img alt="value" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKwAAABHCAMAAACtbFyrAAAAY1BMVEUAAAAFBQUYGBgZGBgXHRcxMDAxMTAvOy86OTg9PDs9PTw/Pj1DQkFHRkVPTk1KXEppaGdtbGtiemJ7eXiOjIt8m3yUuZSysK62tLLDwL+t2K3Qzczb2Nbx7uzz8O7M/8z18vAyr3PqAAAByElEQVRo3u3ZDW+CMBAG4ENhOB0iCiiCg///K71WpyJYt35lxvcSoZAATy7ttSB1LxQELLDAAgsssMACCyywwAJrFUt68cbYzWYzaPnBPnkyjSMGrQfY9q/x9I6qJwML7JtjYwpfKLNrYNVYVcxv2ldFKA4LxqZi1+7FYSr38ZpofYMd3mf+y8nDFpbiti0Fln8l7c8nS94wvi3C/4QtpE9mVmSzkEaZYm7cdQPrWHWfXYp7rbY97E2fFVhJPGHjO+x2JS5fehpgOZ+eVb0Bthf9s43TCzZMRU5HsV1XzXiXe8HWAdFiUA1OvYLHEomxVYpNwUOskOfj+2qwIApqH9iE82o8g3FuEw/YHZ+sjLEVN3busRmPLQtrAx5lmXtsxOPZApZryYd77ISosYBtiKY2sOo3Ib7NwcI72GGMo/EOpo5eZvWxnNmJ+1fxXp/Vx3Kfjdxjr9XAKEargXXstc6axHidtf9F5jKDmcT4DGYfe1kbGMSDtYGDb10/qy79PvBo1eXiw9x5PdvoXPvdKNazTr4i5oEsQp+kG0HeecN2dWKETerOI5YrWBZNv3SgkyjbaT4T/ykACyywwAILLLDAAgsssMM4AoggUxpLmDJqAAAAAElFTkSuQmCC">
                </figure>
            </div>
        </article>
    </details>
    <div id="loaddialog" class="dialog">
        <div id="loadcancel"></div>
        <div id="loadbox">
            <input id="loadfile" type="file" accept=".receipt,text/plain">
            <br>
            <textarea id="loadview" rows="12" cols="40" readonly></textarea>
            <hr>
            <div>
                <button id="loadok">OK</button>
            </div>
        </div>
    </div>
    <div id="savedialog" class="dialog">
        <div id="savecancel"></div>
        <div id="savebox">
            <div>Download</div>
            <input type="radio" id="savetext" name="savetype" value="text" checked>
            <label for="savetext">ReceiptLine Text</label>
            <br>
            <input type="radio" id="savesvg" name="savetype" value="svg">
            <label for="savesvg">SVG Image</label>
            <hr>
            <div>
                <button id="saveok">OK</button>
            </div>
        </div>
    </div>
    <div id="imgdialog" class="dialog">
        <div id="imgcancel"></div>
        <div id="imgbox">
            <input id="imgfile" type="file" accept="image/png">
            <br>
            <canvas id="imgview"></canvas>
            <hr>
            <div>
                <button id="imgok">OK</button>
            </div>
        </div>
    </div>
    <div id="bardialog" class="dialog">
        <div id="barcancel"></div>
        <div id="barbox">
            <label for="bardata">Data</label>
            <input id="bardata" type="text" value="1234">
            <br>
            <label for="bartype">Type</label>
            <select id="bartype">
                <option value="code128">CODE128</option>
                <option value="code93">CODE93</option>
                <option value="nw7">NW-7</option>
                <option value="codabar">Codabar</option>
                <option value="itf">ITF</option>
                <option value="code39">CODE39</option>
                <option value="jan">JAN</option>
                <option value="ean">EAN</option>
                <option value="upc">UPC</option>
            </select>
            <br>
            <label for="barwidth">Width</label>
            <input id="barwidth" type="range" value="2" min="2" max="4" step="1">
            <br>
            <label for="barheight">Height</label>
            <input id="barheight" type="range" value="72" min="24" max="240" step="24">
            <br>
            <input id="barhri" type="checkbox">
            <label for="barhri">HRI</label>
            <div class="note">Quiet zones are required around the barcode.</div>
            <div class="note">HRI: Human Readable Interpretation</div>
            <hr>
            <div>
                <button id="barok">OK</button>
            </div>
        </div>
    </div>
    <div id="qrdialog" class="dialog">
        <div id="qrcancel"></div>
        <div id="qrbox">
            <label for="qrdata">Data</label>
            <input id="qrdata" type="text" value="https://receiptline.github.io/designer/">
            <br>
            <label for="qrtype">Type</label>
            <select id="qrtype">
                <option value="qrcode">QR Code</option>
            </select>
            <br>
            <label for="qrcell">Size</label>
            <input id="qrcell" type="range" value="3" min="3" max="8" step="1">
            <br>
            <label for="qrlevel">Error correction level</label>
            <select id="qrlevel">
                <option value="L">L</option>
                <option value="M">M</option>
                <option value="Q">Q</option>
                <option value="H">H</option>
            </select>
            <div class="note">Quiet zones are required around the 2D code.</div>
            <div class="note">QR Code is a registered trademark of DENSO WAVE INCORPORATED.</div>
            <hr>
            <div>
                <button id="qrok">OK</button>
            </div>
        </div>
    </div>
    <div id="formatdialog" class="dialog">
        <div id="formatcancel"></div>
        <div id="formatbox">
            <div class="note">
                <svg width="325px" height="100px" viewBox="0 0 325 100" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path stroke="none" fill="#fff" stroke-width="1" d="M0,0h325v100h-325z"></path>
                    <path stroke="none" fill="#ddd" stroke-width="1" d="M50,25h225v50h-225z"></path>
                    <path stroke="none" fill="#bbb" stroke-width="1" d="M50,25h25v50h-25zM150,25h25v50h-25zM250,25h25v50h-25z"></path>
                    <path stroke="#000" fill="none" stroke-width="1" d="M62.5,25.5v49M162.5,25.5v49M262.5,25.5v49"></path>
                    <path stroke="#000" fill="none" stroke-width="1" d="M.5,.5v99M324.5,.5v99M.5,49.5h49m-4,-4l4,4l-4,4M324.5,49.5h-49m4,-4l-4,4l4,4"></path>
                    <path stroke="#000" fill="none" stroke-width="1" d="M75.5,49.5m4,-4l-4,4l4,4m-4,-4h74m-4,-4l4,4l-4,4M175.5,49.5m4,-4l-4,4l4,4m-4,-4h74m-4,-4l4,4l-4,4"></path>
                    <text x="25" y="45" text-anchor="middle" fill="#000" font-size="10">align</text>
                    <text x="62.5" y="20" text-anchor="middle" fill="#000" font-size="10">border</text>
                    <text x="112.5" y="45" text-anchor="middle" fill="#000" font-size="10">width</text>
                    <text x="162.5" y="20" text-anchor="middle" fill="#000" font-size="10">border</text>
                    <text x="212.5" y="45" text-anchor="middle" fill="#000" font-size="10">width</text>
                    <text x="262.5" y="20" text-anchor="middle" fill="#000" font-size="10">border</text>
                    <text x="300" y="45" text-anchor="middle" fill="#000" font-size="10">align</text>
                    <text x="112.5" y="70" text-anchor="middle" fill="#000" font-size="10">text</text>
                    <text x="110" y="85" text-anchor="end" fill="#000" font-size="10">wrap</text>
                    <path stroke="#000" fill="none" stroke-width="1" d="M112.5,82.5h33q3 0,3 3q0 3,-3 3h-30q-3 0,-3 3q0 3,3 3h33m-4,-4l4,4l-4,4"></path>
                    <text x="212.5" y="70" text-anchor="middle" fill="#000" font-size="10">text</text>
                    <text x="220" y="85" text-anchor="end" fill="#000" font-size="10">nowrap</text>
                    <path stroke="#000" fill="none" stroke-width="1" d="M222.5,82.5h26m-4,-4l4,4l-4,4M249.5,78.5v9"></path>
                </svg>
            </div>
            <label for="formatwidth">Column width</label>
            <input id="formatwidth" type="text" value="auto">
            <div class="note">default: auto (* for all columns), example: *,5,10</div>
            <label for="formatborder">Column border</label>
            <select id="formatborder">
                <option value>-</option>
                <option value="none">none</option>
                <option value="space">space</option>
                <option value="line">line</option>
                <option value="0">0 (none)</option>
                <option value="1">1 (space)</option>
                <option value="2">2</option>
            </select>
            <div class="note">default: space</div>
            <label for="formattext">Text wrapping</label>
            <select id="formattext">
                <option value>-</option>
                <option value="wrap">wrap</option>
                <option value="nowrap">nowrap</option>
            </select>
            <div class="note">default: wrap</div>
            <label for="formatalign">Line alignment</label>
            <select id="formatalign">
                <option value>-</option>
                <option value="left">left</option>
                <option value="center">center</option>
                <option value="right">right</option>
            </select>
            <div class="note">default: center</div>
            <hr>
            <div>
                <button id="formatok">OK</button>
            </div>
        </div>
    </div>
    <footer>ReceiptLine Designer Version 1.16.1 © 2019 Open Foodservice System Consortium</footer>


<!-- <single-file-infobar><template shadowrootmode="open"><div><style>.infobar,.infobar .infobar-icon,.infobar .infobar-link-icon {min-inline-size:28px;min-block-size:28px;box-sizing:border-box;}.infobar,.infobar .infobar-close-icon,.infobar .infobar-link-icon {opacity:0.7;transition:opacity 250ms;}.infobar:hover,.infobar .infobar-close-icon:hover,.infobar .infobar-link-icon:hover {opacity:1;}.infobar,.infobar-content {display:flex;}.infobar {position:fixed;max-height:calc(100% - 32px);top:16px;right:16px;margin-inline-start:16px;margin-block-end:16px;color:#2d2d2d;background-color:#737373;border:2px solid;border-color:#eee;border-radius:16px;z-index:2147483647;animation-name:flash;animation-duration:.5s;animation-timing-function:cubic-bezier(0.39,0.58,0.57,1);animation-delay:1s;animation-iteration-count:2;}.infobar:valid,.infobar:not(:focus-within):not(.infobar-focus) .infobar-content {display:none;}.infobar:focus-within,.infobar.infobar-focus {background-color:#f9f9f9;border-color:#878787;border-radius:8px;opacity:1;transition-property:opacity,background-color,border-color,border-radius,color;}.infobar-content {border:2px solid;border-color:#f9f9f9;border-radius:6px;background-color:#f9f9f9;overflow:auto;}.infobar-content span {font-family:Arial,Helvetica,sans-serif;font-size:14px;line-height:18px;word-break:break-word;white-space:pre-wrap;margin-inline:4px;margin-block:4px;padding-inline:24px;}.infobar .infobar-icon,.infobar .infobar-close-icon,.infobar .infobar-link-icon {cursor:pointer;background-position:center;background-repeat:no-repeat;}.infobar .infobar-close-icon,.infobar .infobar-link-icon {position:fixed;align-self:flex-start;}.infobar .infobar-icon {position:absolute;min-inline-size:24px;min-block-size:24px;}@keyframes flash {0%,100% {	background-color:#737373;}50% {	background-color:#dd6a00;}}.infobar:focus-within .infobar-icon,.infobar.infobar-focus .infobar-icon {z-index:-1;background-image:none;margin:4px;}.infobar .infobar-close-icon {min-inline-size:22px;min-block-size:22px;}.infobar .infobar-icon {background-color:transparent;background-size:70%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAABhmlDQ1BJQ0MgcHJvZmlsZQAAKJF9kj1Iw0AYht+mSkUrDnYQcchQnSyIijqWKhbBQmkrtOpgcukfNGlIUlwcBdeCgz+LVQcXZ10dXAVB8AfEydFJ0UVK/C4ptIjx4LiH9+59+e67A4RGhalm1wSgapaRisfEbG5VDLyiDwEAvZiVmKkn0osZeI6ve/j4ehfhWd7n/hz9St5kgE8kjjLdsIg3iGc2LZ3zPnGIlSSF+Jx43KACiR+5Lrv8xrnosMAzQ0YmNU8cIhaLHSx3MCsZKvE0cVhRNcoXsi4rnLc4q5Uaa9XJbxjMaytprtMcQRxLSCAJETJqKKMCCxFaNVJMpGg/5uEfdvxJcsnkKoORYwFVqJAcP/gb/O6tWZiadJOCMaD7xbY/RoHALtCs2/b3sW03TwD/M3Cltf3VBjD3SXq9rYWPgIFt4OK6rcl7wOUOMPSkS4bkSH6aQqEAvJ/RM+WAwVv6EGtu31r7OH0AMtSr5Rvg4BAYK1L2use9ezr79u+ZVv9+AFlNcp0UUpiqAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AsHADIRLMaOHwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAPUExURQAAAIqKioyNjY2OjvDw8L2y1DEAAAABdFJOUwBA5thmAAAAAWJLR0QB/wIt3gAAAGNJREFUSMdjYCAJsLi4OBCQx6/CBQwIGIDPCBcXAkYQUsACU+AwlBVQHg6Eg5pgZBGOboIJZugDFwRwoJECJCUOhJI1wZwzqmBUwagCuipgIqTABG9h7YIKaKGAURAFEF/6AQAO4HqSoDP8bgAAAABJRU5ErkJggg==);}.infobar .infobar-link-icon {right:20px;background-size:60%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAABhmlDQ1BJQ0MgcHJvZmlsZQAAKJF9kj1Iw0AYht+mSkUrDnYQcchQnSyIijqWKhbBQmkrtOpgcukfNGlIUlwcBdeCgz+LVQcXZ10dXAVB8AfEydFJ0UVK/C4ptIjx4LiH9+59+e67A4RGhalm1wSgapaRisfEbG5VDLyiDwEAvZiVmKkn0osZeI6ve/j4ehfhWd7n/hz9St5kgE8kjjLdsIg3iGc2LZ3zPnGIlSSF+Jx43KACiR+5Lrv8xrnosMAzQ0YmNU8cIhaLHSx3MCsZKvE0cVhRNcoXsi4rnLc4q5Uaa9XJbxjMaytprtMcQRxLSCAJETJqKKMCCxFaNVJMpGg/5uEfdvxJcsnkKoORYwFVqJAcP/gb/O6tWZiadJOCMaD7xbY/RoHALtCs2/b3sW03TwD/M3Cltf3VBjD3SXq9rYWPgIFt4OK6rcl7wOUOMPSkS4bkSH6aQqEAvJ/RM+WAwVv6EGtu31r7OH0AMtSr5Rvg4BAYK1L2use9ezr79u+ZVv9+AFlNcp0UUpiqAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AsHAB8H+DhhoQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAJUExURQAAAICHi4qKioTuJAkAAAABdFJOUwBA5thmAAAAAWJLR0QCZgt8ZAAAAJJJREFUOI3t070NRCEMA2CnYAOyDyPwpHj/Va7hJ3FzV7zy3ET5JIwoAF6Jk4wzAJAkzxAYG9YRTgB+24wBgKmfrGAKTcEfAY4KRlRoIeBTgKOCERVaCPgU4Khge2GqKOBTgKOCERVaAEC/4PNcnyoSWHpjqkhwKxbcig0Q6AorXYF/+A6eIYD1lVbwG/jdA6/kA2THRAURVubcAAAAAElFTkSuQmCC);}.infobar .infobar-close-icon {appearance:none;background-size:80%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAABhmlDQ1BJQ0MgcHJvZmlsZQAAKJF9kj1Iw0AYht+mSkUrDnYQcchQnSyIijqWKhbBQmkrtOpgcukfNGlIUlwcBdeCgz+LVQcXZ10dXAVB8AfEydFJ0UVK/C4ptIjx4LiH9+59+e67A4RGhalm1wSgapaRisfEbG5VDLyiDwEAvZiVmKkn0osZeI6ve/j4ehfhWd7n/hz9St5kgE8kjjLdsIg3iGc2LZ3zPnGIlSSF+Jx43KACiR+5Lrv8xrnosMAzQ0YmNU8cIhaLHSx3MCsZKvE0cVhRNcoXsi4rnLc4q5Uaa9XJbxjMaytprtMcQRxLSCAJETJqKKMCCxFaNVJMpGg/5uEfdvxJcsnkKoORYwFVqJAcP/gb/O6tWZiadJOCMaD7xbY/RoHALtCs2/b3sW03TwD/M3Cltf3VBjD3SXq9rYWPgIFt4OK6rcl7wOUOMPSkS4bkSH6aQqEAvJ/RM+WAwVv6EGtu31r7OH0AMtSr5Rvg4BAYK1L2use9ezr79u+ZVv9+AFlNcp0UUpiqAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AsHAB8VC4EQ6QAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAJUExURQAAAICHi4qKioTuJAkAAAABdFJOUwBA5thmAAAAAWJLR0QCZgt8ZAAAAJtJREFUOI3NkrsBgCAMRLFwBPdxBArcfxXFkO8rbKWAAJfHJ9faf9vuYX/749T5NmShm3bEwbe2SxeuM4+2oxDL1cDoKtVUjRy+tH78Cv2CS+wIiQNC1AEhk4AQeUTMWUJMfUJMSEJMSEY8kIx4IONroaYAimNxsXp1PA7PxwfVL8QnowwoVC0lig07wDDVUjAdbAnjwtow/z/bDW7eI4M2KruJAAAAAElFTkSuQmCC);}</style><form class="infobar"><span tabindex="-1" class="infobar-icon"></span><span tabindex="-1" class="infobar-content"><input type="checkbox" required="" class="infobar-close-icon" title="Close"><span>Sat Dec 21 2024 04:34:00 GMT-0800 (Pacific Standard Time)</span><a class="infobar-link-icon" target="_blank" rel="noopener noreferrer" title="Open source URL: https://receiptline.github.io/designer/" href="https://receiptline.github.io/designer/"></a></span></form><script>function Go(n,{saveUrl:e,infobarContent:t,saveDate:a}){if(e){const o=n.querySelector("single-file-infobar").shadowRoot;o.querySelector(".infobar-content span").textContent=t||a;const i=o.querySelector(".infobar-content .infobar-link-icon");i.href=e,i.title="Open source URL: "+e}};const SINGLE_FILE_SIGNATURE = "SingleFile";function Wo(n){const e=n.evaluate("//comment()",n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);let t=e&&e.singleNodeValue;if(t&&t.nodeType==Node.COMMENT_NODE&&t.textContent.includes(No)){const n=t.textContent.split("\n"),[,,e,...a]=n,o=e.match(/^ url: (.*) ?$/),i=o&&o[1];if(i){let n,e;if(a.length&&(e=a[0].split("saved date: ")[1],e&&a.shift(),a.length>1)){let e=a[0].split("info: ")[1].trim();for(let n=1;n<a.length-1;n++)e+="\n"+a[n].trim();n=e.trim()}return{saveUrl:i,infobarContent:n,saveDate:e}}}}(function Vo(n){const e=Wo(n);e&&e.saveUrl&&Go(n,e)})(document)</script></div></template></single-file-infobar><script data-template-shadow-root>(()=>{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll("template[shadowrootmode]").forEach(element=>{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute("shadowrootmode"),delegatesFocus:element.getAttribute("shadowrootdelegatesfocus")!=null,clonable:element.getAttribute("shadowrootclonable")!=null,serializable:element.getAttribute("shadowrootserializable")!=null});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()</script> -->

</body></html>